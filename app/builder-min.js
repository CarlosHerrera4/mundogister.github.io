/*! Storymaps-Cascade - v1.0.0 - 2016-06-20, 06:35:38 PM - This application is released under the Apache License V2.0 by Esri http://www.esri.com/ - https://github.com/Esri/story-map-cascade */function resample_hermite(e,t,n,i,r){var o=Date.now();i=Math.round(i),r=Math.round(r);for(var a=e.getContext("2d").getImageData(0,0,t,n),s=e.getContext("2d").getImageData(0,0,i,r),l=a.data,u=s.data,c=t/i,d=n/r,p=Math.ceil(c/2),f=Math.ceil(d/2),h=0;r>h;h++)for(var m=0;i>m;m++){for(var v=4*(m+h*i),g=0,y=0,b=0,_=gx_g=gx_b=gx_a=0,w=(h+.5)*d,C=Math.floor(h*d);(h+1)*d>C;C++)for(var E=Math.abs(w-(C+.5))/f,x=(m+.5)*c,T=E*E,k=Math.floor(m*c);(m+1)*c>k;k++){var P=Math.abs(x-(k+.5))/p,S=Math.sqrt(T+P*P);S>=-1&&1>=S&&(g=2*S*S*S-3*S*S+1,g>0&&(P=4*(k+C*t),gx_a+=g*l[P+3],b+=g,l[P+3]<255&&(g=g*l[P+3]/250),_+=g*l[P],gx_g+=g*l[P+1],gx_b+=g*l[P+2],y+=g))}u[v]=_/y,u[v+1]=gx_g/y,u[v+2]=gx_b/y,u[v+3]=gx_a/b}console.log("hermite = "+Math.round(Date.now()-o)/1e3+" s"),e.getContext("2d").clearRect(0,0,Math.max(t,i),Math.max(n,r)),e.width=i,e.height=r,e.getContext("2d").putImageData(s,0,0)}define("lib-build/css",[],function(){if("undefined"==typeof window)return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,i=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?i=!1:t[4]&&(n=parseInt(t[4])<18);var r={};r.pluginBuilder="./css-builder";var o,a=function(){o=document.createElement("style"),e.appendChild(o)},s=function(e,t){a();var n=o.styleSheet||o.sheet;if(n&&n.addImport)n.addImport(e),o.onload=t;else{o.textContent='@import "'+e+'";';var i=setInterval(function(){try{o.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},l=function(t,n){var r=document.createElement("link");if(r.type="text/css",r.rel="stylesheet",i)r.onload=function(){r.onload=function(){},setTimeout(n,7)};else var o=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==r.href)return clearInterval(o),n()}},10);r.href=t,e.appendChild(r)};return r.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},r.load=function(e,t,i,r){(n?s:l)(t.toUrl(e+".css"),i)},r}),define("lib-build/css!lib/calcite-bootstrap/css/calcite-bootstrap-open.min",[],function(){}),define("lib-build/css!storymaps/common/ui/bootstrap-override",[],function(){}),define("lib-build/css!lib/font-awesome/css/font-awesome",[],function(){}),define("lib-build/css!storymaps/common/Core",[],function(){}),define("storymaps/common/utils/SocialSharing",["dojo/Deferred"],function(e){return{shareFacebook:function(e,t,n,i){var r="u="+this.cleanURL(i||document.location.href);window.open("https://www.facebook.com/sharer/sharer.php?"+r,"","toolbar=0,status=0,width=626,height=436")},shareTwitter:function(e,t){var n="text="+encodeURIComponent(e||"")+"&url="+this.cleanURL(t||document.location.href)+"&related=EsriStoryMaps&hashtags=storymap";window.open("https://twitter.com/intent/tweet?"+n,"","toolbar=0,status=0,width=626,height=436")},requestBitly:function(t){var n=["http://api.bitly.com/v3/shorten?callback=?","https://api-ssl.bitly.com/v3/shorten?callback=?"],i="http:"==location.protocol?n[0]:n[1],r=this.cleanURL(t||document.location.href,!0),o=new e;return $.getJSON(i,{format:"json",apiKey:app.cfg.HEADER_SOCIAL.bitly.key,login:app.cfg.HEADER_SOCIAL.bitly.login,longUrl:r},function(e){e&&e&&e.data.url?o.resolve(e.data.url):o.reject()}),o},cleanURL:function(e,t){return e=e.replace(/\?edit(=.*)*&/,"?"),e=e.replace(/\&edit(=.*)*/,""),e=e.replace(/\?edit/,""),e=e.replace(/\?locale(=[a-zA-Z\-]+)+&/,"?"),e=e.replace(/\&locale(=[a-zA-Z\-]+)+/,""),t?e:encodeURIComponent(e)}}}),define("storymaps/common/utils/CommonHelper",["esri/urlUtils","dojo/cookie","./SocialSharing"],function(e,t,n){return{switchToBuilder:function(){document.location.search.match(/appid/)?document.location=n.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname+document.location.search,!0)+"&edit"+document.location.hash:"?"==document.location.search.slice(-1)?document.location=n.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname,!0)+"?edit"+document.location.hash:document.location=n.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname,!0)+"?edit"+document.location.hash},getMyStoriesURL:function(){return app.isPortal?this.getPortalURL()+"/apps/MyStories/":"//storymaps.arcgis.com/en/my-stories/"},getUrlParams:function(){var t=e.urlToObject(document.location.search).query;return t?t:this.browserSupportHistory()||t?{}:e.urlToObject(document.location.hash).query||{}},browserSupportHistory:function(){return!(!window.history||!history.pushState)},isArcGISHosted:function(){return/(\/)([a-zA-Z0-9]+(\/))*(apps\/|home\/)([a-zA-Z0-9\-\_]+\/)/.test(document.location.pathname)},getAppID:function(e){var t=this.getUrlParams();return app.indexCfg&&app.indexCfg.appid?app.indexCfg.appid:this.isArcGISHosted()||!e?t.appid:app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]?t.appid:void 0},getWebmapID:function(e){var t=this.getUrlParams();return app.indexCfg&&app.indexCfg.webmap?app.indexCfg.webmap:this.isArcGISHosted()||!e?t.webmap:app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]?t.webmap:void 0},getPortalUser:function(){var e=t("esri_auth");if(e&&(e=JSON.parse(e.replace('"ssl":undefined','"ssl":""')),!e.urlKey||!e.customBaseUrl||(e.urlKey+"."+e.customBaseUrl).toLowerCase()==document.location.hostname.toLowerCase()))return e?e.email:null},getCookieToken:function(){var e=t("esri_auth");if(e&&(e=JSON.parse(e.replace('"ssl":undefined','"ssl":""')),!e.urlKey||!e.customBaseUrl||(e.urlKey+"."+e.customBaseUrl).toLowerCase()==document.location.hostname.toLowerCase()))return e?e.token:null},userIsAppOwner:function(){var e=app.portal?app.portal.getPortalUser():null,t=app.data.appItem?app.data.appItem.item:null;return e&&t&&e.username==t.owner||null!=this.getPortalUser()&&t&&this.getPortalUser()==t.owner||e&&e.privileges&&$.inArray("portal:admin:updateItems",e.privileges)>-1||t&&"update"==t.itemControl},checkUserItemPrivileges:function(){var e=app.portal?app.portal.getPortalUser():null;return e&&!e.orgId&&!e.privileges||e&&e.privileges&&$.inArray("portal:user:createItem",e.privileges)>-1},prependURLHTTP:function(e){return!e||""===e||e.match(/^mailto:/)?e:/^(https?:\/\/)|^(\/\/)/i.test(e)?e:"http://"+e}}}),function(){"use strict";function e(t,i){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,l=0,u=a.length;u>l;l++)s[a[l]]=r(s[a[l]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(u=e.changedTouches[0],c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=c.tagName.toLowerCase(),"label"===s){if(t=this.findControl(c)){if(this.focus(c),n)return!1;c=t}}else if(this.needsFocus(c))return e.timeStamp-a>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return i&&!r&&(l=c.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(c)||(e.preventDefault(),this.sendClick(c,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("lib/fastclick/lib/fastclick",[],function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),define("storymaps/common/Core",["lib-build/css!lib/calcite-bootstrap/css/calcite-bootstrap-open.min","lib-build/css!./ui/bootstrap-override","lib-build/css!../../lib/font-awesome/css/font-awesome","lib-build/css!./Core","esri/map","esri/arcgis/Portal","esri/arcgis/utils","./utils/CommonHelper","esri/urlUtils","dojo/has","esri/IdentityManager","esri/arcgis/OAuthInfo","esri/config","esri/tasks/GeometryService","esri/request","dojo/topic","dojo/on","dojo/_base/lang","dojo/_base/array","dojo/Deferred","dojo/DeferredList","dojo/query","lib/fastclick/lib/fastclick"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f,h,m,v,g,y,b,_,w,C){function E(e,t){if(console.log("common.core.Core - init",t),X=e,J=t,app.userCanEdit=!1,q(),s.isArcGISHosted()?app.indexCfg={}:K()||(app.indexCfg={proxyurl:app.indexCfg.proxyurl,sharingurl:app.indexCfg.sharingurl,username:app.indexCfg.username,password:app.indexCfg.password,oAuthAppId:app.indexCfg.oAuthAppId,story:app.indexCfg.story}),document.title=app.cfg.TPL_NAME,u("touch")&&$("body").addClass("hasTouch"),C.prototype._needsClick=C.prototype.needsClick,C.prototype.needsClick=function(e){return $(e).parents(".esriPopup").length?!0:C.prototype._needsClick.call(this,e)},C.attach(document.body),window!=window.top&&$("body").addClass("isEmbed"),g.mixin(app,{data:{},appCfg:{supportWebmapPreviewAGOL:!1,useWebmapInApp:!1,useStandardHeader:!1,useAppTitleAsPageTitle:!1},portal:null,builder:t,isLoading:!0,loadingTimeout:null}),app.isInBuilder&&(u("ie")||u("trident")||u("ff")))return $("#fatalError .error-title").html("Sorry!"),$("#fatalError .error-msg").html('Story Map Cascade is in beta and its builder is supported only in <a href="https://www.google.com/chrome/" target="_blank">Chrome</a> and <a href="https://www.apple.com/safari/" target="_blank">Safari</a>. Cascade stories that you create and share will work on those browsers and Internet Explorer 11+ and Firefox.'),void $("#fatalError").show();if(app.isInBuilder&&u("ipad"))return $("#fatalError .error-title").html("Sorry!"),$("#fatalError .error-msg").html("Story Map Cascade is in beta and its builder is not supported on iPad. Cascade stories that you create and share will work on iPad."),void $("#fatalError").show();if(u("ie")<11)return $("#fatalError .error-title").html("Sorry!"),$("#fatalError .error-msg").html('This story is not supported in Internet Explorer before version 11. <a href="http://browsehappy.com/" target="_blank">Please update your browser</a>'),void $("#fatalError").show();if(app.isInBuilder){var n="notConfiguredMobile";u("touch")&&(window.innerHeight>window.innerWidth?window.innerHeight>768&&(n="notConfiguredMobile2"):window.innerWidth>768&&(n="notConfiguredMobile2")),M(n,null,!0)}if(X.init(this)){if(W(),!app.indexCfg.sharingurl){var i=document.location.pathname.indexOf("/apps/");if(-1==i&&(i=document.location.pathname.indexOf("/home/")),-1!=i){var r=location.pathname.substr(0,i);app.indexCfg.sharingurl="//"+location.host+r+"/sharing/content/items",app.indexCfg.proxyurl="//"+location.host+r+"/sharing/proxy"}else app.indexCfg.sharingurl=app.cfg.DEFAULT_SHARING_URL}app.indexCfg.sharingurl.match(/^http/)?a.arcgisUrl=app.indexCfg.sharingurl:a.arcgisUrl=location.protocol+app.indexCfg.sharingurl,app.indexCfg.proxyurl||(app.indexCfg.proxyurl=app.cfg.DEFAULT_PROXY_URL),p.defaults.io.proxyUrl=location.protocol+app.indexCfg.proxyurl,c&&c.setProtocolErrorHandler(function(){return!0}),app.isInBuilder&&app.cfg.CORS_SERVER&&$.each(app.cfg.CORS_SERVER,function(e,t){p.defaults.io.corsEnabledServers.push(t)}),app.cfg.PROXY_RULES&&app.cfg.PROXY_RULES.length&&$.each(app.cfg.PROXY_RULES,function(e,t){t&&t.urlPrefix&&t.proxyUrl&&l.addProxyRule(t)}),p.defaults.io.timeout=app.isInBuilder?app.cfg.TIMEOUT_BUILDER_REQUEST:app.cfg.TIMEOUT_VIEWER_REQUEST,$.fn.modal.Constructor.prototype.enforceFocus=function(){},$("form").bind("keydown",function(e){return 13==e.keyCode?!1:void 0}),v(c,"dialog-create",B),m.subscribe("CORE_UPDATE_EXTENT",j),app.portal=new o.Portal(app.indexCfg.sharingurl.split("/sharing/")[0]),app.portal.on("load",function(e){if(app.isPortal=!!e.isPortal,G(),app.indexCfg.oAuthAppId){var n=new d({appId:app.indexCfg.oAuthAppId,popup:!1,portalUrl:"https:"+app.indexCfg.sharingurl.split("/sharing/")[0]});c.registerOAuthInfos([n]),c.checkSignInStatus(n.portalUrl).then(function(){t?P().then(x):P().then(x)},function(){c.getCredential(n.portalUrl)})}else x()})}}function x(){console.log("common.core.Core - initStep2");var e=s.getAppID(K()),t=s.getWebmapID(K()),n=!!(app.appCfg?app.appCfg.supportWebmapPreviewAGOL:!0),i=app.indexCfg.story||s.getUrlParams().story;return i?K()?void X.getConfig(i):void setTimeout(function(){X.getConfig(i)},1e3):e?void T(e):t&&!n?void(s.isArcGISHosted()?I():S(t)):app.isInBuilder&&J.isDirectCreation&&K()&&!s.getPortalUser()&&!app.portal.getPortalUser()?void H():app.isInBuilder&&J.isDirectCreation?void P().then(function(){N(),A()}):void(s.isArcGISHosted()?I():M(!Z.appid||app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners[0]?app.isProduction?"invalidConfigNoApp":"invalidConfigNoAppDev":"unspecifiedConfigOwner"))}function T(e){console.log("common.core.Core - loadWebMappingApp - appId:",e);var t=void 0!==Z.forceLogin;t||app.isInBuilder?P().then(function(){k(e)},function(){M("notAuthorized")}):k(e)}function k(e){a.getItem(e).then(function(e){if(!e)return void M("appLoadingFail");var t=e.item,n=e.itemData;if(app.data.appItem={item:t,data:n},app.userCanEdit=s.userIsAppOwner(),app.isInBuilder||app.userCanEdit||(document.__defineGetter__?(document.__defineGetter__("cookie",function(){return""}),document.__defineSetter__("cookie",function(){})):Object.defineProperty(document,"cookie",{get:function(){return""},set:function(){return!0}})),app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]){var i=t.owner,r=!1;if(i&&(r=-1!=$.inArray(i,app.indexCfg.authorizedOwners)),r||"*"!=app.indexCfg.authorizedOwners[0]||(r=!0),r||$.each(app.indexCfg.authorizedOwners,function(e,n){var i=n.match(/^\[(.*)\]$/);i&&t.orgId==i[1]&&(r=!0)}),!r)return void M("invalidConfigOwner")}if(t&&t.appProxies){var o=y.map(t.appProxies,function(e){return{url:e.sourceUrl,mixin:{url:e.proxyUrl}}});app.data.appProxies=o}if(app.isInBuilder&&K()&&!app.userCanEdit)return void M("notAuthorized");var a=X.isStoryBlank();a?app.isInBuilder?A():s.getAppID(K())?app.userCanEdit?s.switchToBuilder():M("notConfiguredDesktop"):M("noLayer"):A()},function(e){M(e&&400==e.httpCode?"invalidApp":e&&403==e.httpCode?"notAuthorized":"appLoadingFail")})}function P(){var e=new b;return v(c,"dialog-create",F),app.portal.signIn().then(function(){return app.isInBuilder&&!s.checkUserItemPrivileges()?void M("notAuthorizedBuilder"):(app.userCanEdit=s.userIsAppOwner(),G(),void e.resolve())},function(){e.reject()}),e}function S(e){X.loadFirstWebmap(e).then(g.hitch(this,function(e){O(e)}),g.hitch(this,function(){M("createMap")}))}function O(){console.log("common.core.Core - webMapInitCallback"),console.error("FATAL ERROR")}function I(){window.location=app.isPortal&&app.cfg.HELP_URL_PORTAL?app.cfg.HELP_URL_PORTAL:app.cfg.HELP_URL}function N(){var e=app.data.title;app.appCfg.useAppTitleAsPageTitle&&(document.title=e?$("<div>"+e+"</div>").text():app.cfg.TPL_NAME)}function A(){console.log("common.core.Core - initApp"),X.isStoryBlank()&&app.isInBuilder?(app.builder.appInitComplete(),X.appInitComplete()):app.isInBuilder?(X.appInitComplete(),app.builder.appInitComplete()):X.appInitComplete(),!app.isInBuilder&&!app.userCanEdit||9==u("ie")||Z.preview||(u("ff")&&$(".builderShare #my-stories-frame").remove(),u("ff")||!app.isInBuilder),document.location.pathname.match(/\/apps\/[a-zA-Z]+\/$/)&&document.location.search.match(/^\?appid=/)&&(!u("ie")||u("ie")>=10)&&window.history.replaceState({},"","index.html"+document.location.search+document.location.hash)}function M(e,t,n){var i=i18n.viewer.errors[e];z(),$("#loadingIndicator").hide(),i=i.replace(/{TPL_NAME}/g,app.cfg.TPL_NAME),"notAuthorized"==e&&app.indexCfg.oAuthAppId&&(i+='<div><button class="btn btn-sm btn-default" onclick="esri.id.destroyCredentials(); window.location.reload();">'+i18n.viewer.errors.signOut+"</button></div>"),"appLoadingFail"==e?$("#loadingMessage").html('<div id="loadingRetry"> <button type="button" class="btn btn-naked btn-sm" onclick="document.location.reload()">'+i18n.viewer.loading.failButton+" </button></div>").hide().fadeIn(1200,function(){$("#loadingMessage").addClass("loaded")}):$("#loadingMessage").hide(),$("#fatalError .error-msg").html(i),n||$("#fatalError").show()}function D(e){$("#fatalError .error-msg").html(i18n.viewer.errors[e])}function j(e){if(!(e&&e.spatialReference&&app.map&&app.map.extent.spatialReference&&app.map.spatialReference)){var t=new b;return t.resolve(),t}if(app.map.spatialReference.wkid==e.spatialReference.wkid)return app.map.setExtent(e);var n=new b;return p.defaults.geometryService.project([e],app.map.spatialReference,function(e){e&&e[0]&&(app.map.setExtent(e[0]),n.resolve())}),n}function L(e,t){e&&(102100!=app.map.spatialReference.wkid&&4326!=app.map.spatialReference.wkid?p.defaults.geometryService.project([t],app.map.spatialReference,function(e){e&&e[0]&&(app.map.extent.contains(e[0])||app.map.centerAt(e[0]))}):app.map.extent.contains(t)||app.map.centerAt(t))}function R(){return!app.isInBuilder&&(!K()&&!!s.getAppID(K())||K()&&app.userCanEdit)&&!Z.preview}function B(){$(".esriSignInDialog td label").siblings("br").css("display","none"),$(".esriSignInDialog .dijitDialogPaneContentArea div:nth(1)").css("display","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("padding","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("margin-bottom","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitValidationContainer").css("display","none"),$(".esriSignInDialog .esriErrorMsg").css("margin-top","10px"),$(".esriSignInDialog").find(".dijitDialogTitleBar").find(".dijitDialogTitle").first().html(i18n.viewer.signin.title),c._arcgisUrl&&($(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().css("display","none"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().after("<div id='dijitDialogPaneContentAreaLoginText'>"+i18n.viewer.signin.explainViewer.replace("%PORTAL_LINK%","<a href='http://"+c._arcgisUrl+"' title='"+c._arcgisUrl+"' target='_blank'>"+c._arcgisUrl+"</a>")+"</div>"))}function F(){c._arcgisUrl&&$(".esriSignInDialog").find("#dijitDialogPaneContentAreaLoginText").html(i18n.viewer.signin.explainBuilder.replace("%PORTAL_LINK%","<a href='http://"+c._arcgisUrl+"' title='"+c._arcgisUrl+"' target='_blank'>"+c._arcgisUrl+"</a>"))}function U(){$("#header").css("display","inherit"),$(".mobileView").css("display","inherit"),$("#fatalError").css("display","none"),$("#loadingOverlay").css("top","0px"),W()}function H(){window.location=a.arcgisUrl.split("/sharing/")[0]+"/home/signin.html?returnUrl="+encodeURIComponent(document.location.href)}function W(){app.loadingTimeout=setTimeout(V,app.cfg.TIMEOUT_VIEWER_LOAD)}function z(){"undefined"!=typeof app&&app.loadingTimeout&&(clearTimeout(app.loadingTimeout),app.loadingTimeout=null)}function V(){return c&&c.dialog&&c.dialog._alreadyInitialized&&!c.loadingTimeoutAlreadyFired?(clearTimeout(app.loadingTimeout),W(),void(c._busy||(c.loadingTimeoutAlreadyFired=!0))):void 0}function q(){w("#fatalError .error-title")[0].innerHTML=i18n.viewer.errors.boxTitle}function K(){return Y.environment!=["TPL","ENV","DEV"].join("_")}function G(){if(console.log("common.core.Core - parsePortalConfig"),app.portal){!app.cfg.HELPER_SERVICES.geocode.length&&app.portal.helperServices&&app.portal.helperServices.geocode&&app.portal.helperServices.geocode.length&&app.portal.helperServices.geocode[0].url&&$.each(app.portal.helperServices.geocode,function(e,t){app.cfg.HELPER_SERVICES.geocode.push(t)});var e;if(app.cfg.HELPER_SERVICES.geometry&&app.cfg.HELPER_SERVICES.geometry.url?e=app.cfg.HELPER_SERVICES.geometry.url:app.portal.helperServices.geometry&&app.portal.helperServices.geometry.url&&(e=app.portal.helperServices.geometry.url),p.defaults.geometryService=new f(e),!app.cfg.BING_MAPS_KEY&&app.portal.bingKey&&(app.cfg.BING_MAPS_KEY=app.portal.bingKey),app.portal.isPortal&&app.cfg&&app.cfg.AUTHORIZED_IMPORT_SOURCE&&(app.cfg.AUTHORIZED_IMPORT_SOURCE.featureService=!1),app.isPortal=!!app.portal.isPortal,app.isPortal&&app.portal.helpBase&&app.portal.portalHostname&&!app.cfg.HELP_URL_PORTAL.match("^//")){var t=app.portal.portalHostname.split("/")[0];app.cfg.HELP_URL_PORTAL="//"+t+app.portal.helpBase+app.cfg.HELP_URL_PORTAL}}}var Y={environment:"TPL_ENV_PRODUCTION"},X=null,J=null,Z=s.getUrlParams();return{init:E,isProd:K,appInitComplete:A,loadWebMap:S,hasSwitchBuilderButton:R,zoomToDeviceLocation:L,cleanLoadingTimeout:z,initError:M,prepareAppForWebmapReload:U,replaceInitErrorMessage:D,portalLogin:P}}),define("lib-build/less",["require"],function(e){var t={};if(t.pluginBuilder="./less-builder","undefined"==typeof window)return t.load=function(e,t,n){n()},t;t.normalize=function(e,t){return".less"==e.substr(e.length-5,5)&&(e=e.substr(0,e.length-5)),e=t(e)};var n=document.getElementsByTagName("head")[0],i=document.getElementsByTagName("base");i=i&&i[0]&&i[0]&&i[0].href;var r=(i||window.location.href.split("#")[0].split("?")[0]).split("/");r[r.length-1]="",r=r.join("/");var o,a=0;return t.inject=function(e){31>a&&(o=document.createElement("style"),o.type="text/css",n.appendChild(o),a++),o.styleSheet?o.styleSheet.cssText+=e:o.appendChild(document.createTextNode(e))},t.load=function(n,i,o,a){var s={},l=a?a.less||a:s;"env"in l||(l.env="development");var u=window.less;u?u.Parser||(l===s&&(l=u),u=null):window.less=l,e(u?["./normalize"]:["./normalize","./lessc"],function(e,a){a||(a=u),"fileExt"in l||(l.fileExt=".less");var s=n;".css"!==s.substring(s.length-4)&&l.fileExt&&(s+=l.fileExt),s=e.absoluteURI(i.toUrl(s),r),a.render("@import ("+(l.importOption||"multiple")+') "'+s+'";',l,function(e,n){return e?o.error(e):(n.css=n.css.replace(/..\/..\/(..\/)*resources/g,"resources"),t.inject(n.css),void setTimeout(o,7))},l)})},t}),define("lib-build/less!storymaps-react/tpl/view/media/Text",[],function(){}),define("storymaps-react/tpl/view/media/Text",["module","exports","lib-build/less!./Text"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this.type="text",this._text=t}return i(e,[{key:"check",value:function(e){return this._text&&e?"block"!=e.placement?(console.log("Could not render text block in section"),!1):!0:(console.log("Could not render text block in section"),!1)}},{key:"render",value:function(e){return this.check(e)?this._text.value:null}},{key:"postCreate",value:function(){}},{key:"update",value:function(){}},{key:"load",value:function(){}},{key:"performAction",value:function(){}},{key:"getArcGISContent",value:function(){return[]}},{key:"getPreviewText",value:function(){return $(this._text.value).html()}}]),e}();t["default"]=r,e.exports=t["default"]}),define("storymaps/tpl/utils/UI",[],function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return{isMobileBrowser:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent)},hasWebGL:function(e){if(window.WebGLRenderingContext){for(var t=document.createElement("canvas"),n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],i=!1,r=0;4>r;r++)try{if(i=t.getContext(n[r]),i&&"function"==typeof i.getParameter)return e?{name:n[r],gl:i}:!0}catch(o){}return!1}return!1},addCSSRule:function(e,t,n){var i="head";if(n&&(i=n.contents().find("head")),t){var r=$(i).find("#"+t).eq(0);if(r.length)return void r.html(e)}$("<style>").prop("type","text/css").attr("id",t).html(e).appendTo(i)},getUID:function(){return Date.now()+"-"+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}),define("storymaps-react/tpl/view/media/Media",["module","exports","storymaps/tpl/utils/UI","storymaps/common/utils/CommonHelper","dojo/topic"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a(this,e),this.type=t.type,this.id=t.id,this.previewThumb=t.previewThumb,this.previewIcon=t.previewIcon,this._cache={},this._isLoaded=!1,this._alternateMedia=null,this._node=null,this._domID=s["default"].getUID(),
this._isUploadPending=!1,this._builderConfigurationTabs=[],this._onConfigAction=null}return c(e,[{key:"postCreate",value:function(e){this._builderConfigurationTabs=e.builderConfigurationTabs||[],this._onConfigAction=e.onConfigAction,this._onConfigChangeCallback=e.onConfigChange}},{key:"setCache",value:function(e){this._cache=e}},{key:"setAlternate",value:function(e){this._alternateMedia=e}},{key:"getAlternate",value:function(){return this._alternateMedia}},{key:"getPreviewThumbnail",value:function(){return e.addToken(this.previewThumb)}},{key:"getPreviewIcon",value:function(){return this.previewIcon}},{key:"_applyConfig",value:function(e){if("block"==this._placement){e.size=e.size||"medium";var t=$.map(this._node.attr("class").split(" "),function(e){return e.match(/block-size-/)?e:null}).join(" ");this._node.removeClass(t).addClass("block-size-"+e.size)}}},{key:"_onEnableButtonClick",value:function(e){var t=$(e.currentTarget);t.toggleClass("enabled"),this._node.toggleClass("interaction-enabled")}},{key:"getArcGISContent",value:function(){var t=[];if("webmap"==this.type||"webscene"==this.type)t=[{type:this.type,id:this.id}];else if("image"==this.type){var n=e.getArcGISItemResourceURL(this._url);n&&(t=[{type:"item-resource",mediaType:this.type,url:n.url,file:n.file}])}else if("image-gallery"==this.type){var i=!0,r=!1,o=void 0;try{for(var a,s=this._images.images[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=e.getArcGISItemResourceURL(l.url);u&&t.push({type:"item-resource",mediaType:this.type,url:u.url,file:u.file})}}catch(c){r=!0,o=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}}return t}},{key:"resize",value:function(){}},{key:"postLoad",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"getAuthorizedTransitionsWith",value:function(){return[]}},{key:"isConfigActive",value:function(){return this._node.find(".media-cfg-panel").hasClass("active")}},{key:"closeConfigPanel",value:function(){this._node.find(".media-cfg-invite, .media-cfg-panel").removeClass("active")}},{key:"destroy",value:function(){this._node.remove()}},{key:"remove",value:function(){this._node.remove()}},{key:"isPlaceholder",value:function(){return!1}},{key:"_onAction",value:function(e,t){("remove"==e||"swap"==e||"image-to-image-gallery"==e||"image-gallery-to-image"==e)&&this._onConfigAction({action:e,media:this,newMedia:t}),this._onConfigChange()}},{key:"_onConfigChange",value:function(){u["default"].publish("builder-media-update"),this._onConfigChangeCallback&&this._onConfigChangeCallback()}}],[{key:"getArcGISItemResourceURL",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=decodeURIComponent(e),n=t.match(new RegExp("/sharing/rest/content/items/"+app.data.appItem.item.id+"/resources/(.*)$"));return n&&2==n.length?{url:t,file:n[1]}:null}},{key:"addToken",value:function(e){var t=app.data.appItem&&"public"!=app.data.appItem.item.access&&app.data.appItem.item.id&&e;if(!t)return e;var n="";return n=app.portal&&app.portal.getPortalUser()?app.portal.getPortalUser().credential.token:l["default"].getCookieToken(),e.match(new RegExp("/sharing/rest/content/items/"+app.data.appItem.item.id+"/resources/"))?e+"?token="+n:e}}]),e}();t["default"]=d,e.exports=t["default"]}),define("text",{}),define("handlebars/safe-string",["exports"],function(e){function t(e){this.string=e}t.prototype.toString=function(){return""+this.string},e["default"]=t}),define("handlebars/utils",["./safe-string","exports"],function(e,t){function n(e){return l[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function r(e){return e instanceof s?e.toString():null==e?"":e?(e=""+e,c.test(e)?e.replace(u,n):e):e+""}function o(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}function a(e,t){return(e?e+".":"")+t}var s=e["default"],l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;t.extend=i;var d=Object.prototype.toString;t.toString=d;var p=function(e){return"function"==typeof e};p(/x/)&&(p=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var p;t.isFunction=p;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};t.isArray=f,t.escapeExpression=r,t.isEmpty=o,t.appendContextPath=a}),define("handlebars/exception",["exports"],function(e){function t(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),o=0;o<n.length;o++)this[n[o]]=r[n[o]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var n=["description","fileName","lineNumber","message","name","number","stack"];t.prototype=new Error,e["default"]=t}),define("handlebars/base",["./utils","./exception","exports"],function(e,t,n){function i(e,t){this.helpers=e||{},this.partials=t||{},r(this)}function r(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,r=n.fn;if(t===!0)return r(this);if(t===!1||null==t)return i(this);if(c(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=v(n.data);a.contextPath=o.appendContextPath(n.data.contextPath,n.name),n={data:a}}return r(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new a("Must pass iterator to #each");var n,i,r=t.fn,s=t.inverse,l=0,u="";if(t.data&&t.ids&&(i=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),d(e)&&(e=e.call(this)),t.data&&(n=v(t.data)),e&&"object"==typeof e)if(c(e))for(var p=e.length;p>l;l++)n&&(n.index=l,n.first=0===l,n.last=l===e.length-1,i&&(n.contextPath=i+l)),u+=r(e[l],{data:n});else for(var f in e)e.hasOwnProperty(f)&&(n&&(n.key=f,n.index=l,n.first=0===l,i&&(n.contextPath=i+f)),u+=r(e[f],{data:n}),l++);return 0===l&&(u=s(this)),u}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){d(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=v(t.data);i.contextPath=o.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var o=e,a=t["default"],s="2.0.0";n.VERSION=s;var l=6;n.COMPILER_REVISION=l;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=u;var c=o.isArray,d=o.isFunction,p=o.toString,f="[object Object]";n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:h,log:m,registerHelper:function(e,t){if(p.call(e)===f){if(t)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){p.call(e)===f?o.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var h={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(h.level<=e){var n=h.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=h;var m=h.log;n.log=m;var v=function(e){var t=o.extend({},e);return t._parent=e,t};n.createFrame=v}),define("handlebars/runtime",["./utils","./exception","./base","exports"],function(e,t,n,i){function r(e){var t=e&&e[0]||1,n=p;if(t!==n){if(n>t){var i=f[n],r=f[t];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){if(!t)throw new d("No environment passed to template");if(!e||!e.main)throw new d("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,r,o,a,s,l,u,p){a&&(o=c.extend({},o,a));var f=t.VM.invokePartial.call(this,n,r,o,s,l,u,p);if(null==f&&t.compile){var h={helpers:s,partials:l,data:u,depths:p};l[r]=t.compile(n,{data:void 0!==u,compat:e.compat},t),f=l[r](o,h)}if(null!=f){if(i){for(var m=f.split("\n"),v=0,g=m.length;g>v&&(m[v]||v+1!==g);v++)m[v]=i+m[v];f=m.join("\n")}return f}throw new d("The partial "+r+" could not be compiled when running in runtime-only mode")},i={lookup:function(e,t){for(var n=e.length,i=0;n>i;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var i=this.programs[e],r=this.fn(e);return t||n?i=a(this,e,r,t,n):i||(i=this.programs[e]=a(this,e,r)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=c.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},r=function(t,n){n=n||{};var o=n.data;r._setup(n),!n.partial&&e.useData&&(o=u(t,o));var a;return e.useDepths&&(a=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,o,a)};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},r._child=function(t,n,r){if(e.useDepths&&!r)throw new d("must pass parent depths");return a(i,t,e[t],n,r)},r}function a(e,t,n,i,r){var o=function(t,o){return o=o||{},n.call(e,t,e.helpers,e.partials,o.data||i,r&&[t].concat(r))};return o.program=t,o.depth=r?r.length:0,o}function s(e,t,n,i,r,o,a){var s={partial:!0,helpers:i,partials:r,data:o,depths:a};if(void 0===e)throw new d("The partial "+t+" could not be found");return e instanceof Function?e(n,s):void 0}function l(){return""}function u(e,t){return t&&"root"in t||(t=t?h(t):{},t.root=e),t}var c=e,d=t["default"],p=n.COMPILER_REVISION,f=n.REVISION_CHANGES,h=n.createFrame;i.checkRevision=r,i.template=o,i.program=a,i.invokePartial=s,i.noop=l}),define("handlebars.runtime",["./handlebars/base","./handlebars/safe-string","./handlebars/exception","./handlebars/utils","./handlebars/runtime","exports"],function(e,t,n,i,r,o){var a=e,s=t["default"],l=n["default"],u=i,c=r,d=function(){var e=new a.HandlebarsEnvironment;return u.extend(e,a),e.SafeString=s,e.Exception=l,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},p=d();return p.create=d,p["default"]=p,o=p["default"]}),define("lib-build/hbars",["text","Handlebars"],function(e,t){"use strict";var n={},i="define('{pluginName}!{moduleName}', ['Handlebars'], function (Handlebars) { return Handlebars.template({content}); });\n";return{version:"0.0.2",load:function(i,r,o,a){if(a=a||{},n[i])o(n[i]);else{var s=a.hbars&&a.hbars.extension||".hbs",l=a.hbars&&a.hbars.path||"",u=a.hbars&&a.hbars.compileOptions||{},c=function(e){a.isBuild?(n[i]=t.precompile(e,u),o()):(n[i]=t.compile(e),o(n[i]))};c.error=o.error,e.load(l+i+s,r,c,a)}},write:function(e,t,r,o){var a=n[t];a&&r.asModule(e+"!"+t,i.replace("{pluginName}",e).replace("{moduleName}",t).replace("{content}",a))}}}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" contenteditable="false">\r\n  <div class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <div class="image-container" style="padding-top: '+l((o=null!=(o=t.padding||(null!=e?e.padding:e))?o:s,typeof o===a?o.call(e,{name:"padding",hash:{},data:i}):o))+'%"></div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n    <div class="builder-ui img-gallery-invite">\r\n      <div class="img-gallery-invite-background"></div>\r\n      <i class="img-gallery-add fa fa-plus" aria-hidden="true" data-toggle="tooltip"></i>\r\n    </div>\r\n  </div>\r\n  <div class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</div>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,typeof r===o?r.call(e,{name:"classes",hash:{},data:i}):r))+'"></div>\r\n<!--<div class="caption">'+s((r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,typeof r===o?r.call(e,{name:"caption",hash:{},data:i}):r))+'</div>-->\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n'},useData:!0})}),define("resources/tpl/builder/nls/app",{root:{builder:{dialog:{apply:"Apply",close:"Close"},headerConfig:{toggles:{bookmarks:"Bookmarks",logoSharing:"Logo & Sharing"},bookmarks:{title:"Section",bookmark:"Bookmark",intro:"Bookmarks are links to story sections that are shown in the header. Creating concise bookmarks for the main sections of your story helps readers get oriented."},logoSharing:{logo:"Logo",logoButton:"Use Esri Logo",logoLink:"Logo link",logoUploadProgress:"Logo upload in progress",logoUploadSuccess:"Logo uploaded successfully",logoUploadError:"Logo uploaded failed, switching back to default logo",customHeaderText:"Tagline",taglineLinkDisabledTooltip:"Enter a tagline to enable the link",link:"Tagline link",enableSocialSharing:"Display sharing button"}},mediaConfig:{homeView:"Initial view"},imageGallery:{reachedLimit:"Only four images are allowed in a row. To start a new row, add another image below.",addImage:"Add another image to this row"},credits:{warning:"Both fields must be filled out",content:"Content...",source:"Source...",linkPrompt:"Optional link..."},media:{captionPlaceholder:"Your caption here..."}}},ar:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hr:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("lib-build/less!storymaps-react/tpl/view/media/Image",[],function(){}),define("storymaps-react/tpl/view/media/Image",["module","exports","./Media","lib-build/hbars!./ImageBlock","lib-build/hbars!./ImageBackground","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","storymaps/tpl/utils/UI","dojo/Deferred","lib-build/less!./Image"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function k(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:k(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_="resources/tpl/builder/icons/media-placeholder/image.jpg",w="resources/tpl/builder/icons/immersive-panel/image.png",C=.4,E=.8,x=200,T=function(e){function t(e){u(this,t);var n=e.url;e.dataUrl&&e.uploadDeferred&&(n=v["default"].getUID());var i=c(this,Object.getPrototypeOf(t).call(this,{type:"image",id:n,previewThumb:e.dataUrl||e.url||_,previewIcon:w}));return i._image=e,i._url=e.url,i._placement=null,i._image.options||(i._image.options={}),e.dataUrl&&e.uploadDeferred&&(i._isUploadPending=!0,i._url=e.dataUrl,delete i._image.dataUrl,e.uploadDeferred.then(i._onUploadSuccess.bind(i),i._onUploadFail.bind(i))),i}return d(t,e),y(t,[{key:"render",value:function(e){var t="",n=[];if(!this._image||!e)return console.log("Could not render image in section"),t;if(this._placement=e.placement,"block"==this._placement){var i=this._computeBlockStyle();n.push("block-size-"+i.size),i.fitHeight&&n.push("fit-height"),t+=(0,f["default"])({id:this._domID,classes:["block","image"].concat(n).join(" "),padding:i.padding,caption:this._image.caption,placeholder:m["default"].builder.media.captionPlaceholder,captionEditable:app.isInBuilder})}else"background"==e.placement&&(v["default"].isMobileBrowser()&&this._image.alternate&&(this._image.url=this._image.alternate,this._url=this._image.url),t+=(0,h["default"])({id:this._domID,classes:["image","image-background"].join(" "),caption:this._image.caption}));return t}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find("#"+this._domID).parent(),this._isUploadPending&&this._onUploadStart(),this._applyConfig())}},{key:"_applyConfig",value:function(){var e=this._image.options;e.size=e.size||"small",b(Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e)}},{key:"load",value:function(){var e=new g["default"];if(this._isLoaded||!this._node)return e.reject(),e;this._isLoaded=!0;var t=new window.Image;return t.onload=function(e){var t=e.currentTarget.naturalWidth,n=e.currentTarget.naturalHeight;t&&n&&(this._image.width=t,this._image.height=n,this._node.find(".image-container").css("padding-top",this._computeBlockStyle().padding+"%")),this._node.find(".media-loading").hide()}.bind(this),t.src=p["default"].addToken(this._url),"block"==this._placement?this._node.find(".image-container").css("backgroundImage",'url("'+p["default"].addToken(this._url)+'")'):(this._node.find(".image-background").css("backgroundImage",'url("'+p["default"].addToken(this._url)+'")'),this._image["mobile-pos"]&&v["default"].isMobileBrowser()&&this._node.find(".image-background").css("backgroundPositionX",this._image["mobile-pos"])),e.resolve(),e}},{key:"performAction",value:function(){this._isLoaded||this.load()}},{key:"resize",value:function(){}},{key:"isLoaded",value:function(){return!0}},{key:"getNode",value:function(){return this._node}},{key:"update",value:function(){}},{key:"isPlaceholder",value:function(){return!!this._image.isPlaceholder}},{key:"_computeBlockStyle",value:function(){var e="small",t=!0;this._image.options&&(this._image.options.size&&(e=this._image.options.size),void 0!==this._image.options.fitHeight&&(t=this._image.options.fitHeight));var n=this._image.height,i=this._image.width,r=null;if("small"==e||"medium"==e){var o=this._image.width/n;i="small"==e?app.display.windowWidth*C:app.display.windowWidth*E,n=Math.round(i/o),n=Math.min(n,app.display.windowHeight-x)}return r=this._image.width<i&&(!t||this._image.height<app.display.windowHeight-x)?this._image.height/this._image.width*(this._image.width/i)*100:n/Math.min(this._image.width,i)*100,r=Math.round(10*r)/10,{size:e,fitHeight:t,padding:r}}}]),t}(p["default"]);t["default"]=T,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageGallery",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u="";return r=t["if"].call(e,null!=e?e.dataUrl:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=r&&(u+=r),u+='      <div class="image-gallery-item-wrapper" style="height: '+l((o=null!=(o=t.adjustedHeight||(null!=e?e.adjustedHeight:e))?o:s,typeof o===a?o.call(e,{name:"adjustedHeight",hash:{},data:i}):o))+'px;">\r\n        <div class="media-loading">\r\n          <span class="large-loader"></span>\r\n        </div>\r\n\r\n',r=t["if"].call(e,null!=e?e.dataUrl:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=r&&(u+=r),u+'\r\n          <img class="image-gallery-img-hidden" />\r\n        </a>\r\n        <!--<div class="image-gallery-img"></div>-->\r\n        <div class="builder-ui ig-item hidden">\r\n          <i class="ig-action-icon ig-settings fa fa-pencil"></i>\r\n          <i class="ig-action-icon ig-remove fa fa-trash"></i>\r\n        </div>\r\n        <div class="builder-ui ig-add" data-toggle="tooltip">\r\n          <span class="ig-action-icon ig-add-icon glyphicon glyphicon-plus"></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n'},2:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression,l=this.lambda;return'      <div class="image-gallery-item" data-src="'+s((r=null!=(r=t.dataUrl||(null!=e?e.dataUrl:e))?r:a,typeof r===o?r.call(e,{name:"dataUrl",hash:{},data:i}):r))+'" data-index="'+s(l(i&&i.index,e))+'">\r\n'},4:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression,l=this.lambda;return'      <div class="image-gallery-item" data-src="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,typeof r===o?r.call(e,{name:"url",hash:{},data:i}):r))+'" data-index="'+s(l(i&&i.index,e))+'">\r\n'},6:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'          <a href="'+s((r=null!=(r=t.dataUrl||(null!=e?e.dataUrl:e))?r:a,typeof r===o?r.call(e,{name:"dataUrl",hash:{},data:i}):r))+'" class="image-gallery-image-link" data-disable-preview="true" contenteditable="false">\r\n'},8:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'          <a href="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,typeof r===o?r.call(e,{name:"url",hash:{},data:i}):r))+'" class="image-gallery-image-link" data-disable-preview="true" contenteditable="false">\r\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="image-gallery-wrapper" contenteditable="false">\r\n';return r=t.each.call(e,null!=e?e.images:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='</div>\r\n<div class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">',o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+"</div>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/ImageGallery",[],function(){}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"===n||oe.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return Q.call(t,e)>-1!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function a(){Y.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),oe.ready()}function s(){this.expando=oe.expando+s.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Se,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Pe.test(n)?oe.parseJSON(n):n}catch(r){}ke.set(e,t,n)}else n=void 0;return n}function u(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return oe.css(e,t,"")},l=s(),u=n&&n[3]||(oe.cssNumber[t]?"":"px"),c=(oe.cssNumber[t]||"px"!==u&&+l)&&Ie.exec(oe.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do o=o||".5",c/=o,oe.style(e,t,c+u);while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function d(e,t){for(var n=0,i=e.length;i>n;n++)Te.set(e[n],"globalEval",!t||Te.get(t[n],"globalEval"))}function p(e,t,n,i,r){for(var o,a,s,l,u,p,f=t.createDocumentFragment(),h=[],m=0,v=e.length;v>m;m++)if(o=e[m],o||0===o)if("object"===oe.type(o))oe.merge(h,o.nodeType?[o]:o);else if(Re.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(De.exec(o)||["",""])[1].toLowerCase(),l=Le[s]||Le._default,a.innerHTML=l[1]+oe.htmlPrefilter(o)+l[2],p=l[0];p--;)a=a.lastChild;oe.merge(h,a.childNodes),a=f.firstChild,a.textContent=""}else h.push(t.createTextNode(o));for(f.textContent="",m=0;o=h[m++];)if(i&&oe.inArray(o,i)>-1)r&&r.push(o);else if(u=oe.contains(o.ownerDocument,o),a=c(f.appendChild(o),"script"),u&&d(a),n)for(p=0;o=a[p++];)je.test(o.type||"")&&n.push(o);return f}function f(){return!0}function h(){return!1}function m(){try{return Y.activeElement}catch(e){}}function v(e,t,n,i,r,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)v(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=h;else if(!r)return e;return 1===o&&(a=r,r=function(e){return oe().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,r,i,n)})}function g(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=ze.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){var n,i,r,o,a,s,l,u;if(1===t.nodeType){if(Te.hasData(e)&&(o=Te.access(e),a=Te.set(t,o),u=o.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)oe.event.add(t,r,u[r][n])}ke.hasData(e)&&(s=ke.access(e),l=oe.extend({},s),ke.set(t,l))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Me.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function C(e,t,n,i){t=J.apply([],t);var r,o,a,s,l,u,d=0,f=e.length,h=f-1,m=t[0],v=oe.isFunction(m);if(v||f>1&&"string"==typeof m&&!ie.checkClone&&We.test(m))return e.each(function(r){var o=e.eq(r);v&&(t[0]=m.call(this,r,o.html())),C(o,t,n,i)});if(f&&(r=p(t,e[0].ownerDocument,!1,e,i),o=r.firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=oe.map(c(r,"script"),y),s=a.length;f>d;d++)l=r,d!==h&&(l=oe.clone(l,!0,!0),s&&oe.merge(a,c(l,"script"))),n.call(e[d],l,d);if(s)for(u=a[a.length-1].ownerDocument,oe.map(a,b),d=0;s>d;d++)l=a[d],je.test(l.type||"")&&!Te.access(l,"globalEval")&&oe.contains(u,l)&&(l.src?oe._evalUrl&&oe._evalUrl(l.src):oe.globalEval(l.textContent.replace(Ve,"")))}return e}function E(e,t,n){for(var i,r=t?oe.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||oe.cleanData(c(i)),i.parentNode&&(n&&oe.contains(i.ownerDocument,i)&&d(c(i,"script")),i.parentNode.removeChild(i));return e}function x(e,t){var n=oe(t.createElement(e)).appendTo(t.body),i=oe.css(n[0],"display");return n.detach(),i}function T(e){var t=Y,n=Ke[e];return n||(n=x(e,t),"none"!==n&&n||(qe=(qe||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qe[0].contentDocument,t.write(),t.close(),n=x(e,t),qe.detach()),Ke[e]=n),n}function k(e,t,n){var i,r,o,a,s=e.style;return n=n||Xe(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||oe.contains(e.ownerDocument,e)||(a=oe.style(e,t)),n&&!ie.pixelMarginRight()&&Ye.test(a)&&Ge.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o),void 0!==a?a+"":a}function P(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function O(e,t,n){var i=Ie.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function I(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=oe.css(e,n+Ne[o],!0,r)),i?("content"===n&&(a-=oe.css(e,"padding"+Ne[o],!0,r)),"margin"!==n&&(a-=oe.css(e,"border"+Ne[o]+"Width",!0,r))):(a+=oe.css(e,"padding"+Ne[o],!0,r),"padding"!==n&&(a+=oe.css(e,"border"+Ne[o]+"Width",!0,r)));return a}function N(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Xe(e),a="border-box"===oe.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=k(e,t,o),(0>r||null==r)&&(r=e.style[t]),Ye.test(r))return r;i=a&&(ie.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+I(e,t,n||(a?"border":"content"),i,o)+"px"}function A(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=Te.get(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Ae(i)&&(o[a]=Te.access(i,"olddisplay",T(i.nodeName)))):(r=Ae(i),"none"===n&&r||Te.set(i,"olddisplay",r?n:oe.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function M(e,t,n,i,r){return new M.prototype.init(e,t,n,i,r)}function D(){return e.setTimeout(function(){rt=void 0}),rt=oe.now()}function j(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=Ne[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function L(e,t,n){for(var i,r=(F.tweeners[t]||[]).concat(F.tweeners["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function R(e,t,n){var i,r,o,a,s,l,u,c,d=this,p={},f=e.style,h=e.nodeType&&Ae(e),m=Te.get(e,"fxshow");n.queue||(s=oe._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,oe.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],
u=oe.css(e,"display"),c="none"===u?Te.get(e,"olddisplay")||T(e.nodeName):u,"inline"===c&&"none"===oe.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],at.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;h=!0}p[i]=m&&m[i]||oe.style(e,i)}else u=void 0;if(oe.isEmptyObject(p))"inline"===("none"===u?T(e.nodeName):u)&&(f.display=u);else{m?"hidden"in m&&(h=m.hidden):m=Te.access(e,"fxshow",{}),o&&(m.hidden=!h),h?oe(e).show():d.done(function(){oe(e).hide()}),d.done(function(){var t;Te.remove(e,"fxshow");for(t in p)oe.style(e,t,p[t])});for(i in p)a=L(h?m[i]:0,i,d),i in m||(m[i]=a.start,h&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function B(e,t){var n,i,r,o,a;for(n in e)if(i=oe.camelCase(n),r=t[i],o=e[n],oe.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=oe.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function F(e,t,n){var i,r,o=0,a=F.prefilters.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=rt||D(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||D(),duration:n.duration,tweens:[],createTween:function(t,n){var i=oe.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(B(c,u.opts.specialEasing);a>o;o++)if(i=F.prefilters[o].call(u,e,c,u.opts))return oe.isFunction(i.stop)&&(oe._queueHooks(u.elem,u.opts.queue).stop=oe.proxy(i.stop,i)),i;return oe.map(c,L,u),oe.isFunction(u.opts.start)&&u.opts.start.call(e,u),oe.fx.timer(oe.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function U(e){return e.getAttribute&&e.getAttribute("class")||""}function $(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(we)||[];if(oe.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function H(e,t,n,i){function r(s){var l;return o[s]=!0,oe.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var o={},a=e===kt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function W(e,t){var n,i,r=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&oe.extend(!0,e,i),e}function z(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function V(e,t,n,i){var r,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function q(e,t,n,i){var r;if(oe.isArray(t))oe.each(t,function(t,r){n||It.test(e)?i(e,r):q(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==oe.type(t))i(e,t);else for(r in t)q(e+"["+r+"]",t[r],n,i)}function K(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var G=[],Y=e.document,X=G.slice,J=G.concat,Z=G.push,Q=G.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},re="2.2.4",oe=function(e,t){return new oe.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:re,constructor:oe,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:G.sort,splice:G.splice},oe.extend=oe.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(u&&i&&(oe.isPlainObject(i)||(r=oe.isArray(i)))?(r?(r=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},a[t]=oe.extend(u,o,i)):void 0!==i&&(a[t]=i));return a},oe.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=oe.trim(e),e&&(1===e.indexOf("use strict")?(t=Y.createElement("script"),t.text=e,Y.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(le,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,r=0;if(n(e))for(i=e.length;i>r&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?oe.merge(i,"string"==typeof e?[e]:e):Z.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;a>o;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,i){var r,o,a=0,s=[];if(n(e))for(r=e.length;r>a;a++)o=t(e[a],a,i),null!=o&&s.push(o);else for(a in e)o=t(e[a],a,i),null!=o&&s.push(o);return J.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e)?(i=X.call(arguments,2),r=function(){return e.apply(t||this,i.concat(X.call(arguments)))},r.guid=e.guid=e.guid||oe.guid++,r):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=G[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,i){var r,o,a,s,l,u,d,f,h=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!i&&((t?t.ownerDocument||t:U)!==A&&N(t),t=t||A,D)){if(11!==m&&(u=ge.exec(e)))if(r=u[1]){if(9===m){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(h&&(a=h.getElementById(r))&&B(t,a)&&a.id===r)return n.push(a),n}else{if(u[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((r=u[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(r)),n}if(w.qsa&&!V[e+" "]&&(!j||!j.test(e))){if(1!==m)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,"\\$&"):t.setAttribute("id",s=F),d=T(e),o=d.length,l=pe.test(s)?"#"+s:"[id='"+s+"']";o--;)d[o]=l+" "+p(d[o]);f=d.join(","),h=ye.test(e)&&c(t.parentNode)||t}if(f)try{return Z.apply(n,h.querySelectorAll(f)),n}catch(v){}finally{s===F&&t.removeAttribute("id")}}}return P(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[F]=!0,e}function r(e){var t=A.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=H++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,l,u,c=[$,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(u=t[F]||(t[F]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(s=l[i])&&s[0]===$&&s[1]===o)return c[2]=s[2];if(l[i]=c,c[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function v(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function g(e,t,n,r,o,a){return r&&!r[F]&&(r=g(r)),o&&!o[F]&&(o=g(o,a)),i(function(i,a,s,l){var u,c,d,p=[],f=[],h=a.length,g=i||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?g:v(g,p,e,s,l),b=n?o||(i?e:h||r)?[]:a:y;if(n&&n(y,b,s,l),r)for(u=v(b,f),r(u,[],s,l),c=u.length;c--;)(d=u[c])&&(b[f[c]]=!(y[f[c]]=d));if(i){if(o||e){if(o){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);o(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=o?ee(i,d):p[c])>-1&&(i[u]=!(a[u]=d))}}else b=v(b===a?b.splice(h,b.length):b),o?o(null,a,b,l):Z.apply(a,b)})}function y(e){for(var t,n,i,r=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=f(function(e){return e===t},a,!0),u=f(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,i){var r=!o&&(i||n!==S)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];r>s;s++)if(n=C.relative[e[s].type])c=[f(h(c),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[F]){for(i=++s;r>i&&!C.relative[e[i].type];i++);return g(s>1&&h(c),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,i>s&&y(e.slice(s,i)),r>i&&y(e=e.slice(i)),r>i&&p(e))}c.push(n)}return h(c)}function b(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,l,u){var c,d,p,f=0,h="0",m=i&&[],g=[],y=S,b=i||o&&C.find.TAG("*",u),_=$+=null==y?1:Math.random()||.1,w=b.length;for(u&&(S=a===A||a||u);h!==w&&null!=(c=b[h]);h++){if(o&&c){for(d=0,a||c.ownerDocument===A||(N(c),s=!D);p=e[d++];)if(p(c,a||A,s)){l.push(c);break}u&&($=_)}r&&((c=!p&&c)&&f--,i&&m.push(c))}if(f+=h,r&&h!==f){for(d=0;p=n[d++];)p(m,g,a,s);if(i){if(f>0)for(;h--;)m[h]||g[h]||(g[h]=X.call(l));g=v(g)}Z.apply(l,g),u&&!i&&g.length>0&&f+n.length>1&&t.uniqueSort(l)}return u&&($=_,S=y),m};return r?i(a):a}var _,w,C,E,x,T,k,P,S,O,I,N,A,M,D,j,L,R,B,F="sizzle"+1*new Date,U=e.document,$=0,H=0,W=n(),z=n(),V=n(),q=function(e,t){return e===t&&(I=!0),0},K=1<<31,G={}.hasOwnProperty,Y=[],X=Y.pop,J=Y.push,Z=Y.push,Q=Y.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),pe=new RegExp("^"+ie+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ce=function(){N()};try{Z.apply(Y=Q.call(U.childNodes),U.childNodes),Y[U.childNodes.length].nodeType}catch(Ee){Z={apply:Y.length?function(e,t){J.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},x=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},N=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:U;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,M=A.documentElement,D=!x(A),(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(A.getElementsByClassName),w.getById=r(function(e){return M.appendChild(e).id=F,!A.getElementsByName||!A.getElementsByName(F).length}),w.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n=t.getElementById(e);return n?[n]:[]}},C.filter.ID=function(e){var t=e.replace(_e,we);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(_e,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},C.find.CLASS=w.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&D?t.getElementsByClassName(e):void 0},L=[],j=[],(w.qsa=ve.test(A.querySelectorAll))&&(r(function(e){M.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+F+"-]").length||j.push("~="),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||j.push(".#.+[+~]")}),r(function(e){var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(w.matchesSelector=ve.test(R=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&r(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),L.push("!=",oe)}),j=j.length&&new RegExp(j.join("|")),L=L.length&&new RegExp(L.join("|")),t=ve.test(M.compareDocumentPosition),B=t||ve.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===A||e.ownerDocument===U&&B(U,e)?-1:t===A||t.ownerDocument===U&&B(U,t)?1:O?ee(O,e)-ee(O,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!r||!o)return e===A?-1:t===A?1:r?-1:o?1:O?ee(O,e)-ee(O,t):0;if(r===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?a(s[i],l[i]):s[i]===U?-1:l[i]===U?1:0},A):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&N(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&D&&!V[n+" "]&&(!L||!L.test(n))&&(!j||!j.test(n)))try{var i=R.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&N(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&N(e);var n=C.attrHandle[t.toLowerCase()],i=n&&G.call(C.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==i?i:w.attributes||!D?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(I=!w.detectDuplicates,O=!w.sortStable&&e.slice(0),e.sort(q),I){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return O=null,e},E=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=E(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,we),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,p,f,h,m=o!==a?"nextSibling":"previousSibling",v=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(v){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&y){for(p=v,d=p[F]||(p[F]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===$&&u[1],b=f&&u[2],p=f&&v.childNodes[f];p=++f&&p&&p[m]||(b=f=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){c[e]=[$,f,b];break}}else if(y&&(p=t,d=p[F]||(p[F]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===$&&u[1],b=f),b===!1)for(;(p=++f&&p&&p[m]||(b=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++b||(y&&(d=p[F]||(p[F]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),c[e]=[$,b]),p!==t)););return b-=r,b===i||b%i===0&&b/i>=0}}},PSEUDO:function(e,n){var r,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(n):o.length>1?(r=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=ee(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(se,"$1"));return r[F]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(_e,we),function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,we).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})C.pseudos[_]=l(_);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,T=t.tokenize=function(e,n){var i,r,o,a,s,l,u,c=z[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=C.preFilter;s;){i&&!(r=le.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ue.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(se," ")}),s=s.slice(i.length));for(a in C.filter)!(r=fe[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):z(e,l).slice(0)},k=t.compile=function(e,t){var n,i=[],r=[],o=V[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)o=y(t[n]),o[F]?i.push(o):r.push(o);o=V(e,b(r,i)),o.selector=e}return o},P=t.select=function(e,t,n,i){var r,o,a,s,l,u="function"==typeof e&&e,d=!i&&T(e=u.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&D&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(_e,we),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(a=o[r],!C.relative[s=a.type]);)if((l=C.find[s])&&(i=l(a.matches[0].replace(_e,we),ye.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&p(o),!e)return Z.apply(n,i),n;break}}return(u||k(e,d))(i,t,!D,n,!t||ye.test(e)&&c(t.parentNode)||t),n},w.sortStable=F.split("").sort(q).join("")===F,w.detectDuplicates=!!I,N(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var de=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&oe(e).is(n))break;i.push(e)}return i},pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},fe=oe.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?oe.find.matchesSelector(i,e)?[i]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;n>t;t++)if(oe.contains(r[t],this))return!0}));for(t=0;n>t;t++)oe.find(e,r[t],i);return i=this.pushStack(n>1?oe.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&fe.test(e)?oe(e):e||[],!1).length}});var ve,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ye=oe.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||ve,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ge.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Y,!0)),he.test(i[1])&&oe.isPlainObject(t))for(i in t)oe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return r=Y.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Y,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};ye.prototype=oe.fn,ve=oe(Y);var be=/^(?:parents|prev(?:Until|All))/,_e={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=fe.test(e)||"string"!=typeof e?oe(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Q.call(oe(e),this[0]):Q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,n){return de(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,n){return de(e,"nextSibling",n)},prevUntil:function(e,t,n){return de(e,"previousSibling",n)},siblings:function(e){return pe((e.parentNode||{}).firstChild,e)},children:function(e){return pe(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,i){var r=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=oe.filter(i,r)),this.length>1&&(_e[e]||oe.uniqueSort(r),be.test(e)&&r.reverse()),this.pushStack(r)}});var we=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,n,i,r,a=[],s=[],l=-1,u=function(){for(r=e.once,i=t=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)a[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,r&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(l=a.length-1,s.push(n)),function i(t){oe.each(t,function(t,n){oe.isFunction(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==oe.type(n)&&i(n)})}(arguments),n&&!t&&u()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,a,n))>-1;)a.splice(n,1),l>=n&&l--}),this},has:function(e){return e?oe.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||(a=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,o){var a=oe.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);
e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,i):i}},r={};return i.pipe=i.then,oe.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=X.call(arguments),a=o.length,s=1!==a||e&&oe.isFunction(e.promise)?a:0,l=1===s?e:oe.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?X.call(arguments):r,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().progress(u(r,n,t)).done(u(r,i,o)).fail(l.reject):--s;return s||l.resolveWith(i,o),l.promise()}});var Ce;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(e===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,e!==!0&&--oe.readyWait>0||(Ce.resolveWith(Y,[oe]),oe.fn.triggerHandler&&(oe(Y).triggerHandler("ready"),oe(Y).off("ready"))))}}),oe.ready.promise=function(t){return Ce||(Ce=oe.Deferred(),"complete"===Y.readyState||"loading"!==Y.readyState&&!Y.documentElement.doScroll?e.setTimeout(oe.ready):(Y.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),Ce.promise(t)},oe.ready.promise();var Ee=function(e,t,n,i,r,o,a){var s=0,l=e.length,u=null==n;if("object"===oe.type(n)){r=!0;for(s in n)Ee(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,oe.isFunction(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(oe(e),n)})),t))for(;l>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:u?t.call(e):l?t(e[0],n):o},xe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!xe(e))return{};var t=e[this.expando];return t||(t={},xe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,oe.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{oe.isArray(t)?i=t.concat(t.map(oe.camelCase)):(r=oe.camelCase(t),t in o?i=[t,r]:(i=r,i=i in o?[i]:i.match(we)||[])),n=i.length;for(;n--;)delete o[i[n]]}(void 0===t||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var Te=new s,ke=new s,Pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/[A-Z]/g;oe.extend({hasData:function(e){return ke.hasData(e)||Te.hasData(e)},data:function(e,t,n){return ke.access(e,t,n)},removeData:function(e,t){ke.remove(e,t)},_data:function(e,t,n){return Te.access(e,t,n)},_removeData:function(e,t){Te.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=ke.get(o),1===o.nodeType&&!Te.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(o,i,r[i])));Te.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ke.set(this,e)}):Ee(this,function(t){var n,i;if(o&&void 0===t){if(n=ke.get(o,e)||ke.get(o,e.replace(Se,"-$&").toLowerCase()),void 0!==n)return n;if(i=oe.camelCase(e),n=ke.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else i=oe.camelCase(e),this.each(function(){var n=ke.get(this,i);ke.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&ke.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ke.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=Te.get(e,t),n&&(!i||oe.isArray(n)?i=Te.access(e,t,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),i=n.length,r=n.shift(),o=oe._queueHooks(e,t),a=function(){oe.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Te.get(e,n)||Te.access(e,n,{empty:oe.Callbacks("once memory").add(function(){Te.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=oe.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=Te.get(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ie=new RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),Ne=["Top","Right","Bottom","Left"],Ae=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Me=/^(?:checkbox|radio)$/i,De=/<([\w:-]+)/,je=/^$|\/(?:java|ecma)script/i,Le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Le.optgroup=Le.option,Le.tbody=Le.tfoot=Le.colgroup=Le.caption=Le.thead,Le.th=Le.td;var Re=/<|&#?\w+;/;!function(){var e=Y.createDocumentFragment(),t=e.appendChild(Y.createElement("div")),n=Y.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Be=/^key/,Fe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ue=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,u,c,d,p,f,h,m,v=Te.get(e);if(v)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=oe.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return"undefined"!=typeof oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],u=t.length;u--;)s=Ue.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f&&(d=oe.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=oe.event.special[f]||{},c=oe.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&oe.expr.match.needsContext.test(r),namespace:h.join(".")},o),(p=l[f])||(p=l[f]=[],p.delegateCount=0,d.setup&&d.setup.call(e,i,h,a)!==!1||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),oe.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,u,c,d,p,f,h,m,v=Te.hasData(e)&&Te.get(e);if(v&&(l=v.events)){for(t=(t||"").match(we)||[""],u=t.length;u--;)if(s=Ue.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(d=oe.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,p=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!r&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(e,c));a&&!p.length&&(d.teardown&&d.teardown.call(e,h,v.handle)!==!1||oe.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)oe.event.remove(e,f+t[u],n,i,!0);oe.isEmptyObject(l)&&Te.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,i,r,o,a=[],s=X.call(arguments),l=(Te.get(this,"events")||{})[e.type]||[],u=oe.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=oe.event.handlers.call(this,e,l),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,i=((oe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],n=0;s>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?oe(r,this).index(l)>-1:oe.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Y,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Fe.test(r)?this.mouseHooks:Be.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new oe.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=Y),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:h):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||oe.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,i){return v(this,e,t,n,i)},one:function(e,t,n,i){return v(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,oe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=h),this.each(function(){oe.event.remove(this,e,n,t)})}});var $e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,He=/<script|<style|<link/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace($e,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),l=oe.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(a=c(s),o=c(e),i=0,r=o.length;r>i;i++)w(o[i],a[i]);if(t)if(n)for(o=o||c(e),a=a||c(s),i=0,r=o.length;r>i;i++)_(o[i],a[i]);else _(e,s);return a=c(s,"script"),a.length>0&&d(a,!l&&c(e,"script")),s},cleanData:function(e){for(var t,n,i,r=oe.event.special,o=0;void 0!==(n=e[o]);o++)if(xe(n)){if(t=n[Te.expando]){if(t.events)for(i in t.events)r[i]?oe.event.remove(n,i):oe.removeEvent(n,i,t.handle);n[Te.expando]=void 0}n[ke.expando]&&(n[ke.expando]=void 0)}}}),oe.fn.extend({domManip:C,detach:function(e){return E(this,e,!0)},remove:function(e){return E(this,e)},text:function(e){return Ee(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.appendChild(e)}})},prepend:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Ee(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!Le[(De.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return C(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,i=[],r=oe(e),o=r.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),oe(r[a])[t](n),Z.apply(i,n.get());return this.pushStack(i)}});var qe,Ke={HTML:"block",BODY:"block"},Ge=/^margin/,Ye=new RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),Xe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Je=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r},Ze=Y.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ze.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",r="4px"===t.marginRight,Ze.removeChild(a)}var n,i,r,o,a=Y.createElement("div"),s=Y.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),oe.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),r},reliableMarginLeft:function(){return null==i&&t(),o},reliableMarginRight:function(){var t,n=s.appendChild(Y.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Ze.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),Ze.removeChild(a),s.removeChild(n),t}}))}();var Qe=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=Y.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=k(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=oe.camelCase(t),l=e.style;return t=oe.cssProps[s]||(oe.cssProps[s]=S(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:l[t]:(o=typeof n,"string"===o&&(r=Ie.exec(n))&&r[1]&&(n=u(e,t,r),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(oe.cssNumber[s]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var r,o,a,s=oe.camelCase(t);return t=oe.cssProps[s]||(oe.cssProps[s]=S(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],a&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=k(e,t,i)),"normal"===r&&t in tt&&(r=tt[t]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,i){return n?Qe.test(oe.css(e,"display"))&&0===e.offsetWidth?Je(e,et,function(){return N(e,t,i)}):N(e,t,i):void 0},set:function(e,n,i){var r,o=i&&Xe(e),a=i&&I(e,t,i,"border-box"===oe.css(e,"boxSizing",!1,o),o);return a&&(r=Ie.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),O(e,n,a)}}}),oe.cssHooks.marginLeft=P(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(k(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),oe.cssHooks.marginRight=P(ie.reliableMarginRight,function(e,t){return t?Je(e,{display:"inline-block"},k,[e,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Ne[i]+t]=o[i]||o[i-2]||o[0];return r}},Ge.test(e)||(oe.cssHooks[e+t].set=O)}),oe.fn.extend({css:function(e,t){return Ee(this,function(e,t,n){var i,r,o={},a=0;if(oe.isArray(t)){for(i=Xe(e),r=t.length;r>a;a++)o[t[a]]=oe.css(e,t[a],!1,i);return o}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ae(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=M,M.prototype={constructor:M,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,n=M.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=M.prototype.init,oe.fx.step={};var rt,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;oe.Animation=oe.extend(F,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,Ie.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,i=0,r=e.length;r>i;i++)n=e[i],F.tweeners[n]=F.tweeners[n]||[],F.tweeners[n].unshift(t)},prefilters:[R],prefilter:function(e,t){t?F.prefilters.unshift(e):F.prefilters.push(e)}}),oe.speed=function(e,t,n){var i=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=oe.isEmptyObject(e),o=oe.speed(t,n,i),a=function(){var t=F(this,oe.extend({},e),o);(r||Te.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=oe.timers,a=Te.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&st.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Te.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=oe.timers,a=i?i.length:0;for(n.finish=!0,oe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(j(t,!0),e,i,r)}}),oe.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(rt=oe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),rt=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){ot||(ot=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(ot),ot=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=Y.createElement("input"),t=Y.createElement("select"),n=t.appendChild(Y.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=Y.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var lt,ut=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Ee(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var i,r,o=e.nodeType;return 3!==o&&8!==o&&2!==o?"undefined"==typeof e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),r=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=oe.find.attr(e,t),null==i?void 0:i)):void 0},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(we);if(o&&1===e.nodeType)for(;n=o[r++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),lt={set:function(e,t,n){return t===!1?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||oe.find.attr;ut[t]=function(e,t,i){var r,o;return i||(o=ut[t],ut[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,ut[t]=o),r}});var ct=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Ee(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var i,r,o=e.nodeType;return 3!==o&&8!==o&&2!==o?(1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,r=oe.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ie.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var pt=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,U(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(r=U(n),i=1===n.nodeType&&(" "+r+" ").replace(pt," ")){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=oe.trim(i),r!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(r=U(n),i=1===n.nodeType&&(" "+r+" ").replace(pt," ")){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=oe.trim(i),r!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(n){oe(this).toggleClass(e.call(this,n,U(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=oe(this),o=e.match(we)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=U(this),t&&Te.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Te.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+U(n)+" ").replace(pt," ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g,ht=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=oe.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,oe(this).val()):e,null==r?r="":"number"==typeof r?r+="":oe.isArray(r)&&(r=oe.map(r,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=oe.valHooks[r.type]||oe.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ft,""):null==n?"":n)):void 0}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,l=0>r?s:o?r:0;s>l;l++)if(n=i[l],(n.selected||l===r)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=oe.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=oe.inArray(oe.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){return oe.isArray(t)?e.checked=oe.inArray(oe(e).val(),t)>-1:void 0}},ie.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,i,r){var o,a,s,l,u,c,d,p=[i||Y],f=ne.call(t,"type")?t.type:t,h=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||Y,3!==i.nodeType&&8!==i.nodeType&&!mt.test(f+oe.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[oe.expando]?t:new oe.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:oe.makeArray(n,[t]),d=oe.event.special[f]||{},r||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!r&&!d.noBubble&&!oe.isWindow(i)){for(l=d.delegateType||f,mt.test(l+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(i.ownerDocument||Y)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||f,c=(Te.get(a,"events")||{})[t.type]&&Te.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&xe(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),n)!==!1||!xe(i)||u&&oe.isFunction(i[f])&&!oe.isWindow(i)&&(s=i[u],s&&(i[u]=null),oe.event.triggered=f,i[f](),oe.event.triggered=void 0,s&&(i[u]=s)),t.result}},simulate:function(e,t,n){var i=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(i,null,t)}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?oe.event.trigger(e,t,n,!0):void 0}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){
oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Te.access(i,t);r||i.addEventListener(e,n,!0),Te.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Te.access(i,t)-1;r?Te.access(i,t,r):(i.removeEventListener(e,n,!0),Te.remove(i,t))}}});var vt=e.location,gt=oe.now(),yt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var bt=/#.*$/,_t=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ct=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Et=/^(?:GET|HEAD)$/,xt=/^\/\//,Tt={},kt={},Pt="*/".concat("*"),St=Y.createElement("a");St.href=vt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:Ct.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Pt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,oe.ajaxSettings),t):W(oe.ajaxSettings,e)},ajaxPrefilter:$(Tt),ajaxTransport:$(kt),ajax:function(t,n){function i(t,n,i,s){var u,d,y,b,w,E=n;2!==_&&(_=2,l&&e.clearTimeout(l),r=void 0,a=s||"",C.readyState=t>0?4:0,u=t>=200&&300>t||304===t,i&&(b=z(p,C,i)),b=V(p,b,C,u),u?(p.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=C.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===p.type?E="nocontent":304===t?E="notmodified":(E=b.state,d=b.data,y=b.error,u=!y)):(y=E,!t&&E||(E="error",0>t&&(t=0))),C.status=t,C.statusText=(n||E)+"",u?m.resolveWith(f,[d,E,C]):m.rejectWith(f,[C,E,y]),C.statusCode(g),g=void 0,c&&h.trigger(u?"ajaxSuccess":"ajaxError",[C,p,u?d:y]),v.fireWith(f,[C,E]),c&&(h.trigger("ajaxComplete",[C,p]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,a,s,l,u,c,d,p=oe.ajaxSetup({},n),f=p.context||p,h=p.context&&(f.nodeType||f.jquery)?oe(f):oe.event,m=oe.Deferred(),v=oe.Callbacks("once memory"),g=p.statusCode||{},y={},b={},_=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!s)for(s={};t=wt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)g[t]=[g[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),i(0,t),this}};if(m.promise(C).complete=v.add,C.success=C.done,C.error=C.fail,p.url=((t||p.url||vt.href)+"").replace(bt,"").replace(xt,vt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=oe.trim(p.dataType||"*").toLowerCase().match(we)||[""],null==p.crossDomain){u=Y.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=St.protocol+"//"+St.host!=u.protocol+"//"+u.host}catch(E){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=oe.param(p.data,p.traditional)),H(Tt,p,n,C),2===_)return C;c=oe.event&&p.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Et.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(yt.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=_t.test(o)?o.replace(_t,"$1_="+gt++):o+(yt.test(o)?"&":"?")+"_="+gt++)),p.ifModified&&(oe.lastModified[o]&&C.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&C.setRequestHeader("If-None-Match",oe.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Pt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)C.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===_))return C.abort();w="abort";for(d in{success:1,error:1,complete:1})C[d](p[d]);if(r=H(kt,p,n,C)){if(C.readyState=1,c&&h.trigger("ajaxSend",[C,p]),2===_)return C;p.async&&p.timeout>0&&(l=e.setTimeout(function(){C.abort("timeout")},p.timeout));try{_=1,r.send(y,i)}catch(E){if(!(2>_))throw E;i(-1,E)}}else i(-1,"No Transport");return C},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,i,r){return oe.isFunction(n)&&(r=r||i,i=n,n=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:r,data:n,success:i},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Ot=/%20/g,It=/\[\]$/,Nt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,i=[],r=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){r(this.name,this.value)});else for(n in e)q(n,e[n],t,r);return i.join("&").replace(Ot,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Mt.test(this.nodeName)&&!At.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(Nt,"\r\n")}}):{name:t.name,value:n.replace(Nt,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Dt={0:200,1223:204},jt=oe.ajaxSettings.xhr();ie.cors=!!jt&&"withCredentials"in jt,ie.ajax=jt=!!jt,oe.ajaxTransport(function(t){var n,i;return ie.cors||jt&&!t.crossDomain?{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Dt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}:void 0}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),Y.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Lt=[],Rt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||oe.expando+"_"+gt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=t.jsonp!==!1&&(Rt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Rt,"$1"+r):t.jsonp!==!1&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||oe.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){void 0===o?oe(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Lt.push(r)),a&&oe.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Y;var i=he.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=p([e],t,r),r&&r.length&&oe(r).remove(),oe.merge([],i.childNodes))};var Bt=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&Bt)return Bt.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=oe.trim(e.slice(s)),e=e.slice(0,s)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&oe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?oe("<div>").append(oe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,u,c=oe.css(e,"position"),d=oe(e),p={};"static"===c&&(e.style.position="relative"),s=d.offset(),o=oe.css(e,"top"),l=oe.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(i=d.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+r),"using"in t?t.using.call(e,p):d.css(p)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,oe.contains(t,i)?(r=i.getBoundingClientRect(),n=K(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(i=e.offset()),i.top+=oe.css(e[0],"borderTopWidth",!0),i.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-oe.css(n,"marginTop",!0),left:t.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Ze})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(i){return Ee(this,function(e,i,r){var o=K(e);return void 0===r?o?o[t]:e[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r)},e,i,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=P(ie.pixelPosition,function(e,n){return n?(n=k(e,t),Ye.test(n)?oe(e).position()[t]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){oe.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return Ee(this,function(t,n,i){var r;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?oe.css(t,n,a):oe.style(t,n,i,a)},t,o?i:void 0,o,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var Ft=e.jQuery,Ut=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Ut),t&&e.jQuery===oe&&(e.jQuery=Ft),oe},t||(e.jQuery=e.$=oe),oe}),define("lib/jquery/dist/jquery.min",function(){}),!function(e,t,n,i){"use strict";function r(t,n){this.element=t;var i={};e.each(e(this.element).data(),function(e,t){var n=function(e){return e&&e[0].toLowerCase()+e.slice(1)},r=n(e.replace("fluidbox",""));(""!==r||null!==r)&&(t="false"==t?!1:!0,i[r]=t)}),this.settings=e.extend({},s,n,i),this.settings.viewportFill=Math.max(Math.min(parseFloat(this.settings.viewportFill),1),0),this.settings.stackIndex<this.settings.stackIndexDelta&&(settings.stackIndexDelta=settings.stackIndex),this._name=a,this.init()}var o=e(t),a=(e(n),"fluidbox"),s={immediateOpen:!1,loader:!1,maxWidth:0,maxHeight:0,resizeThrottle:500,stackIndex:1e3,stackIndexDelta:10,viewportFill:.95},l={},u=0;("undefined"==typeof console||"undefined"===console.warn)&&(console={},console.warn=function(){}),e.isFunction(e.throttle)||console.warn("Fluidbox: The jQuery debounce/throttle plugin is not found/loaded. Even though Fluidbox works without it, the window resize event will fire extremely rapidly in browsers, resulting in significant degradation in performance upon viewport resize.");var c=function(){var e,t=n.createElement("fakeelement"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(t.style[e]!==i)return r[e]},d=c(),p={dom:function(){var t=e("<div />",{"class":"fluidbox__wrap",css:{zIndex:this.settings.stackIndex-this.settings.stackIndexDelta}});if(e(this.element).addClass("fluidbox--closed").wrapInner(t).find("img").first().css({opacity:1}).addClass("fluidbox__thumb").after('<div class="fluidbox__ghost" />'),this.settings.loader){var n=e("<div />",{"class":"fluidbox__loader",css:{zIndex:2}});e(this.element).find(".fluidbox__wrap").append(n)}},prepareFb:function(){var t=this,n=e(this.element);n.trigger("thumbloaddone.fluidbox"),p.measure.fbElements.call(this),t.bindEvents(),n.addClass("fluidbox--ready"),t.bindListeners(),n.trigger("ready.fluidbox")},measure:{viewport:function(){l.viewport={w:o.width(),h:o.height()}},fbElements:function(){var t=this,n=e(this.element),i=n.find("img").first(),r=n.find(".fluidbox__ghost"),o=n.find(".fluidbox__wrap");t.instanceData.thumb={natW:i[0].naturalWidth,natH:i[0].naturalHeight,w:i.width(),h:i.height()},r.css({width:i.width(),height:i.height(),top:i.offset().top-o.offset().top+parseInt(i.css("borderTopWidth"))+parseInt(i.css("paddingTop")),left:i.offset().left-o.offset().left+parseInt(i.css("borderLeftWidth"))+parseInt(i.css("paddingLeft"))})}},checkURL:function(e){var t=0;return/[\s+]/g.test(e)?(console.warn("Fluidbox: Fluidbox opening is halted because it has detected characters in your URL string that need to be properly encoded/escaped. Whitespace(s) have to be escaped manually. See RFC3986 documentation."),t=1):/[\"\'\(\)]/g.test(e)&&(console.warn("Fluidbox: Fluidbox opening will proceed, but it has detected characters in your URL string that need to be properly encoded/escaped. These will be escaped for you. See RFC3986 documentation."),t=0),t},formatURL:function(e){return e.replace(/"/g,"%22").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}};e.extend(r.prototype,{init:function(){var t=this,n=e(this.element),i=n.find("img").first();if(p.measure.viewport(),(!t.instanceData||!t.instanceData.initialized)&&n.is("a")&&1===n.children().length&&(n.children().is("img")||n.children().is("picture")&&1===n.find("img").length)&&"none"!==n.css("display")&&"none"!==n.children().css("display")&&"none"!==n.parents().css("display")){n.removeClass("fluidbox--destroyed"),t.instanceData={},t.instanceData.initialized=!0,t.instanceData.originalNode=n.html(),u+=1,t.instanceData.id=u,n.addClass("fluidbox__instance-"+u),n.addClass("fluidbox--initialized"),p.dom.call(t),n.trigger("init.fluidbox");var r=new Image;i.width()>0&&i.height()>0?p.prepareFb.call(t):(r.onload=function(){p.prepareFb.call(t)},r.onerror=function(){n.trigger("thumbloadfail.fluidbox")},r.src=i.attr("src"))}},open:function(){var t=this,n=e(this.element),i=n.find("img").first(),r=n.find(".fluidbox__ghost"),o=n.find(".fluidbox__wrap");t.instanceData.state=1,r.off(d),e(".fluidbox--opened").fluidbox("close");var a=e("<div />",{"class":"fluidbox__overlay",css:{zIndex:-1}});if(o.append(a),n.removeClass("fluidbox--closed").addClass("fluidbox--loading"),p.checkURL(i.attr("src")))return t.close(),!1;r.css({"background-image":"url("+p.formatURL(i.attr("src"))+")",opacity:1}),p.measure.fbElements.call(t);var s;t.settings.immediateOpen?(n.addClass("fluidbox--opened fluidbox--loaded").find(".fluidbox__wrap").css({zIndex:t.settings.stackIndex+t.settings.stackIndexDelta}),n.trigger("openstart.fluidbox"),t.compute(),i.css({opacity:0}),e(".fluidbox__overlay").css({opacity:1}),r.one(d,function(){n.trigger("openend.fluidbox")}),s=new Image,s.onload=function(){if(1===t.instanceData.state){if(t.instanceData.thumb.natW=s.naturalWidth,t.instanceData.thumb.natH=s.naturalHeight,n.removeClass("fluidbox--loading"),p.checkURL(s.src))return t.close(),!1;r.css({"background-image":"url("+p.formatURL(s.src)+")"}),t.compute()}},s.onerror=function(){t.close(),n.trigger("imageloadfail.fluidbox"),n.trigger("delayedloadfail.fluidbox")},s.src=n.attr("href")):(s=new Image,s.onload=function(){return n.removeClass("fluidbox--loading").addClass("fluidbox--opened fluidbox--loaded").find(".fluidbox__wrap").css({zIndex:t.settings.stackIndex+t.settings.stackIndexDelta}),n.trigger("openstart.fluidbox"),p.checkURL(s.src)?(t.close(),!1):(r.css({"background-image":"url("+p.formatURL(s.src)+")"}),t.instanceData.thumb.natW=s.naturalWidth,t.instanceData.thumb.natH=s.naturalHeight,t.compute(),i.css({opacity:0}),e(".fluidbox__overlay").css({opacity:1}),void r.one(d,function(){n.trigger("openend.fluidbox")}))},s.onerror=function(){t.close(),n.trigger("imageloadfail.fluidbox")},s.src=n.attr("href"))},compute:function(){var t=this,n=e(this.element),i=n.find("img").first(),r=n.find(".fluidbox__ghost"),a=n.find(".fluidbox__wrap"),s=t.instanceData.thumb.natW,u=t.instanceData.thumb.natH,c=t.instanceData.thumb.w,d=t.instanceData.thumb.h,p=s/u,f=l.viewport.w/l.viewport.h;t.settings.maxWidth>0?(s=t.settings.maxWidth,u=s/p):t.settings.maxHeight>0&&(u=t.settings.maxHeight,s=u*p);var h,m,v,g,y;f>p?(h=u<l.viewport.h?u:l.viewport.h*t.settings.viewportFill,v=h/d,g=s*(d*v/u)/c,y=v):(m=s<l.viewport.w?s:l.viewport.w*t.settings.viewportFill,g=m/c,v=u*(c*g/s)/d,y=g),t.settings.maxWidth&&t.settings.maxHeight&&console.warn("Fluidbox: Both maxHeight and maxWidth are specified. You can only specify one. If both are specified, only the maxWidth property will be respected. This will not generate any error, but may cause unexpected sizing behavior.");var b=o.scrollTop()-i.offset().top+.5*(d*(y-1))+.5*(o.height()-d*y),_=.5*(c*(y-1))+.5*(o.width()-c*y)-i.offset().left,w=parseInt(100*g)/100+","+parseInt(100*v)/100;r.css({transform:"translate("+parseInt(100*_)/100+"px,"+parseInt(100*b)/100+"px) scale("+w+")",top:i.offset().top-a.offset().top,left:i.offset().left-a.offset().left}),n.find(".fluidbox__loader").css({transform:"translate("+parseInt(100*_)/100+"px,"+parseInt(100*b)/100+"px) scale("+w+")"}),n.trigger("computeend.fluidbox")},recompute:function(){this.compute()},close:function(){var t=this,n=e(this.element),r=n.find("img").first(),o=n.find(".fluidbox__ghost"),a=n.find(".fluidbox__wrap"),s=n.find(".fluidbox__overlay");return null===t.instanceData.state||typeof t.instanceData.state==typeof i||0===t.instanceData.state?!1:(t.instanceData.state=0,n.trigger("closestart.fluidbox"),n.removeClass(function(e,t){return(t.match(/(^|\s)fluidbox--(opened|loaded|loading)+/g)||[]).join(" ")}).addClass("fluidbox--closed"),o.css({transform:"translate(0,0) scale(1,1)",top:r.offset().top-a.offset().top+parseInt(r.css("borderTopWidth"))+parseInt(r.css("paddingTop")),left:r.offset().left-a.offset().left+parseInt(r.css("borderLeftWidth"))+parseInt(r.css("paddingLeft"))}),n.find(".fluidbox__loader").css({transform:"none"}),o.one(d,function(){o.css({opacity:0}),r.css({opacity:1}),s.remove(),a.css({zIndex:t.settings.stackIndex-t.settings.stackIndexDelta}),n.trigger("closeend.fluidbox")}),void s.css({opacity:0}))},bindEvents:function(){var t=this,n=e(this.element);n.on("click.fluidbox",function(e){e.preventDefault(),t.instanceData.state&&0!==t.instanceData.state?t.close():t.open()})},bindListeners:function(){var t=this,n=e(this.element),i=function(){p.measure.viewport(),p.measure.fbElements.call(t),n.hasClass("fluidbox--opened")&&t.compute()};e.isFunction(e.throttle)?o.on("resize.fluidbox"+t.instanceData.id,e.throttle(t.settings.resizeThrottle,i)):o.on("resize.fluidbox"+t.instanceData.id,i),n.on("reposition.fluidbox",function(){t.reposition()}),n.on("recompute.fluidbox, compute.fluidbox",function(){t.compute()}),n.on("destroy.fluidbox",function(){t.destroy()}),n.on("close.fluidbox",function(){t.close()})},unbind:function(){e(this.element).off("click.fluidbox reposition.fluidbox recompute.fluidbox compute.fluidbox destroy.fluidbox close.fluidbox"),o.off("resize.fluidbox"+this.instanceData.id)},reposition:function(){p.measure.fbElements.call(this)},destroy:function(){var t=this.instanceData.originalNode;this.unbind(),e.data(this.element,"plugin_"+a,null),e(this.element).removeClass(function(e,t){return(t.match(/(^|\s)fluidbox[--|__]\S+/g)||[]).join(" ")}).empty().html(t).addClass("fluidbox--destroyed").trigger("destroyed.fluidbox")},getMetadata:function(){return this.instanceData}}),e.fn[a]=function(t){var n=arguments;if(t===i||"object"==typeof t)return this.each(function(){e.data(this,"plugin_"+a)||e.data(this,"plugin_"+a,new r(this,t))});if("string"==typeof t&&"_"!==t[0]&&"init"!==t){var o;return this.each(function(){var i=e.data(this,"plugin_"+a);i instanceof r&&"function"==typeof i[t]?o=i[t].apply(i,Array.prototype.slice.call(n,1)):console.warn('Fluidbox: The method "'+t+'" used is not defined in Fluidbox. Please make sure you are calling the correct public method.')}),o!==i?o:this}return this}}(jQuery,window,document),define("lib/fluidbox/dist/js/jquery.fluidbox.min",function(){}),define("lib-build/css!lib/fluidbox/dist/css/fluidbox.min",[],function(){}),define("storymaps-react/tpl/view/media/ImageGallery",["module","exports","./Media","lib-build/hbars!./ImageGallery","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","dojo/_base/lang","lib-build/less!./ImageGallery","lib/jquery/dist/jquery.min","lib/fluidbox/dist/js/jquery.fluidbox.min","lib-build/css!lib/fluidbox/dist/css/fluidbox.min"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},v=function(e){function t(e){s(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,{type:"image-gallery",id:null,previewThumb:null,previewIcon:null}));return n._images=e,n._placement=null,n}return u(t,e),h(t,[{key:"render",value:function(e){return this._images&&e&&"block"==e.placement?(this._placement=e.placement,this._render(!0)):(console.log("Could not render image gallery in section"),"")}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];m(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&(this._node=e.container.find("#"+this._domID))}},{key:"load",value:function(){this._isLoaded||(this._isLoaded=!0,this._node.find(".image-gallery-item").each(function(){var e=$(this),t=e.find(".image-gallery-img-hidden"),n=e.find(".image-gallery-img"),i=t.parent();t.attr("src",e.data("src")),n.css("backgroundImage",'url("'+e.data("src")+'"');var r=function a(){i.trigger("close.fluidbox"),$(window).off("scroll",a)};i.on("openend.fluidbox",function(){$(window).scroll(r)}).fluidbox({maxWidth:app.display.windowWidth});var o=new window.Image;o.onload=function(){e.find(".media-loading").hide()}.bind(this),o.src=e.data("src")}))}},{key:"performAction",value:function(){}},{key:"_update",value:function(){this._node.html(this._render(!1)),this._isLoaded=!1,this.load()}},{key:"_calculateImageHeights",value:function(){for(var e=app.display.windowWidth<768,t=15,n=t*(this._images.images.length-1),i=app.display.windowWidth*(e?.9:.8),r=i-n,o=(i-t)/2,a=r/this._images.images.length,s=e?o:a,l=0;l<this._images.images.length;l++){var u=this._images.images[l],c=0,d=u.width/u.height;c=u.width<s?u.height:Math.round(s/d),u.adjustedHeight=c}}},{key:"_render",value:function(e){this._calculateImageHeights();var t=(0,d["default"])({images:this._addTokens(this._images.images),caption:this._images.caption,placeholder:p["default"].builder.media.captionPlaceholder,captionEditable:app.isInBuilder});return e?'<div id="'+this._domID+'" class="block image-gallery" contenteditable="false">'+t+"</div>":t}},{key:"_addTokens",value:function(e){var t=f["default"].clone(e),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.url=c["default"].addToken(s.url)}}catch(l){i=!0,r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return t}}]),t}(c["default"]);t["default"]=v,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.domId||(null!=e?e.domId:e))?o:s,typeof o===a?o.call(e,{name:"domId",hash:{},data:i}):o))+'" class="block block-type-video" contenteditable="false">\r\n  <div class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <div class="media-media video video-fg video-player" data-id="'+l((o=null!=(o=t.videoId||(null!=e?e.videoId:e))?o:s,typeof o===a?o.call(e,{name:"videoId",hash:{},data:i}):o))+'"></div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n  </div>\r\n  <div class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</div>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div id="'+s((r=null!=(r=t.domId||(null!=e?e.domId:e))?r:a,typeof r===o?r.call(e,{name:"domId",hash:{},data:i}):r))+'" class="video-viewport">\r\n  <div class="media-media video video-player" data-id="'+s((r=null!=(r=t.videoId||(null!=e?e.videoId:e))?r:a,typeof r===o?r.call(e,{name:"videoId",hash:{},data:i}):r))+'"></div>\r\n</div>\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoVimeo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<iframe id="'+s((r=null!=(r=t.domId||(null!=e?e.domId:e))?r:a,typeof r===o?r.call(e,{name:"domId",hash:{},data:i}):r))+'" class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,typeof r===o?r.call(e,{name:"classes",hash:{},data:i}):r))+'" src="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,typeof r===o?r.call(e,{name:"url",hash:{},data:i}):r))+'" style="'+s((r=null!=(r=t.options||(null!=e?e.options:e))?r:a,typeof r===o?r.call(e,{name:"options",hash:{},data:i}):r))+'"></iframe>\r\n'+s((r=null!=(r=t.playerControls||(null!=e?e.playerControls:e))?r:a,typeof r===o?r.call(e,{name:"playerControls",hash:{},data:i}):r))+"\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Video",[],function(){});var Froogaloop=function(){function e(t){return new e.fn.init(t)}function t(e,t,n){if(!n.contentWindow.postMessage)return!1;var i=JSON.stringify({method:e,value:t});n.contentWindow.postMessage(i,u)}function n(e){var t,n;try{t=JSON.parse(e.data),n=t.event||t.method}catch(i){}if("ready"!=n||l||(l=!0),!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===u&&(u=e.origin);var o=t.value,a=t.data,s=""===s?null:t.player_id,c=r(n,s),d=[];return c?(void 0!==o&&d.push(o),a&&d.push(a),s&&d.push(s),d.length>0?c.apply(null,d):c.call()):!1}function i(e,t,n){n?(s[n]||(s[n]={}),s[n][e]=t):s[e]=t}function r(e,t){return t?s[t][e]:s[e]}function o(e,t){if(t&&s[t]){if(!s[t][e])return!1;s[t][e]=null}else{if(!s[e])return!1;s[e]=null}return!0;
}function a(e){return!!(e&&e.constructor&&e.call&&e.apply)}var s={},l=!1,u=(Array.prototype.slice,"*");return e.fn=e.prototype={element:null,init:function(e){return"string"==typeof e&&(e=document.getElementById(e)),this.element=e,this},api:function(e,n){if(!this.element||!e)return!1;var r=this,o=r.element,s=""!==o.id?o.id:null,l=a(n)?null:n,u=a(n)?n:null;return u&&i(e,u,s),t(e,l,o),r},addEvent:function(e,n){if(!this.element)return!1;var r=this,o=r.element,a=""!==o.id?o.id:null;return i(e,n,a),"ready"!=e?t("addEventListener",e,o):"ready"==e&&l&&n.call(null,a),r},removeEvent:function(e){if(!this.element)return!1;var n=this,i=n.element,r=""!==i.id?i.id:null,a=o(e,r);"ready"!=e&&a&&t("removeEventListener",e,i)}},e.fn.init.prototype=e.fn,window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),window.Froogaloop=window.$f=e}();if(define("lib/froogaloop/froogaloop",function(){}),!window.YT)var YT={loading:0,loaded:0};if(!window.YTConfig)var YTConfig={host:"http://www.youtube.com"};if(YT.loading||(YT.loading=1,function(){var e=[];YT.ready=function(t){YT.loaded?t():e.push(t)},window.onYTReady=function(){YT.loaded=1;for(var t=0;t<e.length;t++)try{e[t]()}catch(n){}},YT.setConfig=function(e){for(var t in e)e.hasOwnProperty(t)&&(YTConfig[t]=e[t])};var t=document.createElement("script");t.type="text/javascript",t.id="www-widgetapi-script",t.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflQ3JBIv/www-widgetapi.js",t.async=!0;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()),define("lib/youtube-api/index",function(){}),define("storymaps-react/tpl/view/media/Video",["module","exports","./Media","lib-build/hbars!./VideoBlock","lib-build/hbars!./VideoBackground","lib-build/hbars!./VideoVimeo","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","dojo/Deferred","lib-build/less!./Video","lib/froogaloop/froogaloop","lib/youtube-api/index"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:x(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_={ratio:16/9},w="resources/tpl/builder/icons/media-placeholder/video.png",C="resources/tpl/builder/icons/immersive-panel/video.png",E=function(e){function t(e){u(this,t);var n=c(this,Object.getPrototypeOf(t).call(this,{type:"video",id:e.source+"-"+e.id,previewThumb:w,previewIcon:C}));return n._video=e,n._source=e.source,n._videoid=e.id,n._soundLevelPreImmersive=null,n._placement=null,n._videoPlayer=null,n._loadDeferred=null,n._isVideoLoaded=!1,n._pendingAction=null,n._sectionType="sequence",n._isBuilderAdd=!1,n._video.options||(n._video.options={}),n}return d(t,e),y(t,[{key:"render",value:function(e){var t="";return this._video&&e?(this._placement=e.placement,"block"==this._placement?t+=(0,f["default"])({domId:this._domID,videoId:this.id,caption:this._video.caption,placeholder:v["default"].builder.media.captionPlaceholder,captionEditable:app.isInBuilder}):"background"==this._placement&&(t+=(0,h["default"])({domId:this._domID,videoId:this.id})),t):(console.log("Could not render video in section"),t)}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._sectionType=e.sectionType,e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find('.video[data-id="'+this.id+'"]').parent().parent(),this._nodeMedia=this._node.find(".video-player"),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"_applyConfig",value:function(){var e=this._video.options;if("string"==typeof e&&(e={}),e.size=e.size||"small",this._isVideoLoaded&&e.audio){var n="muted"==this._video.options.audio,i=n?0:1;"vimeo"==this._video.source?this._videoPlayer.api("setVolume",i):this._videoPlayer.setVolume(100*i)}b(Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e)}},{key:"load",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this._loadDeferred=new g["default"],this._isLoaded)return this._loadDeferred.resolve(),this._loadDeferred;this._isLoaded=!0,this._isBuilderAdd=e.isBuilderAdd;var t="0",n="";if("background"==this._placement?t="1":this._video.options&&"simple"==this._video.options.ui&&(t="1",n='<div class="player-controls"><button class="play">play/pause</button>&nbsp;&nbsp;&nbsp;<button class="mute">mute/unmute</button></div>'),"vimeo"==this._source){var i="foreground"==this._placement?"video-fg video-player":"video",r=$((0,m["default"])({domId:"player-"+this._domID,classes:i+" initialized",url:"https://player.vimeo.com/video/"+this._videoid+"?api=1&background="+t+"&player_id=player-"+this._domID,options:this._video.options,playerControls:n}));this._nodeMedia.replaceWith(r),this._nodeMedia=r,this._videoPlayer=$f(r[0]),this._videoPlayer.addEvent("ready",this._onVimeoPlayerReady.bind(this))}else"youtube"==this._video.source&&(this._videoPlayer=new window.YT.Player(this._node.find(".video-player[data-id="+this.id+"]")[0],{height:"",width:"",loop:1,videoId:this._videoid,playerVars:{rel:0,modestbranding:1},events:{onReady:function(e){this._onYoutubePlayerReady(e,this._video.id)}.bind(this)}}));return this._loadDeferred}},{key:"resize",value:function(e){"background"==this._placement&&this._resizeVideoBackground(e)}},{key:"performAction",value:function(e){if(this._videoPlayer){if(!this._isVideoLoaded)return void(this._pendingAction=e);var t=void 0!==e.viewIndex,n="muted"==this._video.options.audio;try{if("vimeo"==this._video.source)e.isActive?("background"==this._placement&&t&&!n&&(this._videoPlayer.api("getVolume",function(e){1!=e&&(this._soundLevelPreImmersive=e)}.bind(this)),e.visibilityProgress&&this._videoPlayer.api("setVolume",e.visibilityProgress)),this._videoPlayer.api("play")):"background"==this._placement?(null!=this._soundLevelPreImmersive&&this._videoPlayer.api("setVolume",this._soundLevelPreImmersive),this._videoPlayer.api("pause")):this._videoPlayer.api("pause");else if("youtube"==this._video.source)if(e.isActive){if("background"==this._placement&&t&&!n){var i=this._videoPlayer.getVolume();100!=i&&(this._soundLevelPreImmersive=i),this._videoPlayer.setVolume(100)}this._videoPlayer.playVideo()}else"background"==this._placement?(null!=this._soundLevelPreImmersive&&this._videoPlayer.setVolume(100*e.visibilityProgress),this._videoPlayer.pauseVideo()):this._videoPlayer.pauseVideo()}catch(r){console.error(r)}}}},{key:"_onVimeoPlayerReady",value:function(){if(this._isVideoLoaded=!0,this._node.find(".media-loading").hide(),"block"==this._placement)this._videoPlayer.api("pause");else{var e="muted"==this._video.options.audio;this._isBuilderAdd?("immersive"!=this._sectionType||e?this._videoPlayer.api("setVolume",0):this._videoPlayer.api("setVolume",1),this._videoPlayer.api("play")):(this._videoPlayer.api("setVolume",0),"immersive"==this._sectionType&&this._videoPlayer.api("pause")),this._videoPlayer.api("setLoop",!0)}this._loadDeferred.resolve(),this.resize(),this._applyConfig(),this._pendingAction&&(this.performAction(this._pendingAction),this._pendingAction=null)}},{key:"_onYoutubePlayerReady",value:function(){this._isVideoLoaded=!0,this._node.find(".media-loading").hide(),"background"==this._placement&&(this._videoPlayer.setLoop(!0),this._isBuilderAdd?("immersive"==this._sectionType?this._videoPlayer.setVolume(100):this._videoPlayer.setVolume(0),this._videoPlayer.playVideo()):this._videoPlayer.setVolume(0)),this._nodeMedia=this._node.find(".video-player"),this._loadDeferred.resolve(),this.resize(),this._applyConfig(),this._pendingAction&&(this.performAction(this._pendingAction),this._pendingAction=null)}},{key:"_resizeVideoBackground",value:function(e){if(e=e||{windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight},this._nodeMedia){var t=-1,n=-1,i=app.display.windowWidth,r=app.display.windowHeight+60,o=i/r;o<_.ratio?(t=r*_.ratio,n=r):(t=i,n=t/_.ratio),this._nodeMedia.css({width:t,height:n}),this._nodeMedia.parent().css({width:i,height:r}),this._nodeMedia.parent().scrollLeft((t-i)/2),this._nodeMedia.parent().scrollTop((n-r)/2)}}}]),t}(p["default"]);t["default"]=E,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebMapBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" contenteditable="false">\r\n  <div class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <div class="media-media map" data-id="'+l((o=null!=(o=t.webmapId||(null!=e?e.webmapId:e))?o:s,typeof o===a?o.call(e,{name:"webmapId",hash:{},data:i}):o))+'" data-options="'+l((o=null!=(o=t.options||(null!=e?e.options:e))?o:s,typeof o===a?o.call(e,{name:"options",hash:{},data:i}):o))+'"></div>\r\n    <div class="interaction-container">\r\n      <button class="btn btn-default btn-sm">\r\n        <span class="int-container-disabled">\r\n          <span class="glyphicon glyphicon-fullscreen"></span>\r\n          Explore Map\r\n        </span>\r\n        <span class="int-container-enabled">\r\n          Stop Exploring\r\n        </span>\r\n      </button>\r\n    </div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n    <div class="layer-list-container"></div>\r\n  </div>\r\n  <div class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</div>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebMapBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div class="media-media map" data-id="'+s((r=null!=(r=t.webmapId||(null!=e?e.webmapId:e))?r:a,typeof r===o?r.call(e,{name:"webmapId",hash:{},data:i}):r))+'"></div>\r\n<div class="interaction-container">\r\n  <button class="btn btn-default btn-sm">\r\n    <span class="int-container-disabled">\r\n      <span class="glyphicon glyphicon-fullscreen"></span>\r\n      Explore Map\r\n    </span>\r\n    <span class="int-container-enabled">\r\n      Stop Exploring\r\n    </span>\r\n  </button>\r\n</div>\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n<div class="layer-list-container"></div>\r\n'},useData:!0})}),define("lib-build/css!storymaps/tpl/view/media/arcgis/WebMapCommand",[],function(){}),define("storymaps/tpl/view/media/arcgis/WebMapCommand",["lib-build/css!./WebMapCommand","dojo/has","esri/geometry/Point","dojo/on","esri/symbols/PictureMarkerSymbol","esri/layers/GraphicsLayer","esri/graphic","esri/config"],function(e,t,n,i,r,o,a,s){return function(e,i,l,u){function c(t){if(t)$(e.container).find(".mapCommandHomeBtn").addClass("loading"),h=Date.now();else{var n=Date.now()-h,i=0;450>n&&(i=450-n),setTimeout(function(){$(e.container).find(".mapCommandHomeBtn").removeClass("loading"),h=0},i)}}function d(){navigator.geolocation.getCurrentPosition(function(t){var i=new n(t.coords.longitude,t.coords.latitude);return l&&"function"==typeof l&&l(!0,i,t),102100!=e.spatialReference.wkid&&4326!=e.spatialReference.wkid?void s.defaults.geometryService.project([i],e.spatialReference,function(e){e&&e[0]&&p(e[0])}):void p(i)},f,{timeout:2e3})}function p(e){g.clear(),g.add(new a(e,v)),setTimeout(function(){$("#locateLayer_layer image").fadeOut({duration:800})},1e4)}function f(e){l(!1,e)}var h=0,m=$('<div class="esriSimpleSliderIncrementButton"><div class="mapCommandHomeBtn"><i class="fa fa-home" aria-hidden="true"></i></div></div>'),v=new r("resources/common/icons/mapcommand-location-marker.png",21,21),g=new o({id:"locateLayer"});m.click(function(){0!==h&&$("body").hasClass("mobile-view")||(i&&"function"==typeof i?i(e._params.extent):e.setExtent(e._params.extent))}),$(e.container).find(".esriSimpleSlider div:nth-child(1)").after(m),this.setMobile=function(t){$(".esriSimpleSlider, .mapCommandHomeBtn",e.container).toggleClass("touch",t)},this.destroy=function(){$(e.container).find(".esriSimpleSliderIncrementButton").remove(),$(e.container).find(".mapCommandLocation").remove()},this.startLoading=function(){c(!0)},this.stopLoading=function(){c(!1)},this.toggleLocationButton=function(t){$(".mapCommandLocation",e.container).toggleClass("hidden",!t)},navigator&&navigator.geolocation&&($(".esriSimpleSlider",e.container).after('<div class="esriSimpleSlider esriSimpleSliderVertical mapCommandLocation"><i class="fa fa-crosshairs" aria-hidden="true"></i></div>'),$(".mapCommandLocation",e.container).click(d),this.toggleLocationButton(u),e.addLayer(g)),this.setMobile(!!t("touch"))}}),define("lib-build/less!storymaps-react/tpl/view/media/WebMap",[],function(){}),define("storymaps-react/tpl/view/media/WebMap",["module","exports","./Media","lib-build/hbars!./WebMapBlock","lib-build/hbars!./WebMapBackground","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","storymaps/tpl/view/media/arcgis/WebMapCommand","esri/arcgis/utils","esri/geometry/Extent","esri/symbols/SimpleMarkerSymbol","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/tasks/query","esri/tasks/QueryTask","esri/config","dojo/_base/lang","dojo/Deferred","storymaps/tpl/utils/UI","lib-build/less!./WebMap"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f,h,m,v,g){"use strict";function y(e){return e&&e.__esModule?e:{"default":e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var C=y(n),E=y(i),x=y(r),T=y(o),k=y(a),P=y(s),S=y(l),O=y(u),I=y(c),N=y(d),A=y(p),M=y(f),D=y(h),j=y(m),L=y(v),R=y(g),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),F=function z(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:z(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},U="resources/tpl/builder/icons/media-placeholder/map.png",H="resources/tpl/builder/icons/immersive-panel/map.png",W=function(e){function t(e){b(this,t);var n=_(this,Object.getPrototypeOf(t).call(this,{type:"webmap",id:e.id,previewThumb:U,previewIcon:H}));return n._webmap=e,n._bookmarks=null,n._placement=null,n._transition=null,n._swipeLayersNodes=[],n._swipePreviousWebMapLayers=null,n._lastScrollPosition=null,n._webmap.options||(n._webmap.options={interaction:"enabled"}),n._webmap.extras||(n._webmap.extras={locate:{enabled:!1},search:{enabled:!1},legend:{enabled:!1}}),n}return w(t,e),B(t,[{key:"render",value:function(e){var t="";if(!this._webmap||!e)return console.log("Could not render webmap in section"),t;if(this._placement=e.placement,"block"==this._placement){var n=JSON.stringify({extent:this._webmap.extent,layers:this._webmap.layers,legend:this._webmap.legend,layers2:this._webmap.layers2}),i=["block","block-type-webmap"];t+=(0,E["default"])({id:this._domID,webmapId:this.id,classes:i.join(" "),options:n,caption:this._webmap.caption,placeholder:T["default"].builder.media.captionPlaceholder,captionEditable:app.isInBuilder})}else t+=(0,x["default"])({webmapId:this.id});return t}},{key:"_applyConfig",value:function(){var e=this._webmap.options;F(Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e),this._applyInteraction();var n=!(!this._webmap.extent&&!app.isInBuilder);this.performAction({allowExtentUpdate:n}).then(function(){app.isInBuilder&&this._configTabWebMap&&this._configTabWebMap.attachEvents()}.bind(this),function(){})}},{key:"_applyInteraction",value:function(){var e=this._webmap.options.interaction;if((app.isMobileView||R["default"].isMobileBrowser())&&(e="button"),this._webmap.options.interaction){var t=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(t).addClass("interaction-"+e),this._node.find(".interaction-container").removeClass("enabled")}}},{key:"load",value:function(){var e=new L["default"];if(this._node&&!this._isLoaded)return this._isLoaded=!0,this.loadMap(this._node.find(".map")[0],e),e}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];F(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find('.map[data-id="'+this.id+'"]').parent(),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"resize",value:function(){}},{key:"performAction",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new L["default"],n=this._cache[this.id]?this._cache[this.id].map:null;if(!n)return t.reject(),t;e.scrollPositionView&&(this._lastScrollPosition=e.scrollPositionView),e.transition&&(this._transition=e.transition),n.infoWindow&&n.infoWindow.hide();var i=this._webmap,r=!1;if(e.allowExtentUpdate===!0||void 0===e.allowExtentUpdate){var o=null;o=i.extent?new S["default"](i.extent):this._getWebMapExtentFromItemExtent(this._cache[this.id].itemInfo.item.extent),(JSON.stringify(o.toJson())!=this._cache[this.id].lastExtentApplied||e.forceSetExtent)&&(this._cache[this.id].lastExtentApplied=JSON.stringify(o.toJson()),r=!0,n.setExtent(o,!1).then(function(){i.popup&&this._applyPopupConfiguration(n,i.popup),t.resolve()}.bind(this),function(){t.resolve()}))}else t.resolve();if(i.popup&&!r&&this._applyPopupConfiguration(n,i.popup),JSON.stringify(i.layers)!=this._cache[this.id].lastLayersApplied){this._cache[this.id].lastLayersApplied=JSON.stringify(i.layers);var a=i.layers||[],s=this._cache[i.id].itemInfo.itemData.operationalLayers;$.each(s,function(e,t){var n;t.layerObject?(n=$(a).filter(function(e,n){return n.id==t.layerObject.id}),t.layerObject.setVisibility(n.length?n[0].visibility:t.visibility)):t.featureCollection&&t.featureCollection.layers&&$.each(t.featureCollection.layers,function(e,t){n=$(a).filter(function(e,n){return n.id.split("_").slice(0,-1).join("_")==t.layerObject.id.split("_").slice(0,-1).join("_")}),t.layerObject.setVisibility(n.length?n[0].visibility:t.visibility)})})}if("swipe-vertical"==this._transition||"swipe-horizontal"==this._transition){if(this._swipeLayersNodes&&this._swipeLayersNodes.length){var l=app.display.windowHeight-this._lastScrollPosition,u=125;app.isInBuilder&&(l-=u);var c=!0,d=!1,p=void 0;try{for(var f,h=this._swipeLayersNodes[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value,v=m.node,g=l,y=app.display.windowWidth,b=app.display.windowHeight,_=0;if(!m.isSVGLayer){var w=v.position();g+=-w.top,y+=-w.left,b+=-w.top,_+=-w.left}v.css("clip","rect("+g+"px,"+y+"px,"+b+"px,"+_+"px)"),v.data("sm-swipe-pos",l)}}catch(C){d=!0,p=C}finally{try{!c&&h["return"]&&h["return"]()}finally{if(d)throw p}}}}else this.resetSwipe();e.doNotApplyInteraction||this._applyInteraction();var E=!1;return this._webmap.extras&&this._webmap.extras.locate&&this._webmap.extras.locate.enabled&&(E=!0),this._cache[this.id].mapCommand.toggleLocationButton(E),t}},{key:"resetSwipe",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._swipeLayersNodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,a=o.node;a.css("clip",""),a.data("sm-swipe-pos","")}}catch(s){t=!0,n=s}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw n}}}},{key:"loadMap",value:function(e,t){console.log("Loading map");var n={mapOptions:{smartNavigation:!1},usePopupManager:!0,editable:!1,bingMapsKey:app.cfg.BING_MAPS_KEY,layerMixins:app.data.appProxies||null};this._webmap.extent&&(n.mapOptions.extent=new S["default"](this._webmap.extent)),$(e).css("pointer-events","none"),P["default"].createMap(this.id,e,n).then(j["default"].hitch(this,function(n){var i=n.map;console.log("createMap ok",n),this._node.find(".media-loading").hide(),$(e).css("pointer-events",""),i.disableScrollWheelZoom(),i.reposition(),i.resize(),this._cache[this.id]=n,app.isInBuilder&&this._onWebMapLoaded(),this._bookmarks=n.itemInfo.itemData.bookmarks,i.infoWindow&&(i.infoWindow.markerSymbol=(new O["default"]).setSize(0)),t.resolve(this.id),this._node.find(".interaction-container").click(this._onEnableButtonClick.bind(this)),this._cache[this.id].mapCommand=new k["default"](i,this._onMapCommandHomeClick.bind(this),this._zoomToBrowserLocation.bind(this),!1),this._cache[this.id].lastExtentApplied=null,this._cache[this.id].lastLayersApplied=null,this._applyConfig()}))}},{key:"postLoad",value:function(){var e=this._cache[this.id].map;this.computeSwipeLayers(this._swipePreviousWebMapLayers),e.on("pan",function(){if(this._swipeLayersNodes&&this._isActive){var e=!0,t=!1,n=void 0;try{for(var i,r=this._swipeLayersNodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,a=o.node,s=a.data("sm-swipe-pos"),l=s,u=app.display.windowWidth,c=app.display.windowHeight,d=0;if(!o.isSVGLayer){var p=a.position();l+=-p.top,u+=-p.left,c+=-p.top,d+=-p.left}a.css("clip","rect("+l+"px,"+u+"px,"+c+"px,"+d+"px)")}}catch(f){t=!0,n=f}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw n}}}})}},{key:"_zoomToBrowserLocation",value:function(e,t){var n=this._cache[this.id]?this._cache[this.id].map:null;e&&(102100!=n.spatialReference.wkid&&4326!=n.spatialReference.wkid?D["default"].defaults.geometryService.project([t],n.spatialReference,function(e){e&&e[0]&&(n.extent.contains(e[0])||n.centerAt(e[0]))}):n.extent.contains(t)||n.centerAt(t))}},{key:"_onMapCommandHomeClick",value:function(){this.performAction({doNotApplyInteraction:!0,forceSetExtent:!0})}},{key:"computeSwipeLayers",value:function(e){if(this._swipeLayersNodes=[],this._swipePreviousWebMapLayers=[],e=e||[],this._webmap.layers=this._webmap.layers||[],!this._cache[this.id])return void(this._swipePreviousWebMapLayers=j["default"].clone(e));var t=[],n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;t.push(JSON.stringify(l))}}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}var c=!0,d=!1,p=void 0;try{for(var f,h=this._webmap.layers[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value;n.push(JSON.stringify(m))}}catch(u){d=!0,p=u}finally{try{!c&&h["return"]&&h["return"]()}finally{if(d)throw p}}var v=!0,g=!1,y=void 0;try{for(var b,_=t[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var w=b.value;if(-1==n.indexOf(w)){var C=JSON.parse(w);C.visibility===!1&&n.push(JSON.stringify({id:C.id,visibility:!0}))}}}catch(u){g=!0,y=u}finally{try{!v&&_["return"]&&_["return"]()}finally{if(g)throw y}}var E=new Set(t),x=n.filter(function(e){return!E.has(e)}),T=!0,k=!0,P=!1,S=void 0;try{for(var O,I=x[Symbol.iterator]();!(k=(O=I.next()).done);k=!0){var N=O.value,A=JSON.parse(N).id,M=this._cache[this.id].map.getLayer(A)._div,D=!1;if(M.rawNode){if(!T)continue;M=$(M.rawNode).parent()[0],D=!0,T=!1}this._swipeLayersNodes.push({node:$(M),isSVGLayer:D})}}catch(u){P=!0,S=u}finally{try{!k&&I["return"]&&I["return"]()}finally{if(P)throw S}}console.log("**",this._swipeLayersNodes)}},{key:"serialize",value:function(){return j["default"].clone({type:"webmap",webmap:this._webmap})}},{key:"getAuthorizedTransitionsWith",value:function(e){if(!e||e.id!=this.id)return[];var t=this.serialize().webmap,n=JSON.stringify(t.extent)||"null",i=JSON.stringify(t.layers)||"[]",r=JSON.stringify(t.popup)||"null",o=e.serialize().webmap,a=JSON.stringify(o.extent)||"null",s=JSON.stringify(o.layers)||"[]",l=JSON.stringify(o.popup)||"null";return r!=l||n!=a?[]:i==s?[]:["swipe-vertical"]}},{key:"getLayersConfiguration",value:function(){return this._webmap.layers}},{key:"_getWebMapExtentFromItemExtent",value:function(e){if(!e||2!=e.length)return null;var t=I["default"].geographicToWebMercator(new N["default"](e[0][0],e[0][1])),n=I["default"].geographicToWebMercator(new N["default"](e[1][0],e[1][1]));return new S["default"]({xmax:n.x,xmin:t.x,ymax:n.y,ymin:t.y,spatialReference:{wkid:102100}})}},{key:"_applyPopupConfiguration",value:function(e,t){if(e.infoWindow.hide(),t){var n=e.getLayer(t.layerId),i=t.layerId?t.layerId.split("_").slice(0,-1).join("_"):"",r=e.getLayer(i);if(e.infoWindow.clearFeatures(),n)this._applyPopupConfigurationStep2(e,t);else if(r){var o=t.layerId.split("_").slice(-1).join("_"),a=r.url+"/"+o;this._applyPopupConfigurationStep2Alt(e,t,i,o,a)}else var s=e.on("update-end",function(){this._applyPopupConfiguration(e,t),s.remove()})}}},{key:"_applyPopupConfigurationStep2",value:function(e,t){var n=new A["default"],i=e.getLayer(t.layerId);i&&(n.objectIds=[t.fieldValue],i._collection||(n.returnGeometry=!0,n.outFields=["*"],n.outSpatialReference=e.spatialReference),i.queryFeatures&&i.queryFeatures(n).then(function(n){this._applyPopupConfigurationStep3(e,t,n.features)}.bind(this)))}},{key:"_applyPopupConfigurationStep2Alt",value:function(e,t,n,i,r){var o=new M["default"](r),a=new A["default"],s=e.getLayer(n);s&&(a.objectIds=[t.fieldValue],a.returnGeometry=!0,a.outFields=["*"],a.outSpatialReference=e.spatialReference,o.execute(a,function(r){this._applyPopupConfigurationStep3(e,t,r.features,n,i)}.bind(this)))}},{key:"_applyPopupConfigurationStep3",value:function(e,t,n,i,r){if(e&&t&&n&&n.length){var o=n[0].geometry,a=null;a=t.anchorPoint?new N["default"](t.anchorPoint):o.getExtent()?o.getExtent().getCenter():o,i?(n[0].infoTemplate=e.getLayer(i).infoTemplates[r].infoTemplate,e.infoWindow.setContent(n[0].getContent())):e.infoWindow.setFeatures(n),e.infoWindow.show(a),e.extent.contains(a)||e.centerAt(a)}}}]),t}(C["default"]);t["default"]=W,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="block block-type-webscene" contenteditable="false">\r\n  <div class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <div class="media-media scene" data-id="'+l((o=null!=(o=t.websceneId||(null!=e?e.websceneId:e))?o:s,typeof o===a?o.call(e,{name:"websceneId",hash:{},data:i}):o))+'"></div>\r\n    <div class="interaction-container">\r\n      <button class="btn btn-default btn-sm">\r\n        <span class="int-container-disabled">\r\n          <span class="glyphicon glyphicon-fullscreen"></span>\r\n          Explore Map\r\n        </span>\r\n        <span class="int-container-enabled">\r\n          Stop Exploring\r\n        </span>\r\n      </button>\r\n    </div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n  </div>\r\n  <div class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</div>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="media-media scene" data-id="'+s((r=null!=(r=t.websceneId||(null!=e?e.websceneId:e))?r:a,typeof r===o?r.call(e,{name:"websceneId",hash:{},data:i}):r))+'"></div>\r\n<div class="interaction-container">\r\n  <button class="btn btn-default btn-sm">\r\n    <span class="int-container-disabled">\r\n      <span class="glyphicon glyphicon-fullscreen"></span>\r\n      Explore Map\r\n    </span>\r\n    <span class="int-container-enabled">\r\n      Stop Exploring\r\n    </span>\r\n  </button>\r\n</div>\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBlockError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="block block-type-webscene media-error" contenteditable="false">\r\n  Sorry this 3D map is not supported on your device.\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBackgroundError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="media-media scene media-error">\r\n  Sorry this 3D map is not supported on your device.\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/WebScene",[],function(){}),define("storymaps-react/tpl/view/media/WebScene",["module","exports","./Media","lib-build/hbars!./WebSceneBlock","lib-build/hbars!./WebSceneBackground","lib-build/hbars!./WebSceneBlockError","lib-build/hbars!./WebSceneBackgroundError","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","storymaps/tpl/utils/UI","lib-build/less!./WebScene"],function(e,t,n,i,r,o,a,s,l){
"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),y=u(s),b=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function T(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:T(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},C="resources/tpl/builder/icons/media-placeholder/scene.png",E="resources/tpl/builder/icons/immersive-panel/scene.png",x=function(e){function t(e){c(this,t);var n=d(this,Object.getPrototypeOf(t).call(this,{type:"webscene",id:e.id,previewThumb:C,previewIcon:E}));return n._webscene=e,n._placement=null,n._isSupported=b["default"].hasWebGL()&&!b["default"].isMobileBrowser(),n._isSupported||(app.data.errorWebGL=!0),n._webscene.options||(n._webscene.options={interaction:"enabled"}),void 0===n._webscene.slide&&(n._webscene.slide=-1),n}return p(t,e),_(t,[{key:"render",value:function(e){var t="";return this._webscene&&e?(this._placement=e.placement,t+="background"==e.placement?this._isSupported?(0,m["default"])({id:this._domID,websceneId:this.id}):(0,g["default"])({id:this._domID}):this._isSupported?(0,h["default"])({id:this._domID,websceneId:this.id,caption:this._webscene.caption,placeholder:y["default"].builder.media.captionPlaceholder,captionEditable:app.isInBuilder}):(0,v["default"])({id:this._domID})):(console.log("Could not render webscene in section"),t)}},{key:"_applyConfig",value:function(){var e=this._webscene.options;this._isSupported&&(w(Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e),this._applyInteraction(),this.performAction({}),app.isInBuilder&&this._configTabWebScene&&this._configTabWebScene.attachEvents())}},{key:"_applyInteraction",value:function(){if(this._webscene.options.interaction){var e=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(e).addClass("interaction-"+this._webscene.options.interaction),this._node.find(".interaction-container").removeClass("enabled")}}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];w(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find('.scene[data-id="'+this.id+'"]').parent(),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"load",value:function(){this._node&&!this._isLoaded&&this._isSupported&&(this._isLoaded=!0,console.log("scene: "+this.id),require(["esri4/config","esri4/identity/IdentityManager","esri4/identity/OAuthInfo","esri4/portal/Portal","esri4/views/SceneView","esri4/portal/PortalItem","esri4/WebScene","esri4/core/watchUtils","lib-build/css!esri4/css/main.css"],function(e,t,n,i,r,o,a,s){function l(){var e=new a({portalItem:new o({id:this.id})}),t=new r({map:e,container:this._node.find(".scene")[0]});this._cache[this.id]={scene:e,view:t},t.then(function(){this._cache[this.id].initialViewpoint=t.viewpoint,t.ui.move("zoom","bottom-right"),t.ui.move("compass","bottom-right"),this._node.find(".media-loading").hide()}.bind(this)),t.surface.addEventListener("wheel",function(e){e.stopImmediatePropagation()},!0),void 0!==this._webscene.slide&&-1!==this._webscene.slide?s.init(e,"presentation.slides",function(e){e&&e.items&&e.items.length&&e.items[this._webscene.slide].applyTo(t),app.isInBuilder&&this._onWebSceneLoaded()}.bind(this)):app.isInBuilder&&this._onWebSceneLoaded(),this._node.find(".interaction-container").click(this._onEnableButtonClick.bind(this))}var u=app.indexCfg.sharingurl.split("/sharing/")[0];e.portalUrl=u;var c=new n({appId:app.indexCfg.oAuthAppId,popup:!1,portalUrl:"https:"+u});t.registerOAuthInfos([c]),t.checkSignInStatus(c.portalUrl+"/sharing").then(l.bind(this),l.bind(this))}.bind(this)))}},{key:"performAction",value:function(){var e=this._cache[this.id],t=e?e.scene:null,n=e?e.view:null;t&&n&&n.ready&&this._isSupported&&(console.log("performAction",this._webscene.slide),-1===this._webscene.slide?this._cache[this.id].initialViewpoint&&n.goTo(this._cache[this.id].initialViewpoint):void 0!==this._webscene.slide&&this._webscene.slide<=t.presentation.slides.items.length&&t.presentation.slides.items[this._webscene.slide].applyTo(n),this._applyInteraction())}},{key:"resize",value:function(){}}]),t}(f["default"]);t["default"]=x,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebPageBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="block block-webpage scroll-off" contenteditable="false">\r\n  <div class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <iframe class="media-media webpage" src="'+l((o=null!=(o=t.url||(null!=e?e.url:e))?o:s,typeof o===a?o.call(e,{name:"url",hash:{},data:i}):o))+'"></iframe>\r\n    <div class="interaction-container">\r\n      <button class="btn btn-default btn-sm">\r\n        <span class="int-container-disabled">\r\n          <span class="glyphicon glyphicon-fullscreen"></span>\r\n          Explore\r\n        </span>\r\n        <span class="int-container-enabled">\r\n          Stop Exploring\r\n        </span>\r\n      </button>\r\n    </div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n  </div>\r\n  <div class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</div>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebPageBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,typeof r===o?r.call(e,{name:"classes",hash:{},data:i}):r))+'">\r\n  <iframe class="media-media webpage" data-src="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,typeof r===o?r.call(e,{name:"url",hash:{},data:i}):r))+'" style="width: 100%; height: 100%;"></iframe>\r\n  <div class="interaction-container">\r\n    <button class="btn btn-default btn-sm">\r\n      <span class="int-container-disabled">\r\n        <span class="glyphicon glyphicon-fullscreen"></span>\r\n        Explore\r\n      </span>\r\n      <span class="int-container-enabled">\r\n        Stop Exploring\r\n      </span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/WebPage",[],function(){}),define("storymaps-react/tpl/view/media/WebPage",["module","exports","./Media","lib-build/hbars!./WebPageBlock","lib-build/hbars!./WebPageBackground","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","dojo/Deferred","storymaps/tpl/utils/UI","lib-build/less!./WebPage"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function E(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:E(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_="resources/tpl/builder/icons/media-placeholder/webpage.png",w="resources/tpl/builder/icons/immersive-panel/webpage.png",C=function(e){function t(e){u(this,t);var n=c(this,Object.getPrototypeOf(t).call(this,{type:"webpage",id:e.url,previewThumb:_,previewIcon:w}));return n._webpage=e,n._url=e.url,n._nodeMedia=null,n._placement=null,n._webpage.options||(n._webpage.options={interaction:"enabled"}),n}return d(t,e),y(t,[{key:"getNode",value:function(){return this._node}},{key:"render",value:function(e){var t="";if(!this._webpage||!e)return console.log("Could not render webpage in section"),t;if(this._placement=e.placement,"block"==this._placement)t+=(0,f["default"])({id:this._domID,url:this._url,caption:this._webpage.caption,placeholder:m["default"].builder.media.captionPlaceholder,captionEditable:app.isInBuilder});else if("background"==e.placement){var n="";t+=(0,h["default"])({id:this._domID,url:this._url,classes:"webpage-container"+n})}return t}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?(this._node=e.container.find("#"+this._domID),this._nodeMedia=this._node.find("iframe")):(this._nodeMedia=e.container.find('.webpage[data-src="'+this._url+'"]'),this._node=this._nodeMedia.parents(".background").eq(0)),this._applyConfig())}},{key:"_applyConfig",value:function(){var e=this._webpage.options;b(Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e);var n=this._webpage.options.interaction;if((app.isMobileView||g["default"].isMobileBrowser())&&(n="button"),this._webpage.options.interaction){var i=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(i).addClass("interaction-"+n)}}},{key:"load",value:function(){var e=new v["default"];return!this._nodeMedia||this._isLoaded?(e.reject(),e):(this._isLoaded=!0,this._nodeMedia.parent(".webpage-container").addClass("initialized"),console.log("webpage: "+this._nodeMedia.data("src")),this._nodeMedia.attr("src",this._nodeMedia.data("src")).load(function(){this._node.find(".media-loading").hide()}.bind(this)),this._node.find(".interaction-container").click(this._onEnableButtonClick.bind(this)),this._node.on("mouseup touchstart",function(){this._node.addClass("scroll-off")}.bind(this)),this._node.on("mousedown touchend",function(){this._node.removeClass("scroll-off")}.bind(this)),this._node.mouseleave(function(){this._node.addClass("scroll-off")}.bind(this)),this._nodeMedia.mouseleave(function(){this._node.addClass("scroll-off")}.bind(this)),e.resolve(),e)}},{key:"performAction",value:function(e){if(e&&e.viewIndex&&e.isActive)try{this._nodeMedia[0].contentWindow.performCascadeAction(e)}catch(t){}}},{key:"resize",value:function(){}}]),t}(p["default"]);t["default"]=C,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/Empty",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="media-empty">\r\n  <div class="me-placeholder"></div>\r\n  <div class="media-empty-add">\r\n    <img class="media-empty-icon-all" src="resources/tpl/builder/icons/text-editor/Media.png" />\r\n    <div class="media-empty-icon-image">\r\n      <i class="fa fa-picture-o" aria-hidden="true"></i>\r\n    </div>\r\n    <div class="media-empty-label">'+s((r=null!=(r=t.label||(null!=e?e.label:e))?r:a,typeof r===o?r.call(e,{name:"label",hash:{},data:i}):r))+"</div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Empty",[],function(){}),define("storymaps-react/tpl/view/media/Empty",["module","exports","./Media","lib-build/hbars!./Empty","dojo/_base/lang","lib-build/less!./Empty"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},h="resources/tpl/builder/icons/media-placeholder/image.jpg",m="resources/tpl/builder/icons/immersive-panel/image.png",v=function(e){function t(){a(this,t);var e=s(this,Object.getPrototypeOf(t).call(this,{type:"empty",id:null,previewThumb:h,previewIcon:m}));return e._onEdit=null,e}return l(t,e),p(t,[{key:"render",value:function(e){return e?"block"==e.placement?"":(0,c["default"])({id:this._domID,label:"Add media"}):(console.log("Could not render webmap in section"),"")}},{key:"load",value:function(){}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];f(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&(this._node=e.container.find("#"+this._domID).parent(),this._node.find(".me-placeholder").css("backgroundImage",'url("resources/tpl/builder/icons/immersive/background-placeholder.jpg")'),this._node.find(".media-empty-add").addClass("authorized-"+(e.mediaIcon||"all")).click(this.onPickMedia.bind(this)))}},{key:"resize",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"performAction",value:function(){}},{key:"serialize",value:function(){return d["default"].clone({type:"empty",empty:"empty"})}},{key:"onPickMedia",value:function(){this._onAction("swap")}}]),t}(u["default"]);t["default"]=v,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/media/Color",[],function(){}),define("storymaps-react/tpl/view/media/Color",["module","exports","./Media","dojo/_base/lang","lib-build/less!./Color"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e){o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,{type:"color",id:null,previewThumb:"",previewIcon:""}));return n._color=e,n}return s(t,e),c(t,[{key:"render",value:function(e){return this._color&&e?'<div class="media-color" style="background-color: '+this._color.value+'"></div>':(console.log("Could not render color in section"),"")}},{key:"load",value:function(){}},{key:"serialize",value:function(){return u["default"].clone({type:"color",color:this._color})}}]),t}(l["default"]);t["default"]=d,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/CreditsItemViewer",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'        <a href="'+s((r=null!=(r=t.link||(null!=e?e.link:e))?r:a,typeof r===o?r.call(e,{name:"link",hash:{},data:i}):r))+'" class="cr-item-input cr-source cr-link" target="_blank">'+s((r=null!=(r=t.source||(null!=e?e.source:e))?r:a,typeof r===o?r.call(e,{name:"source",hash:{},data:i}):r))+"</a>\r\n"},3:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'        <div class="cr-item-input cr-source">'+s((r=null!=(r=t.source||(null!=e?e.source:e))?r:a,typeof r===o?r.call(e,{name:"source",hash:{},data:i}):r))+"</div>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<li class="cr-item viewer">\r\n  <div class="cr-item-main">\r\n    <div class="cr-input-container first">\r\n      <div class="cr-item-input cr-content">'+l((o=null!=(o=t.label||(null!=e?e.label:e))?o:s,typeof o===a?o.call(e,{name:"label",hash:{},data:i}):o))+'</div>\r\n    </div>\r\n    <span class="cr-pipe"></span>\r\n    <div class="cr-input-container">\r\n';return r=t["if"].call(e,null!=e?e.link:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=r&&(u+=r),u+"  </div>\r\n</li>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Credits",[],function(){}),define("storymaps-react/tpl/view/media/Credits",["module","exports","./Media","lib-build/hbars!./CreditsItemViewer","lib-build/less!./Credits"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},p=function(e){function t(e){o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,{type:"credits",id:null,previewThumb:"",previewIcon:""}));return n._credits=e,n}return s(t,e),c(t,[{key:"render",value:function(e){if(!this._credits||!e)return console.log("Could not render credits block in section"),"";var t='<div id="'+this._domID+'" class="block block-type-credits"><ul class="cr-list">';if(this._credits.length){var n=!0,i=!1,r=void 0;try{for(var o,a=this._credits[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t+=(0,u["default"])({label:s.label,link:s.link,source:s.source,empty:!1,incomplete:!1})}}catch(l){i=!0,r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}}return t+="</ul></div>"}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&(this._node=e.container.find("#"+this._domID))}},{key:"load",value:function(){}},{key:"resize",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"performAction",value:function(){}}]),t}(l["default"]);t["default"]=p,e.exports=t["default"]}),define("lib-build/css!storymaps/tpl/view/media/Discover",[],function(){}),define("storymaps/tpl/view/media/Discover",["lib-build/css!./Discover"],function(){return function(e){this.render=function(t){var n="";return e&&t?(n+='<div class="discover">',n+=" <strong>"+e.title+"</strong>",n+=" <table><tr>",$.each(e.items,function(e,t){n+='<td><div class="discover-item"><a href="'+t.url+'" target="_blank"><img src="'+t.thumbnail+'" /><div>'+t.title+"</div></a></div></td>"}),n+=" </tr></table>",n+="</div>"):(console.log("Could not render Discover block in section"),n)}}}),define("storymaps-react/tpl/view/media/FactoryViewer",["module","exports","./Text","./Image","./ImageGallery","./Video","./WebMap","./WebScene","./WebPage","./Empty","./Color","./Credits","storymaps/tpl/view/media/Discover"],function(e,t,n,i,r,o,a,s,l,u,c,d,p){"use strict";function f(e){return e&&e.__esModule?e:{"default":e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var m=f(n),v=f(i),g=f(r),y=f(o),b=f(a),_=f(s),w=f(l),C=f(u),E=f(c),x=f(d),T=f(p),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),P=function(){function e(){h(this,e)}return k(e,null,[{key:"getClasses",value:function(){return{Text:m["default"],Image:v["default"],ImageGallery:g["default"],Video:y["default"],WebMap:b["default"],WebScene:_["default"],WebPage:w["default"],Empty:C["default"],Color:E["default"],Credits:x["default"],Discover:T["default"]}}},{key:"createInstance",value:function(e,t){var n=this._parseMedia(e.type,e,t);if(n.setCache&&t&&n.setCache(t),e.alternate){var i=this._parseMedia(e.alternate,e,t);i.setCache&&t&&i.setCache(t),n.setAlternate(i)}return n}},{key:"_parseMedia",value:function(e,t){var n=null;if(e&&!t[e])return console.error("Invalid json for: ",t),n;var i=this.getClasses();return"text"==e?n=new i.Text(t.text):"image"==e?n=new i.Image(t.image):"image-gallery"==e?n=new i.ImageGallery(t["image-gallery"]):"video"==e?n=new i.Video(t.video):"webmap"==e?n=new i.WebMap(t.webmap):"webscene"==e?n=new i.WebScene(t.webscene):"webpage"==e?n=new i.WebPage(t.webpage):"color"==e?n=new i.Color(t.color):"credits"==e?n=new i.Credits(t.credits):"discover"==e?n=new i.Discover(t.discover):"empty"==e?n=new i.Empty(t.empty):console.error("Could not find corresponding media for: ",t),n}}]),e}();t["default"]=P,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/PanelInvite",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-invite-background"></div>\r\n<i class="builder-invite-open fa fa-cog" aria-hidden="true"></i>\r\n<i class="builder-invite-close fa fa-check" aria-hidden="true"></i>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/PanelConfig",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config">\r\n  <div class="config-main">\r\n    <ul class="builder-tabs"></ul>\r\n    <div class="config-content">\r\n      <div class="builder-active-tab"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/Panel",[],function(){}),define("storymaps-react/tpl/view/media/builder/Panel",["module","exports","lib-build/hbars!./PanelInvite","lib-build/hbars!./PanelConfig","lib-build/less!./Panel"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(t){o(this,e),t=t||{},t.containerInvite&&t.containerPanel&&t.tabs&&t.media&&t.onChange&&t.onAction&&(this._nodeInvite=t.containerInvite,this._nodePanel=t.containerPanel,this._tabs=t.tabs,this._media=t.media,this._onChange=t.onChange,this._onToggle=t.onToggle,this._onAction=t.onAction,this._closeBtnStyle=t.closeBtnStyle,this.selectedClass="selected",this._init())}return u(e,[{key:"_init",value:function(){var e=this;this._nodeInvite.removeClass("active").html((0,a["default"])({})),this._nodePanel.removeClass("active").html((0,s["default"])({})),this._nodeInvite.off("click").click(this._toggleConfigPanel.bind(this));for(var t=this._nodePanel.find(".builder-tabs"),n=0;n<this._tabs.length;n++){var i=this._tabs[n];t.append('<li class="tab'+(0===n?" selected":"")+'" data-tab="'+i.type+'">'+('<span class="config-tab-icon fa '+i.icon+'"></span>')+(""+i.title)+"</li>")}var r=t.find(".tab"),o=this;r.on("click",function(n){var i=$(n.currentTarget),a=i.data("tab"),s=t.find(".tab."+e.selectedClass).data("tab"),l=o._tabs.find(function(e){return a===e.type}),u=o._tabs.find(function(e){return s===e.type});r.removeClass(e.selectedClass),i.addClass(e.selectedClass),u&&o.destroyTab(u),l&&o.renderTab(l)})}},{key:"destroyTab",value:function(e){e.destroy()}},{key:"renderTab",value:function(e){var t=this._nodePanel.find(".builder-active-tab");t.html(e.render()),e.postCreate({container:t,media:this._media,onChange:this._onChange,onAction:this._onAction,rootNode:this._nodePanel})}},{key:"_toggleConfigPanel",value:function(e){var t=this,n=this._nodeInvite,i=this._nodePanel,r="active";if(i.hasClass(r)){var o=function(){if("light"==t._closeBtnStyle&&$(e.target).hasClass("builder-invite-background"))return{v:void 0};var n=t._nodePanel.find(".builder-tabs .tab."+t.selectedClass),i=n.data("tab"),r=t._tabs.find(function(e){return i===e.type});r&&t.destroyTab(r)}();if("object"===("undefined"==typeof o?"undefined":l(o)))return o.v}else!function(){var e=t._nodePanel.find(".builder-tabs .tab."+t.selectedClass),n=e.data("tab"),i=t._tabs.find(function(e){return n===e.type});i&&t.renderTab(i)}();i.toggleClass(r),n.toggleClass(r),this._onToggle&&this._onToggle()}}]),e}();t["default"]=c,e.exports=t["default"]}),define("storymaps-react/tpl/view/media/builder/Tab",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this.title="",this.selectedClass="selected",this._isActive=!1,this._options=t}return i(e,[{key:"onChange",value:function(){this._onChange()}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.container&&e.media&&e.onChange&&e.rootNode&&(this._isActive=!0,this._node=e.container,this._media=e.media,this._onChange=e.onChange,this._onAction=e.onAction,this._rootNode=e.rootNode)}},{key:"destroy",value:function(){this._isActive=!1}},{key:"setConfig",value:function(e,t){this._media.options[e]=t,this.onChange()}},{key:"setMedia",value:function(e,t){this._media[e]=t,this.onChange()}}]),e}();t["default"]=r,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabSize",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config-section">\r\n  <ul class="section-content horizontal">\r\n    <li class="config-item" data-type="size" data-value="small">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/small.png">\r\n      <span class="config-label">Small</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="medium">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/medium.png">\r\n      <span class="config-label">Medium</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="large">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/large.png">\r\n      <span class="config-label">Large</span>\r\n    </li>\r\n    <!--<li class="config-item" data-type="size" data-value="immersive">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/immersive.png">\r\n      <span class="config-label">Immersive...</span>\r\n    </li>-->\r\n  </ul>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/Common",[],function(){}),define("storymaps-react/tpl/view/media/builder/TabSize",["module","exports","./Tab","lib-build/hbars!./TabSize","lib-build/less!./Common"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);
}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},p=function(e){function t(){o(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e.title="Size",e.type="size",e.icon="fa-arrows-alt",e}return s(t,e),c(t,[{key:"render",value:function(){return(0,u["default"])({})}},{key:"postCreate",value:function(e){var n=this;d(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var i=this._media.options.size||"large",r=this._node.find('.config-item[data-type="size"]');this._node.find('.config-item[data-value="'+i+'"]').addClass(this.selectedClass),r.on("click",function(e){var t=$(e.currentTarget);n.setConfig("size",t.data("value")),r.removeClass(n.selectedClass),t.addClass(n.selectedClass)})}},{key:"destroy",value:function(){d(Object.getPrototypeOf(t.prototype),"destroy",this).call(this);var e=this._node.find('.config-item[data-type="size"]');e.off("click")}}]),t}(l["default"]);t["default"]=p,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabSizeImage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config-section">\r\n  <ul class="section-content horizontal">\r\n    <li class="config-item" data-type="size" data-value="small">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/small.png">\r\n      <span class="config-label">Small</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="medium">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/medium.png">\r\n      <span class="config-label">Medium</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="large">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/large.png">\r\n      <span class="config-label">Large</span>\r\n    </li>\r\n    <!--<li class="config-item" data-type="size" data-value="title">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/title.png">\r\n      <span class="config-label">Title</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="immersive">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/immersive.png">\r\n      <span class="config-label">Immersive...</span>\r\n    </li>-->\r\n  </ul>\r\n</div>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabSizeImage",["module","exports","./TabSize","lib-build/hbars!./TabSizeImage","lib-build/less!./Common"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).call(this))}return s(t,e),c(t,[{key:"render",value:function(){return(0,u["default"])({})}}]),t}(l["default"]);t["default"]=d,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageImage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config-section centered">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="swap">\r\n      <i class="config-icon fa fa-pencil"></i>\r\n      Change media\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section centered">\r\n  <div class="section-content button centered">\r\n    <div class="config-item button" data-action="remove">\r\n      <i class="config-icon fa fa-times-circle-o"></i>\r\n      Remove\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageImage",["module","exports","./Tab","lib-build/hbars!./TabManageImage"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},p=function(e){function t(e){o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.title="Manage",n.type="manage",n.icon="fa-wrench",n}return s(t,e),c(t,[{key:"postCreate",value:function(e){var n=this;d(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){this._onAction("remove")}.bind(this)),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){d(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click")}},{key:"render",value:function(){return(0,u["default"])({})}}]),t}(l["default"]);t["default"]=p,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/notification/Notification",[],function(){}),define("storymaps-react/tpl/builder/notification/Notification",["module","exports","storymaps/tpl/utils/UI","dojo/Deferred","lib-build/less!./Notification"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){o(this,e),this._id=a["default"].getUID(),this._container=$(".notification-container"),this._label=t.label,this._positionTop=t.positionTop,this._resultDeferred=null,this._node=null}return l(e,[{key:"display",value:function(){return this._resultDeferred=new s["default"],this._container&&this._label?(this._container.append(this.render()),this._node=$("#"+this._id),this.postCreate(),this._resultDeferred):(this._resultDeferred.reject(),this._resultDeferred)}},{key:"update",value:function(e){this._label=e.label,this._node&&(this._node.html(this.render()),this.postCreate())}}]),e}();t["default"]=u,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/builder/notification/Cancel",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'      <button class="btn btn-primary btn-sm btn-cancel">'+s((r=null!=(r=t.labelCancel||(null!=e?e.labelCancel:e))?r:a,typeof r===o?r.call(e,{name:"labelCancel",hash:{},data:i}):r))+"</button>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="builder-notification">\r\n  <div class="alert '+l((o=null!=(o=t.type||(null!=e?e.type:e))?o:s,typeof o===a?o.call(e,{name:"type",hash:{},data:i}):o))+' alert-dismissible" role="alert">\r\n    '+l((o=null!=(o=t.label||(null!=e?e.label:e))?o:s,typeof o===a?o.call(e,{name:"label",hash:{},data:i}):o))+"\r\n";return r=t["if"].call(e,null!=e?e.displayCancel:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(u+=r),u+'    <button type="button" class="close" data-dismiss="alert" aria-label="Close">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/builder/notification/Cancel",[],function(){}),define("storymaps-react/tpl/builder/notification/Cancel",["module","exports","./Notification","lib-build/hbars!./Cancel","lib-build/less!./Cancel"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:h(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},p=5e3,f=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n._type="start",n}return s(t,e),c(t,[{key:"render",value:function(){var e="alert-info";return"success"==this._type?e="alert-success":"error"==this._type&&(e="alert-danger"),(0,u["default"])({id:this._id,type:e,label:this._label,displayCancel:"start"==this._type,labelCancel:"Cancel"})}},{key:"update",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._type=e.type,d(Object.getPrototypeOf(t.prototype),"update",this).call(this,e)}},{key:"postCreate",value:function(){this._initEvents()}},{key:"_initEvents",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.delay||p;"start"!=this._type&&setTimeout(function(){this._node.remove(),this._resultDeferred.reject()}.bind(this),t),this._node.find(".btn-cancel").click(function(){this._node.remove(),this._resultDeferred.resolve()}.bind(this))}}]),t}(l["default"]);t["default"]=f,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/media/ImageBuilder",[],function(){}),define("storymaps-react/tpl/view/media/ImageBuilder",["module","exports","./Image","./builder/Panel","./builder/TabSizeImage","./builder/TabManageImage","../../builder/notification/Cancel","dojo/_base/lang","dojo/topic","lib-build/less!./ImageBuilder"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),y=u(s),b=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function E(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:E(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},C=function(e){function t(e){c(this,t);var n=d(this,Object.getPrototypeOf(t).call(this,e));return n._uploadNotification=null,n}return p(t,e),_(t,[{key:"postCreate",value:function(e){if(w(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._image.isPlaceholder)this._node.find(".media-cfg-invite").hide();else{var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._builderConfigurationTabs[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"size"==l?n.push(new m["default"]):"appearance"==l||"manage"==l&&n.push(new v["default"]({hideRemove:"background"==this._placement}))}}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}new h["default"]({containerPanel:this._node.find(".media-cfg-panel"),containerInvite:this._node.find(".media-cfg-invite"),tabs:n,media:this._image,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){e.onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"}),this._node.find(".img-gallery-invite").click(this._onCreateImageGallery.bind(this)),this._node.find(".img-gallery-add").tooltip({container:"body",title:i18n.builder.imageGallery.addImage})}}},{key:"serialize",value:function(){return this._image.uploadDeferred&&delete this._image.uploadDeferred,this._node&&(this._image.caption=this._node.find(".block-caption").html()),y["default"].clone({type:"image",image:this._image})}},{key:"_onConfigChange",value:function(){this._applyConfig(),w(Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}},{key:"_onUploadStart",value:function(){this._uploadNotification=new g["default"]({container:this._node.parents(".section").eq(0),label:"Image upload in progress..."}),this._node.find(".img-gallery-invite").addClass("disabled"),this._uploadNotification.display().then(function(){this._onAction("remove")}.bind(this),function(){})}},{key:"_onUploadSuccess",value:function(e){this._image.url=e.url,this._url=e.url,this._uploadNotification&&this._uploadNotification.update({type:"success",label:"Image uploaded successfully"}),this._isLoaded=!1,this.load(),b["default"].publish("builder-media-update"),this._node.find(".img-gallery-invite").removeClass("disabled")}},{key:"_onUploadFail",value:function(){this._uploadNotification&&this._uploadNotification.update({type:"error",label:"Image upload failed"}),"block"==this._placement?this._onAction("remove"):this._onAction("swap",{type:"empty",empty:"empty"})}},{key:"_onCreateImageGallery",value:function(){this._onAction("image-to-image-gallery")}}]),t}(f["default"]);t["default"]=C,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/media/ImageGalleryBuilder",[],function(){}),define("storymaps-react/tpl/view/media/ImageGalleryBuilder",["module","exports","./Media","./ImageGallery","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","../../builder/notification/Cancel","dojo/_base/lang","dojo/topic","lib-build/less!./ImageGalleryBuilder"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_=function(e){function t(e){u(this,t);var n=c(this,Object.getPrototypeOf(t).call(this,e));return n.MAX_NUMBER_IMAGES=4,n}return d(t,e),y(t,[{key:"postCreate",value:function(e){if(b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),2==this._images.images.length){var n=this._images.images[1];n.dataUrl&&n.uploadDeferred&&this._addImageAtIndex(n,1)}this._updateTooltip()}},{key:"getPreviewThumbnail",value:function(){return this._images.images&&this._images.images.length?this._images.images[0].url:null}},{key:"addEditEvent",value:function(){var e=this;this._node.find(".ig-settings").off("click").on("click",function(t){var n=$(t.currentTarget).closest(".image-gallery-item"),i=n.data("index");e._openMediaPickerForIndex(i)})}},{key:"addAddEvent",value:function(){var e=this;this._node.find(".ig-add").off("click").on("click",function(t){var n=e._images.images.length,i=$(t.currentTarget);i.hasClass("disabled")||e._openMediaPickerForIndex(n)})}},{key:"_openMediaPickerForIndex",value:function(e){var t=this;app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(n){"image"===n.type&&t._addImageAtIndex(n.image,e)},function(){})}},{key:"_addImageAtIndex",value:function(e,t){var n=e.url;e.dataUrl&&e.uploadDeferred?(e.uploadDeferred.then(function(e){this._onUploadSuccess(e.url,t)}.bind(this),function(){this._onUploadFail(t)}.bind(this)),this._images.images[t]={url:n,dataUrl:e.dataUrl},this._update(),this._onUploadStart(t)):this._loadImage(n,t)}},{key:"_loadImage",value:function(e,t){var n=this,i=new window.Image;i.onload=function(i){var r=i.currentTarget.naturalWidth,o=i.currentTarget.naturalHeight;r&&o&&(n._images.images[t]={height:o,width:r,url:e},n._update())},i.src=p["default"].addToken(e)}},{key:"_onUploadStart",value:function(e){this._uploadNotification=new m["default"]({label:"Image upload in progress..."}),this._uploadNotification.display().then(function(){this._images.images.splice(e,1),this._update()}.bind(this),function(){})}},{key:"_onUploadSuccess",value:function(e,t){this._uploadNotification&&this._uploadNotification.update({type:"success",label:"Image uploaded successfully"}),g["default"].publish("builder-media-update"),this._loadImage(e,t)}},{key:"_onUploadFail",value:function(e){this._uploadNotification&&this._uploadNotification.update({type:"error",label:"Image upload failed"}),this._images.images.splice(e,1),this._update()}},{key:"addRemoveEvent",value:function(){var e=this;this._node.find(".ig-remove").off("click").on("click",function(t){if(2==e._images.images.length)return void e._onAction("image-gallery-to-image");var n=$(t.currentTarget).closest(".image-gallery-item"),i=n.data("index");e._images.images.splice(i,1),e._update()})}},{key:"_update",value:function(){b(Object.getPrototypeOf(t.prototype),"_update",this).call(this),this._updateTooltip()}},{key:"_updateTooltip",value:function(){var e=this._node.find(".ig-add");this._images.images.length===this.MAX_NUMBER_IMAGES?(e.addClass("disabled"),e.tooltip({container:"body",title:h["default"].builder.imageGallery.reachedLimit})):(e.removeClass("disabled"),e.tooltip({container:"body",title:h["default"].builder.imageGallery.addImage}))}},{key:"load",value:function(){var e=this;b(Object.getPrototypeOf(t.prototype),"load",this).call(this),this._node.find(".image-gallery-image-link").on("click",function(){e._node.find(".builder-ui.ig-item").addClass("hidden")}),this._node.find(".image-gallery-item-wrapper").hover(function(e){$(e.target).closest(".ig-add").length||$(e.currentTarget).find(".builder-ui.ig-item").removeClass("hidden")},function(e){$(e.currentTarget).find(".builder-ui.ig-item").addClass("hidden")}),this.addRemoveEvent(),this.addEditEvent(),this.addAddEvent()}},{key:"serialize",value:function(){this._node&&(this._images.caption=this._node.find(".block-caption").html());var e=!0,t=!1,n=void 0;try{for(var i,r=this._images.images[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;delete o.dataUrl,delete o.adjustedHeight}}catch(a){t=!0,n=a}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw n}}return v["default"].clone({type:"image-gallery","image-gallery":this._images})}}]),t}(f["default"]);t["default"]=_,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabVideo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<!--\r\n<div class="builder-config-section larger">\r\n  <h4 class="title">Play</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item" data-type="play" data-value="automatic">Play Automatically</li>\r\n    <li class="config-item" data-type="play" data-value="click">Play on Click</li>\r\n  </ul>\r\n</div>\r\n-->\r\n<div class="builder-config-section">\r\n  <h4 class="title">Audio</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item" data-type="audio" data-value="on">On</li>\r\n    <li class="config-item" data-type="audio" data-value="muted">Muted</li>\r\n  </ul>\r\n  <span class="aside">The video will autoplay when a reader arrives at this view. If you mute the sound, the reader will not be able to enable it.</span>\r\n</div>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabVideo",["module","exports","./Tab","lib-build/hbars!./TabVideo"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},p=function(e){function t(){o(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e.title="Appearance",e.type="appearance",e.icon="fa-sliders",e}return s(t,e),c(t,[{key:"render",value:function(){return(0,u["default"])({})}},{key:"postCreate",value:function(e){d(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindPlayOptions(),this.bindAudioOptions()}},{key:"bindPlayOptions",value:function(){var e=this,t=this._node.find('.config-item[data-type="play"]'),n=this._media.play||"automatic";this._node.find('.config-item[data-type="play"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("play",r)})}},{key:"bindAudioOptions",value:function(){var e=this,t=this._node.find('.config-item[data-type="audio"]'),n=this._media.options&&this._media.options.audio||"on";this._node.find('.config-item[data-type="audio"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("audio",r)})}},{key:"unbindPlayOptions",value:function(){var e=this._node.find('.config-item[data-type="play"]');e.off("click")}},{key:"unbindAudioOptions",value:function(){var e=this._node.find('.config-item[data-type="audio"]');e.off("click")}},{key:"destroy",value:function(){d(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindPlayOptions(),this.unbindAudioOptions()}}]),t}(l["default"]);t["default"]=p,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageMedia",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<!--<div class="builder-config-section centered">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="upload-image">\r\n      Upload Alternate Image for Mobile\r\n    </div>\r\n    <div class="image-preview">\r\n      <div class="overlay">\r\n        <span class="icon">Edit</span>\r\n        <span class="icon">Remove</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>-->\r\n<div class="builder-config-section centered">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="swap">\r\n      <i class="config-icon fa fa-pencil"></i>\r\n      Change media\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section centered">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="remove">\r\n      <i class="config-icon fa fa-times-circle-o"></i>\r\n      Remove\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageMedia",["module","exports","./Tab","lib-build/hbars!./TabManageMedia"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},p=function(e){function t(e){o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.title="Manage",n.type="manage",n.icon="fa-wrench",n}return s(t,e),c(t,[{key:"render",value:function(){return(0,u["default"])({})}},{key:"postCreate",value:function(e){var n=this;d(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){d(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click")}}]),t}(l["default"]);t["default"]=p,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/media/VideoBuilder",[],function(){}),define("storymaps-react/tpl/view/media/VideoBuilder",["module","exports","./Video","./builder/Panel","./builder/TabSizeImage","./builder/TabVideo","./builder/TabManageMedia","dojo/_base/lang","lib-build/less!./VideoBuilder"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_=function(e){function t(){return u(this,t),c(this,Object.getPrototypeOf(t).apply(this,arguments))}return d(t,e),y(t,[{key:"render",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return"block"==e.placement&&this._video.title&&(this._video.caption=this._video.title),
delete this._video.title,delete this._video.description,b(Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._builderConfigurationTabs[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"size"==l?n.push(new h["default"]):"appearance"==l?"immersive"==this._sectionType&&n.push(new m["default"]):"manage"==l&&n.push(new v["default"]({hideRemove:"background"==this._placement}))}}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}new f["default"]({containerPanel:this._node.find(".media-cfg-panel"),containerInvite:this._node.find(".media-cfg-invite"),tabs:n,media:this._video,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){e.onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"serialize",value:function(){return delete this._video.user,delete this._video.thumbUrl,delete this._video.viewCount,delete this._video.likeCount,this._node&&(this._video.caption=this._node.find(".block-caption").html()),g["default"].clone({type:"video",video:this._video})}},{key:"_onConfigChange",value:function(){console.log("onConfigChange: ",this._video),this._applyConfig(),b(Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(p["default"]);t["default"]=_,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<!--<div class="builder-config-section">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="upload-image">\r\n      Upload Alternate Image for Mobile\r\n    </div>\r\n    <div class="image-preview">\r\n      <div class="overlay">\r\n        <span class="icon">Edit</span>\r\n        <span class="icon">Remove</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>-->\r\n<div class="builder-config-section">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="swap">\r\n      <i class="config-icon fa fa-pencil"></i>\r\n      Change media\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section larger">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="edit">\r\n      <i class="config-icon fa fa-external-link"></i>\r\n      Edit\r\n    </div>\r\n  </div>\r\n  <span class="aside">Opens in a new browser tab. After saving your edits, save and reload this story to see your changes.</span>\r\n</div>\r\n<div class="builder-config-section">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="remove">\r\n      <i class="config-icon fa fa-times-circle-o"></i>\r\n      Remove\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("storymaps/common/builder/BuilderHelper",["dojo/_base/lang","dojo/_base/array","esri/arcgis/utils","esri/IdentityManager","esri/request"],function(e,t,n,i,r){function o(){return n.arcgisUrl.split("/sharing/")[0]}function a(t){var n=o(),a=e.clone(app.data.appItem.item),s=e.clone(app.data.appItem.data),l=a.owner||i.findCredential(n).userId,u=i.findCredential(n).token;delete a.avgRating,delete a.modified,delete a.numComments,delete a.numRatings,delete a.numViews,delete a.size,a.typeKeywords||(a.typeKeywords=[]),a.typeKeywords=a.typeKeywords.concat(app.cfg.WEBAPP_KEYWORD_APP),a.typeKeywords=a.typeKeywords.concat(app.cfg.WEBAPP_KEYWORD_GENERIC);var c=$.map(app.cfg.LAYOUTS,function(e){return"layout-"+e.id});a.typeKeywords=$.grep(a.typeKeywords,function(e){return-1==$.inArray(e,c)}),a.typeKeywords.push("layout-cascade-1"),a.typeKeywords=$.grep(a.typeKeywords,function(e,t){return t==$.inArray(e,a.typeKeywords)}),a.tags=a.tags?a.tags.join(","):"",a.typeKeywords=a.typeKeywords.join(","),a.serviceProxyParams=JSON.stringify(a.serviceProxyParams),t||(a.title=app.data.title),a.properties&&(a.properties=JSON.stringify(a.properties)),a.url&&a.url.match(/apps\/[a-zA-Z]+\/\?appid=/)&&(a.url=a.url.replace("/?appid=","/index.html?appid=")),a=e.mixin(a,{f:"json",token:u,overwrite:!0,text:JSON.stringify(s)});var d=n+"/sharing/content/users/"+l+(a.ownerFolder?"/"+a.ownerFolder:"");return d+=a.id?"/items/"+a.id+"/update":"/addItem",r({url:d,handleAs:"json",content:a},{usePost:!0})}function s(e,t){var n=o(),a=i.findCredential(n).userId,s=i.findCredential(n).token,l={f:"json",token:s,items:e,groups:"",everyone:!1,account:!1};return"public"==t?l.everyone=!0:"account"==t&&(l.account=!0),r({url:n+"/sharing/content/users/"+a+"/shareItems",handleAs:"json",content:l},{usePost:!0})}function l(){return app.portal?void 0:void console.error("Fatal error - not signed in")}function u(){return{itemType:"text",guid:null,name:null,type:"Web Mapping Application",typeKeywords:app.cfg.WEBAPP_KEYWORD_GENERIC.concat(app.cfg.WEBAPP_KEYWORD_APP),description:null,tags:app.cfg.WEBAPP_TAG,snippet:null,thumbnail:null,documentation:null,extent:[],lastModified:-1,spatialReference:null,accessInformation:null,licenseInfo:null,culture:"en-us",properties:null,size:1,appCategories:[],industries:[],languages:[],largeThumbnail:null,banner:null,screenshots:[],listed:!1,ownerFolder:null,"protected":!1,commentsEnabled:!0,numComments:0,numRatings:0,avgRating:0,numViews:1}}function c(e){return this.getPortalURL()+"/home/webmap/viewer.html?webmap="+e}function d(e){return this.getPortalURL()+"/home/webscene/viewer.html?webscene="+e}return{getPortalURL:o,saveApp:a,shareItems:s,getBlankAppJSON:u,cleanApp:l,getMapViewerLink:c,getSceneViewerLink:d}}),define("storymaps-react/tpl/view/media/builder/TabManage",["module","exports","./Tab","lib-build/hbars!./TabManage","storymaps/common/builder/BuilderHelper"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},h=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a(this,t);var n=s(this,Object.getPrototypeOf(t).call(this,e));return n.title="Manage",n.type="manage",n.icon="fa-wrench",n._mediaType=e.mediaType,n._mediaId=e.mediaId,n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c["default"])({})}},{key:"postCreate",value:function(e){var n=this;f(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find('.config-item[data-action="edit"]').on("click",function(){n._mediaType&&n._mediaId&&("webmap"==n._mediaType?window.open(d["default"].getMapViewerLink(n._mediaId),"_blank"):"webscene"==n._mediaType&&window.open(d["default"].getSceneViewerLink(n._mediaId),"_blank"))}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){f(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="edit"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click")}}]),t}(u["default"]);t["default"]=h,e.exports=t["default"]}),define("storymaps-react/tpl/view/media/builder/TabArcGIS",["module","exports","./Tab"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},c=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.title="Appearance",e.type="appearance",e.icon="fa-sliders",e}return a(t,e),l(t,[{key:"postCreate",value:function(e){u(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindPopup(),this.bindInteraction(),this.bindView(),this.bindExtras()}},{key:"bindPopup",value:function(){var e=this,t=this._node.find('.config-item[data-type="popup"]'),n=this._media.popup||!0,i=n?"enabled":"disabled";this._node.find('.config-item[data-type="popup"][data-value="'+i+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r="enabled"===i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setMedia("popup",r)})}},{key:"unbindPopup",value:function(){var e=this._node.find('.config-item[data-type="popup"]');e.off("click")}},{key:"bindInteraction",value:function(){var e=this,t=this._node.find('.config-item[data-type="interaction"]'),n=this._media.options.interaction||"enabled";this._node.find('.config-item[data-type="interaction"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("interaction",r)})}},{key:"unbindInteraction",value:function(){var e=this._node.find('.config-item[data-type="interaction"]');e.off("click")}},{key:"bindView",value:function(){}},{key:"unbindView",value:function(){}},{key:"bindExtras",value:function(){var e=this._node.find('.config-item[data-type="extra"]'),t=!1,n=!1,i=!1;this._media.extras&&(t=this._media.extras.legend&&this._media.extras.legend.enabled,n=this._media.extras.search&&this._media.extras.search.enabled,i=this._media.extras.locate&&this._media.extras.locate.enabled),this._node.find('.config-item[data-type="extra"][data-value="legend"] input[type="checkbox"]').prop("checked",t),this._node.find('.config-item[data-type="extra"][data-value="search"] input[type="checkbox"]').prop("checked",n),this._node.find('.config-item[data-type="extra"][data-value="locate"] input[type="checkbox"]').prop("checked",i);var r=this;e.on("click",function(e){var t=$(e.currentTarget),n=t.data("value"),i=t.find('input[type="checkbox"]').is(":checked");r.setExtras(n,i)})}},{key:"unbindExtras",value:function(){var e=this._node.find('.config-item[data-type="extra"]');e.off("click")}},{key:"setExtras",value:function(e,t){this._media.extras||(this._media.extras={}),this._media.extras[e]||(this._media.extras[e]={}),this._media.extras[e].enabled=t,this.onChange()}},{key:"destroy",value:function(){u(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindPopup(),this.unbindInteraction(),this.unbindView(),this.unbindExtras()}}]),t}(s["default"]);t["default"]=c,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebMap",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config-section">\r\n  <h4 class="title">View</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item disabled" data-type="reset" data-value="location">Reset Location</li>\r\n    <li class="config-item disabled" data-type="reset" data-value="layers">Reset Layers</li>\r\n    <li class="config-item disabled" data-type="reset" data-value="popup">Clear Pop-Up</li>\r\n  </ul>\r\n</div>\r\n<div class="builder-config-section larger">\r\n  <h4 class="title">Interaction</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item" data-type="interaction" data-value="disabled">Interaction Disabled</li>\r\n    <li class="config-item" data-type="interaction" data-value="button">Button to Enable</li>\r\n    <li class="config-item" data-type="interaction" data-value="enabled">Interaction Enabled <sup style="vertical-align: 0;">*</sup></li>\r\n  </ul>\r\n  <span class="aside">*Touch devices will show an interaction button.</span>\r\n</div>\r\n<!--<div class="builder-config-section">\r\n  <h4 class="title">Pop-Ups</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item" data-type="popup" data-value="disabled">Disabled</li>\r\n    <li class="config-item" data-type="popup" data-value="enabled">Enabled</li>\r\n  </ul>\r\n</div>\r\n<div class="builder-config-section">\r\n  <h4 class="title">Extras</h4>\r\n  <ul class="section-content vertical-list checkmarks">\r\n    <li class="config-item" data-type="extra" data-value="legend">\r\n      <label class="check"><input type="checkbox" value="legend"> Legend</label>\r\n    </li>\r\n    <li class="config-item" data-type="extra" data-value="search">\r\n      <label class="check"><input type="checkbox" value="search"> Search</label>\r\n    </li>\r\n    <li class="config-item" data-type="extra" data-value="locate">\r\n      <label class="check"><input type="checkbox" value="locate"> Locate</label>\r\n    </li>\r\n  </ul>\r\n</div>-->\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebMap",["module","exports","./TabArcGIS","esri/dijit/LayerList","esri/arcgis/utils","lib-build/hbars!./TabWebMap"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},v=function(e){function t(e){s(this,t);var n=l(this,Object.getPrototypeOf(t).call(this));return n.map=e.map,n.layerList=null,n._layerListNode=e.layerListNode,n._eventExtent=null,n._eventPopup=null,n._ignoreNextExtentChangeEvent=!1,n._isFirstOpening=!0,n}return u(t,e),h(t,[{key:"setMap",value:function(e){e&&(this.map=e),this.attachEvents(),this._node&&this.initLayerList()}},{key:"attachEvents",value:function(){this._media&&this.map&&(this._eventExtent||(this._eventExtent=this.map.map.on("extent-change",function(e){this._isActive&&(this._ignoreNextExtentChangeEvent?this._ignoreNextExtentChangeEvent=!1:(this._ignoreNextExtentChangeEvent=!0,this.setMedia("extent",e.extent.toJson()),this._updateLocationReset()))}.bind(this))),this._eventPopup||(this._eventPopup=this.map.map.on("click",function(){if(this._isActive){var e=this.getSelectedFeatureInfo();if(e){var t="disabled",n=this._node.find('.config-item[data-type="reset"][data-value="popup"]');n.removeClass(t),this.setMedia("popup",e)}}}.bind(this))))}},{key:"detachEvents",value:function(){this._eventExtent&&(this._eventExtent.remove(),this._eventExtent=null),this._eventPopup&&(this._eventPopup.remove(),this._eventPopup=null)}},{key:"initLayerList",value:function(){var e=this;if(!this.layerList&&this._rootNode&&this._media&&this.map){this._layerListNode.html('<div class="layer-list"></div>');var t=this._layerListNode.find(".layer-list")[0],n="disabled",i=this._node.find('.config-item[data-type="reset"][data-value="layers"]'),r=p["default"].getLayerList(this.map);if(this._media.layers)for(var o=function(t){var n=e._media.layers[t],i=r.find(function(e){var t=e.id;return e.layer&&e.layer.id&&(t=e.layer.id),e.featureCollection&&(t=e.featureCollection.layers[0].id),n.id===t});i&&(i.visibility=n.visibility)},a=0;a<this._media.layers.length;a++)o(a);this.layerList=new d["default"]({map:this.map.map,layers:r,showSubLayers:!1},t),this.layerList.startup(),this._media.layers&&this._media.layers.length>0&&i.removeClass(n);var s=this;this.layerList.on("toggle",function(t){if(e._isActive){e._media.layers||(e._media.layers=[]);var r=s.layerList.layers[t.layerIndex],o=s._media.layers.findIndex(function(e){var t=r.id;return e.layer&&e.layer.id&&(t=e.layer.id),r.featureCollection&&(t=r.featureCollection.layers[0].id),e.id===t});if(-1!==o)s._media.layers.splice(o,1);else{var a=r.id;r.layer&&r.layer.id&&(a=r.layer.id),r.featureCollection&&(a=r.featureCollection.layers[0].id),s._media.layers.push({id:a,visibility:r.visibility})}e.onChange(),s._media.layers.length>0?i.removeClass(n):i.addClass(n)}})}}},{key:"postCreate",value:function(e){var n=this;e.container.parents(".section-immersive").length?this._ignoreNextExtentChangeEvent=!0:this._ignoreNextExtentChangeEvent=!this._isFirstOpening,this._isFirstOpening=!1,m(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.map&&this.initLayerList();var i="disabled",r=this._node.find('.config-item[data-type="reset"][data-value="location"]'),o=this._node.find('.config-item[data-type="reset"][data-value="popup"]'),a=this._node.find('.config-item[data-type="reset"][data-value="layers"]');this._media.popup&&o.removeClass(i),r.on("click",function(){n.detachEvents(),n.setMedia("extent",null),n._updateLocationReset()}),o.on("click",function(){o.addClass(i),n.setMedia("popup",null)}),a.on("click",function(){n.layerList.destroy(),n.layerList=null,a.addClass(i),n._ignoreNextExtentChangeEvent=!0,n.setMedia("layers",[])}),this._updateLocationReset(),this.attachEvents()}},{key:"_updateLocationReset",value:function(){var e=this._node.find('.config-item[data-type="reset"][data-value="location"]');e.toggleClass("disabled",!this._media.extent)}},{key:"destroy",value:function(){m(Object.getPrototypeOf(t.prototype),"destroy",this).call(this);var e=this._node.find('.config-item[data-type="reset"][data-value="location"]');e.off("click"),this.layerList&&(this.layerList.destroy(),this.layerList=null)}},{key:"render",value:function(){return(0,f["default"])({})}},{key:"getSelectedFeatureInfo",value:function(){var e=this.map.map.infoWindow.getSelectedFeature();if(!e)return null;var t=e.getLayer(),n=t.fields;if(!n)return null;var i=$.grep(n,function(e){return"esriFieldTypeOID"===e.type});if(t&&n&&!i.length&&(i=$.grep(n,function(e){return"OBJECTID"===e.name||"FID"===e.name}),i.length||(i=$.grep(n,function(e){return"esriFieldTypeInteger"===e.type}))),i.length){var r=i[0].name;return{layerId:t.id,fieldName:r,fieldValue:e.attributes[r],anchorPoint:this.map.map.infoWindow.location.toJson()}}return null}}]),t}(c["default"]);t["default"]=v,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/media/WebMapBuilder",[],function(){}),define("storymaps-react/tpl/view/media/WebMapBuilder",["module","exports","./WebMap","./builder/Panel","./builder/TabSize","./builder/TabManage","./builder/TabWebMap","dojo/_base/lang","lib-build/less!./WebMapBuilder"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_=function(e){function t(e){u(this,t);var n=c(this,Object.getPrototypeOf(t).call(this,e));return n._configTabWebMap=null,n._isMultiViewSection=!1,n._onToggleMediaConfig=null,n}return d(t,e),y(t,[{key:"postCreate",value:function(e){b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,e.delayBuilderInit||this._initConfigPanel()}},{key:"performAction",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return e.performBuilderInit&&this._initConfigPanel(),b(Object.getPrototypeOf(t.prototype),"performAction",this).call(this,e)}},{key:"serialize",value:function(){return this._node&&(this._webmap.caption=this._node.find(".block-caption").html()),g["default"].clone({type:"webmap",webmap:this._webmap})}},{key:"_initConfigPanel",value:function(){var e=[];this._configTabWebMap=new v["default"]({map:this._cache[this.id],layerListNode:this._node.find(".layer-list-container")});var t=!0,n=!1,i=void 0;try{for(var r,o=this._builderConfigurationTabs[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;"size"==a?e.push(new h["default"]):"appearance"==a?e.push(this._configTabWebMap):"manage"==a&&e.push(new m["default"]({hideRemove:"background"==this._placement,mediaType:"webmap",mediaId:this.id}))}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}new f["default"]({containerPanel:this._node.find(".media-cfg-panel"),containerInvite:this._node.find(".media-cfg-invite"),tabs:e,media:this._webmap,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this),this._node.hasClass("builder-config-open")&&this.performAction({forceSetExtent:!0})}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"_onWebMapLoaded",value:function(){this._configTabWebMap&&this._configTabWebMap.setMap(this._cache[this.id])}},{key:"_onConfigChange",value:function(){this._applyConfig(),this._webmap.layers&&0!=this._webmap.layers.length||this._configTabWebMap.initLayerList(),b(Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(p["default"]);t["default"]=_,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageScene",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config-section">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="swap">\r\n      <i class="config-icon fa fa-pencil"></i>\r\n      Change media\r\n    </div>\r\n    <div class="image-preview">\r\n      <div class="overlay">\r\n        <span class="icon">Edit</span>\r\n        <span class="icon">Remove</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section larger">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="edit">\r\n      <i class="config-icon fa fa-external-link"></i>\r\n      Edit\r\n    </div>\r\n  </div>\r\n  <span class="aside">Opens in a new browser tab. After saving your edits, save and reload this story to see your changes.</span>\r\n</div>\r\n<div class="builder-config-section">\r\n  <div class="section-content button">\r\n    <div class="config-item button" data-action="remove">\r\n      <i class="config-icon fa fa-times-circle-o"></i>\r\n      Remove\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageScene",["module","exports","./Tab","lib-build/hbars!./TabManageScene","storymaps/common/builder/BuilderHelper"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},h=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a(this,t);var n=s(this,Object.getPrototypeOf(t).call(this,e));return n.title="Manage",n.type="manage",n.icon="fa-wrench",n._mediaType=e.mediaType,n._mediaId=e.mediaId,n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c["default"])({})}},{key:"postCreate",value:function(e){var n=this;f(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find('.config-item[data-action="edit"]').on("click",function(){n._mediaType&&n._mediaId&&("webmap"==n._mediaType?window.open(d["default"].getMapViewerLink(n._mediaId),"_blank"):"webscene"==n._mediaType&&window.open(d["default"].getSceneViewerLink(n._mediaId),"_blank"))}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){f(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="edit"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click")}}]),t}(u["default"]);t["default"]=h,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebScene",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config-section">\r\n  <h4 class="title">Slide</h4>\r\n  <select class="section-content" name="slides"></select>\r\n  <div class="section-content no-slides">\r\n    <span class="">No slides available.</span>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section larger">\r\n  <h4 class="title">Interaction</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item" data-type="interaction" data-value="disabled">Interaction Disabled</li>\r\n    <li class="config-item" data-type="interaction" data-value="button">Button to Enable</li>\r\n    <li class="config-item" data-type="interaction" data-value="enabled">Interaction Enabled <sup style="vertical-align: 0;">*</sup></li>\r\n  </ul>\r\n  <span class="aside">*Touch devices will show an interaction button.</span>\r\n</div>\r\n<!--\r\n<div class="builder-config-section">\r\n  <h4 class="title">Pop-Ups</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item" data-type="popup" data-value="disabled">Disabled</li>\r\n    <li class="config-item" data-type="popup" data-value="enabled">Enabled</li>\r\n  </ul>\r\n</div>\r\n<div class="builder-config-section">\r\n  <h4 class="title">Extras</h4>\r\n  <ul class="section-content vertical-list checkmarks">\r\n    <li class="config-item" data-type="extra" data-value="legend">\r\n      <label class="check"><input type="checkbox" value="legend"> Legend</label>\r\n    </li>\r\n    <li class="config-item" data-type="extra" data-value="search">\r\n      <label class="check"><input type="checkbox" value="search"> Search</label>\r\n    </li>\r\n    <li class="config-item" data-type="extra" data-value="locate">\r\n      <label class="check"><input type="checkbox" value="locate"> Locate</label>\r\n    </li>\r\n  </ul>\r\n</div>\r\n-->\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebScene",["module","exports","./TabArcGIS","lib-build/i18n!./../../../../../resources/tpl/builder/nls/app","lib-build/hbars!./TabWebScene"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0
}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},h=function(e){function t(e){a(this,t);var n=s(this,Object.getPrototypeOf(t).call(this));return n.scene=e.scene,n}return l(t,e),p(t,[{key:"setScene",value:function(e){this.scene=e,this._node&&this.renderSceneSection()}},{key:"renderSceneSection",value:function(){var e=this,t=this.scene.scene,n=this._node.find('.section-content[name="slides"]'),i=this._node.find(".section-content.no-slides");if(t.presentation&&t.presentation.slides&&t.presentation.slides.items&&t.presentation.slides.items.length>0){var r=t.presentation.slides.items;i.hide(),n.show(),n.append('<option class="config-item" data-type="slides" value="-1">'+c["default"].builder.mediaConfig.homeView+"</option>");for(var o=0;o<r.length;o++)n.append('<option class="config-item" data-type="slides" value="'+o+'">'+r[o].title.text+"</option>");this._media.slide>=0&&n.val(this._media.slide),n.on("change",function(t){var n=$(t.currentTarget).val(),i=parseInt(n,10);isNaN(i)||e.setMedia("slide",i)})}else n.hide(),i.show()}},{key:"attachEvents",value:function(){!this._media}},{key:"postCreate",value:function(e){f(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.scene&&this.renderSceneSection()}},{key:"destroy",value:function(){f(Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return(0,d["default"])({})}}]),t}(u["default"]);t["default"]=h,e.exports=t["default"]}),define("storymaps-react/tpl/view/media/WebSceneBuilder",["module","exports","./WebScene","./builder/Panel","./builder/TabSize","./builder/TabManageScene","./builder/TabWebScene","dojo/_base/lang"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_=function(e){function t(e){u(this,t);var n=c(this,Object.getPrototypeOf(t).call(this,e));return n._configTabWebScene=null,n._onToggleMediaConfig=null,n}return d(t,e),y(t,[{key:"postCreate",value:function(e){b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,e.delayBuilderInit||this._initConfigPanel()}},{key:"performAction",value:function(e){return e.performBuilderInit&&this._initConfigPanel(),b(Object.getPrototypeOf(t.prototype),"performAction",this).call(this,e)}},{key:"serialize",value:function(){return this._node&&(this._webscene.caption=this._node.find(".block-caption").html()),g["default"].clone({type:"webscene",webscene:this._webscene})}},{key:"_initConfigPanel",value:function(){var e=[];this._configTabWebScene=new v["default"]({scene:this._cache[this.id]});var t=!0,n=!1,i=void 0;try{for(var r,o=this._builderConfigurationTabs[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;"size"==a?e.push(new h["default"]):"appearance"==a?e.push(this._configTabWebScene):"manage"==a&&e.push(new m["default"]({hideRemove:"background"==this._placement,mediaType:"webscene",mediaId:this.id}))}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}new f["default"]({containerPanel:this._node.find(".media-cfg-panel"),containerInvite:this._node.find(".media-cfg-invite"),tabs:e,media:this._webscene,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"_onWebSceneLoaded",value:function(){this._initConfigPanel(),this._configTabWebScene.setScene(this._cache[this.id])}},{key:"_onConfigChange",value:function(){console.log("onConfigChange: ",this._webscene),this._applyConfig(),b(Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(p["default"]);t["default"]=_,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebPage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config-section no-spread">\r\n  <h4 class="title">Interaction</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item" data-type="interaction" data-value="disabled">Interaction Disabled</li>\r\n    <li class="config-item" data-type="interaction" data-value="button">Button to Enable</li>\r\n    <li class="config-item" data-type="interaction" data-value="enabled">Interaction Enabled <sup style="vertical-align: 0;">*</sup></li>\r\n  </ul>\r\n  <span class="aside">*Touch devices will show an interaction button.</span>\r\n</div>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebPage",["module","exports","./Tab","lib-build/hbars!./TabWebPage"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},p=function(e){function t(){o(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e.title="Appearance",e.type="appearance",e.icon="fa-sliders",e}return s(t,e),c(t,[{key:"render",value:function(){return(0,u["default"])({})}},{key:"postCreate",value:function(e){d(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindInteraction()}},{key:"bindInteraction",value:function(){var e=this,t=this._node.find('.config-item[data-type="interaction"]'),n=this._media.options.interaction||"enabled";this._node.find('.config-item[data-type="interaction"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("interaction",r)})}},{key:"unbindInteraction",value:function(){var e=this._node.find('.config-item[data-type="interaction"]');e.off("click")}},{key:"destroy",value:function(){d(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindInteraction()}}]),t}(l["default"]);t["default"]=p,e.exports=t["default"]}),define("storymaps-react/tpl/view/media/WebPageBuilder",["module","exports","./WebPage","./builder/Panel","./builder/TabSize","./builder/TabManageMedia","./builder/TabWebPage","dojo/_base/lang"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_=function(e){function t(){return u(this,t),c(this,Object.getPrototypeOf(t).apply(this,arguments))}return d(t,e),y(t,[{key:"postCreate",value:function(e){b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._builderConfigurationTabs[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"size"==l?n.push(new h["default"]):"appearance"==l?n.push(new v["default"]):"manage"==l&&n.push(new m["default"]({hideRemove:"background"==this._placement}))}}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}new f["default"]({containerPanel:this._node.find(".media-cfg-panel"),containerInvite:this._node.find(".media-cfg-invite"),tabs:n,media:this._webpage,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),e.onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"serialize",value:function(){return this._node&&(this._webpage.caption=this._node.find(".block-caption").html()),g["default"].clone({type:"webpage",webpage:this._webpage})}},{key:"_onConfigChange",value:function(){console.log("onConfigChange: ",this._webpage),this._applyConfig(),b(Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(p["default"]);t["default"]=_,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/media/CreditsItemBuilder",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" cr-empty"},3:function(e,t,n,i){return" cr-incomplete"},5:function(e,t,n,i){return" cr-link"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a=this.lambda,s=this.escapeExpression,l="function",u=t.helperMissing,c='<li class="cr-item builder';return r=t["if"].call(e,null!=e?e.empty:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t["if"].call(e,null!=e?e.incomplete:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='">\r\n  <div class="cr-item-main">\r\n    <div class="cr-input-container first">\r\n      <div class="cr-validation-warning cr-hidden">\r\n        '+s(a(null!=(r=null!=e?e.text:e)?r.warning:r,e))+'\r\n      </div>\r\n      <div class="cr-item-input cr-content" contenteditable="true" placeholder="'+s(a(null!=(r=null!=e?e.text:e)?r.content:r,e))+'">'+s((o=null!=(o=t.label||(null!=e?e.label:e))?o:u,typeof o===l?o.call(e,{name:"label",hash:{},data:i}):o))+'</div>\r\n    </div>\r\n    <span class="cr-pipe"></span>\r\n    <div class="cr-input-container">\r\n      <div class="cr-item-input cr-source',r=t["if"].call(e,null!=e?e.link:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'" contenteditable="true" placeholder="'+s(a(null!=(r=null!=e?e.text:e)?r.source:r,e))+'" data-toggle="popover" data-link="'+s((o=null!=(o=t.link||(null!=e?e.link:e))?o:u,typeof o===l?o.call(e,{name:"link",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.source||(null!=e?e.source:e))?o:u,typeof o===l?o.call(e,{name:"source",hash:{},data:i}):o))+'</div>\r\n      <div class="cr-item-remove cr-hidden">\r\n        <i class="cr-remove-icon fa fa-trash"></i>\r\n      </div>\r\n  </div>\r\n  <div class="cr-builder-ui cr-hidden">\r\n    <div class="cr-add-line">\r\n      <div class="cr-add-button cr-hidden">\r\n        <i class="cr-add-icon fa fa-plus"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</li>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/CreditsBuilder",["module","exports","./Credits","storymaps/common/utils/CommonHelper","lib-build/hbars!./CreditsItemBuilder","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","dojo/_base/lang"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:b(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},y=function(e){function t(e){return l(this,t),u(this,Object.getPrototypeOf(t).call(this,e))}return c(t,e),v(t,[{key:"render",value:function(e){if(!this._credits||!e)return console.log("Could not render credits block in section"),"";var t='<div id="'+this._domID+'" class="block block-type-credits" contenteditable="false"><ul class="cr-list">';if(this._credits.length){var n=!0,i=!1,r=void 0;try{for(var o,a=this._credits[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t+=(0,f["default"])({label:s.label,link:s.link,source:s.source,text:h["default"].builder.credits,empty:!1,incomplete:!1})}}catch(l){i=!0,r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}}else t+=(0,f["default"])({label:null,link:null,source:null,text:h["default"].builder.credits,empty:!0,incomplete:!0});return t+="</ul></div>"}},{key:"addPopoverEvents",value:function(e){e.find('.cr-item-input[data-toggle="popover"]').popover({html:!0,content:function(){var e=$(this).data("link");return'<div class="form-group form-group-sm"><input type="text" class="credit-link" placeholder="'+h["default"].builder.credits.linkPrompt+'" value="'+e+'"></div>'},trigger:"manual",placement:"top"}),e.find('.cr-item-input[data-toggle="popover"]').focus(function(e){var t=$(e.currentTarget);t.data("bs.popover").$tip?t.data("bs.popover").$tip.hasClass("in")||t.popover("show"):t.popover("show")}),e.find('.cr-item-input[data-toggle="popover"]').blur(function(e){var t=$(e.currentTarget);setTimeout(function(){var e=t.data("bs.popover");e.$tip&&!e.$tip.find(".credit-link").is(":focus")&&t.popover("hide")},50)});var t=this;e.find('.cr-item-input[data-toggle="popover"]').on("shown.bs.popover",function(){var n=$(this),i=$(this).data("bs.popover");i.$tip&&i.$tip.find(".credit-link").blur(function(){setTimeout(function(){n.is(":focus")||n.popover("hide")},50),t.validate(e,n)}),i.$tip&&i.$tip.find(".credit-link").on("paste",function(e){var n=$(e.currentTarget);setTimeout(function(){var e=t.sanitizeText(n[0].value);n[0].value=e},0)})}),e.find('.cr-item-input[data-toggle="popover"]').on("hide.bs.popover",function(){var e=$(this).data("bs.popover");if(e.$tip){var t=e.$tip.find(".credit-link").val(),n=t.trim();n?$(this).addClass("cr-link"):$(this).removeClass("cr-link");var i=p["default"].prependURLHTTP(n);$(this).data("link",i)}})}},{key:"showValidationError",value:function(e){e.find(".cr-item-input").addClass("cr-error"),e.find(".cr-validation-warning").removeClass("cr-hidden")}},{key:"hideValidationError",value:function(e){e.find(".cr-item-input").removeClass("cr-error"),e.find(".cr-validation-warning").addClass("cr-hidden")}},{key:"addEvents",value:function(e){var t=this;this.addPopoverEvents(e),e.find(".cr-builder-ui").hover(function(e){var t=$(e.currentTarget);t.removeClass("cr-hidden"),t.find(".cr-add-button").removeClass("cr-hidden")},function(e){var t=$(e.currentTarget);t.addClass("cr-hidden"),t.find(".cr-add-button").addClass("cr-hidden")}),e.find(".cr-item-main").hover(function(e){var n=$(e.currentTarget),i=n.closest(".cr-item"),r=t._node.find(".cr-item").length;(!i.hasClass("cr-empty")||r>1)&&n.find(".cr-item-remove").removeClass("cr-hidden")},function(e){var t=$(e.currentTarget);t.find(".cr-item-remove").addClass("cr-hidden")}),e.find(".cr-add-button").on("click",function(e){var n=$(e.currentTarget),i=n.closest(".cr-item");i.after(t.renderEmptyCredit()),t.addEvents(i.next(".cr-item"))}),e.find(".cr-item-remove").on("click",function(e){var n=$(e.currentTarget),i=n.closest(".cr-item");i.find('.cr-item-input[data-toggle="popover"]').popover("destroy"),i.remove();var r=t._node.find(".cr-item").length;if(0===r){var o=t.renderEmptyCredit(),a=t._node.find(".cr-list");a.append(o),t.addEvents(a.children(":last"))}}),e.find(".cr-item-input").on("keyup",function(e){var n=$(e.currentTarget).closest(".cr-item"),i=n.find(".cr-item-input.cr-content")[0],r=n.find(".cr-item-input.cr-source")[0];if(i&&r){var o=i.textContent,a=r.textContent;o.length>0||a.length>0?n.removeClass("cr-empty"):n.addClass("cr-empty"),o.length>0&&a.length>0?(n.removeClass("cr-incomplete"),t.hideValidationError(n)):0===o.length&&0===a.length?t.hideValidationError(n):n.addClass("cr-incomplete")}}),e.find(".cr-item-input").on("keydown",function(e){if(13===e.keyCode){var n=$(e.currentTarget).closest(".cr-item");n.hasClass("cr-incomplete")||(n.after(t.renderEmptyCredit()),t.addEvents(n.next(".cr-item"))),e.preventDefault()}}),e.find(".cr-item-input").on("paste",function(e){var n=$(e.currentTarget);setTimeout(function(){var e=t.sanitizeText(n[0].textContent);n[0].innerHTML=e},0)}),e.find(".cr-item-input").blur(function(n){var i=$(n.currentTarget);t.validate(e,i)})}},{key:"validate",value:function(e,t){var n=this;setTimeout(function(){var i=t.closest(".cr-item"),r=e.find(".cr-item-input").is(":focus"),o=e.find(".popover .credit-link").is(":focus"),a=i.hasClass("cr-incomplete")&&!i.hasClass("cr-empty");r||o||!a?n.hideValidationError(i):n.showValidationError(i)},50)}},{key:"renderEmptyCredit",value:function(){return(0,f["default"])({label:"",link:"",source:"",text:h["default"].builder.credits,empty:!0,incomplete:!0})}},{key:"postCreate",value:function(e){g(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.addEvents(this._node.find(".cr-item"))}},{key:"sanitizeText",value:function(e){var t=$("<div>"+e+"</div>").text();return t}},{key:"serialize",value:function(){this._credits=[];var e=this._node.find(".cr-item:not(.cr-empty)"),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=$(a),l=this.sanitizeText(s.find(".cr-item-input.cr-content").text()),u=this.sanitizeText(s.find(".cr-item-input.cr-source").text()),c=this.sanitizeText(s.find(".cr-item-input.cr-source").data("link")),d={label:l,source:u,link:c};this._credits.push(d)}}catch(p){n=!0,i=p}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}return m["default"].clone({type:"credits",credits:this._credits})}}]),t}(d["default"]);t["default"]=y,e.exports=t["default"]}),define("storymaps-react/tpl/view/media/FactoryBuilder",["module","exports","./FactoryViewer","./Text","./ImageBuilder","./ImageGalleryBuilder","./VideoBuilder","./WebMapBuilder","./WebSceneBuilder","./WebPageBuilder","./Empty","./Color","./CreditsBuilder","storymaps/tpl/view/media/Discover"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f){"use strict";function h(e){return e&&e.__esModule?e:{"default":e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var y=h(n),b=h(i),_=h(r),w=h(o),C=h(a),E=h(s),x=h(l),T=h(u),k=h(c),P=h(d),S=h(p),O=h(f),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),N=function(e){function t(){return m(this,t),v(this,Object.getPrototypeOf(t).apply(this,arguments))}return g(t,e),I(t,null,[{key:"getClasses",value:function(){return{Text:b["default"],Image:_["default"],ImageGallery:w["default"],Video:C["default"],WebMap:E["default"],WebScene:x["default"],WebPage:T["default"],Empty:k["default"],Color:P["default"],Credits:S["default"],Discover:O["default"]}}}]),t}(y["default"]);t["default"]=N,e.exports=t["default"]}),define("lib-build/less!storymaps/tpl/view/section/Common",[],function(){}),define("storymaps/tpl/view/section/Common",["../../utils/UI","lib-build/less!./Common"],function(e){return{initMedia:function(e,t){return app.ui.MediaFactory.createInstance(e,t)},checkErrors:function(e,t,n){var i=!1;return t.background&&t.foreground?(e.backgroundMedia.indexOf(t.background.type)<0&&(console.error("Section ",n," is using invalid background"),i=!0),t.foreground.layout&&(!e.foregroundLayout||!e.foregroundLayout.length||e.foregroundLayout.indexOf(t.foreground.layout)<0)&&(console.error("Section ",n," is using invalid foreground"),i=!0)):t.views?$.each(t.views,function(t,r){e.backgroundMedia.indexOf(r.background.type)<0&&(console.error("Section ",n," - view "+t+"is using invalid background"),i=!0)}):console.error("Section ",n," is not using a proper background/foreground configuration"),i?void console.error("Section",n," ignored"):void 0},renderBlocks:function(e){var t="",n=null,i=[],r=null,o="";return $.each(e,function(e,a){r=app.ui.MediaFactory.createInstance(a),o=a[a.type].style||[],r&&(n&&"text"==n||o.push("first-letter-huge"),t+=r.render({placement:"block",style:o}),n=a.type,i.push(r))}),{output:t,blocks:i}},createBlock:function(e){var t=app.ui.MediaFactory.createInstance(e);return t},renderBackground:function(t){var n="";if(t=t||{},!t.media)return n;if(e.isMobileBrowser()&&t.media.getAlternate&&t.media.getAlternate()&&(t.media=t.media.getAlternate()),!t.noBackgroundTag){var i=" "+(t.media.options||""),r=[];t.transition&&r.push(" transition-"+t.transition),n+='<div class="background background-type-'+t.media.type+" "+r.join(" ")+'" style="'+i+'">'}return n+=t.media.render({placement:"background"}),t.noBackgroundTag||(n+="</div>"),n},getMediaIndexes:function(e,t,n){if(!e||!e.length||!t)return-1;var i=t.type,r=null;r=n?t:t[i];var o=[];return $.each(e,function(e,t){t.type==i&&("webmap"==t.type||"webscene"==t.type?t.id==r.id&&o.push(e):"webpage"==t.type?t.id==r.url&&o.push(e):"video"==t.type&&t.id==r.source+"-"+r.id&&o.push(e))}),o},resize:function(){}}}),define("storymaps/tpl/view/section/Cover/CoverCommonEffects",[],function(){function e(e){var t=e.$currentSection.find(".foreground"),n=e.$currentSection.find(".background");setTimeout(function(){n.addClass("scale-out")},c),setTimeout(function(){n.css("transform","scale(1)"),n.css("opacity",1),n.removeClass("scale-out")},c+1500),setTimeout(function(){t.addClass("slide-text")},c+200),setTimeout(function(){t.css("transform","translateY(0)"),t.css("opacity",1),t.removeClass("slide-text")},c+1700)}function t(e){var t=e.$currentSection.find(".background");setTimeout(function(){t.addClass("fade-in-background")},c),setTimeout(function(){e.$currentSection.find(".cover-title").addClass("fade-in-cover-title")},c+500),setTimeout(function(){e.$currentSection.find(".cover-subtitle").addClass("fade-in-cover-subtitle")},c+1200),setTimeout(function(){e.$currentSection.find(".cover-title").css("opacity",1)},c+2500),setTimeout(function(){e.$currentSection.find(".cover-subtitle").css("opacity",1)},c+3e3)}function n(e,t){var n=e.$currentSection.data("views"),i=n*app.display.windowHeight,r=e.currentSectionScroll/i,o=t?1.5:2.5,a=Math.pow(1-r,o);e.$currentSection.find(".foreground, .scroll-invite").css("opacity",a)}function i(e,t){var n=t?-1:-5,i=e.$currentSection.find(".foreground"),r=e.currentSectionScroll/100*n;r=parseInt(r,10),i.css("transform","translateY("+r+"px)")}function r(e){var t=e.$currentSection.data("views"),n=t*app.display.windowHeight,i=e.currentSectionScroll/n,r=1-i,o=e.currentSectionScroll*r,a=(e.currentSectionScroll-100)/n,s=(1-a)*e.currentSectionScroll;o=parseInt(o,10),s=parseInt(s,10),e.$currentSection.find(".cover-title").css("transform","translateY("+o+"px)"),e.$currentSection.find(".cover-subtitle").css("transform","translateY("+s+"px)")}function o(e,t){var n=e.$currentSection.find(".background"),i=e.$currentSection.data("views"),r=i*app.display.windowHeight,o=0,a=t?6:10;r>0&&(o=e.currentSectionScroll/r*a),n.css({webkitFilter:"blur("+o+"px)",filter:"blur("+o+"px)"})}function a(e,t,n){var i=e.$currentSection.find(".background"),r=1,o=0,a=t?4:20,s=e.$currentSection.find(".foreground");e.currentSectionScroll>0&&(o=e.currentSectionScroll/app.display.windowHeight,r=1+o/a),i.css("transform","scale("+r+")"),n&&s.css("transform","scale("+r+")")}function s(e){var t=e.$currentSection.find(".wrapper"),n=1;e.currentSectionScroll>0&&(n=1-e.currentSectionScroll/app.display.windowHeight),t.css("opacity",n)}function l(e,t){var n=e.$currentSection.data("views"),i=n*app.display.windowHeight,r=e.$currentSection.find(".wrapper"),o=100,a=o,s="";e.currentSectionScroll>0&&(a=t?100*(1-e.currentSectionScroll/i):(i-e.currentSectionScroll)/app.display.windowHeight*100,a>o&&(a=o)),s="brightness("+a.toFixed(1)+"%)",r.css({webkitFilter:s,filter:s})}function u(e){var t=e.$currentSection.find(".background"),n=e.$currentSection.data("views"),i=n*app.display.windowHeight,r=.1,o=.7,a=e.currentSectionScroll>=i*r,s=1;a&&(s=1-(e.currentSectionScroll-i*r)/(i*(1-r)*o)),t.css("opacity",s)}var c=900;return{scaleFadeInCover:e,fadeInBackground:t,fadeOutForeground:n,translateForeground:i,translateForegroundDown:r,blurBackground:o,scaleBackground:a,blendCoverWithHeader:s,darkenCover:l,fadeOutCover:u}}),define("storymaps/tpl/view/section/Cover/CoverStatic",["./CoverCommonEffects"],function(){return function(){this.dataViews=1,this.layoutType="static",this.displayCover=function(){},this.onScroll=function(){}}}),define("storymaps/tpl/view/section/Cover/CoverScale",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!1),e.fadeOutCover(t)}function n(t){e.translateForeground(t,!0),e.fadeOutForeground(t)}this.dataViews=1.25,this.layoutType="scale",this.displayCover=function(t){e.scaleFadeInCover(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverBlur",["./CoverCommonEffects"],function(e){return function(){function t(t){e.blurBackground(t,!1)}function n(t){e.fadeOutForeground(t)}this.dataViews=1.5,this.layoutType="blur",this.displayCover=function(t){e.scaleFadeInCover(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverPartialPage",["./CoverCommonEffects"],function(e){return function(){function t(t){e.blurBackground(t,!0),e.darkenCover(t,!0)}function n(t){e.translateForeground(t,!1),e.fadeOutForeground(t,!0)}this.dataViews=.7,this.layoutType="partial-page",this.displayCover=function(){},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverDelay",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!1),e.darkenCover(t,!1)}function n(t){e.translateForeground(t,!1),e.fadeOutForeground(t,!1)}this.dataViews=1.5,this.layoutType="delay",this.displayCover=function(t){e.fadeInBackground(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverBlendHeader",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!0,!0),e.blendCoverWithHeader(t)}function n(e){e.$currentSection.css("background-color","rgba(0,0,0,1)")}this.dataViews=1,this.layoutType="blend-header",this.displayCover=function(e){n(e)},this.onScroll=function(e){t(e)}}}),define("storymaps/tpl/view/section/Cover/CoverCurtain",["./CoverCommonEffects"],function(e){return function(){function t(t){e.darkenCover(t,!1)}function n(t){e.translateForegroundDown(t)}this.dataViews=1,this.layoutType="curtain",this.displayCover=function(t){e.fadeInBackground(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverStyleFactory",["./CoverStatic","./CoverScale","./CoverBlur","./CoverPartialPage","./CoverDelay","./CoverBlendHeader","./CoverCurtain"],function(e,t,n,i,r,o,a){function s(s){var u=null;if(u=l(),!u)switch(s){case"scale":u=new t;break;case"blur":u=new n;break;case"partial-page":u=new i;break;case"delay":u=new r;break;case"blend-header":u=new o;break;case"curtain":u=new a;break;default:u=new e}return u}function l(){var e=window.location.href,s=null;return-1!==e.indexOf("coverStyle=blur")?s=new n:-1!==e.indexOf("coverStyle=scale")?s=new t:-1!==e.indexOf("coverStyle=partial-page")?s=new i:-1!==e.indexOf("coverStyle=delay")?s=new r:-1!==e.indexOf("coverStyle=blend-header")?s=new o:-1!==e.indexOf("coverStyle=curtain")&&(s=new a),s}return{createInstance:s}}),define("lib-build/hbars!storymaps-react/tpl/view/section/Cover/Cover",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" data-views="'+l((o=null!=(o=t.nbViews||(null!=e?e.nbViews:e))?o:s,typeof o===a?o.call(e,{name:"nbViews",hash:{},data:i}):o))+'">\r\n  <div class="wrapper">\r\n\r\n    ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,
r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(u+=r),u+'\r\n\r\n    <div class="foreground">\r\n      <div class="foo">\r\n        <div class="title-error-container hidden">\r\n          <div class="title-error-message">Save failed, you already have an item with this title</div>\r\n        </div>\r\n        <h1 class="cover-title">'+l((o=null!=(o=t.title||(null!=e?e.title:e))?o:s,typeof o===a?o.call(e,{name:"title",hash:{},data:i}):o))+'</h1>\r\n        <!--<span class="cover-title-mock-cursor"></span>-->\r\n        <h2 class="cover-subtitle">'+l((o=null!=(o=t.subtitle||(null!=e?e.subtitle:e))?o:s,typeof o===a?o.call(e,{name:"subtitle",hash:{},data:i}):o))+'</h2>\r\n      </div>\r\n\r\n      <div class="cover-media-placeholder">\r\n        <div class="cover-media-placeholder-wrapper">\r\n          <i class="fa fa-picture-o ph-icon-media" aria-hidden="true"></i>\r\n          <div class="cover-media-placeholder-label">'+l((o=null!=(o=t.mediaPlaceholder||(null!=e?e.mediaPlaceholder:e))?o:s,typeof o===a?o.call(e,{name:"mediaPlaceholder",hash:{},data:i}):o))+'</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="scroll-invite">\r\n      <div class="scroll-invite-btn"></div>\r\n    </div>\r\n\r\n    <div class="cover-credits-left">'+l((o=null!=(o=t.creditsLeft||(null!=e?e.creditsLeft:e))?o:s,typeof o===a?o.call(e,{name:"creditsLeft",hash:{},data:i}):o))+'</div>\r\n    <div class="cover-credits-right">'+l((o=null!=(o=t.creditsRight||(null!=e?e.creditsRight:e))?o:s,typeof o===a?o.call(e,{name:"creditsRight",hash:{},data:i}):o))+"</div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Cover/Cover",[],function(){}),define("storymaps-react/tpl/view/section/Cover/Cover",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","storymaps/tpl/view/section/Cover/CoverStyleFactory","lib-build/hbars!./Cover","lib-build/less!./Cover"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=a(n),u=a(i),c=a(r),d=a(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(t){s(this,e),this.type="cover",this.id=u["default"].getUID(),this._section=t,this._section.options=this._section.options||{},this._node=null,this._isLoaded=!1,this._backgroundMedia=null,this._cover=c["default"].createInstance(this._section.layout)}return p(e,[{key:"render",value:function(){return this._backgroundMedia=l["default"].initMedia(this._section.background),(0,d["default"])({classes:["section","section-layout-cover",this._section.layout,this._cover.layoutType].join(" "),nbViews:this._cover.dataViews,background:l["default"].renderBackground({media:this._backgroundMedia}),title:this._section.foreground.title,subtitle:this._section.foreground.subtitle,creditsLeft:this._section.foreground["credits-left"],creditsRight:this._section.foreground["credits-right"],mediaPlaceholder:"Add your image or video"})}},{key:"postCreate",value:function(e){this._node=e,this._backgroundMedia.postCreate({container:e,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"cover"}),$(".scroll-invite").click(function(){app.Controller.navigateToSection({index:1,animate:!0})})}},{key:"onScroll",value:function(e){if("unload"==e.status)this._backgroundMedia.performAction({visible:!1});else{if("preload"==e.status)return;if("current"==e.status)this._isLoaded?this._backgroundMedia.performAction({isActive:!0}):(this._isLoaded=!0,this._backgroundMedia.load().then(function(){this._backgroundMedia.performAction({isActive:!0})}.bind(this))),this._cover.displayCover(e),this.updateContent(e,!0);else{if(!this._isLoaded)return;this.updateContent(e,!1)}}}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"getPreviewText",value:function(){return this._section.foreground.title}},{key:"updateContent",value:function(e,t){0==e.currentSectionIndex&&(e.currentSectionScroll>app.display.sectionHeight/2?$(".story-header").css("background-color","rgba(0,0,0,"+e.currentSectionScroll/app.display.sectionHeight+")"):$(".story-header").css("background-color","rgba(0,0,0,0)")),t||"current"!==e.status||this._cover.onScroll(e)}},{key:"resize",value:function(e){this._backgroundMedia.resize(e)}},{key:"getArcGISContent",value:function(){return this._backgroundMedia.getArcGISContent()}}]),e}();t["default"]=f,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/section/Sequence",[],function(){}),define("storymaps-react/tpl/view/section/Sequence",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/less!./Sequence"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c={backgroundMedia:["color","image"],foregroundLayout:["sequence-1"],foregroundMedia:["image","video","webscene","webpage"]},d=function(){function e(t){a(this,e),this.type="sequence",this.id=l["default"].getUID(),this._section=t,this._node=null,this._isLoaded=!1,this._blocks=null,this._backgroundMedia=null,this._isActive=!1,this._sectionIndex=null}return u(e,[{key:"render",value:function(e){var t="",n=this._section.foreground;if(s["default"].checkErrors(c,this._section,e))return t;if(this._sectionIndex=e,t+='<div class="section section-layout-sequence '+this._section.layout+'">',this._backgroundMedia=s["default"].initMedia(this._section.background),t+=s["default"].renderBackground({media:this._backgroundMedia}),t+='<div class="foreground">',n.blocks){var i=s["default"].renderBlocks(n.blocks);this._blocks=i.blocks,t+=i.output}return t+="</div>",t+="</div>"}},{key:"postCreate",value:function(e){this._node=e;var t=!0,n=!1,i=void 0;try{for(var r,o=this._blocks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.postCreate&&a.postCreate({container:e,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS})}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"getNumberOfBlocks",value:function(){return this._section.foreground&&this._section.foreground.blocks?this._section.foreground.blocks.length:0}},{key:"onScroll",value:function(e){if("unload"==e.status)this._isActive=!1,$.each(this._blocks,function(e,t){t.performAction({isActive:!1})});else if("preload"==e.status){if(this._isLoaded)return;this._isLoaded=!0,this._backgroundMedia.load(),$.each(this._blocks,function(e,t){t.load()})}else("visible"==e.status||"current"==e.status)&&(this._isLoaded&&$.each(this._blocks,function(e,t){t.load()}),this._isLoaded=!0)}},{key:"resize",value:function(){}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this._blocks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;e.push.apply(e,o(s.getArcGISContent()))}}catch(l){n=!0,i=l}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw i}}return e}}]),e}();t["default"]=d,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/section/Title",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'">\r\n\r\n  ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(u+=r),u+'\r\n\r\n  <div class="foreground">\r\n    <h1 class="fg-title">'+l((o=null!=(o=t.title||(null!=e?e.title:e))?o:s,typeof o===a?o.call(e,{name:"title",hash:{},data:i}):o))+'</h1>\r\n  </div>\r\n\r\n  <div class="fg-credits">'+l((o=null!=(o=t.credits||(null!=e?e.credits:e))?o:s,typeof o===a?o.call(e,{name:"credits",hash:{},data:i}):o))+'</div>\r\n  <div class="builder-section-add-menu"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Title",[],function(){}),define("storymaps-react/tpl/view/section/Title",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Title","lib-build/less!./Title"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(t){a(this,e),this.type="title",this.id=l["default"].getUID(),this._section=t,this._node=null,this._isLoaded=!1,this._backgroundMedia=null}return c(e,[{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"getPreviewThumbnail",value:function(){return this._backgroundMedia.getPreviewThumbnail()}},{key:"getPreviewText",value:function(){return this._section.foreground?this._section.foreground.title:""}},{key:"getPreviewIcon",value:function(){return""}},{key:"render",value:function(){var e=this._section.background,t=this._section.foreground,n=[],i=this._section.options,r="medium";return i&&i.size&&(r=i.size),n.push("size-"+r),this._backgroundMedia=s["default"].initMedia(e),(0,u["default"])({classes:["section","section-layout-title"].concat(n).join(" "),id:this.id,background:s["default"].renderBackground({media:this._backgroundMedia}),title:t.title,credits:t.credits})}},{key:"postCreate",value:function(e){this._node=e,this._backgroundMedia.postCreate({container:e,mediaIcon:"image",onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND})}},{key:"onScroll",value:function(e){"unload"!=e.status&&("preload"==e.status?this._isLoaded||(this._backgroundMedia.load(),this._isLoaded=!0):this._backgroundMedia.performAction({isActive:!0,progress:0}))}},{key:"resize",value:function(e){this._backgroundMedia.resize(e)}},{key:"getArcGISContent",value:function(){return this._backgroundMedia.getArcGISContent()}}]),e}();t["default"]=d,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/Immersive",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" data-views="'+l((o=null!=(o=t.viewsCount||(null!=e?e.viewsCount:e))?o:s,typeof o===a?o.call(e,{name:"viewsCount",hash:{},data:i}):o))+'">\r\n  <div class="background-title"><h2>'+l((o=null!=(o=t.title||(null!=e?e.title:e))?o:s,typeof o===a?o.call(e,{name:"title",hash:{},data:i}):o))+'</h2></div>\r\n  <div class="background-credits">'+l((o=null!=(o=t.credits||(null!=e?e.credits:e))?o:s,typeof o===a?o.call(e,{name:"credits",hash:{},data:i}):o))+'</div>\r\n  <div class="background-filler"></div>\r\n\r\n  ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(u+=r),u+='\r\n\r\n  <div class="background-swipe-trans-extras">\r\n    <div class="separator-vertical"></div>\r\n    <div class="separator-horizontal"></div>\r\n  </div>\r\n\r\n  <div class="foreground">\r\n    ',o=null!=(o=t.foreground||(null!=e?e.foreground:e))?o:s,r=typeof o===a?o.call(e,{name:"foreground",hash:{},data:i}):o,null!=r&&(u+=r),u+'\r\n  </div>\r\n\r\n  <div class="builder-panel"></div>\r\n  <div class="builder-section-add-menu"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/Immersive",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/Immersive",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Immersive","lib-build/less!./Immersive"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=o(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=125,f=function(){function e(t){s(this,e),this.type="immersive",this.id=u["default"].getUID(),this._section=t,this._section.options=this._section.options||{},this._nbViews=0,this._isLoaded=!1,this._isActive=!1,this._currentViewIndex=-1,this._isNavigatingAway=!1,this._currentViewScrollPosition=-1,this._swipeTransitionExtrasNode=null,this._previousMedia=null,this._medias=[],this._panels=[],this._transitions=[],this._mediaCache={}}return d(e,[{key:"render",value:function(){var e=this._section.views,t=this._section.options;e=e||[],t=t||{},this._nbViews=e.length;var n=[],i="",r="",o="",a="";t.style&&n.push(t.style),e.length&&e[0].foreground.panels&&e[0].foreground.panels[0]&&n.push("layout-"+e[0].foreground.panels[0].layout),t.events&&n.push("events-"+t.events),t["events-btn"]&&n.push("events-"+t["events-btn"]),u["default"].isMobileBrowser()&&t["events-btn"]&&(this._nbViews=1.2),e.length&&e[0].foreground.title&&(i=e[0].foreground.title.value),t.credits&&(r=t.credits);var s=!0,d=!1,p=void 0;try{for(var f,h=e[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var m=f.value,v=this.isMediaAlreadyLoaded(m.background),g=l["default"].initMedia(m.background,this._mediaCache);v||(o+=l["default"].renderBackground({media:g,transition:m.transition})),this._medias.push(g);var y=m.foreground.panels?m.foreground.panels[0]:null;if(y){var b=app.ui.ImmersivePanelFactory.createInstance(y,{onUpdateLayout:app.isInBuilder?this.onUpdatePanelLayout.bind(this):null,onChange:app.isInBuilder?this._onContentChange.bind(this):null});this._panels.push(b),a+=b.render()}this._transitions.push(m.transition)}}catch(_){d=!0,p=_}finally{try{!s&&h["return"]&&h["return"]()}finally{if(d)throw p}}return(0,c["default"])({classes:["section","section-immersive"].concat(n).join(" "),viewsCount:this._nbViews+1,title:i,credits:r,background:o,foreground:a})}},{key:"postCreate",value:function(e){this._node=e,this._swipeTransitionExtrasNode=this._node.find(".background-swipe-trans-extras");var t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.postCreate({container:e,delayBuilderInit:!0,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"})}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d,p=this._panels[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;f.postCreate({container:e,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL})}}catch(s){u=!0,c=s}finally{try{!l&&p["return"]&&p["return"]()}finally{if(u)throw c}}this._update()}},{key:"update",value:function(){this._update()}},{key:"_update",value:function(){this._nbViews=this._medias.length;var e=this._nbViews+1;1==e&&this._node.find(".background").hasClass("background-type-image")&&(e*=1.1),this._node.css("min-height",100*e+"vh"),this._applyTransitionRules(),this._computeWebMapsSwipeLayers()}},{key:"onScroll",value:function(e){var t=parseInt(e.currentSectionScroll/app.display.windowHeight,10)+1;if(this._isNavigatingAway=t>this._nbViews,this._currentViewScrollPosition=e.currentSectionScroll%app.display.windowHeight,t=Math.min(t,this._nbViews),e.viewportTop<=0&&(t=1),"unload"==e.status){this._isActive=!1;var n=!0,i=!1,r=void 0;try{for(var o,a=this._medias[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.performAction({isActive:!1})}}catch(l){i=!0,r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return this._currentViewIndex=-1,void(this._previousMedia=null)}var u=this._medias[t-1];if(u){if(!this._isLoaded){this._isLoaded=!0,this.loadMedias();var c=!0,d=!1,f=void 0;try{for(var h,m=this._panels[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var v=h.value;v.load()}}catch(l){d=!0,f=l}finally{try{!c&&m["return"]&&m["return"]()}finally{if(d)throw f}}this._node.find(".background").eq(0).addClass("active")}if("current"==e.status){var g={isActive:"current"==e.status,transition:this._transitions[t-1],isNewView:this._currentViewIndex!=t,viewIndex:t,visibilityProgress:1,scrollPositionSection:e.currentSectionScroll,scrollPositionView:this._currentViewScrollPosition,performBuilderInit:this._currentViewIndex!=t};if(this._currentViewIndex=t,(g.isNewView||"webmap"==u.type&&!this._isNavigatingAway)&&u.performAction(g),"current"==e.status){var y=this._transitions[t-1],b=this._medias[t-2],_=!this._isTransitionDoneByMedia(y,u,b);if(g.isNewView&&(u.getNode().nextAll().removeClass("active"),u.getNode().addClass("active"),this._previousMedia&&"video"==this._previousMedia.type&&this._previousMedia.performAction({isActive:!1}),this._previousMedia=u),!this._isNavigatingAway)if("swipe-vertical"==y||"swipe-horizontal"==y)if(_){var w=null,C=app.display.windowWidth,E=app.display.windowHeight;app.isInBuilder&&(E-=p),"swipe-vertical"==y?(w=E-this._currentViewScrollPosition,u.getNode().css("clip","rect("+w+"px,"+C+"px,"+app.display.windowHeight+"px,0px)"),this._swipeTransitionExtrasNode.css({top:w,left:""}).toggleClass("trans-vertical",!0).toggleClass("trans-horizontal",!1).addClass("active")):"swipe-horizontal"==y&&(w=C-this._currentViewScrollPosition/E*C,u.getNode().css("clip","rect(0px,"+C+"px,"+app.display.windowHeight+"px,"+w+"px)"),this._swipeTransitionExtrasNode.css({top:"",left:w}).toggleClass("trans-vertical",!1).toggleClass("trans-horizontal",!0).addClass("active"))}else this._swipeTransitionExtrasNode.removeClass("active");else this._swipeTransitionExtrasNode.removeClass("active");var x=this._panels&&this._panels.length?this._panels[t-1]:null;if(x.updatePosition(e),g.isNewView){var T=this._panels[t-2];T&&T.updatePosition({isNewView:!0})}t==this._nbViews&&(this._node.toggleClass("hide-title hide-credits",this._isNavigatingAway),"scroll-partial"==x.layout&&this._isNavigatingAway&&this._node.find(".imm-panel").css("opacity",0))}}}}},{key:"loadMedias",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=!1;if(("webmap"==a.type||"webscene"==a.type)&&(e.indexOf(a.id)>-1?s=!0:e.push(a.id)),!s){var l=a.load();l&&l.then(function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.id==e&&a.postLoad()}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}}.bind(this))}}}catch(u){n=!0,i=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}}},{key:"navigateToViewByIndex",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(void 0!=e.index&&void 0!=e.animate){var t=this._node.position().top,n=app.display.windowHeight,i=e.index*n,r=n-250;app.isInBuilder&&(r+=p);var o=Math.floor(t+i+r);e.animate?$("html,body").animate({scrollTop:o}):(document.body.scrollTop=o,document.documentElement.scrollTop=o)}}},{key:"isMediaAlreadyLoaded",value:function(e){return l["default"].getMediaIndexes(this._medias,e).length>0}},{key:"isMediaUniqueInSection",value:function(e){return 1==l["default"].getMediaIndexes(this._medias,e).length}},{key:"resize",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.resize(e)}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"_computeWebMapsSwipeLayers",value:function(){for(var e=0;e<this._medias.length;e++){var t=this._getTransitionInfo(e),n=this._medias[e];0!=e&&"webmap"==n.type&&t.isDuplicateConsecutive&&this._medias[e].computeSwipeLayers(this._medias[e-1].getLayersConfiguration())}}},{key:"_isTransitionDoneByMedia",value:function(e,t,n){return e&&t&&n&&("swipe-vertical"==e||"swipe-horizontal"==e)&&"webmap"==t.type&&"webmap"==n.type&&t.id==n.id}},{key:"_applyTransitionRules",value:function(){for(var e=0;e<this._medias.length;e++){var t=this._getTransitionInfo(e);0!=e?t.isDuplicateConsecutive?-1==t.duplicateConsecutiveTransitions.indexOf(this._transitions[e])&&(this._transitions[e]="none"):t.isDuplicate&&t.firstOccurenceTransition&&(this._transitions[e]="none"):this._transitions[e]="fade-fast"}}},{key:"_getTransitionInfo",value:function(e){var t=this._medias[e],n=l["default"].getMediaIndexes(this._medias,t,!0),i=!1,r=null,o=!1,a=[];return n.length>1&&n[0]<e&&(i=!0,r=this._transitions[n[0]],n[n.indexOf(e)-1]==e-1&&(o=!0,a=t.getAuthorizedTransitionsWith(this._medias[e-1]))),{isDuplicate:i,isDuplicateConsecutive:o,firstOccurenceTransition:r,duplicateConsecutiveTransitions:a}}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e.push.apply(e,a(s.getArcGISContent()))}}catch(l){n=!0,i=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var p,f=this._panels[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=p.value;e.push.apply(e,a(h.getArcGISContent()))}}catch(l){c=!0,d=l}finally{try{!u&&f["return"]&&f["return"]()}finally{if(c)throw d}}return e}}]),e}();t["default"]=f,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/section/Credits",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l='<div class="section section-layout-credits">\r\n\r\n  ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(l+=r),l+='\r\n\r\n  <div class="foreground">\r\n    <div class="credits">\r\n      ',o=null!=(o=t.credits||(null!=e?e.credits:e))?o:s,r=typeof o===a?o.call(e,{name:"credits",hash:{},data:i}):o,null!=r&&(l+=r),l+'\r\n    </div>\r\n  </div>\r\n  <div class="builder-section-add-menu"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Credits",[],function(){}),define("lib-build/css!storymaps-react/tpl/view/ui/AuthorInfo",[],function(){}),define("storymaps-react/tpl/view/section/Credits",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Credits","lib-build/less!./Credits","lib-build/css!../ui/AuthorInfo"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d={backgroundMedia:["color"],foregroundLayout:["credits-1"]},p=function(){function e(t){a(this,e),this.type="credits",this.id=l["default"].getUID(),this._section=t,this._node=null,this._backgroundMedia=null,this._panels=[]}return c(e,[{key:"render",value:function(e){var t=this._section.background,n=this._section.foreground,i="";if(s["default"].checkErrors(d,this._section,e))return"";this._backgroundMedia=s["default"].initMedia(t);var r=!0,o=!1,a=void 0;try{for(var l,c=n.panels[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var p=l.value;if("blocks"===p.type){var f=s["default"].renderBlocks(p.blocks);this._panels.push({type:"blocks",blocks:f.blocks,editor:null});var h='<div class="blocks">'+f.output+"</div>";i+=h}else if("credits"===p.type){var m=s["default"].initMedia(p,null);this._panels.push({type:"credits",credits:m,editor:null}),i+=m.render({placement:"block"})}}}catch(v){o=!0,a=v}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw a}}return(0,u["default"])({background:s["default"].renderBackground({media:this._backgroundMedia}),credits:i})}},{key:"postCreate",value:function(e){this._node=e;var t=!0,n=!1,i=void 0;try{for(var r,o=this._panels[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if("blocks"===a.type){var s=!0,l=!1,u=void 0;try{for(var c,d=a.blocks[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value;p.postCreate({container:e})}}catch(f){l=!0,u=f}finally{try{!s&&d["return"]&&d["return"]()}finally{if(l)throw u}}}else"credits"===a.type&&a.credits.postCreate({container:e})}}catch(f){n=!0,i=f}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}}},{key:"getPreviewThumbnail",value:function(){return""}},{key:"getPreviewText",value:function(){return""}},{key:"getPreviewIcon",value:function(){return""}},{key:"getArcGISContent",value:function(){return[]}},{key:"onScroll",value:function(){}},{key:"resize",value:function(){}}]),e}();t["default"]=p,e.exports=t["default"]}),define("storymaps-react/tpl/view/section/FactoryViewer",["module","exports","./Cover/Cover","./Sequence","./Title","./Immersive/Immersive","./Credits"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=s(n),c=s(i),d=s(r),p=s(o),f=s(a),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(){l(this,e)}return h(e,null,[{key:"getClasses",value:function(){return{Cover:u["default"],Sequence:c["default"],Title:d["default"],Immersive:p["default"],Credits:f["default"],CreditsPlaceholder:function(){}}}},{key:"createInstance",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=null,n=e.type;if(!n)return console.error("Invalid json for: ",e),t;var i=this.getClasses();return"cover"==n?t=new i.Cover(e):"sequence"==n?t=new i.Sequence(e):"title"==n?t=new i.Title(e):"immersive"==n?t=new i.Immersive(e):"credits"==n?t=new i.Credits(e):"credits-placeholder"==n?t=new i.CreditsPlaceholder(e):console.error("Could not find corresponding layout for: ",e),t}}]),e}();t["default"]=m,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/section/Cover/CoverBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Cover/CoverBuilder",["module","exports","./Cover","storymaps/tpl/view/section/Common","dojo/topic","dojo/_base/lang","lib-build/less!./CoverBuilder"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},v=function(e){function t(e){s(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.MEDIA_BUILDER_TABS_BACKGROUND=["appearance","manage"],n}return u(t,e),h(t,[{key:"render",value:function(){return this._section.background||(this._section.layout="cover-1",this._section.background={type:"image",image:{url:this._getCoverPlaceholderImage(),isPlaceholder:!0}}),m(Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){var n=this;m(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var i=app.portal.getPortalUser().firstName||"";this._node.find(".cover-title").attr("contenteditable",!0).attr("placeholder-line1","Welcome "+i).attr("placeholder-line2","Enter your story title...").on("blur keyup",function(e){var t=$("<div>"+$(e.target).text()+"</div>").text();t!=app.Controller.getStoryTitle()&&(this._section.foreground.title=t,p["default"].publish("builder-story-title-update",t),this._onContentChange())}.bind(this)).on("paste",function(){setTimeout(function(){this._node.find(".cover-title").html($("<div>"+this._node.find(".cover-title").text()+"</div>").text());var e=this._node.find(".cover-title").text();this._section.foreground.title=e,p["default"].publish("builder-story-title-update",e),this._onContentChange()}.bind(this),0)}.bind(this)).keydown(function(e){return 13===e.keyCode?!1:(n._node.find(".cover-title").removeClass("title-error"),void n._node.find(".title-error-container").addClass("hidden"))}),this._node.find(".cover-subtitle").attr("contenteditable",!0).attr("placeholder","Scroll down to get started or enter an optional subtitle").on("blur keyup",function(e){
var t=$("<div>"+$(e.target).text()+"</div>").text();t!=this._section.foreground.subtitle&&(this._section.foreground.subtitle=t,this._onContentChange())}.bind(this)).keydown(function(e){return 13===e.keyCode?!1:void 0}).on("paste",function(){setTimeout(function(){this._node.find(".cover-subtitle").html($("<div>"+this._node.find(".cover-subtitle").text()+"</div>").text())}.bind(this),0)}.bind(this)),this._backgroundMedia.isPlaceholder()&&(this._node.find(".cover-media-placeholder").addClass("active"),this._node.find(".cover-media-placeholder-wrapper").click(this._onEditPlaceholderMedia.bind(this)))}},{key:"serialize",value:function(){return this._node&&(this._section.foreground.title=$("<div>"+this._node.find(".cover-title").text()+"</div>").text(),this._section.foreground.subtitle=$("<div>"+this._node.find(".cover-subtitle").text()+"</div>").text(),this._section.background=this._backgroundMedia.serialize()),f["default"].clone(this._section)}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"showTitleError",value:function(){this._node.find(".cover-title").addClass("title-error"),this._node.find(".title-error-container").removeClass("hidden")}},{key:"_onContentChange",value:function(){p["default"].publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(){this._node.toggleClass("hide-scroll-invite")}},{key:"_onEditPlaceholderMedia",value:function(){app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image","video"]}).then(function(e){this._onEditMedia(this._backgroundMedia,e),this._node.find(".cover-media-placeholder").removeClass("active"),this._onContentChange()}.bind(this),function(){})}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.action&&e.media&&("swap"==e.action&&app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image","video"]}).then(function(t){this._onToggleMediaConfig(),this._onEditMedia(e.media,t)}.bind(this),function(){}),this._onContentChange())}},{key:"_onEditMedia",value:function(e,t){var n=d["default"].initMedia(t);this._node.find(".background").remove(),this._node.find(".wrapper").prepend(d["default"].renderBackground({media:n})),n.postCreate({container:this._node,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"cover"}),n.load({isBuilderAdd:!0}),e.destroy(),this._backgroundMedia=n}},{key:"_getCoverPlaceholderImage",value:function(){var e=["AngelaBenito.jpg","EandNPhotographies.jpg","ErolAhmed.jpg","FrancesGunn.jpg","JeremyThomas.jpg","JonathanBean.jpg","LukasBudimaier.jpg","NASA.jpg","PatrickFore.jpg","PatrickTomasso.jpg","PhilippeWuyts.jpg","SamuelScrimshaw.jpg","SujanSundareswaran.jpg","SusanneFeldt.jpg","VladimirKudinov.jpg","WilsonLau.jpg"],t=e[Math.floor(Math.random()*e.length)];return"resources/tpl/viewer/cover-placeholder/"+t}}]),t}(c["default"]);t["default"]=v,e.exports=t["default"]}),"classList"in document.createElement("_")||!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",i=e.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},u=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,r=n.length;r>i;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=u[n]=[],d=function(){return new u(this)};if(s[n]=Error[n],c.item=function(e){return this[e]||null},c.contains=function(e){return e+="",-1!==l(this,e)},c.add=function(){var e,t=arguments,n=0,i=t.length,r=!1;do e=t[n]+"",-1===l(this,e)&&(this.push(e),r=!0);while(++n<i);r&&this._updateClassName()},c.remove=function(){var e,t,n=arguments,i=0,r=n.length,o=!1;do for(e=n[i]+"",t=l(this,e);-1!==t;)this.splice(t,1),o=!0,t=l(this,e);while(++i<r);o&&this._updateClassName()},c.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},c.toString=function(){return this.join(" ")},r.defineProperty){var p={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(i,t,p)}catch(f){-2146823252===f.number&&(p.enumerable=!1,r.defineProperty(i,t,p))}}else r[n].__defineGetter__&&i.__defineGetter__(t,d)}}(self),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},r=n.prototype,o=i.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=e.URL||e.webkitURL||e,d=c.createObjectURL,p=c.revokeObjectURL,f=c,h=e.btoa,m=e.atob,v=e.ArrayBuffer,g=e.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=o.fake=!0;u--;)s.prototype[l[u]]=u+1;return c.createObjectURL||(f=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(y),n.origin=t&&t[1])),n}),f.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):d?d.call(c,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(c,e)},r.append=function(e){var n=this.data;if(g&&(e instanceof v||e instanceof g)){for(var r="",o=new g(e),l=0,u=o.length;u>l;l++)r+=String.fromCharCode(o[l]);n.push(r)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var c=new a;n.push(c.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var r=arguments.length;return 3>r&&(n=null),new i(this.data.slice(e,r>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,t){var i=t?t.type||"":"",r=new n;if(e)for(var o=0,a=e.length;a>o;o++)Uint8Array&&e[o]instanceof Uint8Array?r.append(e[o].buffer):r.append(e[o]);var s=r.getBlob(i);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var i=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=i(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(e,t){"use strict";"object"==typeof module?module.exports=t:"function"==typeof define&&define.amd?define("lib/medium-editor/dist/js/medium-editor",[],function(){return t}):e.MediumEditor=t}(this,function(){"use strict";function e(e,t){return this.init(e,t)}return e.extensions={},function(t){function n(e,t){var n,i=Array.prototype.slice.call(arguments,2);t=t||{};for(var r=0;r<i.length;r++){var o=i[r];if(o)for(n in o)o.hasOwnProperty(n)&&"undefined"!=typeof o[n]&&(e||t.hasOwnProperty(n)===!1)&&(t[n]=o[n])}return t}var i=!1;try{var r=document.createElement("div"),o=document.createTextNode(" ");r.appendChild(o),i=r.contains(o)}catch(a){}var s={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(e){return s.isMac&&e.metaKey||!s.isMac&&e.ctrlKey?!0:!1},isKey:function(e,t){var n=s.getKeyCode(e);return!1===Array.isArray(t)?n===t:-1===t.indexOf(n)?!1:!0},getKeyCode:function(e){var t=e.which;return null===t&&(t=null!==e.charCode?e.charCode:e.keyCode),t},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},createLink:function(e,t,n,i){var r=e.createElement("a");return s.moveTextRangeIntoElement(t[0],t[t.length-1],r),r.setAttribute("href",n),i&&r.setAttribute("target",i),r},findOrCreateMatchingTextNodes:function(e,t,n){for(var i=e.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),r=[],o=0,a=!1,l=null,u=null;null!==(l=i.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!a&&n.start<o+l.nodeValue.length&&(a=!0,u=s.splitStartNodeIfNeeded(l,n.start,o)),a&&s.splitEndNodeIfNeeded(l,u,n.end,o),a&&o===n.end)break;if(a&&o>n.end+1)throw new Error("PerformLinking overshot the target!");a&&r.push(u||l),o+=l.nodeValue.length,null!==u&&(o+=u.nodeValue.length,i.nextNode()),u=null}else"img"===l.tagName.toLowerCase()&&(!a&&n.start<=o&&(a=!0),a&&r.push(l));return r},splitStartNodeIfNeeded:function(e,t,n){return t!==n?e.splitText(t-n):null},splitEndNodeIfNeeded:function(e,t,n,i){var r,o;r=i+(t||e).nodeValue.length+(t?e.nodeValue.length:0)-1,o=(t||e).nodeValue.length-(r+1-n),r>=n&&i!==r&&0!==o&&(t||e).splitText(o)},splitByBlockElements:function(t){if(3!==t.nodeType&&1!==t.nodeType)return[];var n=[],i=e.util.blockContainerElementNames.join(",");if(3===t.nodeType||0===t.querySelectorAll(i).length)return[t];for(var r=0;r<t.childNodes.length;r++){var o=t.childNodes[r];if(3===o.nodeType)n.push(o);else if(1===o.nodeType){var a=o.querySelectorAll(i);0===a.length?n.push(o):n=n.concat(e.util.splitByBlockElements(o))}}return n},findAdjacentTextNodeWithContent:function(e,t,n){var i,r=!1,o=n.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(i=o.nextNode();i;){if(i===t)r=!0;else if(r&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=o.nextNode()}return i},findPreviousSibling:function(e){if(!e||s.isMediumEditorElement(e))return!1;for(var t=e.previousSibling;!t&&!s.isMediumEditorElement(e.parentNode);)e=e.parentNode,t=e.previousSibling;return t},isDescendant:function(e,t,n){if(!e||!t)return!1;if(e===t)return!!n;if(1!==e.nodeType)return!1;if(i||3!==t.nodeType)return e.contains(t);for(var r=t.parentNode;null!==r;){if(r===e)return!0;r=r.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},throttle:function(e,t){var n,i,r,o=50,a=null,s=0,l=function(){s=Date.now(),a=null,r=e.apply(n,i),a||(n=i=null)};return t||0===t||(t=o),function(){var o=Date.now(),u=t-(o-s);return n=this,i=arguments,0>=u||u>t?(a&&(clearTimeout(a),a=null),s=o,r=e.apply(n,i),a||(n=i=null)):a||(a=setTimeout(l,u)),r}},traverseUp:function(e,t){if(!e)return!1;do{if(1===e.nodeType){if(t(e))return e;if(s.isMediumEditorElement(e))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,n){var i,r,o,a,l,u,c,d=!1,p=["insertHTML",!1,n];if(!e.util.isEdge&&t.queryCommandSupported("insertHTML"))try{return t.execCommand.apply(t,p)}catch(f){}if(i=t.getSelection(),i.rangeCount){if(r=i.getRangeAt(0),c=r.commonAncestorContainer,s.isMediumEditorElement(c)&&!c.firstChild)r.selectNode(c.appendChild(t.createTextNode("")));else if(3===c.nodeType&&0===r.startOffset&&r.endOffset===c.nodeValue.length||3!==c.nodeType&&c.innerHTML===r.toString()){for(;!s.isMediumEditorElement(c)&&c.parentNode&&1===c.parentNode.childNodes.length&&!s.isMediumEditorElement(c.parentNode);)c=c.parentNode;r.selectNode(c)}for(r.deleteContents(),o=t.createElement("div"),o.innerHTML=n,a=t.createDocumentFragment();o.firstChild;)l=o.firstChild,u=a.appendChild(l);r.insertNode(a),u&&(r=r.cloneRange(),r.setStartAfter(u),r.collapse(!0),e.selection.selectRange(t,r)),d=!0}return t.execCommand.callListeners&&t.execCommand.callListeners(p,d),d},execFormatBlock:function(t,n){var i,r=s.getTopBlockContainer(e.selection.getSelectionStart(t));if("blockquote"===n){if(r&&(i=Array.prototype.slice.call(r.childNodes),i.some(function(e){return s.isBlockContainer(e)})))return t.execCommand("outdent",!1,null);if(s.isIE)return t.execCommand("indent",!1,n)}if(r&&n===r.nodeName.toLowerCase()&&(n="p"),s.isIE&&(n="<"+n+">"),r&&"blockquote"===r.nodeName.toLowerCase()){if(s.isIE&&"<p>"===n)return t.execCommand("outdent",!1,n);if((s.isFF||s.isEdge)&&"p"===n)return i=Array.prototype.slice.call(r.childNodes),i.some(function(e){return!s.isBlockContainer(e)})&&t.execCommand("formatBlock",!1,n),t.execCommand("outdent",!1,n)}return t.execCommand("formatBlock",!1,n)},setTargetBlank:function(e,t){var n,i=t||!1;if("a"===e.nodeName.toLowerCase())e.target="_blank";else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)(!1===i||i===e[n].attributes.href.value)&&(e[n].target="_blank")},removeTargetBlank:function(e,t){var n;if("a"===e.nodeName.toLowerCase())e.removeAttribute("target");else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)t===e[n].attributes.href.value&&e[n].removeAttribute("target")},addClassToAnchors:function(e,t){var n,i,r=t.split(" ");if("a"===e.nodeName.toLowerCase())for(i=0;i<r.length;i+=1)e.classList.add(r[i]);else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)for(i=0;i<r.length;i+=1)e[n].classList.add(r[i])},isListItem:function(e){if(!e)return!1;if("li"===e.nodeName.toLowerCase())return!0;for(var t=e.parentNode,n=t.nodeName.toLowerCase();"li"===n||!s.isBlockContainer(t)&&"div"!==n;){if("li"===n)return!0;if(t=t.parentNode,!t)return!1;n=t.nodeName.toLowerCase()}return!1},cleanListDOM:function(t,n){if("li"===n.nodeName.toLowerCase()){var i=n.parentElement;"p"===i.parentElement.nodeName.toLowerCase()&&(s.unwrap(i.parentElement,t),e.selection.moveCursor(t,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(e,t,n){for(var i=t,r=null,o=!n;i!==e;){var a,s=i.parentNode,l=s.cloneNode(!1),u=o?i:s.firstChild;for(r&&(o?l.appendChild(r):a=r),r=l;u;){var c=u.nextSibling;u===i?(u.hasChildNodes()?u=u.cloneNode(!1):u.parentNode.removeChild(u),u.textContent&&r.appendChild(u),u=o?c:null):(u.parentNode.removeChild(u),(u.hasChildNodes()||u.textContent)&&r.appendChild(u),u=c)}a&&r.appendChild(a),i=s}return r},moveTextRangeIntoElement:function(e,t,n){if(!e||!t)return!1;var i=s.findCommonRoot(e,t);if(!i)return!1;if(t===e){var r=e.parentNode,o=e.nextSibling;return r.removeChild(e),n.appendChild(e),o?r.insertBefore(n,o):r.appendChild(n),n.hasChildNodes()}for(var a,l,u,c=[],d=0;d<i.childNodes.length;d++)if(u=i.childNodes[d],a){if(s.isDescendant(u,t,!0)){l=u;break}c.push(u)}else s.isDescendant(u,e,!0)&&(a=u);var p=l.nextSibling,f=i.ownerDocument.createDocumentFragment();return a===e?(a.parentNode.removeChild(a),f.appendChild(a)):f.appendChild(s.splitOffDOMTree(a,e)),c.forEach(function(e){e.parentNode.removeChild(e),f.appendChild(e)}),l===t?(l.parentNode.removeChild(l),f.appendChild(l)):f.appendChild(s.splitOffDOMTree(l,t,!0)),n.appendChild(f),l.parentNode===i?i.insertBefore(n,l):p?i.insertBefore(n,p):i.appendChild(n),n.hasChildNodes()},depthOfNode:function(e){for(var t=0,n=e;null!==n.parentNode;)n=n.parentNode,t++;return t},findCommonRoot:function(e,t){for(var n=s.depthOfNode(e),i=s.depthOfNode(t),r=e,o=t;n!==i;)n>i?(r=r.parentNode,n-=1):(o=o.parentNode,i-=1);for(;r!==o;)r=r.parentNode,o=o.parentNode;return r},isElementAtBeginningOfBlock:function(e){for(var t,n;!s.isBlockContainer(e)&&!s.isMediumEditorElement(e);){for(n=e;n=n.previousSibling;)if(t=3===n.nodeType?n.nodeValue:n.textContent,t.length>0)return!1;e=e.parentNode}return!0},isMediumEditorElement:function(e){return e&&e.getAttribute&&!!e.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(e){return s.traverseUp(e,function(e){return s.isMediumEditorElement(e)})},isBlockContainer:function(e){return e&&3!==e.nodeType&&-1!==s.blockContainerElementNames.indexOf(e.nodeName.toLowerCase())},getClosestBlockContainer:function(e){return s.traverseUp(e,function(e){return s.isBlockContainer(e)||s.isMediumEditorElement(e)})},getTopBlockContainer:function(e){var t=s.isBlockContainer(e)?e:!1;return s.traverseUp(e,function(e){return s.isBlockContainer(e)&&(t=e),!t&&s.isMediumEditorElement(e)?(t=e,!0):!1}),t},getFirstSelectableLeafNode:function(e){for(;e&&e.firstChild;)e=e.firstChild;if(e=s.traverseUp(e,function(e){return-1===s.emptyElementNames.indexOf(e.nodeName.toLowerCase())}),"table"===e.nodeName.toLowerCase()){var t=e.querySelector("th, td");t&&(e=t)}return e},getFirstTextNode:function(e){return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),s._getFirstTextNode(e)},_getFirstTextNode:function(e){if(3===e.nodeType)return e;for(var t=0;t<e.childNodes.length;t++){var n=s._getFirstTextNode(e.childNodes[t]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(e){return-1===e.indexOf("://")?"http://"+e:e},warn:function(){void 0!==t.console&&"function"==typeof t.console.warn&&t.console.warn.apply(t.console,arguments)},deprecated:function(e,t,n){var i=e+" is deprecated, please use "+t+" instead.";n&&(i+=" Will be removed in "+n),s.warn(i)},deprecatedMethod:function(e,t,n,i){s.deprecated(e,t,i),"function"==typeof this[t]&&this[t].apply(this,n)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){t.forEach(function(t){e.nodeName.toLowerCase()===t&&e.parentNode.removeChild(e)})},getClosestTag:function(e,t){return s.traverseUp(e,function(e){return e.nodeName.toLowerCase()===t.toLowerCase()})},unwrap:function(e,t){for(var n=t.createDocumentFragment(),i=Array.prototype.slice.call(e.childNodes),r=0;r<i.length;r++)n.appendChild(i[r]);n.childNodes.length?e.parentNode.replaceChild(n,e):e.parentNode.removeChild(e)},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}};e.util=s}(window),function(){var t=function(t){e.util.extend(this,t)};t.extend=function(t){var n,i=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},e.util.extend(n,i);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&e.util.extend(n.prototype,t),n},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe","trigger"].forEach(function(e){t.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(t){return e.util.isBlockContainer(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(t,n){var i,r,o=n.getSelection();return 0===o.rangeCount?!1:(i=o.getRangeAt(0),r=i.commonAncestorContainer,e.util.traverseUp(r,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(t){return e.util.isMediumEditorElement(t)},t)},exportSelection:function(e,t){if(!e)return null;var n=null,i=t.getSelection();if(i.rangeCount>0){var r,o=i.getRangeAt(0),a=o.cloneRange();a.selectNodeContents(e),a.setEnd(o.startContainer,o.startOffset),r=a.toString().length,n={start:r,end:r+o.toString().length},this.doesRangeStartWithImages(o,t)&&(n.startsWithImage=!0);var s=this.getTrailingImageCount(e,n,o.endContainer,o.endOffset);if(s&&(n.trailingImageCount=s),0!==r){var l=this.getIndexRelativeToAdjacentEmptyBlocks(t,e,o.startContainer,o.startOffset);-1!==l&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(e,t,n,i){if(e&&t){var r=n.createRange();r.setStart(t,0),r.collapse(!0);var o,a=t,s=[],l=0,u=!1,c=!1,d=0,p=!1,f=!1,h=null;for((i||e.startsWithImage||"undefined"!=typeof e.emptyBlocksIndex)&&(f=!0);!p&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if(e.trailingImageCount&&c&&("img"===a.nodeName.toLowerCase()&&d++,d===e.trailingImageCount)){for(var m=0;a.parentNode.childNodes[m]!==a;)m++;r.setEnd(a.parentNode,m+1),p=!0}if(!p&&1===a.nodeType)for(var v=a.childNodes.length-1;v>=0;)s.push(a.childNodes[v]),v-=1}else o=l+a.length,!u&&e.start>=l&&e.start<=o&&(f||e.start<o?(r.setStart(a,e.start-l),u=!0):h=a),u&&e.end>=l&&e.end<=o&&(e.trailingImageCount?c=!0:(r.setEnd(a,e.end-l),p=!0)),l=o;p||(a=s.pop())}!u&&h&&(r.setStart(h,h.length),r.setEnd(h,h.length)),"undefined"!=typeof e.emptyBlocksIndex&&(r=this.importSelectionMoveCursorPastBlocks(n,t,e.emptyBlocksIndex,r)),i&&(r=this.importSelectionMoveCursorPastAnchor(e,r)),this.selectRange(n,r)}},importSelectionMoveCursorPastAnchor:function(t,n){var i=function(e){return"a"===e.nodeName.toLowerCase()};if(t.start===t.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&e.util.traverseUp(n.startContainer,i)){for(var r=n.startContainer,o=n.startContainer.parentNode;null!==o&&"a"!==o.nodeName.toLowerCase();)o.childNodes[o.childNodes.length-1]!==r?o=null:(r=o,o=o.parentNode);if(null!==o&&"a"===o.nodeName.toLowerCase()){for(var a=null,s=0;null===a&&s<o.parentNode.childNodes.length;s++)o.parentNode.childNodes[s]===o&&(a=s);n.setStart(o.parentNode,a+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,i,r,o){var a,s,l=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),u=o.startContainer,c=0;for(r=r||1,a=3===u.nodeType&&e.util.isBlockContainer(u.previousSibling)?u.previousSibling:e.util.getClosestBlockContainer(u);l.nextNode();)if(s){if(s=l.currentNode,c++,c===r)break;if(s.textContent.length>0)break}else a===l.currentNode&&(s=l.currentNode);return s||(s=a),o.setStart(e.util.getFirstSelectableLeafNode(s),0),o},getIndexRelativeToAdjacentEmptyBlocks:function(n,i,r,o){if(r.textContent.length>0&&o>0)return-1;var a=r;if(3!==a.nodeType&&(a=r.childNodes[o]),a){if(!e.util.isElementAtBeginningOfBlock(a))return-1;var s=e.util.findPreviousSibling(a);if(!s)return-1;if(s.nodeValue)return-1}for(var l=e.util.getClosestBlockContainer(r),u=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),c=0;u.nextNode();){var d=""===u.currentNode.textContent;if((d||c>0)&&(c+=1),u.currentNode===l)return c;d||(c=0)}return c},doesRangeStartWithImages:function(e,t){if(0!==e.startOffset||1!==e.startContainer.nodeType)return!1;if("img"===e.startContainer.nodeName.toLowerCase())return!0;var n=e.startContainer.querySelector("img");if(!n)return!1;for(var i=t.createTreeWalker(e.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var r=i.currentNode;if(r===n)break;if(r.nodeValue)return!1}return!0},getTrailingImageCount:function(e,t,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var r=n.childNodes[i-1];r.hasChildNodes();)r=r.lastChild;for(var o,a=e,s=[],l=0,u=!1,c=!1,d=!1,p=0;!d&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if("img"===a.nodeName.toLowerCase()&&p++,a===r)d=!0;else if(1===a.nodeType)for(var f=a.childNodes.length-1;f>=0;)s.push(a.childNodes[f]),f-=1}else p=0,o=l+a.length,!u&&t.start>=l&&t.start<=o&&(u=!0),u&&t.end>=l&&t.end<=o&&(c=!0),l=o;d||(a=s.pop())}return p},selectionContainsContent:function(e){var t=e.getSelection();if(!t||t.isCollapsed||!t.rangeCount)return!1;if(""!==t.toString().trim())return!0;var n=this.getSelectedParentElement(t.getRangeAt(0));return n&&("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img"))?!0:!1},selectionInContentEditableFalse:function(e){var t,n=this.findMatchingSelectionParent(function(e){var n=e&&e.getAttribute("contenteditable");return"true"===n&&(t=!0),"#text"!==e.nodeName&&"false"===n},e);return!t&&n},getSelectionHtml:function(e){var t,n,i,r="",o=e.getSelection();if(o.rangeCount){for(i=e.createElement("div"),t=0,n=o.rangeCount;n>t;t+=1)i.appendChild(o.getRangeAt(t).cloneContents());r=i.innerHTML}return r},getCaretOffsets:function(e,t){var n,i;return t||(t=window.getSelection().getRangeAt(0)),n=t.cloneRange(),i=t.cloneRange(),n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var t,n,i,r=e.getSelection();if(!r.rangeCount||r.isCollapsed||!r.getRangeAt(0).commonAncestorContainer)return[];if(t=r.getRangeAt(0),3===t.commonAncestorContainer.nodeType){for(n=[],i=t.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(t.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"==typeof r.containsNode?r.containsNode(e,!0):!0})},selectNode:function(e,t){var n=t.createRange();n.selectNodeContents(e),this.selectRange(t,n)},select:function(e,t,n,i,r){var o=e.createRange();return o.setStart(t,n),i?o.setEnd(i,r):o.collapse(!0),this.selectRange(e,o),o},clearSelection:function(e,t){t?e.getSelection().collapseToStart():e.getSelection().collapseToEnd()},moveCursor:function(e,t,n){this.select(e,t,n)},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},selectRange:function(e,t){var n=e.getSelection();n.removeAllRanges(),n.addRange(t)},getSelectionStart:function(e){var t=e.getSelection().anchorNode,n=t&&3===t.nodeType?t.parentNode:t;return n}};e.selection=n}(),function(){function t(t,n){return t.some(function(t){if("function"!=typeof t.getInteractionElements)return!1;var i=t.getInteractionElements();return i?(Array.isArray(i)||(i=[i]),i.some(function(t){return e.util.isDescendant(t,n,!0)})):!1})}var n=function(e){this.base=e,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(t,n,i,r){t=e.util.isElement(t)||[window,document].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){e.addEventListener(n,i,r),this.events.push([e,n,i,r])}.bind(this))},detachDOMEvent:function(t,n,i,r){var o,a;t=e.util.isElement(t)||[window,document].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){o=this.indexOfListener(e,n,i,r),-1!==o&&(a=this.events.splice(o,1)[0],a[0].removeEventListener(a[1],a[2],a[3]))}.bind(this))},indexOfListener:function(e,t,n,i){var r,o,a;for(r=0,o=this.events.length;o>r;r+=1)if(a=this.events[r],a[0]===e&&a[1]===t&&a[2]===n&&a[3]===i)return r;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},detachAllEventsFromElement:function(e){for(var t=this.events.filter(function(t){return t&&t[0].getAttribute&&t[0].getAttribute("medium-editor-index")===e.getAttribute("medium-editor-index")}),n=0,i=t.length;i>n;n++){var r=t[n];this.detachDOMEvent(r[0],r[1],r[2],r[3])}},attachAllEventsToElement:function(e){this.listeners.editableInput&&(this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(t){this.attachDOMEvent(e,t.name,t.handler.bind(this))},this)},enableCustomEvent:function(e){void 0!==this.disabledEvents[e]&&delete this.disabledEvents[e]},disableCustomEvent:function(e){this.disabledEvents[e]=!0},attachCustomEvent:function(e,t){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t)},detachCustomEvent:function(e,t){var n=this.indexOfCustomListener(e,t);-1!==n&&this.customEvents[e].splice(n,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,n){this.customEvents[e]&&!this.disabledEvents[e]&&this.customEvents[e].forEach(function(e){e(t,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e=this.options.ownerDocument;if(this.execCommandListener&&e.execCommand.listeners){var t=e.execCommand.listeners.indexOf(this.execCommandListener);-1!==t&&e.execCommand.listeners.splice(t,1),e.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var e=this.options.ownerDocument;if(!e.execCommand.listeners){var t=function(t,n){e.execCommand.listeners&&e.execCommand.listeners.forEach(function(e){e({command:t[0],value:t[2],args:t,result:n})})},n=function(){var n=e.execCommand.orig.apply(this,arguments);if(!e.execCommand.listeners)return n;var i=Array.prototype.slice.call(arguments);return t(i,n),n};n.orig=e.execCommand,n.listeners=[],n.callListeners=t,e.execCommand=n}},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(e){this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);
break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[e]=!0}},attachToEachElement:function(e,t){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(n){this.attachDOMEvent(n,e,t.bind(this))},this),this.eventsCache.push({name:e,handler:t})},cleanupElement:function(e){var t=e.getAttribute("medium-editor-index");t&&(this.detachAllEventsFromElement(e),this.contentCache&&delete this.contentCache[t])},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(n,i){var r,o=this.base.getFocusedElement();o&&"click"===i.type&&this.lastMousedownTarget&&(e.util.isDescendant(o,this.lastMousedownTarget,!0)||t(this.base.extensions,this.lastMousedownTarget))&&(r=o),r||this.base.elements.some(function(t){return!r&&e.util.isDescendant(t,n,!0)&&(r=t),!!r},this);var a=!e.util.isDescendant(o,n,!0)&&!t(this.base.extensions,n);r!==o&&(o&&a&&(o.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,o)),r&&(r.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,r))),a&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(e,t){if(this.contentCache){var n=e.getAttribute("medium-editor-index"),i=e.innerHTML;i!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",t,e),this.contentCache[n]=i}},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var n,i=t.currentTarget.activeElement;this.base.elements.some(function(t){return e.util.isDescendant(t,i,!0)?(n=t,!0):!1},this),n&&this.updateInput(n,{target:i,currentTarget:n})}},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){if(this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput){var t={target:e.target,currentTarget:e.currentTarget};setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0)}},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",{currentTarget:e.currentTarget,target:e.target},e.currentTarget)},handleKeydown:function(t){return this.triggerCustomEvent("editableKeydown",t,t.currentTarget),e.util.isKey(t,e.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.ENTER)||t.ctrlKey&&e.util.isKey(t,e.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget):e.util.isKey(t,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget):void 0}},e.Events=n}(),function(){var t=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){t.isBuiltInButton(n)?e.Extension.call(this,this.defaults[n]):e.Extension.call(this,n)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var e=this.document.createElement("button"),t=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(t){e.classList.add(t)}),e.setAttribute("data-action",this.getAction()),n&&(e.setAttribute("title",n),e.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(t){e.setAttribute(t,this.attrs[t])},this),"fontawesome"===i&&this.contentFA&&(t=this.contentFA),e.innerHTML=t,e},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.execAction(t)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return this.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,n,i=!1,r=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(r&&r.length>0&&(i=-1!==r.indexOf(e.nodeName.toLowerCase())),!i&&this.style&&(t=this.style.value.split("|"),n=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),t.forEach(function(e){this.knownState||(i=-1!==n.indexOf(e),(i||"text-decoration"!==this.style.prop)&&(this.knownState=i))},this)),i)}});t.isBuiltInButton=function(t){return"string"==typeof t&&e.extensions.button.prototype.defaults.hasOwnProperty(t)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbarDefaultActions()},setToolbarPosition:function(){var e=this.base.getExtensionByName("toolbar");e&&e.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var n=e.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||e.util.getClosestTag(e.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){e.util.isKey(t,e.util.keyCode.K)&&e.util.isMetaCtrlKey(t)&&!t.shiftKey&&this.handleClick(t)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),e.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(t){var n=this.getInput(),i=this.getAnchorTargetCheckbox(),r=this.getAnchorButtonCheckbox();if(t=t||{value:""},"string"==typeof t&&(t={value:t}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=t.value,n.focus(),i&&(i.checked="_blank"===t.target),r){var o=t.buttonClass?t.buttonClass.split(" "):[];r.checked=-1!==o.indexOf(this.customClassOption)}},destroy:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},getFormOpts:function(){var e=this.getAnchorTargetCheckbox(),t=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",e&&e.checked&&(n.target="_blank"),t&&t.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},checkLinkFormat:function(e){var t=/^([a-z]+:)?\/\/|^(mailto|tel|maps):/i,n=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/;return n.test(e)?"tel:"+e:(t.test(e)?"":"http://")+encodeURI(e)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),n=e.querySelector(".medium-editor-toolbar-save"),i=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(t){return t.keyCode===e.util.keyCode.ENTER?(t.preventDefault(),void this.doFormSave()):void(t.keyCode===e.util.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||e.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(e){e=e||this.activeAnchor;var t,n,i=this.anchorPreview.offsetHeight,r=e.getBoundingClientRect(),o=(r.left+r.right)/2,a=this.diffLeft,s=this.diffTop;t=this.anchorPreview.offsetWidth/2;var l=this.base.getExtensionByName("toolbar");l&&(a=l.diffLeft,s=l.diffTop),n=a-t,this.anchorPreview.style.top=Math.round(i+r.bottom-s+this.window.pageYOffset-this.anchorPreview.offsetHeight)+"px",this.anchorPreview.style.right="initial",t>o?(this.anchorPreview.style.left=n+t+"px",this.anchorPreview.style.right="initial"):this.window.innerWidth-o<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+o+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var e={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};t.showForm(e),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var n=e.util.getClosestTag(t.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var i=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&i&&i.isDisplayed&&i.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){function t(t){return!e.util.getClosestTag(t,"a")}var n,i,r,o;n=[" ","	","\n","\r"," "," "," "," "," ","\u2028","\u2029"],i="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",r="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+i+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+i+"))",o=new RegExp("^("+i+")$","i");var a=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var e=0,t=0;t<this.window._mediumEditors.length;t++){var n=this.window._mediumEditors[t];null!==n&&void 0!==n.getExtensionByName("autoLink")&&e++}return 1===e},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(e,t){this.performLinking(t)},onKeypress:function(t){this.disableEventHandling||e.util.isKey(t,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var e=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(e,!0)}catch(n){window.console&&window.console.error("Failed to perform linking",n),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(t){var n=e.util.splitByBlockElements(t),i=!1;0===n.length&&(n=[t]);for(var r=0;r<n.length;r++)i=this.removeObsoleteAutoLinkSpans(n[r])||i,i=this.performLinkingWithinElement(n[r])||i;return this.base.events.updateInput(t,{target:t,currentTarget:t}),i},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var i=n.querySelectorAll('span[data-auto-link="true"]'),r=!1,o=0;o<i.length;o++){var a=i[o].textContent;if(-1===a.indexOf("://")&&(a=e.util.ensureUrlHasProtocol(a)),i[o].getAttribute("data-href")!==a&&t(i[o])){r=!0;var s=a.replace(/\s+$/,"");if(i[o].getAttribute("data-href")===s){var l=a.length-s.length,u=e.util.splitOffDOMTree(i[o],this.splitTextBeforeEnd(i[o],l));i[o].parentNode.insertBefore(u,i[o].nextSibling)}else e.util.unwrap(i[o],this.document)}}return r},splitTextBeforeEnd:function(e,t){for(var n=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=!0;i;)i=null!==n.lastChild();for(var r,o,a;t>0&&null!==a;)r=n.currentNode,o=r.nodeValue,o.length>t?(a=r.splitText(o.length-t),t=0):(a=n.previousNode(),t-=o.length);return a},performLinkingWithinElement:function(t){for(var n=this.findLinkableText(t),i=!1,r=0;r<n.length;r++){var o=e.util.findOrCreateMatchingTextNodes(this.document,t,n[r]);this.shouldNotLink(o)||this.createAutoLink(o,n[r].href)}return i},shouldNotLink:function(t){for(var n=!1,i=0;i<t.length&&n===!1;i++)n=!!e.util.traverseUp(t[i],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});return n},findLinkableText:function(e){for(var t=new RegExp(r,"gi"),i=e.textContent,a=null,s=[];null!==(a=t.exec(i));){var l=!0,u=a.index+a[0].length;l=!(0!==a.index&&-1===n.indexOf(i[a.index-1])||u!==i.length&&-1===n.indexOf(i[u])),l=l&&(-1!==a[0].indexOf("/")||o.test(a[0].split(".").pop().split("?").shift())),l&&s.push({href:a[0],start:a.index,end:u})}return s},createAutoLink:function(t,n){n=e.util.ensureUrlHasProtocol(n);var i=e.util.createLink(this.document,t,n,this.getEditorOption("targetBlank")?"_blank":null),r=this.document.createElement("span");for(r.setAttribute("data-auto-link","true"),r.setAttribute("data-href",n),i.insertBefore(r,i.firstChild);i.childNodes.length>1;)r.appendChild(i.childNodes[1])}});e.extensions.autoLink=a}(),function(){function t(t){var i=e.util.getContainerEditorElement(t),r=Array.prototype.slice.call(i.parentElement.querySelectorAll("."+n));r.forEach(function(e){e.classList.remove(n)})}var n="medium-editor-dragover",i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var i=e.target.classList?e.target:e.target.parentElement;t(i),"dragover"===e.type&&i.classList.add(n)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),this.base.selectElement(e.target);var n=this.base.exportSelection();n.start=n.end,this.base.importSelection(n),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files).forEach(function(e){this.isAllowedFile(e)&&e.type.match("image")&&this.insertImageFile(e)},this),t(e.target)},isAllowedFile:function(e){return this.allowedTypes.some(function(t){return!!e.type.match(t)})},insertImageFile:function(t){if("function"==typeof FileReader){var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",function(t){var n=this.document.createElement("img");n.src=t.target.result,e.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});e.extensions.fileDragging=i}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(e){var t=e.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]),this.keys[t].push(e)},this)},handleKeydown:function(t){var n=e.util.getKeyCode(t);if(this.keys[n]){var i=e.util.isMetaCtrlKey(t),r=!!t.shiftKey,o=!!t.altKey;this.keys[n].forEach(function(e){e.meta!==i||e.shift!==r||e.alt!==o&&void 0!==e.alt||(t.preventDefault(),t.stopPropagation(),"function"==typeof e.command?e.command.apply(this):!1!==e.command&&this.execAction(e.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontName")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(e){var t=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var e,t=this.document,n=t.createElement("div"),i=t.createElement("select"),r=t.createElement("a"),o=t.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var a=0;a<this.fonts.length;a++)e=t.createElement("option"),e.innerHTML=this.fonts[a],e.value=this.fonts[a],i.appendChild(e);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),r.setAttribute("href","#"),r.className="medium-editor-toobar-close",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(r),this.on(r,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("face")&&e.removeAttribute("face")})},handleFontChange:function(){var e=this.getSelect().value;""===e?this.clearFontName():this.execAction("fontName",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",
contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),n=e.createElement("input"),i=e.createElement("a"),r=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",t.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),r.setAttribute("href","#"),r.className="medium-editor-toobar-save",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(r),this.on(r,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",t.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.execAction("fontSize",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){function t(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function n(e,t,n){var i=e.clipboardData||t.clipboardData||n.dataTransfer,r={};if(!i)return r;if(i.getData){var o=i.getData("Text");o&&o.length>0&&(r["text/plain"]=o)}if(i.types)for(var a=0;a<i.types.length;a++){var s=i.types[a];r[s]=i.getData(s)}return r}var i="%ME_PASTEBIN%",r=null,o=null,a=function(e){e.stopPropagation()},s=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editablePaste",this.handlePaste.bind(this)),this.subscribe("editableKeydown",this.handleKeydown.bind(this)))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(e,t){if(!e.defaultPrevented){var i=n(e,this.window,this.document),r=i["text/html"],o=i["text/plain"];this.window.clipboardData&&void 0===e.clipboardData&&!r&&(r=o),(r||o)&&(e.preventDefault(),this.doPaste(r,o,t))}},doPaste:function(t,n,i){var r,o,a="";if(this.cleanPastedHTML&&t)return this.cleanPaste(t);if(this.getEditorOption("disableReturn")||i&&i.getAttribute("data-disable-return"))a=e.util.htmlEntities(n);else if(r=n.split(/[\r\n]+/g),r.length>1)for(o=0;o<r.length;o+=1)""!==r[o]&&(a+="<p>"+e.util.htmlEntities(r[o])+"</p>");else a=e.util.htmlEntities(r[0]);e.util.insertHTMLCommand(this.document,a)},handlePasteBinPaste:function(e){if(e.defaultPrevented)return void this.removePasteBin();var t=n(e,this.window,this.document),i=t["text/html"],r=t["text/plain"],a=o;return!this.cleanPastedHTML||i?(e.preventDefault(),this.removePasteBin(),this.doPaste(i,r,a),void this.trigger("editablePaste",{currentTarget:a,target:a},a)):void setTimeout(function(){this.cleanPastedHTML&&(i=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(i,r,a),this.trigger("editablePaste",{currentTarget:a,target:a},a)}.bind(this),0)},handleKeydown:function(t,n){e.util.isKey(t,e.util.keyCode.V)&&e.util.isMetaCtrlKey(t)&&(t.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(t){var n,s=e.selection.getSelectionRange(this.document),l=this.window.pageYOffset;o=t,s&&(n=s.getClientRects(),l+=n.length?n[0].top:s.startContainer.getBoundingClientRect().top),r=s;var u=this.document.createElement("div");u.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),u.setAttribute("style","border: 1px red solid; position: absolute; top: "+l+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),u.setAttribute("contentEditable",!0),u.innerHTML=i,this.document.body.appendChild(u),this.on(u,"focus",a),this.on(u,"focusin",a),this.on(u,"focusout",a),u.focus(),e.selection.selectNode(u,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(u,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==r&&(e.selection.selectRange(this.document,r),r=null),null!==o&&(o=null);var t=this.getPasteBin();t&&t&&(this.off(t,"focus",a),this.off(t,"focusin",a),this.off(t,"focusout",a),this.off(t,"paste",this.boundHandlePaste),t.parentElement.removeChild(t))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var e=this.getPasteBin();if(!e)return!1;if(e.firstChild&&"mcepastebin"===e.firstChild.id)return!1;var t=e.innerHTML;return t&&t!==i?t:!1},cleanPaste:function(e){var n,i,r,o,a=/<p|<br|<div/.test(e),s=[].concat(this.preCleanReplacements||[],t(),this.cleanReplacements||[]);for(n=0;n<s.length;n+=1)e=e.replace(s[n][0],s[n][1]);if(!a)return this.pasteHTML(e);for(r=this.document.createElement("div"),r.innerHTML="<p>"+e.split("<br><br>").join("</p><p>")+"</p>",i=r.querySelectorAll("a,p,div,br"),n=0;n<i.length;n+=1)switch(o=i[n],o.innerHTML=o.innerHTML.replace(/\n/gi," "),o.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(o);break;case"br":this.filterLineBreak(o)}this.pasteHTML(r.innerHTML)},pasteHTML:function(t,n){n=e.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags});var i,r,o,a,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),a=s.querySelector("body"),a.innerHTML=t,this.cleanupSpans(a),i=a.querySelectorAll("*"),o=0;o<i.length;o+=1)r=i[o],"a"===r.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(r),e.util.cleanupAttrs(r,n.cleanAttrs),e.util.cleanupTags(r,n.cleanTags);e.util.insertHTMLCommand(this.document,a.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.nodeName.toLowerCase()||"div"===e.nodeName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(t){var n,i,r,o=t.querySelectorAll(".replace-with"),a=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(n=0;n<o.length;n+=1)i=o[n],r=this.document.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?r.innerHTML="<i>"+i.innerHTML+"</i>":r.innerHTML=i.innerHTML,i.parentNode.replaceChild(r,i);for(o=t.querySelectorAll("span"),n=0;n<o.length;n+=1){if(i=o[n],e.util.traverseUp(i,a))return!1;e.util.unwrap(i,this.document)}}});e.extensions.paste=s}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},this)},destroy:function(){this.getEditorElements().forEach(function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},this)},showPlaceholder:function(e){e&&e.classList.add("medium-editor-placeholder")},hidePlaceholder:function(e){e&&e.classList.remove("medium-editor-placeholder")},updatePlaceholder:function(e,t){return e.querySelector("img, blockquote, ul, ol")||""!==e.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(e):void(t||this.showPlaceholder(e))},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this))},handleInput:function(e,t){var n=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,n)},handleFocus:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,"static":!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(e,t){return this.base.extensions.forEach(function(n){return n!==this?e.apply(t||this,arguments):void 0},this)},createToolbar:function(){var e=this.document.createElement("div");return e.id="medium-editor-toolbar-"+this.getEditorId(),e.className="medium-editor-toolbar",this["static"]?e.className+=" static-toolbar":this.relativeContainer?e.className+=" medium-editor-relative-toolbar":e.className+=" medium-editor-stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.forEachExtension(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var t,n,i,r,o,a,s=this.document.createElement("ul");return s.id="medium-editor-toolbar-actions"+this.getEditorId(),s.className="medium-editor-toolbar-actions",s.style.display="block",this.buttons.forEach(function(i){"string"==typeof i?(o=i,a=null):(o=i.name,a=i),r=this.base.addBuiltInExtension(o,a),r&&"function"==typeof r.getButton&&(n=r.getButton(this.base),t=this.document.createElement("li"),e.util.isElement(n)?t.appendChild(n):t.innerHTML=n,s.appendChild(t))},this),i=s.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),s},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this["static"]&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){return t&&t.target&&e.util.isDescendant(this.getToolbarElement(),t.target)?!1:void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var t=/<[^\/>][^>]*><\/[^>]+>/gim,n=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),i=e.selection.getSelectionHtml(this.document).replace(t,""),r=i.match(n);return!!r&&r.length>1},modifySelection:function(){var t=this.window.getSelection(),n=t.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),n.startContainer,this.document);if(i){for(var r=0;0===i.nodeValue.substr(r,1).trim().length;)r+=1;n=e.selection.select(this.document,i,r,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var t=e.selection.getSelectionElement(this.window);return!t||-1===this.getEditorElements().indexOf(t)||t.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this["static"]?this.showAndUpdateToolbar():!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var t,n=[],i=null,r=e.selection.getSelectionRange(this.document),o=function(e){"function"==typeof e.checkState?e.checkState(t):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(t)&&e.setActive()};if(r&&(this.forEachExtension(function(e){return"function"==typeof e.queryCommandState&&(i=e.queryCommandState(),null!==i)?void(i&&"function"==typeof e.setActive&&e.setActive()):void n.push(e)}),t=e.selection.getSelectedParentElement(r),this.getEditorElements().some(function(n){return e.util.isDescendant(n,t,!0)})))for(;t&&(n.forEach(o),!e.util.isMediumEditorElement(t));)t=t.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e=this.base.getFocusedElement(),t=this.window.getSelection();return e?void((this["static"]||!t.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this["static"]?this.positionStaticToolbar(e):this.positionToolbar(t)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))):this},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,r=this.getToolbarElement(),o=e.getBoundingClientRect(),a=o.top+n,s=o.left+o.width/2,l=r.offsetHeight,u=r.offsetWidth,c=u/2;switch(this.sticky?n>a+e.offsetHeight-l-this.stickyTopOffset?(r.style.top=a+e.offsetHeight-l+"px",r.classList.remove("medium-editor-sticky-toolbar")):n>a-l-this.stickyTopOffset?(r.classList.add("medium-editor-sticky-toolbar"),r.style.top=this.stickyTopOffset+"px"):(r.classList.remove("medium-editor-sticky-toolbar"),r.style.top=a-l+"px"):r.style.top=a-l+"px",this.align){case"left":t=o.left;break;case"right":t=o.right-u;break;case"center":t=s-c}0>t?t=0:t+u>i&&(t=i-Math.ceil(u)-1),r.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var t=e.getRangeAt(0),n=t.getBoundingClientRect();(!n||0===n.height&&0===n.width&&t.startContainer===t.endContainer)&&(n=1===t.startContainer.nodeType&&t.startContainer.querySelector("img")?t.startContainer.querySelector("img").getBoundingClientRect():t.startContainer.getBoundingClientRect());var i=this.window.innerWidth,r=(n.left+n.right)/2,o=this.getToolbarElement(),a=o.offsetHeight,s=o.offsetWidth,l=s/2,u=50,c=this.diffLeft-l;n.top<u?(o.classList.add("medium-toolbar-arrow-over"),o.classList.remove("medium-toolbar-arrow-under"),o.style.top=u+n.bottom-this.diffTop+this.window.pageYOffset-a+"px"):(o.classList.add("medium-toolbar-arrow-under"),o.classList.remove("medium-toolbar-arrow-over"),o.style.top=n.top+this.diffTop+this.window.pageYOffset-a+"px"),l>r?(o.style.left=c+l+"px",o.style.right="initial"):l>i-r?(o.style.left="auto",o.style.right=0):(o.style.left=c+r+"px",o.style.right="initial")}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)},handleDrop:function(t){var n,i="medium-editor-dragover";t.preventDefault(),t.stopPropagation(),t.dataTransfer.files&&(n=Array.prototype.slice.call(t.dataTransfer.files,0),n.some(function(t){if(t.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(t),i="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+i+'" />'),n.onload=function(){var e=this.document.getElementById(i);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=n.result)}.bind(this)}}.bind(this))),t.target.classList.remove(i)}});e.extensions.imageDragging=t}(),function(){function t(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n.textContent,r=e.selection.getCaretOffsets(n);(void 0===i[r.left-1]||""===i[r.left-1].trim()||void 0!==i[r.left]&&""===i[r.left].trim())&&t.preventDefault()}function n(t,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))t.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var i=e.selection.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()&&"li"!==i.nodeName.toLowerCase()||i.previousElementSibling&&"br"!==i.previousElementSibling.nodeName.toLowerCase()&&""===i.previousElementSibling.textContent.trim())&&t.preventDefault()}}function i(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n&&n.nodeName.toLowerCase();"pre"===i&&(t.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(n)&&(t.preventDefault(),t.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function r(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument),r=i.nodeName.toLowerCase(),o=/^(\s+|<br\/?>)?$/i,a=/h\d/i;e.util.isKey(t,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&i.previousElementSibling&&a.test(r)&&0===e.selection.getCaretOffsets(i).left?e.util.isKey(t,e.util.keyCode.BACKSPACE)&&o.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),t.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(t,e.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(n,i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!a.test(r)&&o.test(i.innerHTML)&&a.test(i.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&"li"===r&&o.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&"li"===i.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.parentElement.insertBefore(n,i.parentElement),e.selection.moveCursor(this.options.ownerDocument,n),i.parentElement.removeChild(i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(i,"blockquote")!==!1&&0===e.selection.getCaretOffsets(i).left&&(t.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p"))}function o(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument);i&&(e.util.isMediumEditorElement(i)&&0===i.children.length&&!e.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!e.util.isKey(t,e.util.keyCode.ENTER)||e.util.isListItem(i)||e.util.isBlockContainer(i)||(n=i.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):t.shiftKey||t.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function a(e,t){var n=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=t.innerHTML.trim())}function s(e){e._mediumEditors||(e._mediumEditors=[null]),this.id||(this.id=e._mediumEditors.length),e._mediumEditors[this.id]=this}function l(e){e._mediumEditors&&e._mediumEditors[this.id]&&(e._mediumEditors[this.id]=null)}function u(t,n,i){var r=[];if(t||(t=[]),"string"==typeof t&&(t=n.querySelectorAll(t)),e.util.isElement(t)&&(t=[t]),i)for(var o=0;o<t.length;o++){var a=t[o];!e.util.isElement(a)||a.getAttribute("data-medium-editor-element")||a.getAttribute("medium-editor-textarea-id")||r.push(a)}else r=Array.prototype.slice.apply(t);return r}function c(e){var t=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');t&&(t.classList.remove("medium-editor-hidden"),t.removeAttribute("medium-editor-textarea-id")),e.parentNode&&e.parentNode.removeChild(e)}function d(e,t){return Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=t[n])}),e}function p(e,t,n){var i={window:n.options.contentWindow,document:n.options.ownerDocument,base:n};return e=d(e,i),"function"==typeof e.init&&e.init(),e.name||(e.name=t),e}function f(){return this.elements.every(function(e){return!!e.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function h(){return f.call(this)?this.options.anchorPreview!==!1:!1}function m(){return this.options.placeholder!==!1}function v(){return this.options.autoLink!==!1}function g(){return this.options.imageDragging!==!1}function y(){return this.options.keyboardCommands!==!1}function b(){return!this.options.extensions.imageDragging}function _(e){for(var t=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,r=e.attributes;this.options.ownerDocument.getElementById(i);)n++,i="medium-editor-"+n;t.className=e.className,t.id=i,t.innerHTML=e.value,e.setAttribute("medium-editor-textarea-id",i);for(var o=0,a=r.length;a>o;o++)t.hasAttribute(r[o].nodeName)||t.setAttribute(r[o].nodeName,r[o].nodeValue);return e.form&&this.on(e.form,"reset",function(e){e.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),e.classList.add("medium-editor-hidden"),e.parentNode.insertBefore(t,e),t}function w(t,i){if(!t.getAttribute("data-medium-editor-element")){"textarea"===t.nodeName.toLowerCase()&&(t=_.call(this,t),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=a.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||t.getAttribute("data-disable-editing")||(t.setAttribute("contentEditable",!0),t.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(t.getAttribute("data-disable-return")||t.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||t.getAttribute("data-disable-return")||this.on(t,"keyup",o.bind(this));var r=e.util.guid();t.setAttribute("data-medium-editor-element",!0),t.setAttribute("role","textbox"),t.setAttribute("aria-multiline",!0),t.setAttribute("data-medium-editor-editor-index",i),t.setAttribute("medium-editor-index",r),P[r]=t.innerHTML,this.events.attachAllEventsToElement(t)}return t}function C(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",r.bind(this)),this.subscribe("editableKeydownEnter",r.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function E(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(e){"toolbar"!==e&&this.options.extensions[e]&&this.extensions.push(p(this.options.extensions[e],e,this))},this),b.call(this)){var t=this.options.fileDragging;t||(t={},g.call(this)||(t.allowedTypes=[])),this.addBuiltInExtension("fileDragging",t)}var n={paste:!0,"anchor-preview":h.call(this),autoLink:v.call(this),keyboardCommands:y.call(this),placeholder:m.call(this)};Object.keys(n).forEach(function(e){n[e]&&this.addBuiltInExtension(e)},this);var i=this.options.extensions.toolbar;if(!i&&f.call(this)){var r=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});i=new e.extensions.toolbar(r)}i&&this.extensions.push(p(i,"toolbar",this))}function x(t,n){var i=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&i.forEach(function(t){n.hasOwnProperty(t[0])&&void 0!==n[t[0]]&&e.util.deprecated(t[0],t[1],"v6.0.0")}),e.util.defaults({},n,t)}function T(t,n){var i,r,o=/^append-(.+)$/gi,a=/justify([A-Za-z]*)$/g;if(i=o.exec(t))return e.util.execFormatBlock(this.options.ownerDocument,i[1]);if("fontSize"===t)return n.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),r=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,r);if("fontName"===t)return n.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),r=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,r);if("createLink"===t)return this.createLink(n);if("image"===t){var s=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,s)}if(a.exec(t)){var l=this.options.ownerDocument.execCommand(t,!1,null),u=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return u&&k.call(this,e.util.getTopBlockContainer(u)),l}return r=n&&n.value,this.options.ownerDocument.execCommand(t,!1,r)}function k(t){if(t){var n,i=Array.prototype.slice.call(t.childNodes).filter(function(e){var t="div"===e.nodeName.toLowerCase();return t&&!n&&(n=e.style.textAlign),t});i.length&&(this.saveSelection(),i.forEach(function(t){if(t.style.textAlign===n){var i=t.lastChild;if(i){e.util.unwrap(t,this.options.ownerDocument);var r=this.options.ownerDocument.createElement("BR");i.parentNode.insertBefore(r,i.nextSibling)}}},this),t.style.textAlign=n,this.restoreSelection())}}var P={};e.prototype={init:function(e,t){return this.options=x.call(this,this.defaults,t),this.origElements=e,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(s.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,E.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(e){"function"==typeof e.destroy&&e.destroy()},this),this.events.destroy(),this.elements.forEach(function(e){this.options.spellcheck&&(e.innerHTML=e.innerHTML),e.removeAttribute("contentEditable"),e.removeAttribute("spellcheck"),e.removeAttribute("data-medium-editor-element"),e.removeAttribute("role"),e.removeAttribute("aria-multiline"),e.removeAttribute("medium-editor-index"),e.removeAttribute("data-medium-editor-editor-index"),e.getAttribute("medium-editor-textarea-id")&&c(e)},this),this.elements=[],
this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(e,t,n,i){return this.events.attachDOMEvent(e,t,n,i),this},off:function(e,t,n,i){return this.events.detachDOMEvent(e,t,n,i),this},subscribe:function(e,t){return this.events.attachCustomEvent(e,t),this},unsubscribe:function(e,t){return this.events.detachCustomEvent(e,t),this},trigger:function(e,t,n){return this.events.triggerCustomEvent(e,t,n),this},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){var e,t,n={},i=this.elements.length;for(e=0;i>e;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,n[t]={value:this.elements[e].innerHTML.trim()};return n},getExtensionByName:function(e){var t;return this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===e?(t=n,!0):!1}),t},addBuiltInExtension:function(t,n){var i,r=this.getExtensionByName(t);if(r)return r;switch(t){case"anchor":i=e.util.extend({},this.options.anchor,n),r=new e.extensions.anchor(i);break;case"anchor-preview":r=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":r=new e.extensions.autoLink;break;case"fileDragging":r=new e.extensions.fileDragging(n);break;case"fontname":r=new e.extensions.fontName(this.options.fontName);break;case"fontsize":r=new e.extensions.fontSize(n);break;case"keyboardCommands":r=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":r=new e.extensions.paste(this.options.paste);break;case"placeholder":r=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(t)&&(n?(i=e.util.defaults({},n,e.extensions.button.prototype.defaults[t]),r=new e.extensions.button(i)):r=new e.extensions.button(t))}return r&&this.extensions.push(p(r,t,this)),r},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var e=this.getExtensionByName("toolbar");return e&&e.checkState(),this},queryCommandState:function(e){var t,n=/^full-(.+)$/gi,i=null;t=n.exec(e),t&&(e=t[1]);try{i=this.options.ownerDocument.queryCommandState(e)}catch(r){i=null}return i},execAction:function(t,n){var i,r,o=/^full-(.+)$/gi;return i=o.exec(t),i?(this.saveSelection(),this.selectAllContents(),r=T.call(this,i[1],n),this.restoreSelection()):r=T.call(this,t,n),("insertunorderedlist"===t||"insertorderedlist"===t)&&e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),r},getSelectedParentElement:function(t){return void 0===t&&(t=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(t)},selectAllContents:function(){var t=e.selection.getSelectionElement(this.options.contentWindow);if(t){for(;1===t.children.length;)t=t.children[0];this.selectElement(t)}},selectElement:function(t){e.selection.selectNode(t,this.options.ownerDocument);var n=e.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var e;return this.elements.some(function(t){return!e&&t.getAttribute("data-medium-focused")&&(e=t),!!e},this),e},exportSelection:function(){var t=e.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(t),i=null;return n>=0&&(i=e.selection.exportSelection(t,this.options.ownerDocument)),null!==i&&0!==n&&(i.editableElementIndex=n),i},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(t,n){if(t){var i=this.elements[t.editableElementIndex||0];e.selection.importSelection(t,i,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(t){var n,i=e.selection.getSelectionElement(this.options.contentWindow),r={};if(-1!==this.elements.indexOf(i)){try{if(this.events.disableCustomEvent("editableInput"),t.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),n=t.url||t.value,n&&n.trim().length>0){var o=this.options.contentWindow.getSelection();if(o){var a,s,l,u,c=o.getRangeAt(0),d=c.commonAncestorContainer;if(3===c.endContainer.nodeType&&3!==c.startContainer.nodeType&&0===c.startOffset&&c.startContainer.firstChild===c.endContainer&&(d=c.endContainer),s=e.util.getClosestBlockContainer(c.startContainer),l=e.util.getClosestBlockContainer(c.endContainer),3!==d.nodeType&&0!==d.textContent.length&&s===l){var p=s||i,f=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),a=this.exportSelection(),f.appendChild(p.cloneNode(!0)),i===p?e.selection.select(this.options.ownerDocument,p.firstChild,0,p.lastChild,3===p.lastChild.nodeType?p.lastChild.nodeValue.length:p.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,p,0,p,p.childNodes.length);var h=this.exportSelection();u=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,f,{start:a.start-h.start,end:a.end-h.start,editableElementIndex:a.editableElementIndex}),0===u.length&&(f=this.options.ownerDocument.createDocumentFragment(),f.appendChild(d.cloneNode(!0)),u=[f.firstChild.firstChild,f.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,u,n.trim());var m=(f.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,f.firstChild.innerHTML.replace(/^\s+/,"")),a.start-=m,a.end-=m,this.importSelection(a)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===t.target?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n),t.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),t.buttonClass)}}if(this.options.targetBlank||"_blank"===t.target||t.buttonClass){r=this.options.ownerDocument.createEvent("HTMLEvents"),r.initEvent("input",!0,!0,this.options.contentWindow);for(var v=0,g=this.elements.length;g>v;v+=1)this.elements[v].dispatchEvent(r)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",r,i)}},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)},setContent:function(e,t){if(t=t||0,this.elements[t]){var n=this.elements[t];n.innerHTML=e,this.checkContentChanged(n)}},getContent:function(e){return e=e||0,this.elements[e]?this.elements[e].innerHTML.trim():null},checkContentChanged:function(t){t=t||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(t,{target:t,currentTarget:t})},resetContent:function(e){if(e){var t=this.elements.indexOf(e);return void(-1!==t&&this.setContent(P[e.getAttribute("medium-editor-index")],t))}this.elements.forEach(function(e,t){this.setContent(P[e.getAttribute("medium-editor-index")],t)},this)},addElements:function(e){var t=u(e,this.options.ownerDocument,!0);return 0===t.length?!1:void t.forEach(function(e){e=w.call(this,e,this.id),this.elements.push(e)},this)},removeElements:function(e){var t=u(e,this.options.ownerDocument),n=t.map(function(e){return e.getAttribute("medium-editor-textarea-id")&&e.parentNode?e.parentNode.querySelector('div[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]'):e});this.elements=this.elements.filter(function(e){return-1!==n.indexOf(e)?(this.events.cleanupElement(e),e.getAttribute("medium-editor-textarea-id")&&c(e),!1):!0},this)}},e.getEditorFromElement=function(e){var t=e.getAttribute("data-medium-editor-editor-index"),n=e&&e.ownerDocument&&(e.ownerDocument.defaultView||e.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[t]?n._mediumEditors[t]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(e){var t=e.split("-"),n=t[0].split("."),i=t.length>1?t[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:i,toString:function(){return[n[0],n[1],n[2]].join(".")+(i?"-"+i:"")}}},e.version=e.parseVersionString.call(this,{version:"5.20.0"}.version),e}()),define("storymaps-react/common/builder/textEditor/plugins/blockToolbar/utils",["module","exports","lib/medium-editor/dist/js/medium-editor"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),o={isChildOf:function(e,t){return r["default"].util.traverseUp(e,function(e){return e===t})?!0:!1}};t["default"]=o,e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/textEditor/plugins/blockToolbar/Core",[],function(){}),define("storymaps-react/common/builder/textEditor/plugins/blockToolbar/Core",["module","exports","lib/medium-editor/dist/js/medium-editor","./utils","lib-build/less!./Core"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){o(this,e),this._plugin=t,this._editor=this._plugin.base,this._editorNode=$(this._editor.elements[0]),this._document=$(document),this._defaultButtons=a["default"].extensions.button.prototype.defaults,this._highlightToolbar=null,this._buttonsClasses={},this._managedTagsList=[],this._activeButtons=[],this._actionPendingRefresh=!1,this._button=null,this._blockToolbar=null,this._selection=a["default"].selection,this.init(),this.createToolbar(),this.initEvents()}return l(e,[{key:"selectElement",value:function(e){this.selectedElement=e}},{key:"getSelectedElement",value:function(){return this.selectedElement}},{key:"init",value:function(){var e=this,t=this._plugin.getButtons();t.forEach(function(t){e._buttonsClasses[t]=e._editor.addBuiltInExtension(t),e._managedTagsList=e._managedTagsList.concat(e._buttonsClasses[t].tagNames)}),this._managedTagsList.push("p"),this._managedTagsList=this._managedTagsList.filter(function(e,t,n){return n.indexOf(e)==t}),setTimeout(function(){var e=this;this._editor.extensions.forEach(function(t){"toolbar"==t.name&&(e._highlightToolbar=t)})}.bind(this),1e3)}},{key:"createToolbar",value:function(){var e=this._plugin.getButtons(),t=a["default"].extensions.button.prototype.defaults,n=void 0;this._button=document.createElement("div"),this._button.classList.add("block-toolbar-button"),this._button.setAttribute("contentediable",!1),this._button.innerHTML=n,document.body.appendChild(this._button),this._blockToolbar=document.createElement("div"),this._blockToolbar.classList.add("block-toolbar-buttons"),this._blockToolbar.classList.add("medium-toolbar-arrow-under"),this._blockToolbar.setAttribute("contentediable",!1),n="<ul>",e.forEach(function(e){if(t[e]){var i=t[e].contentFA;i.match(/<\/i>$/)||(i+="</i>"),n+='<li><a class="block-button" data-button="'+e+'">'+i+"</a></li>"}}),n+="</ul>",this._blockToolbar.innerHTML=n,document.body.appendChild(this._blockToolbar)}},{key:"initEvents",value:function(){var e=this;this._plugin.on(document,"click",this.updateToolbar.bind(this)),this._plugin.on(document,"keyup",this.updateToolbar.bind(this)),this._plugin.on(this._button,"click",this.toggleToolbar.bind(this));var t=this._blockToolbar.getElementsByClassName("block-button");Array.prototype.forEach.call(t,function(t){e._plugin.on(t,"click",e.handleButtonClick.bind(e))}),this._plugin.on(window,"resize",this.positionToolbar.bind(this)),this._editor.subscribe("showToolbar",function(){this.hideToolbar()}.bind(this))}},{key:"destroy",value:function(){this._button.remove(),this._blockToolbar.remove()}},{key:"positionToolbar",value:function(){var e=void 0,t=void 0,n=void 0;this._button.classList.contains("active")!==!1&&(e=this._editor.getSelectedParentElement(),this._managedTagsList.indexOf(e.tagName.toLowerCase())<0&&(e=$(e).closest(this._managedTagsList.join(","))[0],!this.shouldDisplayButtonsOnElement(e))||(t=e.getBoundingClientRect(),n={top:this.getScrollY()+t.top,left:(window.scrollX||0)+t.left},$(e).is("h1")&&(n.top=n.top+10),n.left-=35,n.left=n.left<0?t.left:n.left,this._button.style.left=n.left+"px",this._button.style.top=n.top+"px",this._blockToolbar.style.top=n.top-48+"px",this._blockToolbar.style.left=n.left-10+"px"))}},{key:"updateToolbar",value:function(e){var t=$(e.target);(this._editorNode.has(t).length||this._actionPendingRefresh||t.is(this._editor.elements[0])&&1==$(this._editor.elements[0]).find(".block").length&&""==$(this._editor.elements[0]).find(".block").eq(0).html())&&this.updateToolbarForElement(this._editor.getSelectedParentElement())}},{key:"updateToolbarForElement",value:function(e){if(this._highlightToolbar&&this._highlightToolbar.multipleBlockElementsSelected())return void this.hideToolbarAndButton();if(!this.shouldDisplayButtonsOnElement(e))return void this.hideToolbarAndButton();if($(e).hasClass("block-caption"))return void this.hideToolbarAndButton();var t=e!=this.getSelectedElement();null==this.getSelectedElement()?t=!1:$(e).hasClass("block-toolbar-button-status")?t=!1:this._actionPendingRefresh&&(t=!1,this._actionPendingRefresh=!1),t&&this.hideToolbar(),this.selectElement(e),this.showButtons()}},{key:"shouldDisplayButtonsOnElement",value:function(e){var t=!1;return this._plugin.getEditorElements().forEach(function(n){return s["default"].isChildOf(e,n)?void(t=!0):void 0}),t?!0:!1}},{key:"showButtons",value:function(){var e=this,t=this._plugin.getButtons(),n=[];t.forEach(function(t){var i=!1;i="ALREADY_APLLIED"==e._plugin.getQueryStateMethods()[t]?e._buttonsClasses[t].isAlreadyApplied(e.getSelectedElement()):e._editor.queryCommandState(t),i&&n.push(t)}),t.forEach(function(e){var t=n.indexOf(e)>-1;$(".block-button[data-button="+e+"]").toggleClass("active",t)});var i="justifyLeft";n.length?i=n.indexOf("h1")>-1?"h1":n.indexOf("h2")>-1?"h2":n.indexOf("quote")>-1?"quote":n[0]:(n=[i],$(".block-button[data-button="+i+"]").toggleClass("active",!0)),this._button.innerHTML='<a class="block-toolbar-button-status">'+this._defaultButtons[i].contentFA+"</a>",this._button.classList.add("active"),this.positionToolbar(),this._activeButtons=n}},{key:"toggleToolbar",value:function(){this._button.classList.toggle("buttons-active"),this._blockToolbar.classList.toggle("active")}},{key:"hideToolbar",value:function(){this._button.classList.remove("buttons-active"),this._blockToolbar.classList.remove("active")}},{key:"hideToolbarAndButton",value:function(){this._button.classList.remove("active"),this._button.classList.remove("buttons-active"),this._blockToolbar.classList.remove("active")}},{key:"handleButtonClick",value:function(e){var t=e.currentTarget.getAttribute("data-button");this._actionPendingRefresh=!0,this._selection.selectNode(this.getSelectedElement(),document),"quote"==t?this._activeButtons.indexOf("h1")>-1?this._editor.execAction(this._defaultButtons.h1.action):this._activeButtons.indexOf("h2")>-1&&this._editor.execAction(this._defaultButtons.h2.action):("h1"==t||"h2"==t)&&(this._activeButtons.indexOf("quote")>-1?this._editor.execAction(this._defaultButtons.quote.action):this._activeButtons.indexOf("orderedlist")>-1?this._editor.execAction(this._defaultButtons.orderedlist.action):this._activeButtons.indexOf("unorderedlist")>-1&&this._editor.execAction(this._defaultButtons.unorderedlist.action)),this._defaultButtons[t]&&this._editor.execAction(this._defaultButtons[t].action),this.hideEditorToolbar(),this._selection.clearSelection(document),e.preventDefault()}},{key:"hideEditorToolbar",value:function(){setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),0),setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),10),setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),50)}},{key:"getScrollY",value:function(){return this._document.scrollTop()}}]),e}();t["default"]=u,e.exports=t["default"]}),define("storymaps-react/common/builder/textEditor/plugins/blockToolbar/Plugin",["module","exports","lib/medium-editor/dist/js/medium-editor","./Core"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n),a=r(i),s=o["default"].Extension.extend({name:"blockToolbar",_initializedAddons:{},init:function(){o["default"].Extension.prototype.init.apply(this,arguments),this.core=new a["default"](this)},destroy:function(){this.core.destroy()},getCore:function(){return this.core},getButtons:function(){return this.buttons},getQueryStateMethods:function(){return this.queryStateMethods},hide:function(){this.core.hideToolbarAndButton()},updateToolbar:function(){this.core.updateToolbarForElement(this.base.getSelectedParentElement())}});t["default"]=s,e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/textEditor/plugins/blockAdd/Core",[],function(){}),define("storymaps-react/common/builder/textEditor/plugins/blockAdd/Core",["module","exports","dojo/has","lib-build/less!./Core"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){r(this,e),this._plugin=t,this._editor=this._plugin.base,this._document=$(document),this._editorNode=$(this._editor.elements[0]),this._menu=null,this._placementRules=null,this.createMenu(),this.initEvents(),this.addBlockEvents()}return a(e,[{key:"setPlacementRules",value:function(e){this._placementRules=e,e.left&&this._menu.attr("style","left:"+e.left),this._menu.css(e)}},{key:"addBlockEvents",value:function(){this.getEditorBlocks().off("mousemove").off("mouseleave").mousemove(function(e){var t=$(e.target),n=t[0];if(t.hasClass("block")){var i=n.getBoundingClientRect(),r=e.pageY>i.bottom+this.getScrollY();$(e.target).toggleClass("show-add-invite",r).css("cursor",r?"hand":"")}}.bind(this)).mouseleave(function(){var e=$(this);e.hasClass("block")&&e.toggleClass("show-add-invite",!1).css("cursor","")})}},{key:"getEditorBlocks",value:function(){return this._editorNode.find(this._plugin.getBlocksSelector())}},{key:"onEditorContentChange",value:function(){setTimeout(function(){this.addBlockEvents()}.bind(this),200)}},{key:"update",value:function(){this.onEditorContentChange()}},{key:"destroy",value:function(){this._menu.remove()}},{key:"createMenu",value:function(){var e=this._plugin.getButtons();this._menu=document.createElement("div"),this._menu.classList.add("add-toolbar-menu-container"),this._menu.setAttribute("contentediable",!1);var t='<div class="add-toolbar-menu"><ul>';Object.keys(e).forEach(function(n){var i=e[n],r=e[n].icon||"",o=e[n].iconHover||"",a='<img class="add-button-icon" src="'+r+'" />';t+='<li><a class="add-button" data-button="'+n+'" data-icon="'+r+'" data-icon-hover="'+o+'">'+a+" "+i.label+"</a></li>"}),t+="</ul></div>",this._menu.innerHTML=t,document.body.appendChild(this._menu),this._menu=$(this._menu)}},{key:"initEvents",value:function(){var e=this;this._plugin.on(document,"click",this.handleDocumentClick.bind(this));var t=this._menu[0].getElementsByClassName("add-button");Array.prototype.forEach.call(t,function(t){e._plugin.on(t,"click",e.handleButtonClick.bind(e)),t.getAttribute("data-icon-hover")&&$(t).hover(function(){$(this).find("img").attr("src",t.getAttribute("data-icon-hover"))},function(){$(this).find("img").attr("src",t.getAttribute("data-icon"))})}),this._editor.subscribe("editableInput",this.onEditorContentChange.bind(this)),(0,o["default"])("mac")&&$("body").addClass("is-mac-os")}},{key:"handleDocumentClick",value:function(e){var t=$(e.target),n=!1,i=null;if(this._editorNode.has(t).length&&t.hasClass("block")&&(i=e.target.getBoundingClientRect(),e.pageY>i.bottom+this.getScrollY()&&(n=!0)),n){if(this._menu.hasClass("active")&&this._menu.data("block-index")==t.index())return void this._menu.removeClass("active");this._menu.css({top:this.getScrollY()+i.bottom}).data("block-index",t.index()).addClass("active"),this._editor.options.extensions&&this._editor.options.extensions.blockToolbar&&this._editor.options.extensions.blockToolbar.hide(),t.addClass("add-menu-active");var r=this._menu[0].getBoundingClientRect(),o=0;if(r.bottom>app.display.windowHeight&&(o=app.display.windowHeight-r.bottom),o){var a=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:a-o+10},150)}}else this.hideMenuAndInvite()}},{key:"hideMenuAndInvite",value:function(){this.getEditorBlocks().removeClass("add-menu-active"),this._menu.removeClass("active")}},{key:"handleButtonClick",value:function(e){var t=e.currentTarget.getAttribute("data-button"),n=this._plugin.getButtons();if(n[t].action){var i=this._editorNode.find(".add-menu-active"),r=i.parents(".section").eq(0).index();n[t].action({previousNode:i,sectionIndex:r,blockIndex:i.index()}).then(function(e){if(!e)return void this.hideMenuAndInvite();if(i.after(e),this.update(),this.hideMenuAndInvite(),"text"==t){var n=i.next();this._editor.selectElement(n[0]),n.click()}}.bind(this),function(){})}}},{key:"getScrollY",value:function(){return this._document.scrollTop()}}]),e}();t["default"]=s,e.exports=t["default"]}),define("storymaps-react/common/builder/textEditor/plugins/blockAdd/Plugin",["module","exports","lib/medium-editor/dist/js/medium-editor","./Core"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n),a=r(i),s=o["default"].Extension.extend({name:"blockAdd",_initializedAddons:{},init:function(){o["default"].Extension.prototype.init.apply(this,arguments),this.core=new a["default"](this)},destroy:function(){this.core.destroy()},getCore:function(){return this.core},getButtons:function(){return this.buttons},getBlocksSelector:function(){return this.blocksSelector},update:function(){this.core.update()},hide:function(){this.core.hideMenuAndInvite()},setPlacementRules:function(e){this.core.setPlacementRules(e)}});t["default"]=s,e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/textEditor/plugins/AnchorPreview",[],function(){}),define("storymaps-react/common/builder/textEditor/plugins/AnchorPreview",["module","exports","lib/medium-editor/dist/js/medium-editor","lib-build/less!./AnchorPreview"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),o=r["default"].extensions.anchorPreview.extend({name:"anchor-preview",init:function(){r["default"].extensions.anchorPreview.prototype.init.call(this)},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner" target="_blank"></a>    <i class="fa fa-pencil edit-btn" aria-hidden="true"></i></div>'},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&e.target.classList.contains("edit-btn")&&(this.base.selectElement(this.activeAnchor),e.preventDefault(),this.base.delay(function(){if(n){var e={url:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};t.showForm(e),n=null}}.bind(this))),this.hidePreview()},positionPreview:function(e){e=e||this.activeAnchor;var t,n,i=this.anchorPreview.offsetHeight,r=e.getBoundingClientRect(),o=(r.left+r.right)/2,a=this.diffLeft;t=this.anchorPreview.offsetWidth/2;var s=this.base.getExtensionByName("toolbar");s&&(a=s.diffLeft),n=a-t,this.anchorPreview.style.top=Math.round(r.top-i+this.window.pageYOffset)+"px",this.anchorPreview.style.right="initial",t>o?(this.anchorPreview.style.left=n+t+"px",this.anchorPreview.style.right="initial"):this.window.innerWidth-o<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+o+"px",this.anchorPreview.style.right="initial")}});t["default"]=o,e.exports=t["default"]}),define("lib-build/css!lib/medium-editor/dist/css/medium-editor",[],function(){}),define("lib-build/less!storymaps-react/common/builder/textEditor/MediumEditorWrapper",[],function(){}),define("storymaps-react/common/builder/textEditor/MediumEditorWrapper",["module","exports","lib/medium-editor/dist/js/medium-editor","./plugins/blockToolbar/Plugin","./plugins/blockAdd/Plugin","./plugins/AnchorPreview","dojo/Deferred","lib-build/css!lib/medium-editor/dist/css/medium-editor","lib-build/less!./MediumEditorWrapper","lib-build/css!lib/font-awesome/css/font-awesome"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){function e(){h&&h()}var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.node,i=t.addMedia,r=t.splitSection,o=t.style,a=t.addButtons||[],s=t.authorizedMedia,h=t.onChange,m=null;if(!n||!i||!o)return void console.error("Could not initialize MediumEditor");var v=t.placeholder||"Continue your story here...",g=["bold","italic","underline","strikethrough","anchor"],y=["h1","h2","quote","justifyLeft","justifyCenter","justifyRight"],b=["justifyLeft","justifyCenter","justifyRight","h2"],_={justifyLeft:"QUERY_STATE",justifyCenter:"QUERY_STATE",justifyRight:"QUERY_STATE",quote:"ALREADY_APLLIED",h1:"ALREADY_APLLIED",h2:"ALREADY_APLLIED"},w={text:{icon:"resources/tpl/builder/icons/text-editor/Text.png",label:"Text",action:function(){var e=new p["default"],t='<p class="block"></p>';return e.resolve(t),e}},media:{icon:"resources/tpl/builder/icons/text-editor/Media.png",label:"Media",action:function(e){var t=new p["default"];return e=e||{},e.previousNode?(app.builder.mediaPicker.open({mode:"add",authorizedMedia:s}).then(function(n){console.log("selected media:",n);var r=i({media:n,blockIndex:e.blockIndex});t.resolve(r)},function(){t.reject()}),t):(t.reject(),t)}},title:{icon:"resources/tpl/builder/icons/text-editor/Title.png",label:"Title",action:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new p["default"];return void 0===e.sectionIndex?(t.reject(),t):(app.Controller.addSection({index:e.sectionIndex,type:"title",media:null}),t.resolve(),t)}},immersive:{icon:"resources/tpl/builder/icons/text-editor/Immersive.gif",label:"Immersive",action:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new p["default"];return void 0===e.sectionIndex?(t.reject(),t):(r&&r({blockIndex:e.blockIndex}),app.Controller.addSection({index:e.sectionIndex,type:"immersive",media:null}),t.resolve(),t)}}},C="p, h1, h2, blockquote, ol, ul",E=".block",x=".image-gallery, .image, .block-type-webmap, .block-webpage, .block-type-webscene, .block-type-video",T={},k=!0,P=!1,S=void 0;try{for(var O,I=a[Symbol.iterator]();!(k=(O=I.next()).done);k=!0){var N=O.value;w[N]&&(T[N]=w[N])}}catch(A){P=!0,S=A}finally{try{!k&&I["return"]&&I["return"]()}finally{if(P)throw S}}var M="compact"==o?b:y,D=null;a.length&&(D=new c["default"]({buttons:T,blocksSelector:E,style:o}));var j=new l["default"](n,{targetBlank:!0,autoLink:!0,imageDragging:!1,fileDragging:!1,diffTop:-20,buttonLabels:"fontawesome",toolbar:{allowMultiParagraphSelection:!1,buttons:g},placeholder:{text:v,hideOnClick:!1},anchor:{linkValidation:!0,placeholderText:"Enter a link..."},paste:{forcePlainText:!0,cleanPastedHTML:!1},extensions:{imageDragging:new function(){},blockToolbar:new u["default"]({buttons:M,queryStateMethods:_,style:o}),blockAdd:D,"anchor-preview":new d["default"]}});j.subscribe("editableKeydown",function(e){var t=$(j.getSelectedParentElement());if(8==event.keyCode){if(0===f.getSelectionRange(document).startOffset){var n=t.prev();t.is(".block-caption")?e.preventDefault():t.is(x)||t.parents(".block").eq(0).is(x)?e.preventDefault():(t.hasClass(".block")||n.is(x))&&setTimeout(function(){f.moveCursor(document,n.find(".block-caption")[0],0)},0),setTimeout(function(){m.options.extensions.blockToolbar.updateToolbar()},0)}}else if(46==event.keyCode){var i=f.getSelectionRange(document),r=t.next();t.hasClass("block")&&r.is(x)&&(i.startOffset==i.startContainer.length?e.preventDefault():0==i.startOffset&&0==i.endOffset&&0==i.collapsed&&setTimeout(function(){f.moveCursor(document,r.find(".block-caption")[0],0),m.options.extensions.blockToolbar.updateToolbar()},0))}else(37==event.keyCode||38==event.keyCode||39==event.keyCode||40==event.keyCode)&&setTimeout(function(){m.options.extensions.blockToolbar.updateToolbar()},0)}),j.subscribe("editableKeydownEnter",function(e){var t=$(j.getSelectedParentElement()),n=f.getSelectionRange(document);if(D.hide(),(t.is("h1")||t.is("h2")||t.is("blockquote"))&&n.startOffset==n.startContainer.length)return void e.preventDefault();if(t.is(".block-caption"))return void e.preventDefault();if(t.is(E)){var i=t.children();""==t.html()&&0==i.length&&e.preventDefault(),1==i.length?"br"==i[0].tagName.toLowerCase()&&e.preventDefault():setTimeout(function(){m.options.extensions.blockToolbar.updateToolbar()},100)}}.bind(this)),j.subscribe("editableInput",function(t,n){var i=$(j.getSelectedParentElement());return i.is("p")&&i.parent().is(".block-caption")?void i.parent().html(i.html()):(i.is(C)&&i.addClass("block"),$(n).find("p").contents().each(function(){(this.nodeType===Node.COMMENT_NODE||8==this.nodeType)&&$(this).remove()}),i.find("br").remove(),$(n).children("div:not(.block)").remove(),void e())});var L=$(j.elements[0]);L.on("input",function(){L.children("p").children("span[style]").each(function(){$(this).contents().unwrap()})}),j.subscribe("editablePaste",function(){setTimeout(function(){$(j.elements[0]).find(C).addClass("block")},100)}),m=j,m.extensions.forEach(function(e){"placeholder"==e.name&&(e.updatePlaceholder=function(e,t){return e.querySelector("img, blockquote, ul, ol")||""!==e.textContent?this.hidePlaceholder(e):void(t||this.showPlaceholder(e))})}),this.serialize=function(){var e=[],t=$(m.serialize()["element-0"].value);return $.each(t,function(t,n){var i=$(n);3!=n.nodeType&&(i.is(C)?e.push({type:"text",text:{value:i[0].outerHTML}}):i.is(x)&&e.push({type:"media",id:i.attr("id")}))}),e},this.hideToolbars=function(){m.options.extensions.blockToolbar.hide(),m.options.extensions.blockAdd.hide(),m.extensions.forEach(function(e){"toolbar"==e.name&&e.hideToolbar()})},this.setAddMenuPlacementRules=function(e){D.setPlacementRules(e)},this.focus=function(){m.elements[0].focus()}};var l=s(n),u=s(i),c=s(r),d=s(o),p=s(a),f=l["default"].selection;e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/section/SequenceBuilder",[],function(){}),define("storymaps-react/tpl/view/section/SequenceBuilder",["module","exports","./Sequence","storymaps/tpl/view/section/Common","storymaps-react/common/builder/textEditor/MediumEditorWrapper","dojo/topic","dojo/_base/lang","lib-build/less!./SequenceBuilder"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t;
}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:b(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},y=function(e){function t(e){l(this,t);var n=u(this,Object.getPrototypeOf(t).call(this,e));return n._editor=null,n.MEDIA_BUILDER_TABS=["size","appearance","manage"],n}return c(t,e),v(t,[{key:"render",value:function(){return this._section.background&&this._section.foreground&&this._section.foreground.blocks&&this._section.foreground.blocks.length||(this._section={type:"sequence",layout:"sequence-1",background:{type:"color",color:{value:"#FFF"}},foreground:{blocks:[{type:"text",text:{value:'<p class="block"></p>'}}]}}),g(Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){g(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._editor=new f["default"]({node:this._node.find(".foreground"),addMedia:this.addMedia.bind(this),addButtons:["text","arcgis","media","title","immersive"],splitSection:this.splitSection.bind(this),style:"full",placeholder:1==e.index()?"Your Cascade story starts here!":null,onChange:this._onContentChange.bind(this)})}},{key:"focus",value:function(){setTimeout(function(){this._editor.focus()}.bind(this),50)}},{key:"addMedia",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(e.media){var t=p["default"].createBlock(e.media);return this._blocks.splice(e.blockIndex,0,t),setTimeout(function(){t.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS}),t.load();var e=t.getNode()[0].getBoundingClientRect(),n=0;if(e.bottom>app.display.windowHeight&&(n=app.display.windowHeight-e.bottom),n){var i=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:i-n+10},150)}this._onContentChange()}.bind(this),50),t.render({placement:"block"})}}},{key:"_onContentChange",value:function(){this.serialize(),h["default"].publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(e){var t=e.getNode()[0],n=t.getBoundingClientRect(),i=0;if(n.bottom>app.display.windowHeight&&(i=app.display.windowHeight-n.bottom),i){var r=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:r-i+10},150)}}},{key:"_onEditMedia",value:function(e,t){var n=p["default"].initMedia(t);e.getNode().before(n.render({placement:"block"})),e.getNode().remove(),n.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS}),n.load(),this._blocks.splice(this._blocks.indexOf(e),0,n),this._onContentChange()}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(e.action&&e.media){if("remove"==e.action)e.media.remove(),this._blocks.splice(this._blocks.indexOf(e.media),1);else if("swap"==e.action)app.builder.mediaPicker.open({mode:"add"}).then(function(t){this._onEditMedia(e.media,t)}.bind(this),function(){});else if("image-to-image-gallery"==e.action)app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(t){if("image"==t.type){var n=e.media.serialize();this._onEditMedia(e.media,{type:"image-gallery","image-gallery":{images:[{url:n.image.url,width:n.image.width,height:n.image.height},t.image],caption:n.image.caption}})}}.bind(this),function(){});else if("image-gallery-to-image"==e.action){var t=e.media.serialize()["image-gallery"].images[0];this._onEditMedia(e.media,{type:"image",image:{url:t.url,width:t.width,height:t.height,caption:t.caption}})}this._onContentChange()}}},{key:"splitSection",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];void 0!==e.blockIndex&&console.log("Split section:",e.blockIndex)}},{key:"getPreviewThumbnail",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._blocks[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if("text"!=o.type)return o.getPreviewThumbnail()}}catch(a){t=!0,n=a}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw n}}return null}},{key:"getPreviewIcon",value:function(){return""}},{key:"getPreviewText",value:function(){var e="";return this._section.foreground.blocks&&this._section.foreground.blocks.length&&"text"==this._section.foreground.blocks[0].type&&(e=$(this._section.foreground.blocks[0].text.value).text()),e}},{key:"findBlock",value:function(e){if(!e)return null;for(var t=0;t<this._blocks.length;t++)if(this._blocks[t]._domID==e)return this._blocks[t]}},{key:"serialize",value:function(){if(this._editor){for(var e=this._editor.serialize(),t=0;t<e.length;t++){var n=e[t];if("media"==n.type){var i=this.findBlock(n.id);i&&(e[t]=i.serialize())}}this._section.foreground.blocks=e}return m["default"].clone(this._section)}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}}]),t}(d["default"]);t["default"]=y,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/section/builder/AddMenu",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l='<div class="add-menu">\r\n  <ul>\r\n    ';return o=null!=(o=t.buttons||(null!=e?e.buttons:e))?o:s,r=typeof o===a?o.call(e,{name:"buttons",hash:{},data:i}):o,null!=r&&(l+=r),l+"\r\n  </ul>\r\n</div>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/builder/AddMenu",[],function(){}),define("storymaps-react/tpl/view/section/builder/AddMenu",["module","exports","lib-build/hbars!./AddMenu","lib-build/less!./AddMenu"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s={sequence:{name:"sequence",icon:"resources/tpl/builder/icons/text-editor/Text.png",label:"Sequential"},title:{name:"title",icon:"resources/tpl/builder/icons/text-editor/Title.png",label:"Title"},immersive:{name:"immersive",icon:"resources/tpl/builder/icons/text-editor/Immersive.gif",label:"Immersive"}},l=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(r(this,e),this._container=null,this._sectionContainer=null,this._buttons=[],t.buttons&&t.buttons.length){var n=!0,i=!1,o=void 0;try{for(var a,l=t.buttons[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;this._buttons.push(s[u])}}catch(c){i=!0,o=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}}}return a(e,[{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._container=e.container,this._sectionContainer=e.sectionContainer,this._container.html(this._render()).mouseleave(this._onMenuMouseleave.bind(this)).find(".add-button").click(this._onButtonClick.bind(this)),this._sectionContainer.click(this._onSectionClick.bind(this)).mousemove(this._onSectionMouseMove.bind(this)).mouseleave(this._onSectionMouseleave.bind(this))}},{key:"_render",value:function(){var e="",t=!0,n=!1,i=void 0;try{for(var r,a=this._buttons[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value,l=s.name,u=s.icon||"",c=s.iconHover||"",d='<img class="add-button-icon" src="'+u+'" />';e+='<li><a class="add-button" data-button="'+l+'" data-icon="'+u+'" data-icon-hover="'+c+'">'+d+" "+s.label+"</a></li>"}}catch(p){n=!0,i=p}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw i}}return(0,o["default"])({buttons:e})}},{key:"show",value:function(){this._container.addClass("active")}},{key:"_onSectionClick",value:function(e){var t=e.currentTarget.getBoundingClientRect();e.clientY-15<t.top&&this.show()}},{key:"_onSectionMouseMove",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientY-15<t.top;this._sectionContainer.toggleClass("show-add-section-menu",n).css("cursor",n?"hand":"default")}},{key:"_onSectionMouseleave",value:function(){this._sectionContainer.toggleClass("show-add-section-menu",!1).css("cursor","default"),this._container.removeClass("active")}},{key:"_onMenuMouseleave",value:function(){this._onSectionMouseleave()}},{key:"_onButtonClick",value:function(e){var t=$(e.currentTarget),n=this._sectionContainer.index()-1;this._sectionContainer.hasClass("section-layout-credits")&&n--,app.Controller.addSection({type:t.data("button"),index:n})}}]),e}();t["default"]=l,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/section/TitleBuilder",[],function(){}),define("storymaps-react/tpl/view/section/TitleBuilder",["module","exports","./Title","storymaps/tpl/view/section/Common","./builder/AddMenu","dojo/topic","dojo/_base/lang","lib-build/less!./TitleBuilder"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:b(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},y=function(e){function t(e,n){l(this,t);var i=u(this,Object.getPrototypeOf(t).call(this,e));return i._initialMedia=n,i._addMenu=new f["default"]({buttons:["sequence","title","immersive"]}),i.MEDIA_BUILDER_TABS_BACKGROUND=["manage"],i}return c(t,e),v(t,[{key:"render",value:function(){return this._section.layout||(this._section.layout="title-regular"),this._section.background||(this._section.background=this._initialMedia||{type:"empty",empty:"empty"},this._section.foreground={title:"",credits:""}),g(Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){g(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._node.find(".fg-title").attr("contenteditable",!0).attr("placeholder","Enter a title...").on("blur keyup",function(){this.serialize(),this._onContentChange()}.bind(this)).on("paste",function(){setTimeout(function(){this._node.find(".fg-title").html($("<div>"+this._node.find(".fg-title").text()+"</div>").text()),this.serialize(),this._onContentChange()}.bind(this),0)}.bind(this)).keydown(function(e){return 13===e.keyCode?!1:void 0})}},{key:"focus",value:function(){setTimeout(function(){this._node.find(".fg-title").focus()}.bind(this),50)}},{key:"serialize",value:function(){return this._section.background=this._backgroundMedia.serialize(),this._section.foreground.title=$("<div>"+this._node.find(".fg-title").text()+"</div>").text(),m["default"].clone(this._section)}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"_onContentChange",value:function(){h["default"].publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(){this._node.toggleClass("hide-foreground")}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.action&&e.media&&("swap"==e.action&&app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(t){this._onEditMedia(e.media,t)}.bind(this),function(){}),this._onContentChange())}},{key:"_onEditMedia",value:function(e,t){var n=p["default"].initMedia(t);this._node.find(".background").remove(),this._node.prepend(p["default"].renderBackground({media:n})),n.postCreate({container:this._node,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND}),n.load(),"empty"!=e.type&&this._onToggleMediaConfig(),e.destroy(),this._backgroundMedia=n,this._onContentChange()}}]),t}(d["default"]);t["default"]=y,e.exports=t["default"]}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("react",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){var i=e(41),r=e(151),o={focusDOMComponent:function(){r(i.getNodeFromInstance(this))}};t.exports=o},{151:151,41:41}],2:[function(e,t,n){function i(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case S.topCompositionStart:return O.compositionStart;case S.topCompositionEnd:return O.compositionEnd;case S.topCompositionUpdate:return O.compositionUpdate}}function a(e,t){return e===S.topKeyDown&&t.keyCode===w}function s(e,t){switch(e){case S.topKeyUp:return-1!==_.indexOf(t.keyCode);case S.topKeyDown:return t.keyCode!==w;case S.topKeyPress:case S.topMouseDown:case S.topBlur:return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,i){var r,u;if(C?r=o(e):N?s(e,n)&&(r=O.compositionEnd):a(e,n)&&(r=O.compositionStart),!r)return null;T&&(N||r!==O.compositionStart?r===O.compositionEnd&&N&&(u=N.getData()):N=v.getPooled(i));var c=g.getPooled(r,t,n,i);if(u)c.data=u;else{var d=l(n);null!==d&&(c.data=d)}return h.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case S.topCompositionEnd:return l(t);case S.topKeyPress:var n=t.which;return n!==k?null:(I=!0,P);case S.topTextInput:var i=t.data;return i===P&&I?null:i;default:return null}}function d(e,t){if(N){if(e===S.topCompositionEnd||s(e,t)){var n=N.getData();return v.release(N),N=null,n}return null}switch(e){case S.topPaste:return null;case S.topKeyPress:return t.which&&!r(t)?String.fromCharCode(t.which):null;case S.topCompositionEnd:return T?null:t.data;default:return null}}function p(e,t,n,i){var r;if(r=x?c(e,n):d(e,n),!r)return null;var o=y.getPooled(O.beforeInput,t,n,i);return o.data=r,h.accumulateTwoPhaseDispatches(o),o}var f=e(16),h=e(20),m=e(143),v=e(21),g=e(100),y=e(104),b=e(161),_=[9,13,27,32],w=229,C=m.canUseDOM&&"CompositionEvent"in window,E=null;m.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var x=m.canUseDOM&&"TextEvent"in window&&!E&&!i(),T=m.canUseDOM&&(!C||E&&E>8&&11>=E),k=32,P=String.fromCharCode(k),S=f.topLevelTypes,O={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[S.topCompositionEnd,S.topKeyPress,S.topTextInput,S.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[S.topBlur,S.topCompositionEnd,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[S.topBlur,S.topCompositionStart,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[S.topBlur,S.topCompositionUpdate,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]}},I=!1,N=null,A={eventTypes:O,extractEvents:function(e,t,n,i){return[u(e,t,n,i),p(e,t,n,i)]}};t.exports=A},{100:100,104:104,143:143,16:16,161:161,20:20,21:21}],3:[function(e,t,n){function i(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){o.forEach(function(t){r[i(t,e)]=r[e]})});var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:r,shorthandPropertyExpansions:a};t.exports=s},{}],4:[function(e,t,n){var i=e(3),r=e(143),o=e(71),a=e(145),s=e(117),l=e(156),u=e(163),c=e(167),d=u(function(e){return l(e)}),p=!1,f="cssFloat";if(r.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(m){p=!0}void 0===document.documentElement.style.cssFloat&&(f="styleFloat")}var v=/^(?:webkit|moz|o)[A-Z]/,g=/;\s*$/,y={},b={},_=!1,w=function(e,t){y.hasOwnProperty(e)&&y[e]||(y[e]=!0,c(!1,"Unsupported style property %s. Did you mean %s?%s",e,a(e),T(t)))},C=function(e,t){y.hasOwnProperty(e)&&y[e]||(y[e]=!0,c(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",e,e.charAt(0).toUpperCase()+e.slice(1),T(t)))},E=function(e,t,n){b.hasOwnProperty(t)&&b[t]||(b[t]=!0,c(!1,'Style property values shouldn\'t contain a semicolon.%s Try "%s: %s" instead.',T(n),e,t.replace(g,"")))},x=function(e,t,n){_||(_=!0,c(!1,"`NaN` is an invalid value for the `%s` css style property.%s",e,T(n)))},T=function(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""},k=function(e,t,n){var i;n&&(i=n._currentElement._owner),e.indexOf("-")>-1?w(e,i):v.test(e)?C(e,i):g.test(t)&&E(e,t,i),"number"==typeof t&&isNaN(t)&&x(e,t,i)},P={createMarkupForStyles:function(e,t){var n="";for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];k(i,r,t),null!=r&&(n+=d(i)+":",n+=s(i,r,t)+";")}return n||null},setValueForStyles:function(e,t,n){o.debugTool.onNativeOperation(n._debugID,"update styles",t);var r=e.style;for(var a in t)if(t.hasOwnProperty(a)){k(a,t[a],n);var l=s(a,t[a],n);if(("float"===a||"cssFloat"===a)&&(a=f),l)r[a]=l;else{var u=p&&i.shorthandPropertyExpansions[a];if(u)for(var c in u)r[c]="";else r[a]=""}}}};t.exports=P},{117:117,143:143,145:145,156:156,163:163,167:167,3:3,71:71}],5:[function(e,t,n){function i(){this._callbacks=null,this._contexts=null}var r=e(168),o=e(25),a=e(157);r(i.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length?a(!1,"Mismatched list of contexts in callback queue"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(e){this._callbacks&&(this._callbacks.length=e,this._contexts.length=e)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),o.addPoolingTo(i),t.exports=i},{157:157,168:168,25:25}],6:[function(e,t,n){function i(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function r(e){var t=x.getPooled(I.change,A,e,T(e));_.accumulateTwoPhaseDispatches(t),E.batchedUpdates(o,t)}function o(e){b.enqueueEvents(e),b.processEventQueue(!1)}function a(e,t){N=e,A=t,N.attachEvent("onchange",r)}function s(){N&&(N.detachEvent("onchange",r),N=null,A=null)}function l(e,t){return e===O.topChange?t:void 0}function u(e,t,n){e===O.topFocus?(s(),a(t,n)):e===O.topBlur&&s()}function c(e,t){N=e,A=t,M=e.value,D=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(N,"value",R),N.attachEvent?N.attachEvent("onpropertychange",p):N.addEventListener("propertychange",p,!1)}function d(){N&&(delete N.value,N.detachEvent?N.detachEvent("onpropertychange",p):N.removeEventListener("propertychange",p,!1),N=null,A=null,M=null,D=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==M&&(M=t,r(e))}}function f(e,t){return e===O.topInput?t:void 0}function h(e,t,n){e===O.topFocus?(d(),c(t,n)):e===O.topBlur&&d()}function m(e,t){return e!==O.topSelectionChange&&e!==O.topKeyUp&&e!==O.topKeyDown||!N||N.value===M?void 0:(M=N.value,A)}function v(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function g(e,t){return e===O.topClick?t:void 0}var y=e(16),b=e(17),_=e(20),w=e(143),C=e(41),E=e(93),x=e(102),T=e(125),k=e(132),P=e(133),S=e(161),O=y.topLevelTypes,I={change:{phasedRegistrationNames:{bubbled:S({onChange:null}),captured:S({onChangeCapture:null})},dependencies:[O.topBlur,O.topChange,O.topClick,O.topFocus,O.topInput,O.topKeyDown,O.topKeyUp,O.topSelectionChange]}},N=null,A=null,M=null,D=null,j=!1;w.canUseDOM&&(j=k("change")&&(!("documentMode"in document)||document.documentMode>8));var L=!1;w.canUseDOM&&(L=k("input")&&(!("documentMode"in document)||document.documentMode>11));var R={get:function(){return D.get.call(this)},set:function(e){M=""+e,D.set.call(this,e)}},B={eventTypes:I,extractEvents:function(e,t,n,r){var o,a,s=t?C.getNodeFromInstance(t):window;if(i(s)?j?o=l:a=u:P(s)?L?o=f:(o=m,a=h):v(s)&&(o=g),o){var c=o(e,t);if(c){var d=x.getPooled(I.change,c,n,r);return d.type="change",_.accumulateTwoPhaseDispatches(d),d}}a&&a(e,s,t)}};t.exports=B},{102:102,125:125,132:132,133:133,143:143,16:16,161:161,17:17,20:20,41:41,93:93}],7:[function(e,t,n){function i(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function r(e,t,n){c.insertTreeBefore(e,t,n)}function o(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):y(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],l(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,i){for(var r=t;;){var o=r.nextSibling;if(y(e,r,i),r===n)break;r=o}}function l(e,t,n){for(;;){var i=t.nextSibling;if(i===n)break;e.removeChild(i)}}function u(e,t,n){var i=e.parentNode,r=e.nextSibling;r===t?n&&y(i,document.createTextNode(n),r):n?(g(r,n),l(i,r,t)):l(i,e,t),h.debugTool.onNativeOperation(f.getInstanceFromNode(e)._debugID,"replace text",n)}var c=e(8),d=e(12),p=e(76),f=e(41),h=e(71),m=e(116),v=e(137),g=e(138),y=m(function(e,t,n){e.insertBefore(t,n)}),b=d.dangerouslyReplaceNodeWithMarkup;b=function(e,t,n){if(d.dangerouslyReplaceNodeWithMarkup(e,t),0!==n._debugID)h.debugTool.onNativeOperation(n._debugID,"replace with",t.toString());else{var i=f.getInstanceFromNode(t.node);0!==i._debugID&&h.debugTool.onNativeOperation(i._debugID,"mount",t.toString())}};var _={dangerouslyReplaceNodeWithMarkup:b,replaceDelimitedText:u,processUpdates:function(e,t){for(var n=f.getInstanceFromNode(e)._debugID,s=0;s<t.length;s++){var l=t[s];switch(l.type){case p.INSERT_MARKUP:r(e,l.content,i(e,l.afterNode)),h.debugTool.onNativeOperation(n,"insert child",{toIndex:l.toIndex,content:l.content.toString()});break;case p.MOVE_EXISTING:o(e,l.fromNode,i(e,l.afterNode)),h.debugTool.onNativeOperation(n,"move child",{fromIndex:l.fromIndex,toIndex:l.toIndex});break;case p.SET_MARKUP:v(e,l.content),h.debugTool.onNativeOperation(n,"replace children",l.content.toString());break;case p.TEXT_CONTENT:g(e,l.content),h.debugTool.onNativeOperation(n,"replace text",l.content.toString());break;case p.REMOVE_NODE:a(e,l.fromNode),h.debugTool.onNativeOperation(n,"remove child",{fromIndex:l.fromIndex})}}}};t.exports=_},{116:116,12:12,137:137,138:138,41:41,71:71,76:76,8:8}],8:[function(e,t,n){function i(e){if(m){var t=e.node,n=e.children;if(n.length)for(var i=0;i<n.length;i++)v(t,n[i],null);else null!=e.html?t.innerHTML=e.html:null!=e.text&&p(t,e.text)}}function r(e,t){e.parentNode.replaceChild(t.node,e),i(t)}function o(e,t){m?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){m?e.html=t:e.node.innerHTML=t}function s(e,t){m?e.text=t:p(e.node,t)}function l(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:l}}var c=e(9),d=e(116),p=e(138),f=1,h=11,m="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),v=d(function(e,t,n){t.node.nodeType===h||t.node.nodeType===f&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(i(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),i(t))});u.insertTreeBefore=v,u.replaceChildWithTree=r,u.queueChild=o,u.queueHTML=a,u.queueText=s,t.exports=u},{116:116,138:138,9:9}],9:[function(e,t,n){var i={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=i},{}],10:[function(e,t,n){function i(e,t){return(e&t)===t}var r=e(157),o={MUST_USE_PROPERTY:1,HAS_SIDE_EFFECTS:2,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=o,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},l=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var d in n){s.properties.hasOwnProperty(d)?r(!1,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",d):void 0;var p=d.toLowerCase(),f=n[d],h={attributeName:p,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseProperty:i(f,t.MUST_USE_PROPERTY),hasSideEffects:i(f,t.HAS_SIDE_EFFECTS),hasBooleanValue:i(f,t.HAS_BOOLEAN_VALUE),hasNumericValue:i(f,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:i(f,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:i(f,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(!h.mustUseProperty&&h.hasSideEffects?r(!1,"DOMProperty: Properties that have side effects must use property: %s",d):void 0,h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1?void 0:r(!1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",d),s.getPossibleStandardName[p]=d,l.hasOwnProperty(d)){var m=l[d];h.attributeName=m,s.getPossibleStandardName[m]=d}a.hasOwnProperty(d)&&(h.attributeNamespace=a[d]),u.hasOwnProperty(d)&&(h.propertyName=u[d]),c.hasOwnProperty(d)&&(h.mutationMethod=c[d]),s.properties[d]=h}}},a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\uB7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:o};t.exports=s},{157:157}],11:[function(e,t,n){function i(e){return f.hasOwnProperty(e)?!0:p.hasOwnProperty(e)?!1:d.test(e)?(f[e]=!0,!0):(p[e]=!0,c(!1,"Invalid attribute name: `%s`",e),!1)}function r(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&1>t||e.hasOverloadedBooleanValue&&t===!1}var o=e(10),a=e(41),s=e(49),l=e(71),u=e(135),c=e(167),d=new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$"),p={},f={},h={createMarkupForID:function(e){return o.ID_ATTRIBUTE_NAME+"="+u(e)},setAttributeForID:function(e,t){e.setAttribute(o.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){s.debugTool.onCreateMarkupForProperty(e,t);var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){if(r(n,t))return"";var i=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?i+'=""':i+"="+u(t)}return o.isCustomAttribute(e)?null==t?"":e+"="+u(t):null},createMarkupForCustomAttribute:function(e,t){return i(e)&&null!=t?e+"="+u(t):""},setValueForProperty:function(e,t,n){var i=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(i){var u=i.mutationMethod;if(u)u(e,n);else{if(r(i,n))return void this.deleteValueForProperty(e,t);if(i.mustUseProperty){var c=i.propertyName;i.hasSideEffects&&""+e[c]==""+n||(e[c]=n)}else{var d=i.attributeName,p=i.attributeNamespace;p?e.setAttributeNS(p,d,""+n):i.hasBooleanValue||i.hasOverloadedBooleanValue&&n===!0?e.setAttribute(d,""):e.setAttribute(d,""+n)}}}else if(o.isCustomAttribute(t))return void h.setValueForAttribute(e,t,n);s.debugTool.onSetValueForProperty(e,t,n);var f={};f[t]=n,l.debugTool.onNativeOperation(a.getInstanceFromNode(e)._debugID,"update attribute",f)},setValueForAttribute:function(e,t,n){if(i(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n);var r={};r[t]=n,l.debugTool.onNativeOperation(a.getInstanceFromNode(e)._debugID,"update attribute",r)}},deleteValueForProperty:function(e,t){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;
if(n){var i=n.mutationMethod;if(i)i(e,void 0);else if(n.mustUseProperty){var r=n.propertyName;n.hasBooleanValue?e[r]=!1:n.hasSideEffects&&""+e[r]==""||(e[r]="")}else e.removeAttribute(n.attributeName)}else o.isCustomAttribute(t)&&e.removeAttribute(t);s.debugTool.onDeleteValueForProperty(e,t),l.debugTool.onNativeOperation(a.getInstanceFromNode(e)._debugID,"remove attribute",t)}};t.exports=h},{10:10,135:135,167:167,41:41,49:49,71:71}],12:[function(e,t,n){function i(e){return e.substring(1,e.indexOf(" "))}var r=e(8),o=e(143),a=e(148),s=e(149),l=e(153),u=e(157),c=/^(<[^ \/>]+)/,d="data-danger-index",p={dangerouslyRenderMarkup:function(e){o.canUseDOM?void 0:u(!1,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString for server rendering.");for(var t,n={},r=0;r<e.length;r++)e[r]?void 0:u(!1,"dangerouslyRenderMarkup(...): Missing markup."),t=i(e[r]),t=l(t)?t:"*",n[t]=n[t]||[],n[t][r]=e[r];var p=[],f=0;for(t in n)if(n.hasOwnProperty(t)){var h,m=n[t];for(h in m)if(m.hasOwnProperty(h)){var v=m[h];m[h]=v.replace(c,"$1 "+d+'="'+h+'" ')}for(var g=a(m.join(""),s),y=0;y<g.length;++y){var b=g[y];b.hasAttribute&&b.hasAttribute(d)?(h=+b.getAttribute(d),b.removeAttribute(d),p.hasOwnProperty(h)?u(!1,"Danger: Assigning to an already-occupied result index."):void 0,p[h]=b,f+=1):console.error("Danger: Discarding unexpected node:",b)}}return f!==p.length?u(!1,"Danger: Did not assign to every index of resultList."):void 0,p.length!==e.length?u(!1,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,p.length):void 0,p},dangerouslyReplaceNodeWithMarkup:function(e,t){if(o.canUseDOM?void 0:u(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."),t?void 0:u(!1,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),"HTML"===e.nodeName?u(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):void 0,"string"==typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else r.replaceChildWithTree(e,t)}};t.exports=p},{143:143,148:148,149:149,153:153,157:157,8:8}],13:[function(e,t,n){var i=e(161),r=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({BeforeInputEventPlugin:null})];t.exports=r},{161:161}],14:[function(e,t,n){var i={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getNativeProps:function(e,t){if(!t.disabled)return t;var n={};for(var r in t)!i[r]&&t.hasOwnProperty(r)&&(n[r]=t[r]);return n}};t.exports=r},{}],15:[function(e,t,n){var i=e(16),r=e(20),o=e(41),a=e(106),s=e(161),l=i.topLevelTypes,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},c={eventTypes:u,extractEvents:function(e,t,n,i){if(e===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var s;if(i.window===i)s=i;else{var c=i.ownerDocument;s=c?c.defaultView||c.parentWindow:window}var d,p;if(e===l.topMouseOut){d=t;var f=n.relatedTarget||n.toElement;p=f?o.getClosestInstanceFromNode(f):null}else d=null,p=t;if(d===p)return null;var h=null==d?s:o.getNodeFromInstance(d),m=null==p?s:o.getNodeFromInstance(p),v=a.getPooled(u.mouseLeave,d,n,i);v.type="mouseleave",v.target=h,v.relatedTarget=m;var g=a.getPooled(u.mouseEnter,p,n,i);return g.type="mouseenter",g.target=m,g.relatedTarget=h,r.accumulateEnterLeaveDispatches(v,g,d,p),[v,g]}};t.exports=c},{106:106,16:16,161:161,20:20,41:41}],16:[function(e,t,n){var i=e(160),r=i({bubbled:null,captured:null}),o=i({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:r};t.exports=a},{160:160}],17:[function(e,t,n){var i=e(18),r=e(19),o=e(64),a=e(113),s=e(121),l=e(157),u={},c=null,d=function(e,t){e&&(r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},p=function(e){return d(e,!0)},f=function(e){return d(e,!1)},h={injection:{injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n?l(!1,"Expected %s listener to be a function, instead got type %s",t,typeof n):void 0;var r=u[t]||(u[t]={});r[e._rootNodeID]=n;var o=i.registrationNameModules[t];o&&o.didPutListener&&o.didPutListener(e,t,n)},getListener:function(e,t){var n=u[t];return n&&n[e._rootNodeID]},deleteListener:function(e,t){var n=i.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=u[t];r&&delete r[e._rootNodeID]},deleteAllListeners:function(e){for(var t in u)if(u[t][e._rootNodeID]){var n=i.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t),delete u[t][e._rootNodeID]}},extractEvents:function(e,t,n,r){for(var o,s=i.plugins,l=0;l<s.length;l++){var u=s[l];if(u){var c=u.extractEvents(e,t,n,r);c&&(o=a(o,c))}}return o},enqueueEvents:function(e){e&&(c=a(c,e))},processEventQueue:function(e){var t=c;c=null,e?s(t,p):s(t,f),c?l(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):void 0,o.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=h},{113:113,121:121,157:157,18:18,19:19,64:64}],18:[function(e,t,n){function i(){if(s)for(var e in l){var t=l[e],n=s.indexOf(e);if(n>-1?void 0:a(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e),!u.plugins[n]){t.extractEvents?void 0:a(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),u.plugins[n]=t;var i=t.eventTypes;for(var o in i)r(i[o],t,o)?void 0:a(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",o,e)}}}function r(e,t,n){u.eventNameDispatchConfigs.hasOwnProperty(n)?a(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n):void 0,u.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];o(s,t,n)}return!0}return e.registrationName?(o(e.registrationName,t,n),!0):!1}function o(e,t,n){u.registrationNameModules[e]?a(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e):void 0,u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies;var i=e.toLowerCase();u.possibleRegistrationNames[i]=e}var a=e(157),s=null,l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:{},injectEventPluginOrder:function(e){s?a(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):void 0,s=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];l.hasOwnProperty(n)&&l[n]===r||(l[n]?a(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n):void 0,l[n]=r,t=!0)}t&&i()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var i=u.registrationNameModules[t.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){s=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=u.registrationNameModules;for(var r in i)i.hasOwnProperty(r)&&delete i[r];var o=u.possibleRegistrationNames;for(var a in o)o.hasOwnProperty(a)&&delete o[a]}};t.exports=u},{157:157}],19:[function(e,t,n){function i(e){return e===_.topMouseUp||e===_.topTouchEnd||e===_.topTouchCancel}function r(e){return e===_.topMouseMove||e===_.topTouchMove}function o(e){return e===_.topMouseDown||e===_.topTouchStart}function a(e,t,n,i){var r=e.type||"unknown-event";e.currentTarget=w.getNodeFromInstance(i),t?v.invokeGuardedCallbackWithCatch(r,n,e):v.invokeGuardedCallback(r,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,i=e._dispatchInstances;if(h(e),Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)a(e,t,n[r],i[r]);else n&&a(e,t,n,i);e._dispatchListeners=null,e._dispatchInstances=null}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(h(e),Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,n[i]))return n[i]}else if(t&&t(e,n))return n;return null}function u(e){var t=l(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){h(e);var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)?g(!1,"executeDirectDispatch(...): Invalid `event`."):void 0,e.currentTarget=t?w.getNodeFromInstance(n):null;var i=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,i}function d(e){return!!e._dispatchListeners}var p,f,h,m=e(16),v=e(64),g=e(157),y=e(167),b={injectComponentTree:function(e){p=e,y(e&&e.getNodeFromInstance&&e.getInstanceFromNode,"EventPluginUtils.injection.injectComponentTree(...): Injected module is missing getNodeFromInstance or getInstanceFromNode.")},injectTreeTraversal:function(e){f=e,y(e&&e.isAncestor&&e.getLowestCommonAncestor,"EventPluginUtils.injection.injectTreeTraversal(...): Injected module is missing isAncestor or getLowestCommonAncestor.")}},_=m.topLevelTypes;h=function(e){var t=e._dispatchListeners,n=e._dispatchInstances,i=Array.isArray(t),r=i?t.length:t?1:0,o=Array.isArray(n),a=o?n.length:n?1:0;y(o===i&&a===r,"EventPluginUtils: Invalid `event`.")};var w={isEndish:i,isMoveish:r,isStartish:o,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:d,getInstanceFromNode:function(e){return p.getInstanceFromNode(e)},getNodeFromInstance:function(e){return p.getNodeFromInstance(e)},isAncestor:function(e,t){return f.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return f.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return f.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return f.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,i,r){return f.traverseEnterLeave(e,t,n,i,r)},injection:b};t.exports=w},{157:157,16:16,167:167,64:64}],20:[function(e,t,n){function i(e,t,n){var i=t.dispatchConfig.phasedRegistrationNames[n];return _(e,i)}function r(e,t,n){y(e,"Dispatching inst must not be null");var r=t?b.bubbled:b.captured,o=i(e,n,r);o&&(n._dispatchListeners=v(n._dispatchListeners,o),n._dispatchInstances=v(n._dispatchInstances,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&m.traverseTwoPhase(e._targetInst,r,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?m.getParentInstance(t):null;m.traverseTwoPhase(n,r,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=_(e,i);r&&(n._dispatchListeners=v(n._dispatchListeners,r),n._dispatchInstances=v(n._dispatchInstances,e))}}function l(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function u(e){g(e,o)}function c(e){g(e,a)}function d(e,t,n,i){m.traverseEnterLeave(n,i,s,e,t)}function p(e){g(e,l)}var f=e(16),h=e(17),m=e(19),v=e(113),g=e(121),y=e(167),b=f.PropagationPhases,_=h.getListener,w={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:d};t.exports=w},{113:113,121:121,16:16,167:167,17:17,19:19}],21:[function(e,t,n){function i(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var r=e(168),o=e(25),a=e(129);r(i.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,i=n.length,r=this.getText(),o=r.length;for(e=0;i>e&&n[e]===r[e];e++);var a=i-e;for(t=1;a>=t&&n[i-t]===r[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=r.slice(e,s),this._fallbackText}}),o.addPoolingTo(i),t.exports=i},{129:129,168:168,25:25}],22:[function(e,t,n){var i=e(10),r=i.injection.MUST_USE_PROPERTY,o=i.injection.HAS_BOOLEAN_VALUE,a=i.injection.HAS_SIDE_EFFECTS,s=i.injection.HAS_NUMERIC_VALUE,l=i.injection.HAS_POSITIVE_NUMERIC_VALUE,u=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE,c={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+i.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:r|o,cite:0,classID:0,className:0,cols:l,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,"default":o,defer:o,dir:0,disabled:o,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:r|o,muted:r|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,rel:0,required:o,reversed:o,role:0,rows:l,rowSpan:s,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:r|o,shape:0,size:l,sizes:0,span:l,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:s,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:r|a,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,"typeof":0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=c},{10:10}],23:[function(e,t,n){function i(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},i=(""+e).replace(t,function(e){return n[e]});return"$"+i}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},i="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+i).replace(t,function(e){return n[e]})}var o={escape:i,unescape:r};t.exports=o},{}],24:[function(e,t,n){function i(e){null!=e.checkedLink&&null!=e.valueLink?u(!1,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):void 0}function r(e){i(e),null!=e.value||null!=e.onChange?u(!1,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):void 0}function o(e){i(e),null!=e.checked||null!=e.onChange?u(!1,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=e(84),l=e(83),u=e(157),c=e(167),d={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},p={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:s.func},f={},h={checkPropTypes:function(e,t,n){for(var i in p){if(p.hasOwnProperty(i))var r=p[i](t,i,e,l.prop);if(r instanceof Error&&!(r.message in f)){f[r.message]=!0;var o=a(n);c(!1,"Failed form propType: %s%s",r.message,o)}}},getValue:function(e){return e.valueLink?(r(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(o(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(r(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(o(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};t.exports=h},{157:157,167:167,83:83,84:84}],25:[function(e,t,n){var i=e(157),r=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},o=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},a=function(e,t,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,e,t,n),r}return new i(e,t,n)},s=function(e,t,n,i){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n,i),o}return new r(e,t,n,i)},l=function(e,t,n,i,r){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,i,r),a}return new o(e,t,n,i,r)},u=function(e){var t=this;e instanceof t?void 0:i(!1,"Trying to release an instance into a pool of a different type."),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,d=r,p=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||d,n.poolSize||(n.poolSize=c),n.release=u,n},f={addPoolingTo:p,oneArgumentPooler:r,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:l};t.exports=f},{157:157}],26:[function(e,t,n){var i=e(168),r=e(29),o=e(31),a=e(30),s=e(45),l=e(61),u=e(62),c=e(84),d=e(94),p=e(134),f=e(167),h=l.createElement,m=l.createFactory,v=l.cloneElement;h=u.createElement,m=u.createFactory,v=u.cloneElement;var g=i,y=!1;g=function(){return f(y,"React.__spread is deprecated and should not be used. Use Object.assign directly or another helper function with similar semantics. You may be seeing this warning due to your compiler. See https://fb.me/react-spread-deprecation for more details."),y=!0,i.apply(null,arguments)};var b={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:p},Component:o,createElement:h,cloneElement:v,isValidElement:l.isValidElement,PropTypes:c,createClass:a.createClass,createFactory:m,createMixin:function(e){return e},DOM:s,version:d,__spread:g};t.exports=b},{134:134,167:167,168:168,29:29,30:30,31:31,45:45,61:61,62:62,84:84,94:94}],27:[function(e,t,n){function i(e){return Object.prototype.hasOwnProperty.call(e,v)||(e[v]=h++,p[e[v]]={}),p[e[v]]}var r,o=e(168),a=e(16),s=e(18),l=e(65),u=e(112),c=e(130),d=e(132),p={},f=!1,h=0,m={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),g=o({},l,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,r=i(n),o=s.registrationNameDependencies[e],l=a.topLevelTypes,u=0;u<o.length;u++){var c=o[u];r.hasOwnProperty(c)&&r[c]||(c===l.topWheel?d("wheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):d("mousewheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):c===l.topScroll?d("scroll",!0)?g.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(d("focus",!0)?(g.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):d("focusin")&&(g.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),r[l.topBlur]=!0,r[l.topFocus]=!0):m.hasOwnProperty(c)&&g.ReactEventListener.trapBubbledEvent(c,m[c],n),r[c]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(void 0===r&&(r=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!r&&!f){var e=u.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),f=!0}}});t.exports=g},{112:112,130:130,132:132,16:16,168:168,18:18,65:65}],28:[function(e,t,n){function i(e,t,n){var i=void 0===e[n];u(i,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",a.unescape(n)),null!=t&&i&&(e[n]=o(t))}var r=e(86),o=e(131),a=e(23),s=e(139),l=e(140),u=e(167),c={instantiateChildren:function(e,t,n){if(null==e)return null;var r={};return l(e,i,r),r},updateChildren:function(e,t,n,i,a){if(t||e){var l,u;for(l in t)if(t.hasOwnProperty(l)){u=e&&e[l];var c=u&&u._currentElement,d=t[l];if(null!=u&&s(c,d))r.receiveComponent(u,d,i,a),t[l]=u;else{u&&(n[l]=r.getNativeNode(u),r.unmountComponent(u,!1));var p=o(d);t[l]=p}}for(l in e)!e.hasOwnProperty(l)||t&&t.hasOwnProperty(l)||(u=e[l],n[l]=r.getNativeNode(u),r.unmountComponent(u,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r.unmountComponent(i,t)}}};t.exports=c},{131:131,139:139,140:140,167:167,23:23,86:86}],29:[function(e,t,n){function i(e){return(""+e).replace(_,"$&/")}function r(e,t){this.func=e,this.context=t,this.count=0}function o(e,t,n){var i=e.func,r=e.context;i.call(r,t,e.count++)}function a(e,t,n){if(null==e)return e;var i=r.getPooled(t,n);g(e,o,i),r.release(i)}function s(e,t,n,i){this.result=e,this.keyPrefix=t,this.func=n,this.context=i,this.count=0}function l(e,t,n){var r=e.result,o=e.keyPrefix,a=e.func,s=e.context,l=a.call(s,t,e.count++);Array.isArray(l)?u(l,r,n,v.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,o+(!l.key||t&&t.key===l.key?"":i(l.key)+"/")+n)),r.push(l))}function u(e,t,n,r,o){var a="";null!=n&&(a=i(n)+"/");var u=s.getPooled(t,a,r,o);g(e,l,u),s.release(u)}function c(e,t,n){if(null==e)return e;var i=[];return u(e,i,null,t,n),i}function d(e,t,n){return null}function p(e,t){return g(e,d,null)}function f(e){var t=[];return u(e,t,null,v.thatReturnsArgument),t}var h=e(25),m=e(61),v=e(149),g=e(140),y=h.twoArgumentPooler,b=h.fourArgumentPooler,_=/\/+/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(r,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,b);var w={forEach:a,map:c,mapIntoWithKeyPrefixInternal:u,count:p,toArray:f};t.exports=w},{140:140,149:149,25:25,61:61}],30:[function(e,t,n){function i(e,t,n){for(var i in t)t.hasOwnProperty(i)&&C("function"==typeof t[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactClass",v[n],i)}function r(e,t){var n=k.hasOwnProperty(t)?k[t]:null;S.hasOwnProperty(t)&&(n!==x.OVERRIDE_BASE?b(!1,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t):void 0),e&&(n!==x.DEFINE_MANY&&n!==x.DEFINE_MANY_MERGED?b(!1,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t):void 0)}function o(e,t){if(t){"function"==typeof t?b(!1,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."):void 0,h.isValidElement(t)?b(!1,"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):void 0;var n=e.prototype,i=n.__reactAutoBindPairs;t.hasOwnProperty(E)&&P.mixins(e,t.mixins);for(var o in t)if(t.hasOwnProperty(o)&&o!==E){var a=t[o],s=n.hasOwnProperty(o);if(r(s,o),P.hasOwnProperty(o))P[o](e,a);else{var c=k.hasOwnProperty(o),d="function"==typeof a,p=d&&!c&&!s&&t.autobind!==!1;if(p)i.push(o,a),n[o]=a;else if(s){var f=k[o];!c||f!==x.DEFINE_MANY_MERGED&&f!==x.DEFINE_MANY?b(!1,"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",f,o):void 0,f===x.DEFINE_MANY_MERGED?n[o]=l(n[o],a):f===x.DEFINE_MANY&&(n[o]=u(n[o],a))}else n[o]=a,"function"==typeof a&&t.displayName&&(n[o].displayName=t.displayName+"_"+o)}}}}function a(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var r=n in P;r?b(!1,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n):void 0;var o=n in e;o?b(!1,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n):void 0,e[n]=i}}}function s(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:b(!1,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?b(!1,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n):void 0,e[n]=t[n]);return e}function l(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return s(r,n),s(r,i),r}}function u(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function c(e,t){var n=t.bind(e);n.__reactBoundContext=e,n.__reactBoundMethod=t,n.__reactBoundArguments=null;var i=e.constructor.displayName,r=n.bind;return n.bind=function(o){for(var a=arguments.length,s=Array(a>1?a-1:0),l=1;a>l;l++)s[l-1]=arguments[l];if(o!==e&&null!==o)C(!1,"bind(): React component methods may only be bound to the component instance. See %s",i);else if(!s.length)return C(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",i),n;var u=r.apply(n,arguments);return u.__reactBoundContext=e,u.__reactBoundMethod=t,u.__reactBoundArguments=s,u},n}function d(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];e[i]=c(e,r)}}var p=e(168),f=e(31),h=e(61),m=e(83),v=e(82),g=e(80),y=e(150),b=e(157),_=e(160),w=e(161),C=e(167),E=w({mixins:null}),x=_({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),T=[],k={mixins:x.DEFINE_MANY,statics:x.DEFINE_MANY,propTypes:x.DEFINE_MANY,contextTypes:x.DEFINE_MANY,childContextTypes:x.DEFINE_MANY,getDefaultProps:x.DEFINE_MANY_MERGED,getInitialState:x.DEFINE_MANY_MERGED,getChildContext:x.DEFINE_MANY_MERGED,render:x.DEFINE_ONCE,componentWillMount:x.DEFINE_MANY,componentDidMount:x.DEFINE_MANY,componentWillReceiveProps:x.DEFINE_MANY,shouldComponentUpdate:x.DEFINE_ONCE,componentWillUpdate:x.DEFINE_MANY,componentDidUpdate:x.DEFINE_MANY,componentWillUnmount:x.DEFINE_MANY,updateComponent:x.OVERRIDE_BASE},P={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)o(e,t[n])},childContextTypes:function(e,t){i(e,t,m.childContext),e.childContextTypes=p({},e.childContextTypes,t)},contextTypes:function(e,t){i(e,t,m.context),e.contextTypes=p({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=l(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){i(e,t,m.prop),e.propTypes=p({},e.propTypes,t)},statics:function(e,t){a(e,t)},autobind:function(){}},S={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},O=function(){};p(O.prototype,f.prototype,S);var I={createClass:function(e){var t=function(e,n,i){C(this instanceof t,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"),this.__reactAutoBindPairs.length&&d(this),this.props=e,this.context=n,this.refs=y,this.updater=i||g,this.state=null;var r=this.getInitialState?this.getInitialState():null;void 0===r&&this.getInitialState._isMockFunction&&(r=null),"object"!=typeof r||Array.isArray(r)?b(!1,"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"):void 0,
this.state=r};t.prototype=new O,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],T.forEach(o.bind(null,t)),o(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.getDefaultProps&&(t.getDefaultProps.isReactClassApproved={}),t.prototype.getInitialState&&(t.prototype.getInitialState.isReactClassApproved={}),t.prototype.render?void 0:b(!1,"createClass(...): Class specification must implement a `render` method."),C(!t.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",e.displayName||"A component"),C(!t.prototype.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",e.displayName||"A component");for(var n in k)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){T.push(e)}}};t.exports=I},{150:150,157:157,160:160,161:161,167:167,168:168,31:31,61:61,80:80,82:82,83:83}],31:[function(e,t,n){function i(e,t,n){this.props=e,this.context=t,this.refs=s,this.updater=n||r}var r=e(80),o=e(71),a=e(115),s=e(150),l=e(157),u=e(167);i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?l(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):void 0,o.debugTool.onSetState(),u(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};var c={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},d=function(e,t){a&&Object.defineProperty(i.prototype,e,{get:function(){u(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var p in c)c.hasOwnProperty(p)&&d(p,c[p]);t.exports=i},{115:115,150:150,157:157,167:167,71:71,80:80}],32:[function(e,t,n){var i=e(7),r=e(47),o={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,unmountIDFromEnvironment:function(e){}};t.exports=o},{47:47,7:7}],33:[function(e,t,n){var i=e(157),r=!1,o={unmountIDFromEnvironment:null,replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r?i(!1,"ReactCompositeComponent: injectEnvironment() can only be called once."):void 0,o.unmountIDFromEnvironment=e.unmountIDFromEnvironment,o.replaceNodeWithMarkup=e.replaceNodeWithMarkup,o.processChildrenUpdates=e.processChildrenUpdates,r=!0}}};t.exports=o},{157:157}],34:[function(e,t,n){function i(e,t){a[e]||(a[e]={parentID:null,ownerID:null,text:null,childIDs:[],displayName:"Unknown",isMounted:!1,updateCount:0}),t(a[e])}function r(e){var t=a[e];if(t){var n=t.childIDs;delete a[e],n.forEach(r)}}var o=e(157),a={},s=[],l={onSetDisplayName:function(e,t){i(e,function(e){return e.displayName=t})},onSetChildren:function(e,t){i(e,function(n){var i=n.childIDs;n.childIDs=t,t.forEach(function(t){var n=a[t];n?void 0:o(!1,"Expected devtool events to fire for the child before its parent includes it in onSetChildren()."),null==n.displayName?o(!1,"Expected onSetDisplayName() to fire for the child before its parent includes it in onSetChildren()."):void 0,null==n.childIDs&&null==n.text?o(!1,"Expected onSetChildren() or onSetText() to fire for the child before its parent includes it in onSetChildren()."):void 0,n.isMounted?void 0:o(!1,"Expected onMountComponent() to fire for the child before its parent includes it in onSetChildren()."),-1===i.indexOf(t)&&(n.parentID=e)})})},onSetOwner:function(e,t){i(e,function(e){return e.ownerID=t})},onSetText:function(e,t){i(e,function(e){return e.text=t})},onMountComponent:function(e){i(e,function(e){return e.isMounted=!0})},onMountRootComponent:function(e){s.push(e)},onUpdateComponent:function(e){i(e,function(e){return e.updateCount++})},onUnmountComponent:function(e){i(e,function(e){return e.isMounted=!1}),s=s.filter(function(t){return t!==e})},purgeUnmountedComponents:function(){l._preventPurging||Object.keys(a).filter(function(e){return!a[e].isMounted}).forEach(r)},isMounted:function(e){var t=a[e];return t?t.isMounted:!1},getChildIDs:function(e){var t=a[e];return t?t.childIDs:[]},getDisplayName:function(e){var t=a[e];return t?t.displayName:"Unknown"},getOwnerID:function(e){var t=a[e];return t?t.ownerID:null},getParentID:function(e){var t=a[e];return t?t.parentID:null},getText:function(e){var t=a[e];return t?t.text:null},getUpdateCount:function(e){var t=a[e];return t?t.updateCount:0},getRootIDs:function(){return s},getRegisteredIDs:function(){return Object.keys(a)}};t.exports=l},{157:157}],35:[function(e,t,n){function i(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function r(e){}function o(e,t){x(null===t||t===!1||p.isValidElement(t),"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",e.displayName||e.name||"Component")}function a(){var e=this._instance;0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"componentDidMount"),e.componentDidMount(),0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"componentDidMount")}function s(e,t,n){var i=this._instance;0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"componentDidUpdate"),i.componentDidUpdate(e,t,n),0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"componentDidUpdate")}function l(e){return e.prototype&&e.prototype.isReactComponent}var u=e(168),c=e(33),d=e(36),p=e(61),f=e(64),h=e(70),m=e(71),v=e(79),g=e(83),y=e(82),b=e(86),_=e(92),w=e(150),C=e(157),E=e(139),x=e(167);r.prototype.render=function(){var e=h.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return o(e,t),t};var T=1,k={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._nativeParent=null,this._nativeContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,i){this._context=i,this._mountOrder=T++,this._nativeParent=t,this._nativeContainerInfo=n;var s,u=this._processProps(this._currentElement.props),c=this._processContext(i),d=this._currentElement.type,f=this._constructComponent(u,c);l(d)||null!=f&&null!=f.render||(s=f,o(d,s),null===f||f===!1||p.isValidElement(f)?void 0:C(!1,"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",d.displayName||d.name||"Component"),f=new r(d)),null==f.render&&x(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",d.displayName||d.name||"Component");var m=f.props!==u,v=d.displayName||d.name||"Component";x(void 0===f.props||!m,"%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",v,v),f.props=u,f.context=c,f.refs=w,f.updater=_,this._instance=f,h.set(f,this),x(!f.getInitialState||f.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"),x(!f.getDefaultProps||f.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"),x(!f.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"),x(!f.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"),x("function"!=typeof f.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component"),x("function"!=typeof f.componentDidUnmount,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",this.getName()||"A component"),x("function"!=typeof f.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component");var g=f.state;void 0===g&&(f.state=g=null),"object"!=typeof g||Array.isArray(g)?C(!1,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var y;return y=f.unstable_handleError?this.performInitialMountWithErrorHandling(s,t,n,e,i):this.performInitialMount(s,t,n,e,i),f.componentDidMount&&e.getReactMountReady().enqueue(a,this),y},_constructComponent:function(e,t){d.current=this;try{return this._constructComponentWithoutOwner(e,t)}finally{d.current=null}},_constructComponentWithoutOwner:function(e,t){var n,i=this._currentElement.type;return l(i)?(0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"ctor"),n=new i(e,t,_),0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"ctor")):(0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"render"),n=i(e,t,_),0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"render")),n},performInitialMountWithErrorHandling:function(e,t,n,i,r){var o,a=i.checkpoint();try{o=this.performInitialMount(e,t,n,i,r)}catch(s){i.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=i.checkpoint(),this._renderedComponent.unmountComponent(!0),i.rollback(a),o=this.performInitialMount(e,t,n,i,r)}return o},performInitialMount:function(e,t,n,i,r){var o=this._instance;o.componentWillMount&&(0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"componentWillMount"),o.componentWillMount(),0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"componentWillMount"),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===e&&(e=this._renderValidatedComponent()),this._renderedNodeType=v.getType(e),this._renderedComponent=this._instantiateReactComponent(e);var a=b.mountComponent(this._renderedComponent,i,t,n,this._processChildContext(r));return 0!==this._debugID&&m.debugTool.onSetChildren(this._debugID,0!==this._renderedComponent._debugID?[this._renderedComponent._debugID]:[]),a},getNativeNode:function(){return b.getNativeNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount){if(t._calledComponentWillUnmount=!0,0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"componentWillUnmount"),e){var n=this.getName()+".componentWillUnmount()";f.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"componentWillUnmount")}this._renderedComponent&&(b.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,h.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return w;var i={};for(var r in n)i[r]=e[r];return i},_processContext:function(e){var t=this._maskContext(e),n=this._currentElement.type;return n.contextTypes&&this._checkPropTypes(n.contextTypes,t,g.context),t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance;m.debugTool.onBeginProcessingChildContext();var i=n.getChildContext&&n.getChildContext();if(m.debugTool.onEndProcessingChildContext(),i){"object"!=typeof t.childContextTypes?C(!1,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):void 0,this._checkPropTypes(t.childContextTypes,i,g.childContext);for(var r in i)r in t.childContextTypes?void 0:C(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",r);return u({},e,i)}return e},_processProps:function(e){var t=this._currentElement.type;return t.propTypes&&this._checkPropTypes(t.propTypes,e,g.prop),e},_checkPropTypes:function(e,t,n){var r=this.getName();for(var o in e)if(e.hasOwnProperty(o)){var a;try{"function"!=typeof e[o]?C(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",r||"React class",y[n],o):void 0,a=e[o](t,o,r,n)}catch(s){a=s}if(a instanceof Error){var l=i(this);n===g.prop?x(!1,"Failed Composite propType: %s%s",a.message,l):x(!1,"Failed Context Types: %s%s",a.message,l)}}},receiveComponent:function(e,t,n){var i=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(t,i,e,r,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?b.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,i,r){var o,a,s=this._instance,l=!1;this._context===r?o=s.context:(o=this._processContext(r),l=!0),t===n?a=n.props:(a=this._processProps(n.props),l=!0),l&&s.componentWillReceiveProps&&(0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"componentWillReceiveProps"),s.componentWillReceiveProps(a,o),0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"componentWillReceiveProps"));var u=this._processPendingState(a,o),c=!0;!this._pendingForceUpdate&&s.shouldComponentUpdate&&(0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"shouldComponentUpdate"),c=s.shouldComponentUpdate(a,u,o),0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"shouldComponentUpdate")),x(void 0!==c,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"),this._updateBatchNumber=null,c?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,a,u,o,e,r)):(this._currentElement=n,this._context=r,s.props=a,s.state=u,s.context=o)},_processPendingState:function(e,t){var n=this._instance,i=this._pendingStateQueue,r=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(r&&1===i.length)return i[0];for(var o=u({},r?i[0]:n.state),a=r?1:0;a<i.length;a++){var s=i[a];u(o,"function"==typeof s?s.call(n,o,e,t):s)}return o},_performComponentUpdate:function(e,t,n,i,r,o){var a,l,u,c=this._instance,d=Boolean(c.componentDidUpdate);d&&(a=c.props,l=c.state,u=c.context),c.componentWillUpdate&&(0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"componentWillUpdate"),c.componentWillUpdate(t,n,i),0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"componentWillUpdate")),this._currentElement=e,this._context=o,c.props=t,c.state=n,c.context=i,this._updateRenderedComponent(r,o),d&&r.getReactMountReady().enqueue(s.bind(this,a,l,u),this)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,i=n._currentElement,r=this._renderValidatedComponent();if(E(i,r))b.receiveComponent(n,r,e,this._processChildContext(t));else{var o=b.getNativeNode(n);b.unmountComponent(n,!1),this._renderedNodeType=v.getType(r),this._renderedComponent=this._instantiateReactComponent(r);var a=b.mountComponent(this._renderedComponent,e,this._nativeParent,this._nativeContainerInfo,this._processChildContext(t));0!==this._debugID&&m.debugTool.onSetChildren(this._debugID,0!==this._renderedComponent._debugID?[this._renderedComponent._debugID]:[]),this._replaceNodeWithMarkup(o,a,n)}},_replaceNodeWithMarkup:function(e,t,n){c.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance;0!==this._debugID&&m.debugTool.onBeginLifeCycleTimer(this._debugID,"render");var t=e.render();return 0!==this._debugID&&m.debugTool.onEndLifeCycleTimer(this._debugID,"render"),void 0===t&&e.render._isMockFunction&&(t=null),t},_renderValidatedComponent:function(){var e;d.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{d.current=null}return null===e||e===!1||p.isValidElement(e)?void 0:C(!1,"%s.render(): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?C(!1,"Stateless function components cannot have refs."):void 0;var i=t.getPublicInstance(),r=t&&t.getName?t.getName():"a component";x(null!=i,'Stateless function components cannot be given refs (See ref "%s" in %s created by %s). Attempts to access this ref will fail.',e,r,this.getName());var o=n.refs===w?n.refs={}:n.refs;o[e]=i},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof r?null:e},_instantiateReactComponent:null},P={Mixin:k};t.exports=P},{139:139,150:150,157:157,167:167,168:168,33:33,36:36,61:61,64:64,70:70,71:71,79:79,82:82,83:83,86:86,92:92}],36:[function(e,t,n){var i={current:null};t.exports=i},{}],37:[function(e,t,n){var i=e(41),r=e(60),o=e(74),a=e(86),s=e(93),l=e(94),u=e(119),c=e(127),d=e(136),p=e(167);r.inject();var f={findDOMNode:u,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:i.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?i.getNodeFromInstance(e):null}},Mount:o,Reconciler:a});var h=e(143);if(h.canUseDOM&&window.top===window.self){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&(navigator.userAgent.indexOf("Chrome")>-1&&-1===navigator.userAgent.indexOf("Edge")||navigator.userAgent.indexOf("Firefox")>-1)){var m=-1===window.location.protocol.indexOf("http")&&-1===navigator.userAgent.indexOf("Firefox");console.debug("Download the React DevTools "+(m?"and use an HTTP server (instead of a file: URL) ":"")+"for a better development experience: https://fb.me/react-devtools")}var v=function(){};p(-1!==(v.name||v.toString()).indexOf("testFn"),"It looks like you're using a minified copy of the development build of React. When deploying React apps to production, make sure to use the production build which skips development warnings and is faster. See https://fb.me/react-minification for more details.");var g=document.documentMode&&document.documentMode<8;p(!g,'Internet Explorer is running in compatibility mode; please add the following tag to your HTML to prevent this from happening: <meta http-equiv="X-UA-Compatible" content="IE=edge" />');for(var y=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim],b=0;b<y.length;b++)if(!y[b]){p(!1,"One or more ES5 shims expected by React are not available: https://fb.me/react-warning-polyfills");break}}t.exports=f},{119:119,127:127,136:136,143:143,167:167,41:41,60:60,74:74,86:86,93:93,94:94}],38:[function(e,t,n){var i=e(14),r={getNativeProps:i.getNativeProps};t.exports=r},{14:14}],39:[function(e,t,n){function i(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function r(e){if("object"==typeof e){if(Array.isArray(e))return"["+e.map(r).join(", ")+"]";var t=[];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=/^[a-z$_][\w$_]*$/i.test(n)?n:JSON.stringify(n);t.push(i+": "+r(e[n]))}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function o(e,t,n){if(null!=e&&null!=t&&!H(e,t)){var i,o=n._tag,a=n._currentElement._owner;a&&(i=a.getName());var s=i+"|"+o;te.hasOwnProperty(s)||(te[s]=!0,z(!1,"`%s` was passed a style object that has previously been mutated. Mutating `style` is deprecated. Consider cloning it beforehand. Check the `render` %s. Previous style: %s. Mutated style: %s.",o,a?"of `"+i+"`":"using <"+o+">",r(e),r(t)))}}function a(e,t){t&&(ae[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?F(!1,"%s is a void element tag and must not have `children` or use `props.dangerouslySetInnerHTML`.%s",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?F(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):void 0,"object"==typeof t.dangerouslySetInnerHTML&&Z in t.dangerouslySetInnerHTML?void 0:F(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),z(null==t.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),z(t.suppressContentEditableWarning||!t.contentEditable||null==t.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),z(null==t.onFocusIn&&null==t.onFocusOut,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),null!=t.style&&"object"!=typeof t.style?F(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",i(e)):void 0)}function s(e,t,n,i){if(!(i instanceof L)){z("onScroll"!==t||U("scroll",!0),"This browser doesn't support the `onScroll` event");var r=e._nativeContainerInfo,o=r._node&&r._node.nodeType===ee,a=o?r._node:r._ownerDocument;G(t,a),i.getReactMountReady().enqueue(l,{inst:e,registrationName:t,listener:n})}}function l(){var e=this;E.putListener(e.inst,e.registrationName,e.listener)}function u(){var e=this;N.postMountWrapper(e)}function c(){var e=this;e._rootNodeID?void 0:F(!1,"Must be mounted to trap events");var t=K(e);switch(t?void 0:F(!1,"trapBubbledEvent(...): Requires node to be rendered."),e._tag){case"iframe":case"object":e._wrapperState.listeners=[T.trapBubbledEvent(C.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in ie)ie.hasOwnProperty(n)&&e._wrapperState.listeners.push(T.trapBubbledEvent(C.topLevelTypes[n],ie[n],t));break;case"img":e._wrapperState.listeners=[T.trapBubbledEvent(C.topLevelTypes.topError,"error",t),T.trapBubbledEvent(C.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[T.trapBubbledEvent(C.topLevelTypes.topReset,"reset",t),T.trapBubbledEvent(C.topLevelTypes.topSubmit,"submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[T.trapBubbledEvent(C.topLevelTypes.topInvalid,"invalid",t)]}}function d(){A.postUpdateWrapper(this)}function p(e){ue.call(le,e)||(se.test(e)?void 0:F(!1,"Invalid tag: %s",e),le[e]=!0)}function f(e,t){return e.indexOf("-")>=0||null!=t.is}function h(e){var t=e.type;p(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._nativeNode=null,this._nativeParent=null,this._rootNodeID=null,this._domID=null,this._nativeContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0,this._ancestorInfo=null,this._contentDebugID=null}var m=e(168),v=e(1),g=e(4),y=e(8),b=e(9),_=e(10),w=e(11),C=e(16),E=e(17),x=e(18),T=e(27),k=e(32),P=e(38),S=e(40),O=e(41),I=e(48),N=e(50),A=e(51),M=e(55),D=e(71),j=e(75),L=e(90),R=e(149),B=e(118),F=e(157),U=e(132),$=e(161),H=e(166),W=e(141),z=e(167),V=S,q=E.deleteListener,K=O.getNodeFromInstance,G=T.listenTo,Y=x.registrationNameModules,X={string:!0,number:!0},J=$({style:null}),Z=$({__html:null}),Q={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},ee=11,te={},ne=R;ne=function(e){var t=this._debugID,n=t+"#text";this._contentDebugID=n,D.debugTool.onSetDisplayName(n,"#text"),D.debugTool.onSetText(n,""+e),D.debugTool.onMountComponent(n),D.debugTool.onSetChildren(t,[n])};var ie={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},re={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},oe={listing:!0,pre:!0,textarea:!0},ae=m({menuitem:!0},re),se=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,le={},ue={}.hasOwnProperty,ce=1;h.displayName="ReactDOMComponent",h.Mixin={mountComponent:function(e,t,n,i){this._rootNodeID=ce++,this._domID=n._idCounter++,this._nativeParent=t,this._nativeContainerInfo=n;var r=this._currentElement.props;switch(this._tag){case"iframe":case"object":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"button":r=P.getNativeProps(this,r,t);break;case"input":I.mountWrapper(this,r,t),r=I.getNativeProps(this,r),e.getReactMountReady().enqueue(c,this);break;case"option":N.mountWrapper(this,r,t),r=N.getNativeProps(this,r);break;case"select":A.mountWrapper(this,r,t),r=A.getNativeProps(this,r),e.getReactMountReady().enqueue(c,this);break;case"textarea":M.mountWrapper(this,r,t),r=M.getNativeProps(this,r),e.getReactMountReady().enqueue(c,this)}a(this,r);var o,s;null!=t?(o=t._namespaceURI,s=t._tag):n._tag&&(o=n._namespaceURI,s=n._tag),(null==o||o===b.svg&&"foreignobject"===s)&&(o=b.html),o===b.html&&("svg"===this._tag?o=b.svg:"math"===this._tag&&(o=b.mathml)),this._namespaceURI=o;var l;null!=t?l=t._ancestorInfo:n._tag&&(l=n._ancestorInfo),l&&W(this._tag,this,l),this._ancestorInfo=W.updatedAncestorInfo(l,this._tag,this);var d;if(e.useCreateElement){var p,f=n._ownerDocument;if(o===b.html)if("script"===this._tag){var h=f.createElement("div"),m=this._currentElement.type;h.innerHTML="<"+m+"></"+m+">",p=h.removeChild(h.firstChild)}else p=f.createElement(this._currentElement.type,r.is||null);else p=f.createElementNS(o,this._currentElement.type);O.precacheNode(this,p),this._flags|=V.hasCachedChildNodes,this._nativeParent||w.setAttributeForRoot(p),this._updateDOMProperties(null,r,e);var g=y(p);this._createInitialChildren(e,r,i,g),d=g}else{var _=this._createOpenTagMarkupAndPutListeners(e,r),C=this._createContentMarkup(e,r,i);d=!C&&re[this._tag]?_+"/>":_+">"+C+"</"+this._currentElement.type+">"}switch(this._tag){case"button":case"input":case"select":case"textarea":r.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(u,this)}return d},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(null!=r)if(Y.hasOwnProperty(i))r&&s(this,i,r,e);else{i===J&&(r&&(this._previousStyle=r,r=this._previousStyleCopy=m({},t.style)),r=g.createMarkupForStyles(r,this));var o=null;null!=this._tag&&f(this._tag,t)?Q.hasOwnProperty(i)||(o=w.createMarkupForCustomAttribute(i,r)):o=w.createMarkupForProperty(i,r),o&&(n+=" "+o)}}return e.renderToStaticMarkup?n:(this._nativeParent||(n+=" "+w.createMarkupForRoot()),n+=" "+w.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var i="",r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(i=r.__html);else{var o=X[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)i=B(o),ne.call(this,o);else if(null!=a){var s=this.mountChildren(a,e,n);i=s.join("")}}return oe[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(e,t,n,i){var r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&y.queueHTML(i,r.__html);else{var o=X[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)ne.call(this,o),y.queueText(i,o);else if(null!=a)for(var s=this.mountChildren(a,e,n),l=0;l<s.length;l++)y.queueChild(i,s[l])}},receiveComponent:function(e,t,n){var i=this._currentElement;this._currentElement=e,this.updateComponent(t,i,e,n)},updateComponent:function(e,t,n,i){var r=t.props,o=this._currentElement.props;switch(this._tag){case"button":r=P.getNativeProps(this,r),o=P.getNativeProps(this,o);break;case"input":I.updateWrapper(this),r=I.getNativeProps(this,r),o=I.getNativeProps(this,o);break;case"option":r=N.getNativeProps(this,r),o=N.getNativeProps(this,o);break;case"select":r=A.getNativeProps(this,r),o=A.getNativeProps(this,o);break;case"textarea":M.updateWrapper(this),r=M.getNativeProps(this,r),o=M.getNativeProps(this,o)}a(this,o),this._updateDOMProperties(r,o,e),this._updateDOMChildren(r,o,e,i),"select"===this._tag&&e.getReactMountReady().enqueue(d,this)},_updateDOMProperties:function(e,t,n){var i,r,a;for(i in e)if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&null!=e[i])if(i===J){var l=this._previousStyleCopy;for(r in l)l.hasOwnProperty(r)&&(a=a||{},a[r]="");this._previousStyleCopy=null}else Y.hasOwnProperty(i)?e[i]&&q(this,i):(_.properties[i]||_.isCustomAttribute(i))&&w.deleteValueForProperty(K(this),i);for(i in t){var u=t[i],c=i===J?this._previousStyleCopy:null!=e?e[i]:void 0;if(t.hasOwnProperty(i)&&u!==c&&(null!=u||null!=c))if(i===J)if(u?(o(this._previousStyleCopy,this._previousStyle,this),this._previousStyle=u,u=this._previousStyleCopy=m({},u)):this._previousStyleCopy=null,c){for(r in c)!c.hasOwnProperty(r)||u&&u.hasOwnProperty(r)||(a=a||{},a[r]="");for(r in u)u.hasOwnProperty(r)&&c[r]!==u[r]&&(a=a||{},a[r]=u[r])}else a=u;else if(Y.hasOwnProperty(i))u?s(this,i,u,n):c&&q(this,i);else if(f(this._tag,t))Q.hasOwnProperty(i)||w.setValueForAttribute(K(this),i,u);else if(_.properties[i]||_.isCustomAttribute(i)){var d=K(this);null!=u?w.setValueForProperty(d,i,u):w.deleteValueForProperty(d,i)}}a&&g.setValueForStyles(K(this),a,this)},_updateDOMChildren:function(e,t,n,i){var r=X[typeof e.children]?e.children:null,o=X[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=r?null:e.children,u=null!=o?null:t.children,c=null!=r||null!=a,d=null!=o||null!=s;
null!=l&&null==u?this.updateChildren(null,n,i):c&&!d&&(this.updateTextContent(""),D.debugTool.onSetChildren(this._debugID,[])),null!=o?r!==o&&(this.updateTextContent(""+o),this._contentDebugID=this._debugID+"#text",ne.call(this,o)):null!=s?(a!==s&&this.updateMarkup(""+s),D.debugTool.onSetChildren(this._debugID,[])):null!=u&&(this._contentDebugID&&(D.debugTool.onUnmountComponent(this._contentDebugID),this._contentDebugID=null),this.updateChildren(u,n,i))},getNativeNode:function(){return K(this)},unmountComponent:function(e){switch(this._tag){case"iframe":case"object":case"img":case"form":case"video":case"audio":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":F(!1,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag)}this.unmountChildren(e),O.uncacheNode(this),E.deleteAllListeners(this),k.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._domID=null,this._wrapperState=null,this._contentDebugID&&(D.debugTool.onUnmountComponent(this._contentDebugID),this._contentDebugID=null)},getPublicInstance:function(){return K(this)}},m(h.prototype,h.Mixin,j.Mixin),t.exports=h},{1:1,10:10,11:11,118:118,132:132,141:141,149:149,157:157,16:16,161:161,166:166,167:167,168:168,17:17,18:18,27:27,32:32,38:38,4:4,40:40,41:41,48:48,50:50,51:51,55:55,71:71,75:75,8:8,9:9,90:90}],40:[function(e,t,n){var i={hasCachedChildNodes:1};t.exports=i},{}],41:[function(e,t,n){function i(e){for(var t;t=e._renderedComponent;)e=t;return e}function r(e,t){var n=i(e);n._nativeNode=t,t[m]=n}function o(e){var t=e._nativeNode;t&&(delete t[m],e._nativeNode=null)}function a(e,t){if(!(e._flags&h.hasCachedChildNodes)){var n=e._renderedChildren,o=t.firstChild;e:for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],l=i(s)._domID;if(null!=l){for(;null!==o;o=o.nextSibling)if(1===o.nodeType&&o.getAttribute(f)===String(l)||8===o.nodeType&&o.nodeValue===" react-text: "+l+" "||8===o.nodeType&&o.nodeValue===" react-empty: "+l+" "){r(s,o);continue e}p(!1,"Unable to find element with ID %s.",l)}}e._flags|=h.hasCachedChildNodes}}function s(e){if(e[m])return e[m];for(var t=[];!e[m];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,i;e&&(i=e[m]);e=t.pop())n=i,t.length&&a(i,e);return n}function l(e){var t=s(e);return null!=t&&t._nativeNode===e?t:null}function u(e){if(void 0===e._nativeNode?p(!1,"getNodeFromInstance: Invalid argument."):void 0,e._nativeNode)return e._nativeNode;for(var t=[];!e._nativeNode;)t.push(e),e._nativeParent?void 0:p(!1,"React DOM tree root should always have a node reference."),e=e._nativeParent;for(;t.length;e=t.pop())a(e,e._nativeNode);return e._nativeNode}var c=e(10),d=e(40),p=e(157),f=c.ID_ATTRIBUTE_NAME,h=d,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:s,getInstanceFromNode:l,getNodeFromInstance:u,precacheChildNodes:a,precacheNode:r,uncacheNode:o};t.exports=v},{10:10,157:157,40:40}],42:[function(e,t,n){function i(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===o?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n._ancestorInfo=t?r.updatedAncestorInfo(null,n._tag,null):null,n}var r=e(141),o=9;t.exports=i},{141:141}],43:[function(e,t,n){function i(e,t,n,i,r,l){a.forEach(function(a){try{a[e]&&a[e](t,n,i,r,l)}catch(u){o(!s[e],"exception thrown by devtool while handling %s: %s",e,u.message),s[e]=!0}})}var r=e(57),o=e(167),a=[],s={},l={addDevtool:function(e){a.push(e)},removeDevtool:function(e){for(var t=0;t<a.length;t++)a[t]===e&&(a.splice(t,1),t--)},onCreateMarkupForProperty:function(e,t){i("onCreateMarkupForProperty",e,t)},onSetValueForProperty:function(e,t,n){i("onSetValueForProperty",e,t,n)},onDeleteValueForProperty:function(e,t){i("onDeleteValueForProperty",e,t)}};l.addDevtool(r),t.exports=l},{167:167,57:57}],44:[function(e,t,n){var i=e(168),r=e(8),o=e(41),a=function(e){this._currentElement=null,this._nativeNode=null,this._nativeParent=null,this._nativeContainerInfo=null,this._domID=null};i(a.prototype,{mountComponent:function(e,t,n,i){var a=n._idCounter++;this._domID=a,this._nativeParent=t,this._nativeContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument,u=l.createComment(s);return o.precacheNode(this,u),r(u)}return e.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getNativeNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),t.exports=a},{168:168,41:41,8:8}],45:[function(e,t,n){function i(e){return r.createFactory(e)}var r=(e(61),e(62)),o=e(162),a=o({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},i);t.exports=a},{162:162,61:61,62:62}],46:[function(e,t,n){var i={useCreateElement:!0};t.exports=i},{}],47:[function(e,t,n){var i=e(7),r=e(41),o={dangerouslyProcessChildrenUpdates:function(e,t){var n=r.getNodeFromInstance(e);i.processUpdates(n,t)}};t.exports=o},{41:41,7:7}],48:[function(e,t,n){function i(){this._rootNodeID&&w.updateWrapper(this)}function r(e){null==e||null!==e.value||v||(f(!1,"`value` prop on `input` should not be null. Consider using the empty string to clear the component or `undefined` for uncontrolled components."),v=!0)}function o(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);d.asap(i,this);var r=t.name;if("radio"===t.type&&null!=r){for(var o=c.getNodeFromInstance(this),a=o;a.parentNode;)a=a.parentNode;for(var s=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),l=0;l<s.length;l++){var f=s[l];if(f!==o&&f.form===o.form){var h=c.getInstanceFromNode(f);h?void 0:p(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."),d.asap(i,h)}}}return n}var a=e(168),s=e(14),l=e(11),u=e(24),c=e(41),d=e(93),p=e(157),f=e(167),h=!1,m=!1,v=!1,g=!1,y=!1,b=!1,_=!1,w={getNativeProps:function(e,t){var n=u.getValue(t),i=u.getChecked(t),r=a({type:void 0},s.getNativeProps(e,t),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=i?i:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return r},mountWrapper:function(e,t){u.checkPropTypes("input",t,e._currentElement._owner);var n=e._currentElement._owner;void 0===t.valueLink||h||(f(!1,"`valueLink` prop on `input` is deprecated; set `value` and `onChange` instead."),h=!0),void 0===t.checkedLink||m||(f(!1,"`checkedLink` prop on `input` is deprecated; set `value` and `onChange` instead."),m=!0),void 0===t.checked||void 0===t.defaultChecked||y||(f(!1,"%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",n&&n.getName()||"A component",t.type),y=!0),void 0===t.value||void 0===t.defaultValue||g||(f(!1,"%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",n&&n.getName()||"A component",t.type),g=!0),r(t);var i=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=i?i:null,listeners:null,onChange:o.bind(e)},e._wrapperState.controlled=void 0!==t.checked||void 0!==t.value},updateWrapper:function(e){var t=e._currentElement.props;r(t);var n=e._wrapperState.initialChecked||e._wrapperState.initialValue,i=t.defaultChecked||t.defaultValue,o=void 0!==t.checked||void 0!==t.value,a=e._currentElement._owner;!n&&e._wrapperState.controlled||!o||_||(f(!1,"%s is changing an uncontrolled input of type %s to be controlled. Input elements should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components",a&&a.getName()||"A component",t.type),_=!0),!e._wrapperState.controlled||!i&&o||b||(f(!1,"%s is changing a controlled input of type %s to be uncontrolled. Input elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components",a&&a.getName()||"A component",t.type),b=!0);var s=t.checked;null!=s&&l.setValueForProperty(c.getNodeFromInstance(e),"checked",s||!1);var d=u.getValue(t);null!=d&&l.setValueForProperty(c.getNodeFromInstance(e),"value",""+d)}};t.exports=w},{11:11,14:14,157:157,167:167,168:168,24:24,41:41,93:93}],49:[function(e,t,n){var i=e(43);t.exports={debugTool:i}},{43:43}],50:[function(e,t,n){var i=e(168),r=e(29),o=e(41),a=e(51),s=e(167),l={mountWrapper:function(e,t,n){s(null==t.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.");var i=null;if(null!=n){var r=n;"optgroup"===r._tag&&(r=r._nativeParent),null!=r&&"select"===r._tag&&(i=a.getSelectValueContext(r))}var o=null;if(null!=i)if(o=!1,Array.isArray(i)){for(var l=0;l<i.length;l++)if(""+i[l]==""+t.value){o=!0;break}}else o=""+i==""+t.value;e._wrapperState={selected:o}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=o.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getNativeProps:function(e,t){var n=i({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var o="";return r.forEach(t.children,function(e){null!=e&&("string"==typeof e||"number"==typeof e?o+=e:s(!1,"Only strings and numbers are supported as <option> children."))}),o&&(n.children=o),n}};t.exports=l},{167:167,168:168,29:29,41:41,51:51}],51:[function(e,t,n){function i(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=d.getValue(e);null!=t&&s(this,Boolean(e.multiple),t)}}function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(e){null==e||null!==e.value||v||(h(!1,"`value` prop on `select` should not be null. Consider using the empty string to clear the component or `undefined` for uncontrolled components."),v=!0)}function a(e,t){var n=e._currentElement._owner;d.checkPropTypes("select",t,n),void 0===t.valueLink||m||(h(!1,"`valueLink` prop on `select` is deprecated; set `value` and `onChange` instead."),m=!0);for(var i=0;i<y.length;i++){var o=y[i];null!=t[o]&&(t.multiple?h(Array.isArray(t[o]),"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",o,r(n)):h(!Array.isArray(t[o]),"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",o,r(n)))}}function s(e,t,n){var i,r,o=p.getNodeFromInstance(e).options;if(t){for(i={},r=0;r<n.length;r++)i[""+n[r]]=!0;for(r=0;r<o.length;r++){var a=i.hasOwnProperty(o[r].value);o[r].selected!==a&&(o[r].selected=a)}}else{for(i=""+n,r=0;r<o.length;r++)if(o[r].value===i)return void(o[r].selected=!0);o.length&&(o[0].selected=!0)}}function l(e){var t=this._currentElement.props,n=d.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),f.asap(i,this),n}var u=e(168),c=e(14),d=e(24),p=e(41),f=e(93),h=e(167),m=!1,v=!1,g=!1,y=["value","defaultValue"],b={getNativeProps:function(e,t){return u({},c.getNativeProps(e,t),{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){a(e,t),o(t);var n=d.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:l.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||g||(h(!1,"Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://fb.me/react-controlled-components"),g=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;o(t),e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var i=d.getValue(t);null!=i?(e._wrapperState.pendingUpdate=!1,s(e,Boolean(t.multiple),i)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?s(e,Boolean(t.multiple),t.defaultValue):s(e,Boolean(t.multiple),t.multiple?[]:""))}};t.exports=b},{14:14,167:167,168:168,24:24,41:41,93:93}],52:[function(e,t,n){function i(e,t,n,i){return e===n&&t===i}function r(e){var t=document.selection,n=t.createRange(),i=n.text.length,r=n.duplicate();r.moveToElementText(e),r.setEndPoint("EndToStart",n);var o=r.text.length,a=o+i;return{start:o,end:a}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(l){return null}var u=i(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=u?0:s.toString().length,d=s.cloneRange();d.selectNodeContents(e),d.setEnd(s.startContainer,s.startOffset);var p=i(d.startContainer,d.startOffset,d.endContainer,d.endOffset),f=p?0:d.toString().length,h=f+c,m=document.createRange();m.setStart(n,r),m.setEnd(o,a);var v=m.collapsed;return{start:v?h:f,end:v?f:h}}function a(e,t){var n,i,r=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,i=n):t.start>t.end?(n=t.end,i=t.start):(n=t.start,i=t.end),r.moveToElementText(e),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),i=e[c()].length,r=Math.min(t.start,i),o=void 0===t.end?r:Math.min(t.end,i);if(!n.extend&&r>o){var a=o;o=r,r=a}var s=u(e,r),l=u(e,o);if(s&&l){var d=document.createRange();d.setStart(s.node,s.offset),n.removeAllRanges(),r>o?(n.addRange(d),n.extend(l.node,l.offset)):(d.setEnd(l.node,l.offset),n.addRange(d))}}}var l=e(143),u=e(128),c=e(129),d=l.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:d?r:o,setOffsets:d?a:s};t.exports=p},{128:128,129:129,143:143}],53:[function(e,t,n){var i=e(60),r=e(89),o=e(94);i.inject();var a={renderToString:r.renderToString,renderToStaticMarkup:r.renderToStaticMarkup,version:o};t.exports=a},{60:60,89:89,94:94}],54:[function(e,t,n){var i=e(168),r=e(7),o=e(8),a=e(41),s=e(71),l=e(118),u=e(157),c=e(141),d=function(e){this._currentElement=e,this._stringText=""+e,this._nativeNode=null,this._nativeParent=null,this._domID=null,this._mountIndex=0,this._closingComment=null,this._commentNodes=null};i(d.prototype,{mountComponent:function(e,t,n,i){s.debugTool.onSetText(this._debugID,this._stringText);var r;null!=t?r=t._ancestorInfo:null!=n&&(r=n._ancestorInfo),r&&c("#text",this,r);var u=n._idCounter++,d=" react-text: "+u+" ",p=" /react-text ";if(this._domID=u,this._nativeParent=t,e.useCreateElement){var f=n._ownerDocument,h=f.createComment(d),m=f.createComment(p),v=o(f.createDocumentFragment());return o.queueChild(v,o(h)),this._stringText&&o.queueChild(v,o(f.createTextNode(this._stringText))),o.queueChild(v,o(m)),a.precacheNode(this,h),this._closingComment=m,v}var g=l(this._stringText);return e.renderToStaticMarkup?g:"<!--"+d+"-->"+g+"<!--"+p+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var i=this.getNativeNode();r.replaceDelimitedText(i[0],i[1],n),s.debugTool.onSetText(this._debugID,n)}}},getNativeNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=a.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n?u(!1,"Missing closing comment for text component %s",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._nativeNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,a.uncacheNode(this)}}),t.exports=d},{118:118,141:141,157:157,168:168,41:41,7:7,71:71,8:8}],55:[function(e,t,n){function i(){this._rootNodeID&&g.updateWrapper(this)}function r(e){null==e||null!==e.value||m||(f(!1,"`value` prop on `textarea` should not be null. Consider using the empty string to clear the component or `undefined` for uncontrolled components."),m=!0)}function o(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);return d.asap(i,this),n}var a=e(168),s=e(14),l=e(11),u=e(24),c=e(41),d=e(93),p=e(157),f=e(167),h=!1,m=!1,v=!1,g={getNativeProps:function(e,t){null!=t.dangerouslySetInnerHTML?p(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):void 0;var n=a({},s.getNativeProps(e,t),{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,t){u.checkPropTypes("textarea",t,e._currentElement._owner),void 0===t.valueLink||h||(f(!1,"`valueLink` prop on `textarea` is deprecated; set `value` and `onChange` instead."),h=!0),void 0===t.value||void 0===t.defaultValue||v||(f(!1,"Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://fb.me/react-controlled-components"),v=!0),r(t);var n=t.defaultValue,i=t.children;null!=i&&(f(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=n?p(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."):void 0,Array.isArray(i)&&(i.length<=1?void 0:p(!1,"<textarea> can only have at most one child."),i=i[0]),n=""+i),null==n&&(n="");var a=u.getValue(t);e._wrapperState={initialValue:""+(null!=a?a:n),listeners:null,onChange:o.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props;r(t);var n=u.getValue(t);null!=n&&l.setValueForProperty(c.getNodeFromInstance(e),"value",""+n)}};t.exports=g},{11:11,14:14,157:157,167:167,168:168,24:24,41:41,93:93}],56:[function(e,t,n){function i(e,t){"_nativeNode"in e?void 0:l(!1,"getNodeFromInstance: Invalid argument."),"_nativeNode"in t?void 0:l(!1,"getNodeFromInstance: Invalid argument.");for(var n=0,i=e;i;i=i._nativeParent)n++;for(var r=0,o=t;o;o=o._nativeParent)r++;for(;n-r>0;)e=e._nativeParent,n--;for(;r-n>0;)t=t._nativeParent,r--;for(var a=n;a--;){if(e===t)return e;e=e._nativeParent,t=t._nativeParent}return null}function r(e,t){"_nativeNode"in e?void 0:l(!1,"isAncestor: Invalid argument."),"_nativeNode"in t?void 0:l(!1,"isAncestor: Invalid argument.");for(;t;){if(t===e)return!0;t=t._nativeParent}return!1}function o(e){return"_nativeNode"in e?void 0:l(!1,"getParentInstance: Invalid argument."),e._nativeParent}function a(e,t,n){for(var i=[];e;)i.push(e),e=e._nativeParent;var r;for(r=i.length;r-- >0;)t(i[r],!1,n);for(r=0;r<i.length;r++)t(i[r],!0,n)}function s(e,t,n,r,o){for(var a=e&&t?i(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._nativeParent;for(var l=[];t&&t!==a;)l.push(t),t=t._nativeParent;var u;for(u=0;u<s.length;u++)n(s[u],!0,r);for(u=l.length;u-- >0;)n(l[u],!1,o)}var l=e(157);t.exports={isAncestor:r,getLowestCommonAncestor:i,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},{157:157}],57:[function(e,t,n){var i=e(10),r=e(18),o=e(167),a={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},s={},l=function(e){if(!i.properties.hasOwnProperty(e)&&!i.isCustomAttribute(e)&&!(a.hasOwnProperty(e)&&a[e]||s.hasOwnProperty(e)&&s[e])){s[e]=!0;var t=e.toLowerCase(),n=i.isCustomAttribute(t)?t:i.getPossibleStandardName.hasOwnProperty(t)?i.getPossibleStandardName[t]:null;o(null==n,"Unknown DOM property %s. Did you mean %s?",e,n);var l=r.possibleRegistrationNames.hasOwnProperty(t)?r.possibleRegistrationNames[t]:null;o(null==l,"Unknown event handler property %s. Did you mean `%s`?",e,l)}},u={onCreateMarkupForProperty:function(e,t){l(e)},onSetValueForProperty:function(e,t,n){l(t)},onDeleteValueForProperty:function(e,t){l(t)}};t.exports=u},{10:10,167:167,18:18}],58:[function(e,t,n){function i(e,t,n,i,r,o){d.forEach(function(a){try{a[e]&&a[e](t,n,i,r,o)}catch(s){c(!p[e],"exception thrown by devtool while handling %s: %s",e,s.message),p[e]=!0}})}function r(){x.purgeUnmountedComponents(),E.clearHistory()}function o(e){return e.reduce(function(e,t){var n=x.getOwnerID(t),i=x.getParentID(t);return e[t]={displayName:x.getDisplayName(t),text:x.getText(t),updateCount:x.getUpdateCount(t),childIDs:x.getChildIDs(t),ownerID:n||x.getOwnerID(i),parentID:i},e},{})}function a(){var e=g,t=v||[],n=E.getHistory();if(!f||0===m)return g=null,v=null,void r();if(t.length||n.length){var i=x.getRegisteredIDs();h.push({duration:u()-e,measurements:t||[],operations:n||[],treeSnapshot:o(i)})}r(),g=u(),v=[]}function s(e){c(e,"ReactDebugTool: debugID may not be empty.")}var l=e(143),u=e(165),c=e(167),d=[],p={},f=!1,h=[],m=0,v=null,g=null,y=null,b=null,_=null,w={addDevtool:function(e){d.push(e)},removeDevtool:function(e){for(var t=0;t<d.length;t++)d[t]===e&&(d.splice(t,1),t--)},beginProfiling:function(){f||(f=!0,h.length=0,a())},endProfiling:function(){f&&(f=!1,a())},getFlushHistory:function(){return h},onBeginFlush:function(){m++,a(),i("onBeginFlush")},onEndFlush:function(){a(),m--,i("onEndFlush")},onBeginLifeCycleTimer:function(e,t){s(e),i("onBeginLifeCycleTimer",e,t),f&&m>0&&(c(!_,"There is an internal error in the React performance measurement code. Did not expect %s timer to start while %s timer is still in progress for %s instance.",t,_||"no",e===y?"the same":"another"),b=u(),y=e,_=t)},onEndLifeCycleTimer:function(e,t){s(e),f&&m>0&&(c(_===t,"There is an internal error in the React performance measurement code. We did not expect %s timer to stop while %s timer is still in progress for %s instance. Please report this as a bug in React.",t,_||"no",e===y?"the same":"another"),v.push({timerType:t,instanceID:e,duration:u()-b}),b=null,y=null,_=null),i("onEndLifeCycleTimer",e,t)},onBeginReconcilerTimer:function(e,t){s(e),i("onBeginReconcilerTimer",e,t)},onEndReconcilerTimer:function(e,t){s(e),i("onEndReconcilerTimer",e,t)},onBeginProcessingChildContext:function(){i("onBeginProcessingChildContext")},onEndProcessingChildContext:function(){i("onEndProcessingChildContext")},onNativeOperation:function(e,t,n){s(e),i("onNativeOperation",e,t,n)},onSetState:function(){i("onSetState")},onSetDisplayName:function(e,t){s(e),i("onSetDisplayName",e,t)},onSetChildren:function(e,t){s(e),i("onSetChildren",e,t)},onSetOwner:function(e,t){s(e),i("onSetOwner",e,t)},onSetText:function(e,t){s(e),i("onSetText",e,t)},onMountRootComponent:function(e){s(e),i("onMountRootComponent",e)},onMountComponent:function(e){s(e),i("onMountComponent",e)},onUpdateComponent:function(e){s(e),i("onUpdateComponent",e)},onUnmountComponent:function(e){s(e),i("onUnmountComponent",e)}},C=e(72),E=e(78),x=e(34);w.addDevtool(C),w.addDevtool(x),w.addDevtool(E);var T=l.canUseDOM&&window.location.href||"";/[?&]react_perf\b/.test(T)&&w.beginProfiling(),t.exports=w},{143:143,165:165,167:167,34:34,72:72,78:78}],59:[function(e,t,n){function i(){this.reinitializeTransaction()}var r=e(168),o=e(93),a=e(111),s=e(149),l={initialize:s,close:function(){p.isBatchingUpdates=!1}},u={initialize:s,close:o.flushBatchedUpdates.bind(o)},c=[u,l];r(i.prototype,a.Mixin,{getTransactionWrappers:function(){return c}});var d=new i,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,i,r,o){var a=p.isBatchingUpdates;p.isBatchingUpdates=!0,a?e(t,n,i,r,o):d.perform(e,null,t,n,i,r,o)}};t.exports=p},{111:111,149:149,168:168,93:93}],60:[function(e,t,n){function i(){C||(C=!0,g.EventEmitter.injectReactEventListener(v),g.EventPluginHub.injectEventPluginOrder(a),g.EventPluginUtils.injectComponentTree(d),g.EventPluginUtils.injectTreeTraversal(f),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:s,ChangeEventPlugin:o,SelectEventPlugin:_,BeforeInputEventPlugin:r}),g.NativeComponent.injectGenericComponentClass(c),g.NativeComponent.injectTextComponentClass(h),g.DOMProperty.injectDOMPropertyConfig(l),g.DOMProperty.injectDOMPropertyConfig(b),g.EmptyComponent.injectEmptyComponentFactory(function(e){return new p(e)}),g.Updates.injectReconcileTransaction(y),g.Updates.injectBatchingStrategy(m),g.Component.injectEnvironment(u))}var r=e(2),o=e(6),a=e(13),s=e(15),l=e(22),u=e(32),c=e(39),d=e(41),p=e(44),f=e(56),h=e(54),m=e(59),v=e(66),g=e(68),y=e(85),b=e(95),_=e(96),w=e(97),C=!1;t.exports={inject:i}},{13:13,15:15,2:2,22:22,32:32,39:39,41:41,44:44,54:54,56:56,59:59,6:6,66:66,68:68,85:85,95:95,96:96,97:97}],61:[function(e,t,n){var i,r,o=e(168),a=e(36),s=e(167),l=e(115),u="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,c={key:!0,ref:!0,__self:!0,__source:!0},d=function(e,t,n,i,r,o,a){var s={$$typeof:u,type:e,key:t,ref:n,props:a,_owner:o};return s._store={},l?(Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(s,"_source",{configurable:!1,enumerable:!1,writable:!1,value:r})):(s._store.validated=!1,s._self=i,s._source=r),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};d.createElement=function(e,t,n){var o,l={},p=null,f=null,h=null,m=null;if(null!=t){s(null==t.__proto__||t.__proto__===Object.prototype,"React.createElement(...): Expected props argument to be a plain object. Properties defined in its prototype chain will be ignored."),f=!t.hasOwnProperty("ref")||Object.getOwnPropertyDescriptor(t,"ref").get?null:t.ref,p=!t.hasOwnProperty("key")||Object.getOwnPropertyDescriptor(t,"key").get?null:""+t.key,h=void 0===t.__self?null:t.__self,m=void 0===t.__source?null:t.__source;for(o in t)t.hasOwnProperty(o)&&!c.hasOwnProperty(o)&&(l[o]=t[o])}var v=arguments.length-2;if(1===v)l.children=n;else if(v>1){for(var g=Array(v),y=0;v>y;y++)g[y]=arguments[y+2];l.children=g}if(e&&e.defaultProps){var b=e.defaultProps;for(o in b)void 0===l[o]&&(l[o]=b[o])}return("undefined"==typeof l.$$typeof||l.$$typeof!==u)&&(l.hasOwnProperty("key")||Object.defineProperty(l,"key",{get:function(){i||(i=!0,s(!1,"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)","function"==typeof e&&"displayName"in e?e.displayName:"Element"))},configurable:!0}),l.hasOwnProperty("ref")||Object.defineProperty(l,"ref",{get:function(){r||(r=!0,s(!1,"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)","function"==typeof e&&"displayName"in e?e.displayName:"Element"))},configurable:!0})),d(e,p,f,h,m,a.current,l)},d.createFactory=function(e){var t=d.createElement.bind(null,e);return t.type=e,t},d.cloneAndReplaceKey=function(e,t){var n=d(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},d.cloneElement=function(e,t,n){var i,r=o({},e.props),l=e.key,u=e.ref,p=e._self,f=e._source,h=e._owner;if(null!=t){s(null==t.__proto__||t.__proto__===Object.prototype,"React.cloneElement(...): Expected props argument to be a plain object. Properties defined in its prototype chain will be ignored."),void 0!==t.ref&&(u=t.ref,h=a.current),void 0!==t.key&&(l=""+t.key);var m;e.type&&e.type.defaultProps&&(m=e.type.defaultProps);for(i in t)t.hasOwnProperty(i)&&!c.hasOwnProperty(i)&&(void 0===t[i]&&void 0!==m?r[i]=m[i]:r[i]=t[i])}var v=arguments.length-2;if(1===v)r.children=n;else if(v>1){for(var g=Array(v),y=0;v>y;y++)g[y]=arguments[y+2];r.children=g}return d(e.type,l,u,p,f,h,r)},d.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===u},t.exports=d},{115:115,167:167,168:168,36:36}],62:[function(e,t,n){function i(){if(p.current){var e=p.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function r(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=o("uniqueKey",e,t);null!==n&&v(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s%s',n.parentOrOwner||"",n.childOwner||"",n.url||"")}}function o(e,t,n){var r=i();if(!r){var o="string"==typeof n?n:n.displayName||n.name;o&&(r=" Check the top-level render call using <"+o+">.")}var a=g[e]||(g[e]={});if(a[r])return null;a[r]=!0;var s={parentOrOwner:r,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return t&&t._owner&&t._owner!==p.current&&(s.childOwner=" It was passed a child from "+t._owner.getName()+"."),s}function a(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];u.isValidElement(i)&&r(i,t)}else if(u.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var o=h(e);if(o&&o!==e.entries)for(var a,s=o.call(e);!(a=s.next()).done;)u.isValidElement(a.value)&&r(a.value,t)}}function s(e,t,n,r){for(var o in t)if(t.hasOwnProperty(o)){var a;try{"function"!=typeof t[o]?m(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e||"React class",d[r],o):void 0,a=t[o](n,o,e,r)}catch(s){a=s}if(v(!a||a instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",e||"React class",d[r],o,typeof a),a instanceof Error&&!(a.message in y)){y[a.message]=!0;var l=i();v(!1,"Failed propType: %s%s",a.message,l)}}}function l(e){var t=e.type;if("function"==typeof t){var n=t.displayName||t.name;t.propTypes&&s(n,t.propTypes,e.props,c.prop),
"function"==typeof t.getDefaultProps&&v(t.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var u=e(61),c=e(83),d=e(82),p=e(36),f=e(115),h=e(126),m=e(157),v=e(167),g={},y={},b={createElement:function(e,t,n){var r="string"==typeof e||"function"==typeof e;v(r,"React.createElement: type should not be null, undefined, boolean, or number. It should be a string (for DOM elements) or a ReactClass (for composite components).%s",i());var o=u.createElement.apply(this,arguments);if(null==o)return o;if(r)for(var s=2;s<arguments.length;s++)a(arguments[s],e);return l(o),o},createFactory:function(e){var t=b.createElement.bind(null,e);return t.type=e,f&&Object.defineProperty(t,"type",{enumerable:!1,get:function(){return v(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},cloneElement:function(e,t,n){for(var i=u.cloneElement.apply(this,arguments),r=2;r<arguments.length;r++)a(arguments[r],i.type);return l(i),i}};t.exports=b},{115:115,126:126,157:157,167:167,36:36,61:61,82:82,83:83}],63:[function(e,t,n){var i,r={injectEmptyComponentFactory:function(e){i=e}},o={create:function(e){return i(e)}};o.injection=r,t.exports=o},{}],64:[function(e,t,n){function i(e,t,n,i){try{return t(n,i)}catch(o){return void(null===r&&(r=o))}}var r=null,o={invokeGuardedCallback:i,invokeGuardedCallbackWithCatch:i,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var a=document.createElement("react");o.invokeGuardedCallback=function(e,t,n,i){var r=t.bind(null,n,i),o="react-"+e;a.addEventListener(o,r,!1);var s=document.createEvent("Event");s.initEvent(o,!1,!1),a.dispatchEvent(s),a.removeEventListener(o,r,!1)}}t.exports=o},{}],65:[function(e,t,n){function i(e){r.enqueueEvents(e),r.processEventQueue(!1)}var r=e(17),o={handleTopLevel:function(e,t,n,o){var a=r.extractEvents(e,t,n,o);i(a)}};t.exports=o},{17:17}],66:[function(e,t,n){function i(e){for(;e._nativeParent;)e=e._nativeParent;var t=d.getNodeFromInstance(e),n=t.parentNode;return d.getClosestInstanceFromNode(n)}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){var t=f(e.nativeEvent),n=d.getClosestInstanceFromNode(t),r=n;do e.ancestors.push(r),r=r&&i(r);while(r);for(var o=0;o<e.ancestors.length;o++)n=e.ancestors[o],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,f(e.nativeEvent))}function a(e){var t=h(window);e(t)}var s=e(168),l=e(142),u=e(143),c=e(25),d=e(41),p=e(93),f=e(125),h=e(154);s(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(r,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var i=n;return i?l.listen(i,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var i=n;return i?l.capture(i,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=r.getPooled(e,t);try{p.batchedUpdates(o,n)}finally{r.release(n)}}}};t.exports=m},{125:125,142:142,143:143,154:154,168:168,25:25,41:41,93:93}],67:[function(e,t,n){var i={logTopLevelRenders:!1};t.exports=i},{}],68:[function(e,t,n){var i=e(10),r=e(17),o=e(19),a=e(33),s=e(30),l=e(63),u=e(27),c=e(77),d=e(93),p={Component:a.injection,Class:s.injection,DOMProperty:i.injection,EmptyComponent:l.injection,EventPluginHub:r.injection,EventPluginUtils:o.injection,EventEmitter:u.injection,NativeComponent:c.injection,Updates:d.injection};t.exports=p},{10:10,17:17,19:19,27:27,30:30,33:33,63:63,77:77,93:93}],69:[function(e,t,n){function i(e){return o(document.documentElement,e)}var r=e(52),o=e(146),a=e(151),s=e(152),l={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,r=e.selectionRange;t!==n&&i(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,r),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if(void 0===i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",i-n),o.select()}else r.setOffsets(e,t)}};t.exports=l},{146:146,151:151,152:152,52:52}],70:[function(e,t,n){var i={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=i},{}],71:[function(e,t,n){var i=e(58);t.exports={debugTool:i}},{58:58}],72:[function(e,t,n){var i=e(167),r=!1,o=function(){i(!r,"setState(...): Cannot call setState() inside getChildContext()")},a={onBeginProcessingChildContext:function(){r=!0},onEndProcessingChildContext:function(){r=!1},onSetState:function(){o()}};t.exports=a},{167:167}],73:[function(e,t,n){var i=e(114),r=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=i(e);return o.test(e)?e:e.replace(r," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var r=i(e);return r===n}};t.exports=a},{114:114}],74:[function(e,t,n){function i(e,t){for(var n=Math.min(e.length,t.length),i=0;n>i;i++)if(e.charAt(i)!==t.charAt(i))return i;return e.length===t.length?-1:n}function r(e){return e?e.nodeType===j?e.documentElement:e.firstChild:null}function o(e){return e.getAttribute&&e.getAttribute(A)||""}function a(e,t,n,i,r){var o;if(_.logTopLevelRenders){var a=e._currentElement.props,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(o)}var l=E.mountComponent(e,n,null,g(e,t),r);o&&console.timeEnd(o),e._renderedComponent._topLevelWrapper=e,U._mountImageIntoNode(l,t,e,i,n)}function s(e,t,n,i){var r=T.ReactReconcileTransaction.getPooled(!n&&y.useCreateElement);r.perform(a,null,e,t,r,n,i),T.ReactReconcileTransaction.release(r)}function l(e,t,n){for(E.unmountComponent(e,n),t.nodeType===j&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=r(e);if(t){var n=v.getInstanceFromNode(t);return!(!n||!n._nativeParent)}}function c(e){var t=r(e),n=t&&v.getInstanceFromNode(t);return n&&!n._nativeParent?n:null}function d(e){var t=c(e);return t?t._nativeContainerInfo._topLevelWrapper:null}var p=e(8),f=e(10),h=e(27),m=e(36),v=e(41),g=e(42),y=e(46),b=e(61),_=e(67),w=e(71),C=e(73),E=e(86),x=e(92),T=e(93),k=e(150),P=e(131),S=e(157),O=e(137),I=e(139),N=e(167),A=f.ID_ATTRIBUTE_NAME,M=f.ROOT_ATTRIBUTE_NAME,D=1,j=9,L=11,R={},B=1,F=function(){this.rootID=B++};F.prototype.isReactComponent={},F.displayName="TopLevelWrapper",F.prototype.render=function(){return this.props};var U={TopLevelWrapper:F,_instancesByReactRootID:R,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,i){return U.scrollMonitor(n,function(){x.enqueueElementInternal(e,t),i&&x.enqueueCallbackInternal(e,i)}),e},_renderNewRootComponent:function(e,t,n,i){w.debugTool.onBeginFlush(),N(null==m.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",m.current&&m.current.getName()||"ReactCompositeComponent"),!t||t.nodeType!==D&&t.nodeType!==j&&t.nodeType!==L?S(!1,"_registerComponent(...): Target container is not a DOM element."):void 0,h.ensureScrollValueMonitoring();var r=P(e);r._debugID=0,T.batchedUpdates(s,r,t,n,i);var o=r._instance.rootID;return R[o]=r,w.debugTool.onMountRootComponent(r._renderedComponent._debugID),w.debugTool.onEndFlush(),r},renderSubtreeIntoContainer:function(e,t,n,i){return null==e||null==e._reactInternalInstance?S(!1,"parentComponent must be a valid React Component"):void 0,U._renderSubtreeIntoContainer(e,t,n,i)},_renderSubtreeIntoContainer:function(e,t,n,i){x.validateCallback(i,"ReactDOM.render"),b.isValidElement(t)?void 0:S(!1,"ReactDOM.render(): Invalid component element.%s","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":""),N(!n||!n.tagName||"BODY"!==n.tagName.toUpperCase(),"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.");var a=b(F,null,null,null,null,null,t),s=d(n);if(s){var l=s._currentElement,c=l.props;if(I(c,t)){var p=s._renderedComponent.getPublicInstance(),f=i&&function(){i.call(p)};return U._updateRootComponent(s,a,n,f),p}U.unmountComponentAtNode(n)}var h=r(n),m=h&&!!o(h),v=u(n);if(N(!v,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),!m||h.nextSibling)for(var g=h;g;){if(o(g)){N(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.");break}g=g.nextSibling}var y=m&&!s&&!v,_=U._renderNewRootComponent(a,n,y,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):k)._renderedComponent.getPublicInstance();return i&&i.call(_),_},render:function(e,t,n){return U._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){N(null==m.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",m.current&&m.current.getName()||"ReactCompositeComponent"),!e||e.nodeType!==D&&e.nodeType!==j&&e.nodeType!==L?S(!1,"unmountComponentAtNode(...): Target container is not a DOM element."):void 0;var t=d(e);if(!t){var n=u(e),i=1===e.nodeType&&e.hasAttribute(M);return N(!n,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",i?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1}return delete R[t._instance.rootID],T.batchedUpdates(l,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,o,a){if(!t||t.nodeType!==D&&t.nodeType!==j&&t.nodeType!==L?S(!1,"mountComponentIntoNode(...): Target container is not valid."):void 0,o){var s=r(t);if(C.canReuseMarkup(e,s))return void v.precacheNode(n,s);var l=s.getAttribute(C.CHECKSUM_ATTR_NAME);s.removeAttribute(C.CHECKSUM_ATTR_NAME);var u=s.outerHTML;s.setAttribute(C.CHECKSUM_ATTR_NAME,l);var c,d=e;t.nodeType===D?(c=document.createElement("div"),c.innerHTML=e,d=c.innerHTML):(c=document.createElement("iframe"),document.body.appendChild(c),c.contentDocument.write(e),d=c.contentDocument.documentElement.outerHTML,document.body.removeChild(c));var f=i(d,u),h=" (client) "+d.substring(f-20,f+20)+"\n (server) "+u.substring(f-20,f+20);t.nodeType===j?S(!1,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",h):void 0,N(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",h)}if(t.nodeType===j?S(!1,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):void 0,a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);p.insertTreeBefore(t,e,null)}else O(t,e),v.precacheNode(n,t.firstChild);var m=v.getInstanceFromNode(t.firstChild);0!==m._debugID&&w.debugTool.onNativeOperation(m._debugID,"mount",e.toString())}};t.exports=U},{10:10,131:131,137:137,139:139,150:150,157:157,167:167,27:27,36:36,41:41,42:42,46:46,61:61,67:67,71:71,73:73,8:8,86:86,92:92,93:93}],75:[function(e,t,n){function i(e,t,n){return{type:p.INSERT_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function r(e,t,n){return{type:p.MOVE_EXISTING,content:null,fromIndex:e._mountIndex,fromNode:h.getNativeNode(e),toIndex:n,afterNode:t}}function o(e,t){return{type:p.REMOVE_NODE,content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:p.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:p.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(e,t){return t&&(e=e||[],e.push(t)),e}function u(e,t){c.processChildrenUpdates(e,t)}var c=e(33),d=e(71),p=e(76),f=e(36),h=e(86),m=e(28),v=e(149),g=e(120),y=e(157),b=v;b=function(e){d.debugTool.onSetChildren(this._debugID,e?Object.keys(e).map(function(t){return e[t]._debugID}):[])};var _={Mixin:{_reconcilerInstantiateChildren:function(e,t,n){if(this._currentElement)try{return f.current=this._currentElement._owner,m.instantiateChildren(e,t,n)}finally{f.current=null}return m.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,i,r){var o;if(this._currentElement){try{f.current=this._currentElement._owner,o=g(t)}finally{f.current=null}return m.updateChildren(e,o,n,i,r),o}return o=g(t),m.updateChildren(e,o,n,i,r),o},mountChildren:function(e,t,n){var i=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=i;var r=[],o=0;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a],l=h.mountComponent(s,t,this,this._nativeContainerInfo,n);s._mountIndex=o++,r.push(l)}return b.call(this,i),r},updateTextContent:function(e){var t=this._renderedChildren;m.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&y(!1,"updateTextContent called on non-empty component.");var i=[s(e)];u(this,i)},updateMarkup:function(e){var t=this._renderedChildren;m.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&y(!1,"updateTextContent called on non-empty component.");var i=[a(e)];u(this,i)},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var i=this._renderedChildren,r={},o=this._reconcilerUpdateChildren(i,e,r,t,n);if(o||i){var a,s=null,c=0,d=0,p=null;for(a in o)if(o.hasOwnProperty(a)){var f=i&&i[a],m=o[a];f===m?(s=l(s,this.moveChild(f,p,d,c)),c=Math.max(f._mountIndex,c),f._mountIndex=d):(f&&(c=Math.max(f._mountIndex,c)),s=l(s,this._mountChildAtIndex(m,p,d,t,n))),d++,p=h.getNativeNode(m)}for(a in r)r.hasOwnProperty(a)&&(s=l(s,this._unmountChild(i[a],r[a])));s&&u(this,s),this._renderedChildren=o,b.call(this,o)}},unmountChildren:function(e){var t=this._renderedChildren;m.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,i){return e._mountIndex<i?r(e,t,n):void 0},createChild:function(e,t,n){return i(n,t,e._mountIndex)},removeChild:function(e,t){return o(e,t)},_mountChildAtIndex:function(e,t,n,i,r){var o=h.mountComponent(e,i,this,this._nativeContainerInfo,r);return e._mountIndex=n,this.createChild(e,t,o)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}};t.exports=_},{120:120,149:149,157:157,28:28,33:33,36:36,71:71,76:76,86:86}],76:[function(e,t,n){var i=e(160),r=i({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=r},{160:160}],77:[function(e,t,n){function i(e){if("function"==typeof e.type)return e.type;var t=e.type,n=d[t];return null==n&&(d[t]=n=u(t)),n}function r(e){return c?void 0:l(!1,"There is no registered component for the tag %s",e.type),new c(e)}function o(e){return new p(e)}function a(e){return e instanceof p}var s=e(168),l=e(157),u=null,c=null,d={},p=null,f={injectGenericComponentClass:function(e){c=e},injectTextComponentClass:function(e){p=e},injectComponentClasses:function(e){s(d,e)}},h={getComponentClassForElement:i,createInternalComponent:r,createInstanceForText:o,isTextComponent:a,injection:f};t.exports=h},{157:157,168:168}],78:[function(e,t,n){var i=[],r={onNativeOperation:function(e,t,n){i.push({instanceID:e,type:t,payload:n})},clearHistory:function(){r._preventClearing||(i=[])},getHistory:function(){return i}};t.exports=r},{}],79:[function(e,t,n){var i=e(61),r=e(157),o={NATIVE:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||e===!1?o.EMPTY:i.isValidElement(e)?"function"==typeof e.type?o.COMPOSITE:o.NATIVE:void r(!1,"Unexpected node: %s",e)}};t.exports=o},{157:157,61:61}],80:[function(e,t,n){function i(e,t){r(!1,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",t,t,e.constructor&&e.constructor.displayName||"")}var r=e(167),o={isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){i(e,"forceUpdate")},enqueueReplaceState:function(e,t){i(e,"replaceState")},enqueueSetState:function(e,t){i(e,"setState")}};t.exports=o},{167:167}],81:[function(e,t,n){var i=e(157),r={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r.isValidOwner(n)?void 0:i(!1,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r.isValidOwner(n)?void 0:i(!1,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner).");var o=n.getPublicInstance();o&&o.refs[t]===e.getPublicInstance()&&n.detachRef(t)}};t.exports=r},{157:157}],82:[function(e,t,n){var i={};i={prop:"prop",context:"context",childContext:"child context"},t.exports=i},{}],83:[function(e,t,n){var i=e(160),r=i({prop:null,context:null,childContext:null});t.exports=r},{160:160}],84:[function(e,t,n){function i(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function r(e){function t(t,n,i,r,o,a){if(r=r||E,a=a||i,null==n[i]){var s=_[o];return t?new Error("Required "+s+" `"+a+"` was not specified in "+("`"+r+"`.")):null}return e(n,i,r,o,a)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function o(e){function t(t,n,i,r,o){var a=t[n],s=v(a);if(s!==e){var l=_[r],u=g(a);return new Error("Invalid "+l+" `"+o+"` of type "+("`"+u+"` supplied to `"+i+"`, expected ")+("`"+e+"`."))}return null}return r(t)}function a(){return r(w.thatReturns(null))}function s(e){function t(t,n,i,r,o){if("function"!=typeof e)return new Error("Property `"+o+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a)){var s=_[r],l=v(a);return new Error("Invalid "+s+" `"+o+"` of type "+("`"+l+"` supplied to `"+i+"`, expected an array."))}for(var u=0;u<a.length;u++){var c=e(a,u,i,r,o+"["+u+"]");if(c instanceof Error)return c}return null}return r(t)}function l(){function e(e,t,n,i,r){if(!b.isValidElement(e[t])){var o=_[i];return new Error("Invalid "+o+" `"+r+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return r(e)}function u(e){function t(t,n,i,r,o){if(!(t[n]instanceof e)){var a=_[r],s=e.name||E,l=y(t[n]);return new Error("Invalid "+a+" `"+o+"` of type "+("`"+l+"` supplied to `"+i+"`, expected ")+("instance of `"+s+"`."))}return null}return r(t)}function c(e){function t(t,n,r,o,a){for(var s=t[n],l=0;l<e.length;l++)if(i(s,e[l]))return null;var u=_[o],c=JSON.stringify(e);return new Error("Invalid "+u+" `"+a+"` of value `"+s+"` "+("supplied to `"+r+"`, expected one of "+c+"."))}return r(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function d(e){function t(t,n,i,r,o){if("function"!=typeof e)return new Error("Property `"+o+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var a=t[n],s=v(a);if("object"!==s){var l=_[r];return new Error("Invalid "+l+" `"+o+"` of type "+("`"+s+"` supplied to `"+i+"`, expected an object."))}for(var u in a)if(a.hasOwnProperty(u)){var c=e(a,u,i,r,o+"."+u);if(c instanceof Error)return c}return null}return r(t)}function p(e){function t(t,n,i,r,o){for(var a=0;a<e.length;a++){var s=e[a];if(null==s(t,n,i,r,o))return null}var l=_[r];return new Error("Invalid "+l+" `"+o+"` supplied to "+("`"+i+"`."))}return r(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function f(){function e(e,t,n,i,r){if(!m(e[t])){var o=_[i];return new Error("Invalid "+o+" `"+r+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function h(e){function t(t,n,i,r,o){var a=t[n],s=v(a);if("object"!==s){var l=_[r];return new Error("Invalid "+l+" `"+o+"` of type `"+s+"` "+("supplied to `"+i+"`, expected `object`."))}for(var u in e){var c=e[u];if(c){var d=c(a,u,i,r,o+"."+u);if(d)return d}}return null}return r(t)}function m(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(m);if(null===e||b.isValidElement(e))return!0;var t=C(e);if(!t)return!1;var n,i=t.call(e);if(t!==e.entries){for(;!(n=i.next()).done;)if(!m(n.value))return!1}else for(;!(n=i.next()).done;){var r=n.value;if(r&&!m(r[1]))return!1}return!0;default:return!1}}function v(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function g(e){var t=v(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){return e.constructor&&e.constructor.name?e.constructor.name:E}var b=e(61),_=e(82),w=e(149),C=e(126),E="<<anonymous>>",x={array:o("array"),bool:o("boolean"),func:o("function"),number:o("number"),object:o("object"),string:o("string"),any:a(),arrayOf:s,element:l(),instanceOf:u,node:f(),objectOf:d,oneOf:c,oneOfType:p,shape:h};t.exports=x},{126:126,149:149,61:61,82:82}],85:[function(e,t,n){function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=e}var r=e(168),o=e(5),a=e(25),s=e(27),l=e(69),u=e(111),c={initialize:l.getSelectionInformation,close:l.restoreSelection},d={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[c,d,p],h={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};r(i.prototype,u.Mixin,h),a.addPoolingTo(i),t.exports=i},{111:111,168:168,25:25,27:27,5:5,69:69}],86:[function(e,t,n){function i(){r.attachRefs(this,this._currentElement)}var r=e(87),o=e(71),a=e(157),s={mountComponent:function(e,t,n,r,a){0!==e._debugID&&o.debugTool.onBeginReconcilerTimer(e._debugID,"mountComponent");var s=e.mountComponent(t,n,r,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(i,e),0!==e._debugID&&(o.debugTool.onEndReconcilerTimer(e._debugID,"mountComponent"),o.debugTool.onMountComponent(e._debugID)),s},getNativeNode:function(e){return e.getNativeNode()},unmountComponent:function(e,t){0!==e._debugID&&o.debugTool.onBeginReconcilerTimer(e._debugID,"unmountComponent"),r.detachRefs(e,e._currentElement),e.unmountComponent(t),0!==e._debugID&&(o.debugTool.onEndReconcilerTimer(e._debugID,"unmountComponent"),o.debugTool.onUnmountComponent(e._debugID))},receiveComponent:function(e,t,n,a){var s=e._currentElement;if(t!==s||a!==e._context){0!==e._debugID&&o.debugTool.onBeginReconcilerTimer(e._debugID,"receiveComponent");var l=r.shouldUpdateRefs(s,t);l&&r.detachRefs(e,s),e.receiveComponent(t,n,a),l&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(i,e),0!==e._debugID&&(o.debugTool.onEndReconcilerTimer(e._debugID,"receiveComponent"),o.debugTool.onUpdateComponent(e._debugID))}},performUpdateIfNecessary:function(e,t,n){return e._updateBatchNumber!==n?void(null!=e._updateBatchNumber&&e._updateBatchNumber!==n+1?a(!1,"performUpdateIfNecessary: Unexpected batch number (current %s, pending %s)",n,e._updateBatchNumber):void 0):(0!==e._debugID&&o.debugTool.onBeginReconcilerTimer(e._debugID,"performUpdateIfNecessary"),e.performUpdateIfNecessary(t),void(0!==e._debugID&&(o.debugTool.onEndReconcilerTimer(e._debugID,"performUpdateIfNecessary"),o.debugTool.onUpdateComponent(e._debugID))))}};t.exports=s},{157:157,71:71,87:87}],87:[function(e,t,n){function i(e,t,n){"function"==typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function r(e,t,n){"function"==typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=e(81),a={};a.attachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&i(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null===e||e===!1,i=null===t||t===!1;return n||i||t._owner!==e._owner||t.ref!==e.ref},a.detachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&r(n,e,t._owner)}},t.exports=a},{81:81}],88:[function(e,t,n){var i={isBatchingUpdates:!1,batchedUpdates:function(e){}};t.exports=i},{}],89:[function(e,t,n){function i(e,t){var n;try{return h.injection.injectBatchingStrategy(p),n=f.getPooled(t),n.perform(function(){u.debugTool.onBeginFlush();var i=v(e),r=d.mountComponent(i,n,null,a(),m);return u.debugTool.onUnmountComponent(i._debugID),u.debugTool.onEndFlush(),t||(r=c.addChecksumToMarkup(r)),r},null)}finally{f.release(n),h.injection.injectBatchingStrategy(s)}}function r(e){return l.isValidElement(e)?void 0:g(!1,"renderToString(): You must pass a valid ReactElement."),i(e,!1)}function o(e){return l.isValidElement(e)?void 0:g(!1,"renderToStaticMarkup(): You must pass a valid ReactElement."),i(e,!0)}var a=e(42),s=e(59),l=e(61),u=e(71),c=e(73),d=e(86),p=e(88),f=e(90),h=e(93),m=e(150),v=e(131),g=e(157);t.exports={renderToString:r,renderToStaticMarkup:o}},{131:131,150:150,157:157,42:42,59:59,61:61,71:71,73:73,86:86,88:88,90:90,93:93}],90:[function(e,t,n){function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1}var r=e(168),o=e(25),a=e(111),s=[],l={enqueue:function(){}},u={getTransactionWrappers:function(){return s},getReactMountReady:function(){return l},destructor:function(){},checkpoint:function(){},rollback:function(){}};r(i.prototype,a.Mixin,u),o.addPoolingTo(i),t.exports=i},{111:111,168:168,25:25}],91:[function(e,t,n){var i=e(168),r=e(37),o=e(53),a=e(26),s=i({__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:r,__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:o},a);t.exports=s},{168:168,26:26,37:37,53:53}],92:[function(e,t,n){function i(e){l.enqueueUpdate(e)}function r(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,i=Object.keys(e);return i.length>0&&i.length<20?n+" (keys: "+i.join(", ")+")":n}function o(e,t){var n=s.get(e);return n?(c(null==a.current,"%s(...): Cannot update during an existing state transition (such as within `render` or another component's constructor). Render methods should be a pure function of props and state; constructor side-effects are an anti-pattern, but can be moved to `componentWillMount`.",t),n):(c(!t,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",t,t,e.constructor.displayName),null)}var a=e(36),s=e(70),l=e(93),u=e(157),c=e(167),d={isMounted:function(e){var t=a.current;null!==t&&(c(t._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"),t._warnedAboutRefsInRender=!0);var n=s.get(e);return n?!!n._renderedComponent:!1},enqueueCallback:function(e,t,n){d.validateCallback(t,n);var r=o(e);return r?(r._pendingCallbacks?r._pendingCallbacks.push(t):r._pendingCallbacks=[t],void i(r)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],i(e)},enqueueForceUpdate:function(e){var t=o(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,i(t))},enqueueReplaceState:function(e,t){var n=o(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,i(n))},enqueueSetState:function(e,t){var n=o(e,"setState");if(n){var r=n._pendingStateQueue||(n._pendingStateQueue=[]);r.push(t),i(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,i(e)},validateCallback:function(e,t){e&&"function"!=typeof e?u(!1,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,r(e)):void 0}};t.exports=d},{157:157,167:167,36:36,70:70,93:93}],93:[function(e,t,n){function i(){S.ReactReconcileTransaction&&C?void 0:g(!1,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=d.getPooled(),this.reconcileTransaction=S.ReactReconcileTransaction.getPooled(!0)}function o(e,t,n,r,o,a){i(),C.batchedUpdates(e,t,n,r,o,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==y.length?g(!1,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,y.length):void 0,y.sort(a),b++;for(var n=0;t>n;n++){var i=y[n],r=i._pendingCallbacks;
i._pendingCallbacks=null;var o;if(f.logTopLevelRenders){var s=i;i._currentElement.props===i._renderedComponent._currentElement&&(s=i._renderedComponent),o="React update: "+s.getName(),console.time(o)}if(m.performUpdateIfNecessary(i,e.reconcileTransaction,b),o&&console.timeEnd(o),r)for(var l=0;l<r.length;l++)e.callbackQueue.enqueue(r[l],i.getPublicInstance())}}function l(e){return i(),C.isBatchingUpdates?(y.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=b+1))):void C.batchedUpdates(l,e)}function u(e,t){C.isBatchingUpdates?void 0:g(!1,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),_.enqueue(e,t),w=!0}var c=e(168),d=e(5),p=e(25),f=e(67),h=e(71),m=e(86),v=e(111),g=e(157),y=[],b=0,_=d.getPooled(),w=!1,C=null,E={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),k()):y.length=0}},x={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},T=[E,x];c(r.prototype,v.Mixin,{getTransactionWrappers:function(){return T},destructor:function(){this.dirtyComponentsLength=null,d.release(this.callbackQueue),this.callbackQueue=null,S.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return v.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),p.addPoolingTo(r);var k=function(){for(h.debugTool.onBeginFlush();y.length||w;){if(y.length){var e=r.getPooled();e.perform(s,null,e),r.release(e)}if(w){w=!1;var t=_;_=d.getPooled(),t.notifyAll(),d.release(t)}}h.debugTool.onEndFlush()},P={injectReconcileTransaction:function(e){e?void 0:g(!1,"ReactUpdates: must provide a reconcile transaction class"),S.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:g(!1,"ReactUpdates: must provide a batching strategy"),"function"!=typeof e.batchedUpdates?g(!1,"ReactUpdates: must provide a batchedUpdates() function"):void 0,"boolean"!=typeof e.isBatchingUpdates?g(!1,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):void 0,C=e}},S={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:l,flushBatchedUpdates:k,injection:P,asap:u};t.exports=S},{111:111,157:157,168:168,25:25,5:5,67:67,71:71,86:86}],94:[function(e,t,n){t.exports="15.1.0"},{}],95:[function(e,t,n){var i={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},o={Properties:{},DOMAttributeNamespaces:{xlinkActuate:i.xlink,xlinkArcrole:i.xlink,xlinkHref:i.xlink,xlinkRole:i.xlink,xlinkShow:i.xlink,xlinkTitle:i.xlink,xlinkType:i.xlink,xmlBase:i.xml,xmlLang:i.xml,xmlSpace:i.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(e){o.Properties[e]=0,r[e]&&(o.DOMAttributeNames[e]=r[e])}),t.exports=o},{}],96:[function(e,t,n){function i(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e,t){if(w||null==y||y!==d())return null;var n=i(y);if(!_||!h(_,n)){_=n;var r=c.getPooled(g.select,b,e,t);return r.type="select",r.target=y,a.accumulateTwoPhaseDispatches(r),r}return null}var o=e(16),a=e(20),s=e(143),l=e(41),u=e(69),c=e(102),d=e(152),p=e(133),f=e(161),h=e(166),m=o.topLevelTypes,v=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,g={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},y=null,b=null,_=null,w=!1,C=!1,E=f({onSelect:null}),x={eventTypes:g,extractEvents:function(e,t,n,i){if(!C)return null;var o=t?l.getNodeFromInstance(t):window;switch(e){case m.topFocus:(p(o)||"true"===o.contentEditable)&&(y=o,b=t,_=null);break;case m.topBlur:y=null,b=null,_=null;break;case m.topMouseDown:w=!0;break;case m.topContextMenu:case m.topMouseUp:return w=!1,r(n,i);case m.topSelectionChange:if(v)break;case m.topKeyDown:case m.topKeyUp:return r(n,i)}return null},didPutListener:function(e,t,n){t===E&&(C=!0)}};t.exports=x},{102:102,133:133,143:143,152:152,16:16,161:161,166:166,20:20,41:41,69:69}],97:[function(e,t,n){var i=e(16),r=e(142),o=e(20),a=e(41),s=e(98),l=e(99),u=e(102),c=e(103),d=e(105),p=e(106),f=e(101),h=e(107),m=e(108),v=e(109),g=e(110),y=e(149),b=e(122),_=e(157),w=e(161),C=i.topLevelTypes,E={abort:{phasedRegistrationNames:{bubbled:w({onAbort:!0}),captured:w({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:w({onAnimationEnd:!0}),captured:w({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:w({onAnimationIteration:!0}),captured:w({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:w({onAnimationStart:!0}),captured:w({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:w({onBlur:!0}),captured:w({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:w({onCanPlay:!0}),captured:w({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:w({onCanPlayThrough:!0}),captured:w({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:w({onClick:!0}),captured:w({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:w({onContextMenu:!0}),captured:w({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:w({onCopy:!0}),captured:w({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:w({onCut:!0}),captured:w({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:w({onDoubleClick:!0}),captured:w({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:w({onDrag:!0}),captured:w({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:w({onDragEnd:!0}),captured:w({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:w({onDragEnter:!0}),captured:w({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:w({onDragExit:!0}),captured:w({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:w({onDragLeave:!0}),captured:w({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:w({onDragOver:!0}),captured:w({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:w({onDragStart:!0}),captured:w({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:w({onDrop:!0}),captured:w({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:w({onDurationChange:!0}),captured:w({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:w({onEmptied:!0}),captured:w({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:w({onEncrypted:!0}),captured:w({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:w({onEnded:!0}),captured:w({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:w({onError:!0}),captured:w({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:w({onFocus:!0}),captured:w({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:w({onInput:!0}),captured:w({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:w({onInvalid:!0}),captured:w({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:w({onKeyDown:!0}),captured:w({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:w({onKeyPress:!0}),captured:w({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:w({onKeyUp:!0}),captured:w({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:w({onLoad:!0}),captured:w({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:w({onLoadedData:!0}),captured:w({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:w({onLoadedMetadata:!0}),captured:w({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:w({onLoadStart:!0}),captured:w({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:w({onMouseDown:!0}),captured:w({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:w({onMouseMove:!0}),captured:w({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:w({onMouseOut:!0}),captured:w({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:w({onMouseOver:!0}),captured:w({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:w({onMouseUp:!0}),captured:w({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:w({onPaste:!0}),captured:w({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:w({onPause:!0}),captured:w({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:w({onPlay:!0}),captured:w({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:w({onPlaying:!0}),captured:w({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:w({onProgress:!0}),captured:w({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:w({onRateChange:!0}),captured:w({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:w({onReset:!0}),captured:w({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:w({onScroll:!0}),captured:w({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:w({onSeeked:!0}),captured:w({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:w({onSeeking:!0}),captured:w({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:w({onStalled:!0}),captured:w({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:w({onSubmit:!0}),captured:w({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:w({onSuspend:!0}),captured:w({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:w({onTimeUpdate:!0}),captured:w({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:w({onTouchCancel:!0}),captured:w({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:w({onTouchEnd:!0}),captured:w({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:w({onTouchMove:!0}),captured:w({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:w({onTouchStart:!0}),captured:w({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:w({onTransitionEnd:!0}),captured:w({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:w({onVolumeChange:!0}),captured:w({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:w({onWaiting:!0}),captured:w({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:w({onWheel:!0}),captured:w({onWheelCapture:!0})}}},x={topAbort:E.abort,topAnimationEnd:E.animationEnd,topAnimationIteration:E.animationIteration,topAnimationStart:E.animationStart,topBlur:E.blur,topCanPlay:E.canPlay,topCanPlayThrough:E.canPlayThrough,topClick:E.click,topContextMenu:E.contextMenu,topCopy:E.copy,topCut:E.cut,topDoubleClick:E.doubleClick,topDrag:E.drag,topDragEnd:E.dragEnd,topDragEnter:E.dragEnter,topDragExit:E.dragExit,topDragLeave:E.dragLeave,topDragOver:E.dragOver,topDragStart:E.dragStart,topDrop:E.drop,topDurationChange:E.durationChange,topEmptied:E.emptied,topEncrypted:E.encrypted,topEnded:E.ended,topError:E.error,topFocus:E.focus,topInput:E.input,topInvalid:E.invalid,topKeyDown:E.keyDown,topKeyPress:E.keyPress,topKeyUp:E.keyUp,topLoad:E.load,topLoadedData:E.loadedData,topLoadedMetadata:E.loadedMetadata,topLoadStart:E.loadStart,topMouseDown:E.mouseDown,topMouseMove:E.mouseMove,topMouseOut:E.mouseOut,topMouseOver:E.mouseOver,topMouseUp:E.mouseUp,topPaste:E.paste,topPause:E.pause,topPlay:E.play,topPlaying:E.playing,topProgress:E.progress,topRateChange:E.rateChange,topReset:E.reset,topScroll:E.scroll,topSeeked:E.seeked,topSeeking:E.seeking,topStalled:E.stalled,topSubmit:E.submit,topSuspend:E.suspend,topTimeUpdate:E.timeUpdate,topTouchCancel:E.touchCancel,topTouchEnd:E.touchEnd,topTouchMove:E.touchMove,topTouchStart:E.touchStart,topTransitionEnd:E.transitionEnd,topVolumeChange:E.volumeChange,topWaiting:E.waiting,topWheel:E.wheel};for(var T in x)x[T].dependencies=[T];var k=w({onClick:null}),P={},S={eventTypes:E,extractEvents:function(e,t,n,i){var r=x[e];if(!r)return null;var a;switch(e){case C.topAbort:case C.topCanPlay:case C.topCanPlayThrough:case C.topDurationChange:case C.topEmptied:case C.topEncrypted:case C.topEnded:case C.topError:case C.topInput:case C.topInvalid:case C.topLoad:case C.topLoadedData:case C.topLoadedMetadata:case C.topLoadStart:case C.topPause:case C.topPlay:case C.topPlaying:case C.topProgress:case C.topRateChange:case C.topReset:case C.topSeeked:case C.topSeeking:case C.topStalled:case C.topSubmit:case C.topSuspend:case C.topTimeUpdate:case C.topVolumeChange:case C.topWaiting:a=u;break;case C.topKeyPress:if(0===b(n))return null;case C.topKeyDown:case C.topKeyUp:a=d;break;case C.topBlur:case C.topFocus:a=c;break;case C.topClick:if(2===n.button)return null;case C.topContextMenu:case C.topDoubleClick:case C.topMouseDown:case C.topMouseMove:case C.topMouseOut:case C.topMouseOver:case C.topMouseUp:a=p;break;case C.topDrag:case C.topDragEnd:case C.topDragEnter:case C.topDragExit:case C.topDragLeave:case C.topDragOver:case C.topDragStart:case C.topDrop:a=f;break;case C.topTouchCancel:case C.topTouchEnd:case C.topTouchMove:case C.topTouchStart:a=h;break;case C.topAnimationEnd:case C.topAnimationIteration:case C.topAnimationStart:a=s;break;case C.topTransitionEnd:a=m;break;case C.topScroll:a=v;break;case C.topWheel:a=g;break;case C.topCopy:case C.topCut:case C.topPaste:a=l}a?void 0:_(!1,"SimpleEventPlugin: Unhandled event type, `%s`.",e);var y=a.getPooled(r,t,n,i);return o.accumulateTwoPhaseDispatches(y),y},didPutListener:function(e,t,n){if(t===k){var i=e._rootNodeID,o=a.getNodeFromInstance(e);P[i]||(P[i]=r.listen(o,"click",y))}},willDeleteListener:function(e,t){if(t===k){var n=e._rootNodeID;P[n].remove(),delete P[n]}}};t.exports=S},{101:101,102:102,103:103,105:105,106:106,107:107,108:108,109:109,110:110,122:122,142:142,149:149,157:157,16:16,161:161,20:20,41:41,98:98,99:99}],98:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(102),o={animationName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(i,o),t.exports=i},{102:102}],99:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(102),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(i,o),t.exports=i},{102:102}],100:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(102),o={data:null};r.augmentClass(i,o),t.exports=i},{102:102}],101:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(106),o={dataTransfer:null};r.augmentClass(i,o),t.exports=i},{106:106}],102:[function(e,t,n){function i(e,t,n,i){delete this.nativeEvent,delete this.preventDefault,delete this.stopPropagation,this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var o in r)if(r.hasOwnProperty(o)){delete this[o];var a=r[o];a?this[o]=a(n):"target"===o?this.target=i:this[o]=n[o]}var l=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return l?this.isDefaultPrevented=s.thatReturnsTrue:this.isDefaultPrevented=s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}function r(e,t){function n(e){var t=o?"setting the method":"setting the property";return r(t,"This is effectively a no-op"),e}function i(){var e=o?"accessing the method":"accessing the property",n=o?"This is a no-op function":"This is set to null";return r(e,n),t}function r(t,n){var i=!1;l(i,"This synthetic event is reused for performance reasons. If you're seeing this, you're %s `%s` on a released/nullified synthetic event. %s. If you must keep the original synthetic event around, use event.persist(). See https://fb.me/react-event-pooling for more information.",t,e,n)}var o="function"==typeof t;return{configurable:!0,set:n,get:i}}var o=e(168),a=e(25),s=e(149),l=e(167),u=!1,c="function"==typeof Proxy,d=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"],p={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var n in t)Object.defineProperty(this,n,r(n,t[n]));for(var i=0;i<d.length;i++)this[d[i]]=null;var o=e(149);Object.defineProperty(this,"nativeEvent",r("nativeEvent",null)),Object.defineProperty(this,"preventDefault",r("preventDefault",o)),Object.defineProperty(this,"stopPropagation",r("stopPropagation",o))}}),i.Interface=p,c&&(i=new Proxy(i,{construct:function(e,t){return this.apply(e,Object.create(e.prototype),t)},apply:function(e,t,n){return new Proxy(e.apply(t,n),{set:function(e,t,n){return"isPersistent"===t||e.constructor.Interface.hasOwnProperty(t)||-1!==d.indexOf(t)||(l(u||e.isPersistent(),"This synthetic event is reused for performance reasons. If you're seeing this, you're adding a new property in the synthetic event object. The property is never released. See https://fb.me/react-event-pooling for more information."),u=!0),e[t]=n,!0}})}})),i.augmentClass=function(e,t){var n=this,i=function(){};i.prototype=n.prototype;var r=new i;o(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,a.addPoolingTo(e,a.fourArgumentPooler)},a.addPoolingTo(i,a.fourArgumentPooler),t.exports=i},{149:149,167:167,168:168,25:25}],103:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(109),o={relatedTarget:null};r.augmentClass(i,o),t.exports=i},{109:109}],104:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(102),o={data:null};r.augmentClass(i,o),t.exports=i},{102:102}],105:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(109),o=e(122),a=e(123),s=e(124),l={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(i,l),t.exports=i},{109:109,122:122,123:123,124:124}],106:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(109),o=e(112),a=e(124),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};r.augmentClass(i,s),t.exports=i},{109:109,112:112,124:124}],107:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(109),o=e(124),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};r.augmentClass(i,a),t.exports=i},{109:109,124:124}],108:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(102),o={propertyName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(i,o),t.exports=i},{102:102}],109:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(102),o=e(125),a={view:function(e){if(e.view)return e.view;var t=o(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(i,a),t.exports=i},{102:102,125:125}],110:[function(e,t,n){function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(106),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(i,o),t.exports=i},{106:106}],111:[function(e,t,n){var i=e(157),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,r,o,a,s,l){this.isInTransaction()?i(!1,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):void 0;var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=e.call(t,n,r,o,a,s,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(d){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i=t[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(r){}}}},closeAll:function(e){this.isInTransaction()?void 0:i(!1,"Transaction.closeAll(): Cannot close transaction when none are open.");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r,a=t[n],s=this.wrapperInitData[n];try{r=!0,s!==o.OBSERVED_ERROR&&a.close&&a.close.call(this,s),r=!1}finally{if(r)try{this.closeAll(n+1)}catch(l){}}}this.wrapperInitData.length=0}},o={Mixin:r,OBSERVED_ERROR:{}};t.exports=o},{157:157}],112:[function(e,t,n){var i={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){i.currentScrollLeft=e.x,i.currentScrollTop=e.y}};t.exports=i},{}],113:[function(e,t,n){function i(e,t){if(null==t?r(!1,"accumulateInto(...): Accumulated items must not be null or undefined."):void 0,null==e)return t;var n=Array.isArray(e),i=Array.isArray(t);return n&&i?(e.push.apply(e,t),e):n?(e.push(t),e):i?[e].concat(t):[e,t]}var r=e(157);t.exports=i},{157:157}],114:[function(e,t,n){function i(e){for(var t=1,n=0,i=0,o=e.length,a=-4&o;a>i;){for(var s=Math.min(i+4096,a);s>i;i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=r,n%=r}for(;o>i;i++)n+=t+=e.charCodeAt(i);return t%=r,n%=r,t|n<<16}var r=65521;t.exports=i},{}],115:[function(e,t,n){var i=!1;try{Object.defineProperty({},"x",{get:function(){}}),i=!0}catch(r){}t.exports=i},{}],116:[function(e,t,n){var i=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e};t.exports=i},{}],117:[function(e,t,n){function i(e,t,n){var i=null==t||"boolean"==typeof t||""===t;if(i)return"";var r=isNaN(t);if(r||0===t||a.hasOwnProperty(e)&&a[e])return""+t;if("string"==typeof t){if(n){var l=n._currentElement._owner,u=l?l.getName():null;u&&!s[u]&&(s[u]={});var c=!1;if(u){var d=s[u];c=d[e],c||(d[e]=!0)}c||o(!1,"a `%s` tag (owner: `%s`) was passed a numeric string value for CSS property `%s` (value: `%s`) which will be treated as a unitless number in a future version of React.",n._currentElement.type,u||"unknown",e,t)}t=t.trim()}return t+"px"}var r=e(3),o=e(167),a=r.isUnitlessNumber,s={};t.exports=i},{167:167,3:3}],118:[function(e,t,n){function i(e){return o[e]}function r(e){return(""+e).replace(a,i)}var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},a=/[&><"']/g;t.exports=r},{}],119:[function(e,t,n){function i(e){var t=r.current;if(null!==t&&(u(t._warnedAboutRefsInRender,"%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"),t._warnedAboutRefsInRender=!0),null==e)return null;if(1===e.nodeType)return e;var n=a.get(e);return n?(n=s(n),n?o.getNodeFromInstance(n):null):void("function"==typeof e.render?l(!1,"findDOMNode was called on an unmounted component."):l(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(e)))}var r=e(36),o=e(41),a=e(70),s=e(127),l=e(157),u=e(167);t.exports=i},{127:127,157:157,167:167,36:36,41:41,70:70}],120:[function(e,t,n){function i(e,t,n){var i=e,r=void 0===i[n];s(r,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",o.unescape(n)),r&&null!=t&&(i[n]=t)}function r(e){if(null==e)return e;var t={};return a(e,i,t),t}var o=e(23),a=e(140),s=e(167);t.exports=r},{140:140,167:167,23:23}],121:[function(e,t,n){var i=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=i},{}],122:[function(e,t,n){function i(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=i},{}],123:[function(e,t,n){function i(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var r=e(122),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=i},{122:122}],124:[function(e,t,n){function i(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=o[e];return i?!!n[i]:!1}function r(e){return i}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},{}],125:[function(e,t,n){function i(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}t.exports=i},{}],126:[function(e,t,n){function i(e){
var t=e&&(r&&e[r]||e[o]);return"function"==typeof t?t:void 0}var r="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";t.exports=i},{}],127:[function(e,t,n){function i(e){for(var t;(t=e._renderedNodeType)===r.COMPOSITE;)e=e._renderedComponent;return t===r.NATIVE?e._renderedComponent:t===r.EMPTY?null:void 0}var r=e(79);t.exports=i},{79:79}],128:[function(e,t,n){function i(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function o(e,t){for(var n=i(e),o=0,a=0;n;){if(3===n.nodeType){if(a=o+n.textContent.length,t>=o&&a>=t)return{node:n,offset:t-o};o=a}n=i(r(n))}}t.exports=o},{}],129:[function(e,t,n){function i(){return!o&&r.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var r=e(143),o=null;t.exports=i},{143:143}],130:[function(e,t,n){function i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function r(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in l)return s[e]=t[n];return""}var o=e(143),a={animationend:i("Animation","AnimationEnd"),animationiteration:i("Animation","AnimationIteration"),animationstart:i("Animation","AnimationStart"),transitionend:i("Transition","TransitionEnd")},s={},l={};o.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=r},{143:143}],131:[function(e,t,n){function i(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function r(e){var t=e._currentElement;return null==t?"#empty":"string"==typeof t||"number"==typeof t?"#text":"string"==typeof t.type?t.type:e.getName?e.getName()||"Unknown":t.type.displayName||t.type.name||"Unknown"}function o(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function a(e){var t,n=null===e||e===!1;if(n)t=u.create(a);else if("object"==typeof e){var s=e;!s||"function"!=typeof s.type&&"string"!=typeof s.type?p(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==s.type?s.type:typeof s.type,i(s._owner)):void 0,t="string"==typeof s.type?c.createInternalComponent(s):o(s.type)?new s.type(s):new h(s)}else"string"==typeof e||"number"==typeof e?t=c.createInstanceForText(e):p(!1,"Encountered invalid React node of type %s",typeof e);f("function"==typeof t.mountComponent&&"function"==typeof t.receiveComponent&&"function"==typeof t.getNativeNode&&"function"==typeof t.unmountComponent,"Only React Components can be mounted."),t._mountIndex=0,t._mountImage=null,t._isOwnerNecessary=!1,t._warnedAboutRefsInRender=!1;var l=n?0:m++;if(t._debugID=l,0!==l){var v=r(t);d.debugTool.onSetDisplayName(l,v);var g=e&&e._owner;g&&d.debugTool.onSetOwner(l,g._debugID)}return Object.preventExtensions&&Object.preventExtensions(t),t}var s=e(168),l=e(35),u=e(63),c=e(77),d=e(71),p=e(157),f=e(167),h=function(e){this.construct(e)};s(h.prototype,l.Mixin,{_instantiateReactComponent:a});var m=1;t.exports=a},{157:157,167:167,168:168,35:35,63:63,71:71,77:77}],132:[function(e,t,n){function i(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var a=document.createElement("div");a.setAttribute(n,"return;"),i="function"==typeof a[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var r,o=e(143);o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=i},{143:143}],133:[function(e,t,n){function i(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&r[e.type]||"textarea"===t)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=i},{}],134:[function(e,t,n){function i(e){return r.isValidElement(e)?void 0:o(!1,"onlyChild must be passed a children with exactly one child."),e}var r=e(61),o=e(157);t.exports=i},{157:157,61:61}],135:[function(e,t,n){function i(e){return'"'+r(e)+'"'}var r=e(118);t.exports=i},{118:118}],136:[function(e,t,n){var i=e(74);t.exports=i.renderSubtreeIntoContainer},{74:74}],137:[function(e,t,n){var i=e(143),r=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,a=e(116),s=a(function(e,t){e.innerHTML=t});if(i.canUseDOM){var l=document.createElement("div");l.innerHTML=" ",""===l.innerHTML&&(s=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),r.test(t)||"<"===t[0]&&o.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),l=null}t.exports=s},{116:116,143:143}],138:[function(e,t,n){var i=e(143),r=e(118),o=e(137),a=function(e,t){e.textContent=t};i.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){o(e,r(t))})),t.exports=a},{118:118,137:137,143:143}],139:[function(e,t,n){function i(e,t){var n=null===e||e===!1,i=null===t||t===!1;if(n||i)return n===i;var r=typeof e,o=typeof t;return"string"===r||"number"===r?"string"===o||"number"===o:"object"===o&&e.type===t.type&&e.key===t.key}t.exports=i},{}],140:[function(e,t,n){function i(e,t){return e&&"object"==typeof e&&null!=e.key?c.escape(e.key):t.toString(36)}function r(e,t,n,o){var m=typeof e;if(("undefined"===m||"boolean"===m)&&(e=null),null===e||"string"===m||"number"===m||s.isValidElement(e))return n(o,e,""===t?p+i(e,0):t),1;var v,g,y=0,b=""===t?p:t+f;if(Array.isArray(e))for(var _=0;_<e.length;_++)v=e[_],g=b+i(v,_),y+=r(v,g,n,o);else{var w=l(e);if(w){var C,E=w.call(e);if(w!==e.entries)for(var x=0;!(C=E.next()).done;)v=C.value,g=b+i(v,x++),y+=r(v,g,n,o);else for(d(h,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."),h=!0;!(C=E.next()).done;){var T=C.value;T&&(v=T[1],g=b+c.escape(T[0])+f+i(v,0),y+=r(v,g,n,o))}}else if("object"===m){var k="";if(k=" If you meant to render a collection of children, use an array instead or wrap the object using createFragment(object) from the React add-ons.",e._isReactElement&&(k=" It looks like you're using an element created by a different version of React. Make sure to use only one copy of React."),a.current){var P=a.current.getName();P&&(k+=" Check the render method of `"+P+"`.")}var S=String(e);u(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===S?"object with keys {"+Object.keys(e).join(", ")+"}":S,k)}}return y}function o(e,t,n){return null==e?0:r(e,"",t,n)}var a=e(36),s=e(61),l=e(126),u=e(157),c=e(23),d=e(167),p=".",f=":",h=!1;t.exports=o},{126:126,157:157,167:167,23:23,36:36,61:61}],141:[function(e,t,n){var i=e(168),r=e(149),o=e(167),a=r,s=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],l=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],u=l.concat(["button"]),c=["dd","dt","li","option","optgroup","p","rp","rt"],d={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},p=function(e,t,n){var r=i({},e||d),o={tag:t,instance:n};return-1!==l.indexOf(t)&&(r.aTagInScope=null,r.buttonTagInScope=null,r.nobrTagInScope=null),-1!==u.indexOf(t)&&(r.pTagInButtonScope=null),-1!==s.indexOf(t)&&"address"!==t&&"div"!==t&&"p"!==t&&(r.listItemTagAutoclosing=null,r.dlItemTagAutoclosing=null),r.current=o,"form"===t&&(r.formTag=o),"a"===t&&(r.aTagInScope=o),"button"===t&&(r.buttonTagInScope=o),"nobr"===t&&(r.nobrTagInScope=o),"p"===t&&(r.pTagInButtonScope=o),"li"===t&&(r.listItemTagAutoclosing=o),("dd"===t||"dt"===t)&&(r.dlItemTagAutoclosing=o),r},f=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return-1===c.indexOf(t);case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0},h=function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null},m=function(e){if(!e)return[];var t=[];do t.push(e);while(e=e._currentElement._owner);return t.reverse(),t},v={};a=function(e,t,n){n=n||d;var i=n.current,r=i&&i.tag,a=f(e,r)?null:i,s=a?null:h(e,n),l=a||s;if(l){var u,c=l.tag,p=l.instance,g=t&&t._currentElement._owner,y=p&&p._currentElement._owner,b=m(g),_=m(y),w=Math.min(b.length,_.length),C=-1;for(u=0;w>u&&b[u]===_[u];u++)C=u;var E="(unknown)",x=b.slice(C+1).map(function(e){return e.getName()||E}),T=_.slice(C+1).map(function(e){return e.getName()||E}),k=[].concat(-1!==C?b[C].getName()||E:[],T,c,s?["..."]:[],x,e).join(" > "),P=!!a+"|"+e+"|"+c+"|"+k;if(v[P])return;v[P]=!0;var S=e;if("#text"!==e&&(S="<"+e+">"),a){var O="";"table"===c&&"tr"===e&&(O+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),o(!1,"validateDOMNesting(...): %s cannot appear as a child of <%s>. See %s.%s",S,c,k,O)}else o(!1,"validateDOMNesting(...): %s cannot appear as a descendant of <%s>. See %s.",S,c,k)}},a.updatedAncestorInfo=p,a.isTagValidInContext=function(e,t){t=t||d;var n=t.current,i=n&&n.tag;return f(e,i)&&!h(e,t)},t.exports=a},{149:149,167:167,168:168}],142:[function(e,t,n){var i=e(149),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:i})},registerDefault:function(){}};t.exports=r},{149:149}],143:[function(e,t,n){var i=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};t.exports=r},{}],144:[function(e,t,n){function i(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;t.exports=i},{}],145:[function(e,t,n){function i(e){return r(e.replace(o,"ms-"))}var r=e(144),o=/^-ms-/;t.exports=i},{144:144}],146:[function(e,t,n){function i(e,t){return e&&t?e===t?!0:r(e)?!1:r(t)?i(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var r=e(159);t.exports=i},{159:159}],147:[function(e,t,n){function i(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?a(!1,"toArray: Array-like object expected"):void 0,"number"!=typeof t?a(!1,"toArray: Object needs a length property"):void 0,0===t||t-1 in e?void 0:a(!1,"toArray: Object should have keys for indices"),"function"==typeof e.callee?a(!1,"toArray: Object can't be `arguments`. Use rest params (function(...args) {}) or Array.from() instead."):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var i=Array(t),r=0;t>r;r++)i[r]=e[r];return i}function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return r(e)?Array.isArray(e)?e.slice():i(e):[e]}var a=e(157);t.exports=o},{157:157}],148:[function(e,t,n){function i(e){var t=e.match(c);return t&&t[1].toLowerCase()}function r(e,t){var n=u;u?void 0:l(!1,"createNodesFromMarkup dummy not initialized");var r=i(e),o=r&&s(r);if(o){n.innerHTML=o[1]+e+o[2];for(var c=o[0];c--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(t?void 0:l(!1,"createNodesFromMarkup(...): Unexpected <script> element rendered."),a(d).forEach(t));for(var p=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var o=e(143),a=e(147),s=e(153),l=e(157),u=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=r},{143:143,147:147,153:153,157:157}],149:[function(e,t,n){function i(e){return function(){return e}}function r(){}r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},t.exports=r},{}],150:[function(e,t,n){var i={};Object.freeze(i),t.exports=i},{}],151:[function(e,t,n){function i(e){try{e.focus()}catch(t){}}t.exports=i},{}],152:[function(e,t,n){function i(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=i},{}],153:[function(e,t,n){function i(e){return a?void 0:o(!1,"Markup wrapping node not initialized"),p.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?p[e]:null}var r=e(143),o=e(157),a=r.canUseDOM?document.createElement("div"):null,s={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},f=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];f.forEach(function(e){p[e]=d,s[e]=!0}),t.exports=i},{143:143,157:157}],154:[function(e,t,n){function i(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=i},{}],155:[function(e,t,n){function i(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=i},{}],156:[function(e,t,n){function i(e){return r(e).replace(o,"-ms-")}var r=e(155),o=/^ms-/;t.exports=i},{155:155}],157:[function(e,t,n){function i(e,t,n,i,r,o,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}t.exports=i},{}],158:[function(e,t,n){function i(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=i},{}],159:[function(e,t,n){function i(e){return r(e)&&3==e.nodeType}var r=e(158);t.exports=i},{158:158}],160:[function(e,t,n){var i=e(157),r=function(e){var t,n={};e instanceof Object&&!Array.isArray(e)?void 0:i(!1,"keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=r},{157:157}],161:[function(e,t,n){var i=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=i},{}],162:[function(e,t,n){function i(e,t,n){if(!e)return null;var i={};for(var o in e)r.call(e,o)&&(i[o]=t.call(n,e[o],o,e));return i}var r=Object.prototype.hasOwnProperty;t.exports=i},{}],163:[function(e,t,n){function i(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=i},{}],164:[function(e,t,n){var i,r=e(143);r.canUseDOM&&(i=window.performance||window.msPerformance||window.webkitPerformance),t.exports=i||{}},{143:143}],165:[function(e,t,n){var i,r=e(164);i=r.now?function(){return r.now()}:function(){return Date.now()},t.exports=i},{164:164}],166:[function(e,t,n){function i(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function r(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],167:[function(e,t,n){var i=e(149),r=i;r=function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;n>r;r++)i[r-2]=arguments[r];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){var o=0,a="Warning: "+t.replace(/%s/g,function(){return i[o++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(s){}}},t.exports=r},{149:149}],168:[function(e,t,n){function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;10>n;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?!1:!0}catch(o){return!1}}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(e,t){for(var n,r,s=i(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)o.call(n,u)&&(s[u]=n[u]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(n);for(var c=0;c<r.length;c++)a.call(n,r[c])&&(s[r[c]]=n[r[c]])}}return s}},{}]},{},[91])(91)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define("react-dom",["react"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ReactDOM=e(t.React)}}(function(e){return e.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("redux",[],t):"object"==typeof exports?exports.Redux=t():e.Redux=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var r=n(2),o=i(r),a=n(7),s=i(a),l=n(6),u=i(l),c=n(5),d=i(c),p=n(1),f=i(p),h=n(3);i(h),t.createStore=o["default"],t.combineReducers=s["default"],t.bindActionCreators=u["default"],t.applyMiddleware=d["default"],t.compose=f["default"]},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){if(0===t.length)return arguments.length>0?arguments[0]:void 0;var e=t[t.length-1],n=t.slice(0,-1);return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){function i(){h===f&&(h=f.slice())}function o(){return p}function l(e){if("function"!=typeof e)throw Error("Expected listener to be a function.");var t=!0;return i(),h.push(e),function(){if(t){t=!1,i();var n=h.indexOf(e);h.splice(n,1)}}}function u(e){if(!(0,a["default"])(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw Error("Reducers may not dispatch actions.");try{m=!0,p=d(p,e)}finally{m=!1}for(var t=f=h,n=0;t.length>n;n++)t[n]();return e}function c(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");d=e,u({type:s.INIT})}if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var d=e,p=t,f=[],h=f,m=!1;return u({type:s.INIT}),{dispatch:u,subscribe:l,getState:o,replaceReducer:c}}t.__esModule=!0,t.ActionTypes=void 0,t["default"]=r;var o=n(4),a=i(o),s=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t,n){function i(e){if(!o(e)||c.call(e)!=a||r(e))return!1;var t=s;if("function"==typeof e.constructor&&(t=d(e)),null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}var r=n(8),o=n(9),a="[object Object]",s=Object.prototype,l=Function.prototype.toString,u=l.call(Object),c=s.toString,d=Object.getPrototypeOf;e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,i,r){var a=e(n,i,r),l=a.dispatch,u=[],c={getState:a.getState,dispatch:function(e){return l(e)}};return u=t.map(function(e){return e(c)}),l=s["default"].apply(void 0,u)(a.dispatch),o({},a,{dispatch:l})}}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.__esModule=!0,t["default"]=r;var a=n(1),s=i(a)},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var i=Object.keys(e),r={},o=0;i.length>o;o++){var a=i[o],s=e[a];"function"==typeof s&&(r[a]=n(s,t))}return r}t.__esModule=!0,t["default"]=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=t&&t.type,i=n&&'"'+n+'"'||"an action";return'Reducer "'+e+'" returned undefined handling '+i+". To ignore an action, you must explicitly return the previous state."}function o(e){Object.keys(e).forEach(function(t){var n=e[t],i=n(void 0,{type:s.ActionTypes.INIT});if(void 0===i)throw Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var r="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===n(void 0,{type:r}))throw Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var t=Object.keys(e),n={},i=0;t.length>i;i++){var a=t[i];"function"==typeof e[a]&&(n[a]=e[a])}var s,l=Object.keys(n);try{o(n)}catch(u){s=u}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var i=!1,o={},a=0;l.length>a;a++){var u=l[a],c=n[u],d=e[u],p=c(d,t);if(void 0===p){var f=r(u,t);throw Error(f)}o[u]=p,i=i||p!==d}return i?o:e}}t.__esModule=!0,t["default"]=a;var s=n(2),l=n(4),u=(i(l),n(3));i(u)},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n}])}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("redux")):"function"==typeof define&&define.amd?define("react-redux",["react","redux"],t):"object"==typeof exports?exports.ReactRedux=t(require("react"),require("redux")):e.ReactRedux=t(e.React,e.Redux)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.connect=t.Provider=void 0;var r=n(3),o=i(r),a=n(4),s=i(a);t.Provider=o["default"],t.connect=s["default"]},function(t,n){t.exports=e},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1);t["default"]=i.PropTypes.shape({subscribe:i.PropTypes.func.isRequired,dispatch:i.PropTypes.func.isRequired,getState:i.PropTypes.func.isRequired})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){d||(d=!0,"undefined"!=typeof console&&"function"==typeof console.error&&console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}t.__esModule=!0,t["default"]=void 0;var l=n(1),u=n(2),c=i(u),d=!1,p=function(e){function t(n,i){r(this,t);var a=o(this,e.call(this,n,i));return a.store=n.store,a}return a(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return l.Children.only(e)},t}(l.Component);t["default"]=p,p.prototype.componentWillReceiveProps=function(e){var t=this.store,n=e.store;t!==n&&s()},p.propTypes={store:c["default"].isRequired,children:l.PropTypes.element.isRequired},p.childContextTypes={store:c["default"].isRequired}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function l(e,t){return(0,E["default"])((0,b["default"])(e),"`%sToProps` must return an object. Instead received %s.",t?"mapDispatch":"mapState",e),e}function u(e,t,n){function i(e,t,n){var i=y(e,t,n);return(0,E["default"])((0,b["default"])(i),"`mergeProps` must return an object. Instead received %s.",i),i}var u=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],p=Boolean(e),h=e||x,v=(0,b["default"])(t)?(0,g["default"])(t):t||T,y=n||k,_=y!==k,C=u.pure,S=void 0===C?!0:C,O=u.withRef,I=void 0===O?!1:O,N=P++;return function(e){var t=function(t){function n(e,i){r(this,n);var a=o(this,t.call(this,e,i));a.version=N,a.store=e.store||i.store,(0,E["default"])(a.store,'Could not find "store" in either the context or '+('props of "'+a.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+a.constructor.displayName+'".'));var s=a.store.getState();return a.state={storeState:s},a.clearCache(),a}return a(n,t),n.prototype.shouldComponentUpdate=function(){return!S||this.haveOwnPropsChanged||this.hasStoreStateChanged},n.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),i=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return l(i)},n.prototype.configureFinalMapState=function(e,t){var n=h(e.getState(),t),i="function"==typeof n;return this.finalMapStateToProps=i?n:h,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,i?this.computeStateProps(e,t):l(n)},n.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,i=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return l(i,!0)},n.prototype.configureFinalMapDispatch=function(e,t){var n=v(e.dispatch,t),i="function"==typeof n;return this.finalMapDispatchToProps=i?n:v,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,i?this.computeDispatchProps(e,t):l(n,!0)},n.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);
return this.stateProps&&(0,m["default"])(e,this.stateProps)?!1:(this.stateProps=e,!0)},n.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return this.dispatchProps&&(0,m["default"])(e,this.dispatchProps)?!1:(this.dispatchProps=e,!0)},n.prototype.updateMergedPropsIfNeeded=function(){var e=i(this.stateProps,this.dispatchProps,this.props);return this.mergedProps&&_&&(0,m["default"])(e,this.mergedProps)?!1:(this.mergedProps=e,!0)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){p&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillReceiveProps=function(e){S&&(0,m["default"])(e,this.props)||(this.haveOwnPropsChanged=!0)},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},n.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},n.prototype.handleChange=function(){if(this.unsubscribe){var e=this.state.storeState,t=this.store.getState();S&&e===t||(this.hasStoreStateChanged=!0,this.setState({storeState:t}))}},n.prototype.getWrappedInstance=function(){return(0,E["default"])(I,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,i=this.renderedElement;this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1;var r=!0,o=!0;S&&i&&(r=n||t&&this.doStatePropsDependOnOwnProps,o=t&&this.doDispatchPropsDependOnOwnProps);var a=!1,s=!1;r&&(a=this.updateStatePropsIfNeeded()),o&&(s=this.updateDispatchPropsIfNeeded());var l=!0;return l=a||s||t?this.updateMergedPropsIfNeeded():!1,!l&&i?i:(I?this.renderedElement=(0,d.createElement)(e,c({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,d.createElement)(e,this.mergedProps),this.renderedElement)},n}(d.Component);return t.displayName="Connect("+s(e)+")",t.WrappedComponent=e,t.contextTypes={store:f["default"]},t.propTypes={store:f["default"]},t.prototype.componentWillUpdate=function(){this.version!==N&&(this.version=N,this.trySubscribe(),this.clearCache())},(0,w["default"])(t,e)}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.__esModule=!0,t["default"]=u;var d=n(1),p=n(2),f=i(p),h=n(5),m=i(h),v=n(6),g=i(v),y=n(11),b=i(y),_=n(7),w=i(_),C=n(8),E=i(C),x=function(e){return{}},T=function(e){return{dispatch:e}},k=function(e,t,n){return c({},n,e,t)},P=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!r.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function i(e){return function(t){return(0,r.bindActionCreators)(e,t)}}t.__esModule=!0,t["default"]=i;var r=n(12)},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;++o)n[r[o]]||i[r[o]]||(e[r[o]]=t[r[o]]);return e}},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){if(!o(e)||c.call(e)!=a||r(e))return!1;var t=s;if("function"==typeof e.constructor&&(t=d(e)),null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}var r=n(9),o=n(10),a="[object Object]",s=Object.prototype,l=Function.prototype.toString,u=l.call(Object),c=s.toString,d=Object.getPrototypeOf;e.exports=i},function(e,n){e.exports=t}])}),define("storymaps-react/tpl/builder/overviewPanel/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TOGGLE_ORGANIZE="TOGGLE_ORGANIZE",e.CHANGE_SELECTED_ITEM="CHANGE_SELECTED_ITEM",e.UPDATE_ITEMS="UPDATE_ITEMS",e.UPDATE_ORDER="UPDATE_ORDER"}),define("storymaps-react/tpl/builder/overviewPanel/reducer",["module","exports","./actionTypes"],function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case o.CHANGE_SELECTED_ITEM:return Object.assign({},e,{selectedItem:t.value});case o.TOGGLE_ORGANIZE:return Object.assign({},e,{organize:!e.organize});case o.UPDATE_ITEMS:return Object.assign({},e,{items:t.value});case o.UPDATE_ORDER:return Object.assign({},e,{order:t.value});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n);t["default"]=r,e.exports=t["default"]}),define("storymaps-react/tpl/builder/overviewPanel/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(){return{type:s.TOGGLE_ORGANIZE,value:null}}function r(e){return{type:s.CHANGE_SELECTED_ITEM,value:e}}function o(e){return{type:s.UPDATE_ITEMS,value:e}}function a(e){return{type:s.UPDATE_ORDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.toggleOrganize=i,e.changeSelectedItem=r,e.updateItems=o,e.updateOrder=a;var s=n(t)}),function(e){"use strict";"function"==typeof define&&define.amd?define("lib/Sortable/Sortable",e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=g({},t),e[R]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in n)!(i in t)&&(t[i]=n[i]);K(t);for(var o in this)"_"===o.charAt(0)&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:$,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),V.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){w&&w.state!==e&&(s(w,"display",e?"none":""),!e&&w.state&&C.insertBefore(w,y),w.state=e)}function n(e,t,n){if(e){n=n||F,t=t.split(".");var i=t.shift().toUpperCase(),r=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(">*"===i&&e.parentNode===n||(""===i||e.nodeName.toUpperCase()==i)&&(!t.length||((" "+e.className+" ").match(r)||[]).length==t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function i(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function r(e,t,n){e.addEventListener(t,n,!1)}function o(e,t,n){e.removeEventListener(t,n,!1)}function a(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(L," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(L," ")}}function s(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return F.defaultView&&F.defaultView.getComputedStyle?n=F.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;o>r;r++)n(i[r],r);return i}return[]}function u(e,t,n,i,r,o,a){var s=F.createEvent("Event"),l=(e||t[R]).options,u="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=t,s.from=r||t,s.item=i||t,s.clone=w,s.oldIndex=o,s.newIndex=a,t.dispatchEvent(s),l[u]&&l[u].call(e,s)}function c(e,t,n,i,r,o){var a,s,l=e[R],u=l.options.onMove;return a=F.createEvent("Event"),a.initEvent("move",!0,!0),a.to=t,a.from=e,a.dragged=n,a.draggedRect=i,a.related=r||t,a.relatedRect=o||t.getBoundingClientRect(),e.dispatchEvent(a),u&&(s=u.call(l,a)),s}function d(e){e.draggable=!1}function p(){W=!1}function f(e,t){var n=e.lastElementChild,i=n.getBoundingClientRect();return(t.clientY-(i.top+i.height)>5||t.clientX-(i.right+i.width)>5)&&n}function h(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function m(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function v(e,t){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?e.call(i,n[0]):e.apply(i,n),n=void 0},t))}}function g(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var y,b,_,w,C,E,x,T,k,P,S,O,I,N,A,M,D,j={},L=/\s+/g,R="Sortable"+(new Date).getTime(),B=window,F=B.document,U=B.parseInt,$=!!("draggable"in F.createElement("div")),H=function(e){return e=F.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),W=!1,z=Math.abs,V=([].slice,[]),q=v(function(e,t,n){if(n&&t.scroll){var i,r,o,a,s=t.scrollSensitivity,l=t.scrollSpeed,u=e.clientX,c=e.clientY,d=window.innerWidth,p=window.innerHeight;if(T!==n&&(x=t.scroll,T=n,x===!0)){x=n;do if(x.offsetWidth<x.scrollWidth||x.offsetHeight<x.scrollHeight)break;while(x=x.parentNode)}x&&(i=x,r=x.getBoundingClientRect(),o=(z(r.right-u)<=s)-(z(r.left-u)<=s),a=(z(r.bottom-c)<=s)-(z(r.top-c)<=s)),o||a||(o=(s>=d-u)-(s>=u),a=(s>=p-c)-(s>=c),(o||a)&&(i=B)),(j.vx!==o||j.vy!==a||j.el!==i)&&(j.el=i,j.vx=o,j.vy=a,clearInterval(j.pid),i&&(j.pid=setInterval(function(){i===B?B.scrollTo(B.pageXOffset+o*l,B.pageYOffset+a*l):(a&&(i.scrollTop+=a*l),o&&(i.scrollLeft+=o*l))},24)))}},30),K=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,i=this.el,r=this.options,o=e.type,a=e.touches&&e.touches[0],s=(a||e).target,l=s,c=r.filter;if(!("mousedown"===o&&0!==e.button||r.disabled)&&(s=n(s,r.draggable,i))){if(O=m(s),"function"==typeof c){if(c.call(this,e,s,this))return u(t,l,"filter",s,i,O),void e.preventDefault()}else if(c&&(c=c.split(",").some(function(e){return e=n(l,e.trim(),i),e?(u(t,e,"filter",s,i,O),!0):void 0})))return void e.preventDefault();(!r.handle||n(l,r.handle,i))&&this._prepareDragStart(e,a,s)}},_prepareDragStart:function(e,t,n){var i,o=this,s=o.el,u=o.options,c=s.ownerDocument;n&&!y&&n.parentNode===s&&(A=e,C=s,y=n,b=y.parentNode,E=y.nextSibling,N=u.group,i=function(){o._disableDelayedDrag(),y.draggable=!0,a(y,o.options.chosenClass,!0),o._triggerDragStart(t)},u.ignore.split(",").forEach(function(e){l(y,e.trim(),d)}),r(c,"mouseup",o._onDrop),r(c,"touchend",o._onDrop),r(c,"touchcancel",o._onDrop),u.delay?(r(c,"mouseup",o._disableDelayedDrag),r(c,"touchend",o._disableDelayedDrag),r(c,"touchcancel",o._disableDelayedDrag),r(c,"mousemove",o._disableDelayedDrag),r(c,"touchmove",o._disableDelayedDrag),o._dragStartTimer=setTimeout(i,u.delay)):i())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),o(e,"mouseup",this._disableDelayedDrag),o(e,"touchend",this._disableDelayedDrag),o(e,"touchcancel",this._disableDelayedDrag),o(e,"mousemove",this._disableDelayedDrag),o(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(A={target:y,clientX:e.clientX,clientY:e.clientY},this._onDragStart(A,"touch")):this.nativeDraggable?(r(y,"dragend",this),r(C,"dragstart",this._onDragStart)):this._onDragStart(A,!0);try{F.selection?F.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){C&&y&&(a(y,this.options.ghostClass,!0),e.active=this,u(this,C,"start",y,C,O))},_emulateDragOver:function(){if(M){if(this._lastX===M.clientX&&this._lastY===M.clientY)return;this._lastX=M.clientX,this._lastY=M.clientY,H||s(_,"display","none");var e=F.elementFromPoint(M.clientX,M.clientY),t=e,n=" "+this.options.group.name,i=V.length;if(t)do{if(t[R]&&t[R].options.groups.indexOf(n)>-1){for(;i--;)V[i]({clientX:M.clientX,clientY:M.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);H||s(_,"display","")}},_onTouchMove:function(t){if(A){e.active||this._dragStarted(),this._appendGhost();var n=t.touches?t.touches[0]:t,i=n.clientX-A.clientX,r=n.clientY-A.clientY,o=t.touches?"translate3d("+i+"px,"+r+"px,0)":"translate("+i+"px,"+r+"px)";D=!0,M=n,s(_,"webkitTransform",o),s(_,"mozTransform",o),s(_,"msTransform",o),s(_,"transform",o),t.preventDefault()}},_appendGhost:function(){if(!_){var e,t=y.getBoundingClientRect(),n=s(y),i=this.options;_=y.cloneNode(!0),a(_,i.ghostClass,!1),a(_,i.fallbackClass,!0),s(_,"top",t.top-U(n.marginTop,10)),s(_,"left",t.left-U(n.marginLeft,10)),s(_,"width",t.width),s(_,"height",t.height),s(_,"opacity","0.8"),s(_,"position","fixed"),s(_,"zIndex","100000"),s(_,"pointerEvents","none"),i.fallbackOnBody&&F.body.appendChild(_)||C.appendChild(_),e=_.getBoundingClientRect(),s(_,"width",2*t.width-e.width),s(_,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,i=this.options;this._offUpEvents(),"clone"==N.pull&&(w=y.cloneNode(!0),s(w,"display","none"),C.insertBefore(w,y)),t?("touch"===t?(r(F,"touchmove",this._onTouchMove),r(F,"touchend",this._onDrop),r(F,"touchcancel",this._onDrop)):(r(F,"mousemove",this._onTouchMove),r(F,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,y)),r(F,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var i,r,o,a=this.el,l=this.options,u=l.group,d=u.put,h=N===u,m=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),D=!0,N&&!l.disabled&&(h?m||(o=!C.contains(y)):N.pull&&d&&(N.name===u.name||d.indexOf&&~d.indexOf(N.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(q(e,l,this.el),W)return;if(i=n(e.target,l.draggable,a),r=y.getBoundingClientRect(),o)return t(!0),void(w||E?C.insertBefore(y,w||E):m||C.appendChild(y));if(0===a.children.length||a.children[0]===_||a===e.target&&(i=f(a,e))){if(i){if(i.animated)return;g=i.getBoundingClientRect()}t(h),c(C,a,y,r,i,g)!==!1&&(y.contains(a)||(a.appendChild(y),b=a),this._animate(r,y),i&&this._animate(g,i))}else if(i&&!i.animated&&i!==y&&void 0!==i.parentNode[R]){k!==i&&(k=i,P=s(i),S=s(i.parentNode));var v,g=i.getBoundingClientRect(),x=g.right-g.left,T=g.bottom-g.top,O=/left|right|inline/.test(P.cssFloat+P.display)||"flex"==S.display&&0===S["flex-direction"].indexOf("row"),I=i.offsetWidth>y.offsetWidth,A=i.offsetHeight>y.offsetHeight,M=(O?(e.clientX-g.left)/x:(e.clientY-g.top)/T)>.5,j=i.nextElementSibling,L=c(C,a,y,r,i,g);if(L!==!1){if(W=!0,setTimeout(p,30),t(h),1===L||-1===L)v=1===L;else if(O){var B=y.offsetTop,F=i.offsetTop;v=B===F?i.previousElementSibling===y&&!I||M&&I:F>B}else v=j!==y&&!A||M&&A;y.contains(a)||(v&&!j?a.appendChild(y):i.parentNode.insertBefore(y,v?j:i)),b=y.parentNode,this._animate(r,y),this._animate(g,i)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var i=t.getBoundingClientRect();s(t,"transition","none"),s(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,s(t,"transition","all "+n+"ms"),s(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){s(t,"transition",""),s(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;o(F,"touchmove",this._onTouchMove),o(e,"mouseup",this._onDrop),o(e,"touchend",this._onDrop),o(e,"touchcancel",this._onDrop)},_onDrop:function(t){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(j.pid),clearTimeout(this._dragStartTimer),o(F,"mousemove",this._onTouchMove),this.nativeDraggable&&(o(F,"drop",this),o(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(D&&(t.preventDefault(),!i.dropBubble&&t.stopPropagation()),_&&_.parentNode.removeChild(_),y&&(this.nativeDraggable&&o(y,"dragend",this),d(y),a(y,this.options.ghostClass,!1),a(y,this.options.chosenClass,!1),C!==b?(I=m(y),I>=0&&(u(null,b,"sort",y,C,O,I),u(this,C,"sort",y,C,O,I),u(null,b,"add",y,C,O,I),u(this,C,"remove",y,C,O,I))):(w&&w.parentNode.removeChild(w),y.nextSibling!==E&&(I=m(y),I>=0&&(u(this,C,"update",y,C,O,I),u(this,C,"sort",y,C,O,I)))),e.active&&((null===I||-1===I)&&(I=O),u(this,C,"end",y,C,O,I),this.save())),C=y=b=_=E=w=x=T=A=M=D=I=k=P=N=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?y&&(this._onDragOver(e),i(e)):("drop"===t||"dragend"===t)&&this._onDrop(e)},toArray:function(){for(var e,t=[],i=this.el.children,r=0,o=i.length,a=this.options;o>r;r++)e=i[r],n(e,a.draggable,this.el)&&t.push(e.getAttribute(a.dataIdAttr)||h(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,r){var o=i.children[r];n(o,this.options.draggable,i)&&(t[e]=o)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&K(n)))},destroy:function(){var e=this.el;e[R]=null,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),V.splice(V.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:r,off:o,css:s,find:l,is:function(e,t){return!!n(e,t,e)},extend:g,throttle:v,closest:n,toggleClass:a,index:m},e.create=function(t,n){return new e(t,n)},e.version="1.4.2",e}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/ActionOverlay",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/common/ActionOverlay",["module","exports","react","lib-build/less!./ActionOverlay"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t,n){return e||(t+=" op-hidden"),o["default"].createElement("span",{className:t,onClick:n})}return e.showActions&&(e.item.hasDelete||e.item.hasDuplicate)?o["default"].createElement("div",{className:"op-action-overlay"},t(e.item.hasDelete,"action-icon glyphicon glyphicon-remove-circle",function(t){e.callbacks.deleteItem(e.item.id),t.stopPropagation()}),t(e.item.hasDuplicate,"action-icon glyphicon glyphicon-duplicate",function(t){e.callbacks.duplicateItem(e.item.id),t.stopPropagation()})):null}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n);t["default"]=r,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/ItemMain",[],function(){}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMain",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMain",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMain"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t="op-item-main builder-overview "+e.item.size,n=function(){return e.item.showTitleBar?a["default"].createElement("div",{className:"title-bar"},a["default"].createElement("span",{className:"title"},a["default"].createElement("span",{className:e.item.icon+" icon"}),e.item.title)):e.item.icon?a["default"].createElement("span",{className:"item-icon"},a["default"].createElement("span",{className:e.item.icon+" icon"})):e.item.text?a["default"].createElement("div",{className:"text-overlay"},a["default"].createElement("p",{className:"item-text"},e.item.text)):null},i=function(){return e.item.label?a["default"].createElement("div",{className:"item-label"},e.item.label):null};return a["default"].createElement("div",{style:{backgroundImage:"url("+e.item.thumbnail+")"},className:t},n(),i(),a["default"].createElement(s["default"],e))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i);t["default"]=o,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMainButton",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMainButton",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMainButton"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return a["default"].createElement("div",{className:"op-item-main item-button"},a["default"].createElement("div",null,e.item.label),a["default"].createElement(s["default"],e))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i);t["default"]=o,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/Item",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/Item",["module","exports","react","./ItemMain","./ItemMainButton","lib-build/less!./../common/Item"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(){a(this,t);var e=s(this,Object.getPrototypeOf(t).call(this));return e.state={showActions:!1},e.renderInnerItem=e.renderInnerItem.bind(e),e}return l(t,e),f(t,[{key:"renderInnerItem",value:function(){var e=this,t=c["default"],n="op-item";return"button"===this.props.item.style&&(t=d["default"]),this.props.selected&&(n+=" selected"),this.props.item.hasOrganize||(n+=" undraggable"),this.props.organize&&(n+=" organize"),u["default"].createElement("div",{className:n,onClick:function(){e.props.organize||(e.props.onItemClicked(e.props.item.id),e.props.callbacks.selectItem(e.props.item.id))},onMouseOver:function(){e.props.organize||e.setState({showActions:!0})},onMouseLeave:function(){e.setState({showActions:!1})},"data-id":this.props.item.id},u["default"].createElement(t,p({showActions:this.state.showActions},this.props)))}},{key:"render",value:function(){return this.renderInnerItem()}}]),t}(u["default"].Component);t["default"]=h,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/InlineAdd",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/InlineAdd",["module","exports","react","lib-build/less!./InlineAdd"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.state={hovered:!1},e}return a(t,e),l(t,[{key:"render",value:function(){var e=this,t=null;return this.props.organize||(t=s["default"].createElement("span",{className:"add-button",onClick:function(){e.props.addItem(e.props.index)}},s["default"].createElement("span",{className:"icon glyphicon glyphicon-plus"}))),s["default"].createElement("div",{className:"op-inline-add-container",onMouseEnter:function(){e.setState({hovered:!0})},onMouseLeave:function(){e.setState({hovered:!1})}},t)}}]),t}(s["default"].Component);t["default"]=u,e.exports=t["default"]}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("react-bootstrap",["react","react-dom"],t):"object"==typeof exports?exports.ReactBootstrap=t(require("react"),require("react-dom")):e.ReactBootstrap=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1)["default"],r=n(2)["default"];t.__esModule=!0;var o=n(3),a=i(o);t.Accordion=a["default"];var s=n(34),l=i(s);t.Alert=l["default"];var u=n(37),c=i(u);t.Badge=c["default"];var d=n(38),p=i(d);t.Breadcrumb=p["default"];var f=n(39),h=i(f);t.BreadcrumbItem=h["default"];var m=n(51),v=i(m);t.Button=v["default"];var g=n(52),y=i(g);t.ButtonGroup=y["default"];var b=n(54),_=i(b);t.ButtonInput=_["default"];var w=n(61),C=i(w);t.ButtonToolbar=C["default"];var E=n(62),x=i(E);t.Carousel=x["default"];var T=n(64),k=i(T);t.CarouselItem=k["default"];var P=n(67),S=i(P);t.Checkbox=S["default"];var O=n(68),I=i(O);t.Clearfix=I["default"];var N=n(69),A=i(N);t.ControlLabel=A["default"];var M=n(70),D=i(M);t.Col=D["default"];var j=n(71),L=i(j);t.Collapse=L["default"];var R=n(85),B=i(R);t.Dropdown=B["default"];var F=n(171),U=i(F);t.DropdownButton=U["default"];var $=n(173),H=i($);t.Fade=H["default"];var W=n(174),z=i(W);t.Form=z["default"];var V=n(175),q=i(V);t.FormControl=q["default"];var K=n(55),G=i(K);t.FormGroup=G["default"];var Y=n(57),X=i(Y);t.Glyphicon=X["default"];var J=n(178),Z=i(J);t.Grid=Z["default"];var Q=n(179),ee=i(Q);t.HelpBlock=ee["default"];var te=n(180),ne=i(te);t.Image=ne["default"];var ie=n(181),re=i(ie);t.Input=re["default"];var oe=n(184),ae=i(oe);t.InputGroup=ae["default"];var se=n(187),le=i(se);t.Interpolate=le["default"];var ue=n(188),ce=i(ue);t.Jumbotron=ce["default"];var de=n(189),pe=i(de);t.Label=pe["default"];var fe=n(190),he=i(fe);t.ListGroup=he["default"];var me=n(191),ve=i(me);t.ListGroupItem=ve["default"];var ge=n(192),ye=i(ge);t.Media=ye["default"];var be=n(199),_e=i(be);t.MenuItem=_e["default"];var we=n(200),Ce=i(we);t.Modal=Ce["default"];var Ee=n(221),xe=i(Ee);t.ModalBody=xe["default"];var Te=n(224),ke=i(Te);t.ModalFooter=ke["default"];var Pe=n(222),Se=i(Pe);t.ModalHeader=Se["default"];var Oe=n(223),Ie=i(Oe);t.ModalTitle=Ie["default"];var Ne=n(225),Ae=i(Ne);t.Nav=Ae["default"];var Me=n(227),De=i(Me);t.Navbar=De["default"];var je=n(228),Le=i(je);t.NavbarBrand=Le["default"];var Re=n(232),Be=i(Re);t.NavDropdown=Be["default"];var Fe=n(233),Ue=i(Fe);t.NavItem=Ue["default"];var $e=n(234),He=i($e);t.Overlay=He["default"];var We=n(243),ze=i(We);t.OverlayTrigger=ze["default"];var Ve=n(244),qe=i(Ve);t.PageHeader=qe["default"];var Ke=n(245),Ge=i(Ke);t.PageItem=Ge["default"];var Ye=n(246),Xe=i(Ye);t.Pager=Xe["default"];var Je=n(247),Ze=i(Je);t.Pagination=Ze["default"];var Qe=n(249),et=i(Qe);t.Panel=et["default"];var tt=n(21),nt=i(tt);t.PanelGroup=nt["default"];var it=n(250),rt=i(it);t.Popover=rt["default"];var ot=n(251),at=i(ot);t.ProgressBar=at["default"];var st=n(252),lt=i(st);t.Radio=lt["default"];var ut=n(253),ct=i(ut);t.ResponsiveEmbed=ct["default"];var dt=n(254),pt=i(dt);t.Row=pt["default"];var ft=n(40),ht=i(ft);t.SafeAnchor=ht["default"];var mt=n(255),vt=i(mt);t.SplitButton=vt["default"];var gt=n(257),yt=i(gt);t.Tab=yt["default"];var bt=n(259),_t=i(bt);t.TabContainer=_t["default"];var wt=n(260),Ct=i(wt);t.TabContent=Ct["default"];var Et=n(261),xt=i(Et);t.Table=xt["default"];var Tt=n(258),kt=i(Tt);t.TabPane=kt["default"];var Pt=n(262),St=i(Pt);t.Tabs=St["default"];var Ot=n(263),It=i(Ot);t.Thumbnail=It["default"];var Nt=n(264),At=i(Nt);t.Tooltip=At["default"];var Mt=n(265),Dt=i(Mt);t.Well=Dt["default"];var jt=n(182),Lt=r(jt);t.FormControls=Lt;var Rt=n(266),Bt=r(Rt);t.utils=Bt},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t},t.__esModule=!0},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(21),l=r(s),u=a["default"].createClass({displayName:"Accordion",render:function(){return a["default"].createElement(l["default"],i({},this.props,{accordion:!0}),this.props.children)}});t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(5)["default"];t["default"]=i||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.__esModule=!0},function(e,t,n){e.exports={"default":n(6),__esModule:!0}},function(e,t,n){n(7),e.exports=n(10).Object.assign},function(e,t,n){var i=n(8);i(i.S+i.F,"Object",{assign:n(13)})},function(e,t,n){var i=n(9),r=n(10),o=n(11),a="prototype",s=function(e,t,n){var l,u,c,d=e&s.F,p=e&s.G,f=e&s.S,h=e&s.P,m=e&s.B,v=e&s.W,g=p?r:r[t]||(r[t]={}),y=p?i:f?i[t]:(i[t]||{})[a];p&&(n=t);for(l in n)u=!d&&y&&l in y,u&&l in g||(c=u?y[l]:n[l],g[l]=p&&"function"!=typeof y[l]?n[l]:m&&u?o(c,i):v&&y[l]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t);
};return t[a]=e[a],t}(c):h&&"function"==typeof c?o(Function.call,c):c,h&&((g[a]||(g[a]={}))[l]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(12);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(14),r=n(15),o=n(17);e.exports=n(19)(function(){var e=Object.assign,t={},n={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach(function(e){n[e]=e}),7!=e({},t)[i]||Object.keys(e({},n)).join("")!=r})?function(e,t){for(var n=r(e),a=arguments,s=a.length,l=1,u=i.getKeys,c=i.getSymbols,d=i.isEnum;s>l;)for(var p,f=o(a[l++]),h=c?u(f).concat(c(f)):u(f),m=h.length,v=0;m>v;)d.call(f,p=h[v++])&&(n[p]=f[p]);return n}:Object.assign},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){var i=n(16);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(18);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(t,n){t.exports=e},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(24),d=n(33),p=o(d),f=u["default"].createClass({displayName:"PanelGroup",propTypes:{accordion:u["default"].PropTypes.bool,activeKey:u["default"].PropTypes.any,className:u["default"].PropTypes.string,children:u["default"].PropTypes.node,defaultActiveKey:u["default"].PropTypes.any,onSelect:u["default"].PropTypes.func},getDefaultProps:function(){return{accordion:!1}},getInitialState:function(){var e=this.props.defaultActiveKey;return{activeKey:e}},render:function(){var e=c.getClassSet(this.props),t=this.props,n=t.className,o=i(t,["className"]);return this.props.accordion&&(o.role="tablist"),u["default"].createElement("div",r({},o,{className:s["default"](n,e),onSelect:null}),p["default"].map(o.children,this.renderPanel))},renderPanel:function(e,t){var n=null!=this.props.activeKey?this.props.activeKey:this.state.activeKey,i={bsStyle:e.props.bsStyle||this.props.bsStyle,key:e.key?e.key:t,ref:e.ref};return this.props.accordion&&(i.headerRole="tab",i.panelRole="tabpanel",i.collapsible=!0,i.expanded=e.props.eventKey===n,i.onSelect=this.handleSelect),l.cloneElement(e,i)},shouldComponentUpdate:function(){return!this._isChanging},handleSelect:function(e,t){t.preventDefault(),this.props.onSelect&&(this._isChanging=!0,this.props.onSelect(e,t),this._isChanging=!1),this.state.activeKey===e&&(e=null),this.setState({activeKey:e})}});t["default"]=c.bsClass("panel-group",f),e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},t.__esModule=!0},function(e,t,n){var i,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===r)for(var a in i)o.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(i=[],r=function(){return n}.apply(t,i),!(void 0!==r&&(e.exports=r)))}()},function(e,t,n){"use strict";function i(e){return function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];var r=n[n.length-1];return"function"==typeof r?e.apply(void 0,n):function(t){return e.apply(void 0,n.concat([t]))}}}function r(e,t){return void 0===e&&(e={}),(e.bsClass||"").trim()?void 0:f["default"](!1,"A `bsClass` prop is required for this component"),e.bsClass+(t?"-"+t:"")}function o(e){var t,n=(t={},t[r(e)]=!0,t);if(e.bsSize){var i=d["default"].SIZES[e.bsSize]||i;n[r(e,i)]=!0}return e.bsStyle&&(n[r(e,e.bsStyle)]=!0),n}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];m(n,e)}var s=n(4)["default"],l=n(1)["default"];t.__esModule=!0,t.prefix=r,t.getClassSet=o,t.addStyle=a;var u=n(20),c=n(25),d=l(c),p=n(32),f=l(p),h=i(function(e,t){var n=t.propTypes||(t.propTypes={}),i=t.defaultProps||(t.defaultProps={});return n.bsClass=u.PropTypes.string,i.bsClass=e,t});t.bsClass=h;var m=i(function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var i=n.STYLES||[],r=n.propTypes||{};e.forEach(function(e){-1===i.indexOf(e)&&i.push(e)});var o=u.PropTypes.oneOf(i);if(n.STYLES=o._values=i,n.propTypes=s({},r,{bsStyle:o}),void 0!==t){var a=n.defaultProps||(n.defaultProps={});a.bsStyle=t}return n});t.bsStyles=m;var v=i(function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var i=n.SIZES||[],r=n.propTypes||{};e.forEach(function(e){-1===i.indexOf(e)&&i.push(e)});var o=[];i.forEach(function(e){var t=d["default"].SIZES[e];t&&t!==e&&o.push(t),o.push(e)});var a=u.PropTypes.oneOf(o);return a._values=o,n.SIZES=i,n.propTypes=s({},r,{bsSize:a}),void 0!==t&&(n.defaultProps||(n.defaultProps={}),n.defaultProps.bsSize=t),n});t.bsSizes=v;var g=i;t._curry=g},function(e,t,n){"use strict";var i=n(5)["default"],r=n(26)["default"],o=n(28)["default"];t.__esModule=!0;var a=function(e){return i(r({values:function(){var e=this;return o(this).map(function(t){return e[t]})}}),e)},s={SIZES:{large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"},GRID_COLUMNS:12},l=a({LARGE:"large",MEDIUM:"medium",SMALL:"small",XSMALL:"xsmall"});t.Sizes=l;var u=a({SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"});t.State=u;var c="default";t.DEFAULT=c;var d="primary";t.PRIMARY=d;var p="link";t.LINK=p;var f="inverse";t.INVERSE=f,t["default"]=s},function(e,t,n){e.exports={"default":n(27),__esModule:!0}},function(e,t,n){var i=n(14);e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){e.exports={"default":n(29),__esModule:!0}},function(e,t,n){n(30),e.exports=n(10).Object.keys},function(e,t,n){var i=n(15);n(31)("keys",function(e){return function(t){return e(i(t))}})},function(e,t,n){var i=n(8),r=n(10),o=n(19);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=i},function(e,t,n){"use strict";function i(e,t,n){var i=0;return d["default"].Children.map(e,function(e){return d["default"].isValidElement(e)?t.call(n,e,i++):e})}function r(e,t,n){var i=0;d["default"].Children.forEach(e,function(e){d["default"].isValidElement(e)&&t.call(n,e,i++)})}function o(e){var t=0;return d["default"].Children.forEach(e,function(e){d["default"].isValidElement(e)&&++t}),t}function a(e,t,n){var i=0,r=[];return d["default"].Children.forEach(e,function(e){d["default"].isValidElement(e)&&t.call(n,e,i++)&&r.push(e)}),r}function s(e,t,n){var i=0,r=void 0;return d["default"].Children.forEach(e,function(e){r||d["default"].isValidElement(e)&&t.call(n,e,i++)&&(r=e)}),r}function l(e,t,n){var i=0,r=!1;return d["default"].Children.forEach(e,function(e){r||d["default"].isValidElement(e)&&t.call(n,e,i++)&&(r=!0)}),r}var u=n(1)["default"];t.__esModule=!0;var c=n(20),d=u(c);t["default"]={map:i,forEach:r,count:o,find:s,filter:a,some:l},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(35),c=r(u),d=n(25),p=n(24),f=l["default"].createClass({displayName:"Alert",propTypes:{onDismiss:l["default"].PropTypes.func,dismissAfter:c["default"](l["default"].PropTypes.number,"No longer supported."),closeLabel:l["default"].PropTypes.string},getDefaultProps:function(){return{closeLabel:"Close Alert"}},renderDismissButton:function(){return l["default"].createElement("button",{type:"button",className:"close",onClick:this.props.onDismiss,"aria-hidden":"true",tabIndex:"-1"},l["default"].createElement("span",null,"×"))},renderSrOnlyDismissButton:function(){return l["default"].createElement("button",{type:"button",className:"close sr-only",onClick:this.props.onDismiss},this.props.closeLabel)},render:function(){var e=p.getClassSet(this.props),t=!!this.props.onDismiss;return e[p.prefix(this.props,"dismissable")]=t,l["default"].createElement("div",i({},this.props,{role:"alert",className:a["default"](this.props.className,e)}),t?this.renderDismissButton():null,this.props.children,t?this.renderSrOnlyDismissButton():null)},componentDidMount:function(){this.props.dismissAfter&&this.props.onDismiss&&(this.dismissTimer=setTimeout(this.props.onDismiss,this.props.dismissAfter))},componentWillUnmount:function(){clearTimeout(this.dismissTimer)}});t["default"]=p.bsStyles(d.State.values(),d.State.INFO,p.bsClass("alert",f)),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return function(n,i,r){return null!=n[i]&&a["default"](!1,'"'+i+'" property of "'+r+'" has been deprecated.\n'+t),e(n,i,r)}}t.__esModule=!0,t["default"]=r;var o=n(36),a=i(o);e.exports=t["default"]},function(e,t,n){"use strict";var i=function(){};i=function(e,t,n){var i=arguments.length;n=new Array(i>2?i-2:0);for(var r=2;i>r;r++)n[r-2]=arguments[r];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var o=0,a="Warning: "+t.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(s){}}},e.exports=i},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(24),c=n(33),d=r(c),p=l["default"].createClass({displayName:"Badge",propTypes:{pullRight:l["default"].PropTypes.bool},getDefaultProps:function(){return{pullRight:!1,bsClass:"badge"}},hasContent:function(){var e=this.props.children;return d["default"].count(e)>0||l["default"].Children.count(e)>1||"string"==typeof e||"number"==typeof e},render:function(){var e,t=(e={"pull-right":this.props.pullRight},e[u.prefix(this.props)]=this.hasContent(),e);return l["default"].createElement("span",i({},this.props,{className:a["default"](this.props.className,t)}),this.props.children)}});t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(23),u=o(l),c=n(33),d=o(c),p=n(39),f=o(p),h=s["default"].createClass({displayName:"Breadcrumb",propTypes:{bsClass:s["default"].PropTypes.string},getDefaultProps:function(){return{bsClass:"breadcrumb"}},render:function(){var e=this.props,t=e.className,n=i(e,["className"]);return s["default"].createElement("ol",r({},n,{role:"navigation","aria-label":"breadcrumbs",className:u["default"](t,this.props.bsClass)}),d["default"].map(this.props.children,this.renderBreadcrumbItem))},renderBreadcrumbItem:function(e,t){return a.cloneElement(e,{key:e.key||t})}});h.Item=f["default"],t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(40),d=o(c),p=u["default"].createClass({displayName:"BreadcrumbItem",propTypes:{active:u["default"].PropTypes.bool,id:u["default"].PropTypes.oneOfType([u["default"].PropTypes.string,u["default"].PropTypes.number]),linkId:u["default"].PropTypes.oneOfType([u["default"].PropTypes.string,u["default"].PropTypes.number]),href:u["default"].PropTypes.string,title:u["default"].PropTypes.node,target:u["default"].PropTypes.string},getDefaultProps:function(){return{active:!1}},render:function(){var e=this.props,t=e.active,n=e.className,o=e.id,a=e.linkId,l=e.children,c=e.href,p=e.title,f=e.target,h=i(e,["active","className","id","linkId","children","href","title","target"]),m={href:c,title:p,target:f,id:a};return u["default"].createElement("li",{id:o,className:s["default"](n,{active:t})},t?u["default"].createElement("span",h,l):u["default"].createElement(d["default"],r({},h,m),l))}});t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return!e||"#"===e.trim()}var r=n(41)["default"],o=n(48)["default"],a=n(4)["default"],s=n(22)["default"],l=n(1)["default"];t.__esModule=!0;var u=n(20),c=l(u),d=n(49),p=l(d),f=function(e){function t(n){o(this,t),e.call(this,n),this.handleClick=this.handleClick.bind(this)}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.href,n=e.role,r=e.tabIndex,o=e.disabled,l=e.style,u=s(e,["href","role","tabIndex","disabled","style"]),d=this.props.componentClass||"a";return i(t)&&(n=n||"button",t=t||""),o&&(r=-1,l=a({pointerEvents:"none"},l)),c["default"].createElement(d,a({},u,{role:n,href:t,style:l,tabIndex:r,onClick:this.handleClick}))},t.prototype.handleClick=function(e){var t=this.props,n=t.disabled,r=t.href,o=t.onClick;return(n||i(r))&&e.preventDefault(),n?void e.stopPropagation():void(o&&o(e))},t}(c["default"].Component);t["default"]=f,f.propTypes={href:c["default"].PropTypes.string,onClick:c["default"].PropTypes.func,disabled:c["default"].PropTypes.bool,role:c["default"].PropTypes.string,tabIndex:c["default"].PropTypes.oneOfType([c["default"].PropTypes.number,c["default"].PropTypes.string]),componentClass:p["default"]},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(26)["default"],r=n(42)["default"];t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=i(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r?r(e,t):e.__proto__=t)},t.__esModule=!0},function(e,t,n){e.exports={"default":n(43),__esModule:!0}},function(e,t,n){n(44),e.exports=n(10).Object.setPrototypeOf},function(e,t,n){var i=n(8);i(i.S,"Object",{setPrototypeOf:n(45).set})},function(e,t,n){var i=n(14).getDesc,r=n(46),o=n(47),a=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(11)(Function.call,i(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(46);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){"use strict";t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){var i=s.errMsg(e,t,n,". Expected an Element `type`");if("function"!=typeof e[t]){if(a["default"].isValidElement(e[t]))return new Error(i+", not an actual Element");if("string"!=typeof e[t])return new Error(i+" such as a tag name or return value of React.createClass(...)")}}t.__esModule=!0;var o=n(20),a=i(o),s=n(50);t["default"]=s.createChainableTypeChecker(r),e.exports=t["default"]},function(e,t){"use strict";function n(e,t,n,i){return"Invalid prop '"+t+"' of value '"+e[t]+"'"+(" supplied to '"+n+"'"+i)}function i(e){function t(t,n,i,r){return r=r||"<<anonymous>>",null!=n[i]?e(n,i,r):t?new Error("Required prop '"+i+"' was not specified in '"+r+"'."):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}t.__esModule=!0,t.errMsg=n,t.createChainableTypeChecker=i},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(49),p=a(d),f=n(25),h=n(24),m=n(40),v=a(m),g=f.State.values().concat(f.DEFAULT,f.PRIMARY,f.LINK),y=["button","reset","submit"],b=function(e){function t(n,i){r(this,t),e.call(this,n,i)}return i(t,e),t.prototype.render=function(){var e,t=this.props.navDropdown?{}:h.getClassSet(this.props),n=void 0,i=h.prefix(this.props,"block");return t=o((e={active:this.props.active},e[i]=this.props.block,e),t),this.props.navItem?this.renderNavItem(t):(n=this.props.href||this.props.target||this.props.navDropdown?"renderAnchor":"renderButton",this[n](t))},t.prototype.renderAnchor=function(e){var t=this.props,n=t.disabled,i=t.href;return e.disabled=n,c["default"].createElement(v["default"],o({},this.props,{href:i||"#",className:l["default"](this.props.className,e)}),this.props.children)},t.prototype.renderButton=function(e){var t=this.props.componentClass||"button";return c["default"].createElement(t,o({},this.props,{type:this.props.type||"button",className:l["default"](this.props.className,e)}),this.props.children)},t.prototype.renderNavItem=function(e){var t={active:this.props.active};return c["default"].createElement("li",{className:l["default"](t)},this.renderAnchor(e))},t}(c["default"].Component);b.propTypes={active:c["default"].PropTypes.bool,disabled:c["default"].PropTypes.bool,block:c["default"].PropTypes.bool,navItem:c["default"].PropTypes.bool,navDropdown:c["default"].PropTypes.bool,onClick:c["default"].PropTypes.func,componentClass:p["default"],href:c["default"].PropTypes.string,target:c["default"].PropTypes.string,type:c["default"].PropTypes.oneOf(y)},b.defaultProps={active:!1,block:!1,disabled:!1,navItem:!1,navDropdown:!1},b.types=y,t["default"]=h.bsStyles(g,f.DEFAULT,h.bsSizes([f.Sizes.LARGE,f.Sizes.SMALL,f.Sizes.XSMALL],h.bsClass("btn",b))),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(53),c=r(u),d=n(24),p=n(51),f=r(p),h=l["default"].createClass({displayName:"ButtonGroup",propTypes:{vertical:l["default"].PropTypes.bool,justified:l["default"].PropTypes.bool,block:c["default"](l["default"].PropTypes.bool,function(e){return e.block&&!e.vertical?new Error("The block property requires the vertical property to be set to have any effect"):void 0})},getDefaultProps:function(){return{block:!1,justified:!1,vertical:!1}},render:function(){var e=d.getClassSet(this.props);return e[d.prefix(this.props)]=!this.props.vertical,e[d.prefix(this.props,"vertical")]=this.props.vertical,e[d.prefix(this.props,"justified")]=this.props.justified,e[d.prefix(f["default"].defaultProps,"block")]=this.props.block,l["default"].createElement("div",i({},this.props,{className:a["default"](this.props.className,e)}),this.props.children)}});t["default"]=d.bsClass("btn-group",h),e.exports=t["default"]},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(void 0===t)throw new Error("No validations provided");if(t.some(function(e){return"function"!=typeof e}))throw new Error("Invalid arguments, must be functions");if(0===t.length)throw new Error("No validations provided");return function(e,n,i){for(var r=0;r<t.length;r++){var o=t[r](e,n,i);if(void 0!==o&&null!==o)return o}}}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(20),u=s(l),c=n(51),d=s(c),p=n(55),f=s(p),h=n(56),m=s(h),v=n(58),g=s(v),y=n(60),b=s(y),_=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.renderFormGroup=function(e){var t=this.props,n=(t.bsStyle,t.value,o(t,["bsStyle","value"]));return u["default"].createElement(f["default"],n,e)},t.prototype.renderInput=function(){var e=this.props,t=e.children,n=e.value,i=o(e,["children","value"]),r=t?t:n;return u["default"].createElement(d["default"],a({},i,{componentClass:"input",ref:"input",key:"input",value:r}))},t}(m["default"]);_.types=d["default"].types,_.defaultProps={type:"button"},_.propTypes={type:u["default"].PropTypes.oneOf(_.types),bsStyle:function(){return null},children:g["default"],value:g["default"]},t["default"]=b["default"].wrapper(_,"`<ButtonInput>`","`<Button>` directly"),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(35),f=s(p),h=n(25),m=n(24),v=n(33),g=s(v),y={controlId:d["default"].PropTypes.string,standalone:f["default"](d["default"].PropTypes.bool,"Use a `<FormControl>` or `<InputGroup>` directly."),validationState:d["default"].PropTypes.oneOf(["success","warning","error"]),bsStyle:f["default"](d["default"].PropTypes.oneOf(["success","warning","error"]),"Use `validationState`"),hasFeedback:f["default"](d["default"].PropTypes.bool,"Use a `<FormControl.Feedback>` element."),groupClassName:f["default"](d["default"].PropTypes.string,"Use `className`.")},b={$bs_formGroup:d["default"].PropTypes.object.isRequired},_=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.controlId,n=e.bsStyle,i=e.validationState,r=void 0===i?n:i;return{$bs_formGroup:{controlId:t,validationState:r}}},t.prototype.hasFeedback=function(e){var t=this;return g["default"].some(e,function(e){return"feedback"===e.props.bsRole||e.props.children&&t.hasFeedback(e.props.children)})},t.prototype.render=function(){var e=this.props,t=e.standalone,n=e.bsStyle,i=e.validationState,r=void 0===i?n:i,s=e.groupClassName,l=e.className,c=void 0===l?s:l,p=e.children,f=e.hasFeedback,h=void 0===f?this.hasFeedback(p):f,v=a(e,["standalone","bsStyle","validationState","groupClassName","className","children","hasFeedback"]);delete v.bsClass,delete v.bsSize,delete v.controlId;var g=o({},!t&&m.getClassSet(this.props),{"has-feedback":h});return r&&(g["has-"+r]=!0),d["default"].createElement("div",o({},v,{className:u["default"](c,g)}),p)},t}(d["default"].Component);_.propTypes=y,_.childContextTypes=b,t["default"]=m.bsClass("form-group",m.bsSizes([h.Sizes.LARGE,h.Sizes.SMALL],_)),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(55),p=a(d),f=n(57),h=a(f),m=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.getInputDOMNode=function(){return this.refs.input},t.prototype.getValue=function(){if("static"===this.props.type)return this.props.value;if(this.props.type)return"select"===this.props.type&&this.props.multiple?this.getSelectedOptions():this.getInputDOMNode().value;throw new Error("Cannot use getValue without specifying input type.")},t.prototype.getChecked=function(){return this.getInputDOMNode().checked},t.prototype.getSelectedOptions=function(){var e=[];return Array.prototype.forEach.call(this.getInputDOMNode().getElementsByTagName("option"),function(t){if(t.selected){var n=t.getAttribute("value")||t.innerHtml;e.push(n)}}),e},t.prototype.isCheckboxOrRadio=function(){return"checkbox"===this.props.type||"radio"===this.props.type},t.prototype.isFile=function(){return"file"===this.props.type},t.prototype.renderInputGroup=function(e){var t=this.props.addonBefore?c["default"].createElement("span",{className:"input-group-addon",key:"addonBefore"},this.props.addonBefore):null,n=this.props.addonAfter?c["default"].createElement("span",{className:"input-group-addon",key:"addonAfter"},this.props.addonAfter):null,i=this.props.buttonBefore?c["default"].createElement("span",{className:"input-group-btn"},this.props.buttonBefore):null,r=this.props.buttonAfter?c["default"].createElement("span",{className:"input-group-btn"},this.props.buttonAfter):null,o=void 0;switch(this.props.bsSize){case"small":o="input-group-sm";break;case"large":o="input-group-lg"}return t||n||i||r?c["default"].createElement("div",{className:l["default"](o,"input-group"),key:"input-group"},t,i,e,n,r):e},t.prototype.renderIcon=function(){if(!this.props.hasFeedback)return null;if(this.props.feedbackIcon)return c["default"].cloneElement(this.props.feedbackIcon,{formControlFeedback:!0});switch(this.props.bsStyle){case"success":return c["default"].createElement(h["default"],{formControlFeedback:!0,glyph:"ok",key:"icon"});case"warning":return c["default"].createElement(h["default"],{formControlFeedback:!0,glyph:"warning-sign",key:"icon"});case"error":return c["default"].createElement(h["default"],{formControlFeedback:!0,glyph:"remove",key:"icon"});default:return c["default"].createElement("span",{className:"form-control-feedback",key:"icon"})}},t.prototype.renderHelp=function(){return this.props.help?c["default"].createElement("span",{className:"help-block",key:"help"},this.props.help):null},t.prototype.renderCheckboxAndRadioWrapper=function(e){var t={checkbox:"checkbox"===this.props.type,radio:"radio"===this.props.type};return c["default"].createElement("div",{className:l["default"](t),key:"checkboxRadioWrapper"},e)},t.prototype.renderWrapper=function(e){return this.props.wrapperClassName?c["default"].createElement("div",{className:this.props.wrapperClassName,key:"wrapper"},e):e},t.prototype.renderLabel=function(e){var t={"control-label":!this.isCheckboxOrRadio()};return t[this.props.labelClassName]=this.props.labelClassName,this.props.label?c["default"].createElement("label",{htmlFor:this.props.id,className:l["default"](t),key:"label"},e,this.props.label):e},t.prototype.renderInput=function(){if(!this.props.type)return this.props.children;switch(this.props.type){case"select":return c["default"].createElement("select",o({},this.props,{className:l["default"](this.props.className,"form-control"),ref:"input",key:"input"}),this.props.children);case"textarea":return c["default"].createElement("textarea",o({},this.props,{className:l["default"](this.props.className,"form-control"),ref:"input",key:"input"}));case"static":return c["default"].createElement("p",o({},this.props,{className:l["default"](this.props.className,"form-control-static"),ref:"input",key:"input"}),this.props.value);default:var e=this.isCheckboxOrRadio()||this.isFile()?"":"form-control";return c["default"].createElement("input",o({},this.props,{className:l["default"](this.props.className,e),ref:"input",key:"input"}))}},t.prototype.renderFormGroup=function(e){return c["default"].createElement(p["default"],this.props,e)},t.prototype.renderChildren=function(){return this.isCheckboxOrRadio()?this.renderWrapper([this.renderCheckboxAndRadioWrapper(this.renderLabel(this.renderInput())),this.renderHelp()]):[this.renderLabel(),this.renderWrapper([this.renderInputGroup(this.renderInput()),this.renderIcon(),this.renderHelp()])]},t.prototype.render=function(){var e=this.renderChildren();return this.renderFormGroup(e)},t}(c["default"].Component);m.propTypes={type:c["default"].PropTypes.string,label:c["default"].PropTypes.node,help:c["default"].PropTypes.node,addonBefore:c["default"].PropTypes.node,addonAfter:c["default"].PropTypes.node,buttonBefore:c["default"].PropTypes.node,buttonAfter:c["default"].PropTypes.node,bsSize:c["default"].PropTypes.oneOf(["small","medium","large"]),bsStyle:c["default"].PropTypes.oneOf(["success","warning","error"]),hasFeedback:c["default"].PropTypes.bool,feedbackIcon:c["default"].PropTypes.node,id:c["default"].PropTypes.oneOfType([c["default"].PropTypes.string,c["default"].PropTypes.number]),groupClassName:c["default"].PropTypes.string,wrapperClassName:c["default"].PropTypes.string,labelClassName:c["default"].PropTypes.string,multiple:c["default"].PropTypes.bool,disabled:c["default"].PropTypes.bool,value:c["default"].PropTypes.any},m.defaultProps={disabled:!1,hasFeedback:!1,multiple:!1},t["default"]=m,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(35),c=r(u),d=l["default"].createClass({displayName:"Glyphicon",propTypes:{bsClass:l["default"].PropTypes.string,glyph:l["default"].PropTypes.string.isRequired,formControlFeedback:c["default"](l["default"].PropTypes.bool,"Use `<FormControl.Feedback>`.")},getDefaultProps:function(){return{bsClass:"glyphicon"}},render:function(){var e,t=a["default"](this.props.className,(e={},e[this.props.bsClass]=!0,e["glyphicon-"+this.props.glyph]=!0,e["form-control-feedback"]=this.props.formControlFeedback,e));return l["default"].createElement("span",i({},this.props,{className:t}),this.props.children)}});t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t,n){var i=l["default"]("children","value")(e,t,n);return i||(i=a["default"].PropTypes.node(e,t,n)),i}var r=n(1)["default"];t.__esModule=!0,t["default"]=i;var o=n(20),a=r(o),s=n(59),l=r(s);e.exports=t["default"]},function(e,t){"use strict";function n(){function e(e,t,i){var r=n.map(function(t){return e[t]}).reduce(function(e,t){return e+(void 0!==t?1:0)},0);if(r>1){var o=n[0],a=n.slice(1),s=a.join(", ")+" and "+o;return new Error("Invalid prop '"+t+"', only one of the following may be provided: "+s)}}for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return e}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t,n){var i=void 0;"object"==typeof e?i=e.message:(i=e+" is deprecated. Use "+t+" instead.",n&&(i+="\nYou can read more about it at "+n)),c[i]||(u["default"](!1,i),c[i]=!0)}function r(){c={}}var o=n(41)["default"],a=n(48)["default"],s=n(1)["default"];t.__esModule=!0,t._resetWarned=r;var l=n(36),u=s(l),c={};i.wrapper=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return function(e){function t(){a(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.componentWillMount=function(){if(i.apply(void 0,n),e.prototype.componentWillMount){for(var t,r=arguments.length,o=Array(r),a=0;r>a;a++)o[a]=arguments[a];(t=e.prototype.componentWillMount).call.apply(t,[this].concat(o))}},t}(e)},t["default"]=i},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(24),c=n(51),d=r(c),p=l["default"].createClass({displayName:"ButtonToolbar",propTypes:{bsSize:d["default"].propTypes.bsSize},getDefaultProps:function(){return{bsClass:"btn-toolbar"}},render:function(){var e=u.getClassSet(this.props);return l["default"].createElement("div",i({},this.props,{role:"toolbar",className:a["default"](this.props.className,e)}),this.props.children)}});t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(5)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(24),d=n(33),p=o(d),f=n(63),h=o(f),m=n(64),v=o(m),g=n(57),y=o(g),b=u["default"].createClass({displayName:"Carousel",propTypes:{slide:u["default"].PropTypes.bool,indicators:u["default"].PropTypes.bool,interval:u["default"].PropTypes.number,controls:u["default"].PropTypes.bool,
pauseOnHover:u["default"].PropTypes.bool,wrap:u["default"].PropTypes.bool,onSelect:u["default"].PropTypes.func,onSlideEnd:u["default"].PropTypes.func,activeIndex:u["default"].PropTypes.number,defaultActiveIndex:u["default"].PropTypes.number,direction:u["default"].PropTypes.oneOf(["prev","next"]),prevIcon:u["default"].PropTypes.node,nextIcon:u["default"].PropTypes.node},getDefaultProps:function(){return{bsClass:"carousel",slide:!0,interval:5e3,pauseOnHover:!0,wrap:!0,indicators:!0,controls:!0,prevIcon:u["default"].createElement(y["default"],{glyph:"chevron-left"}),nextIcon:u["default"].createElement(y["default"],{glyph:"chevron-right"})}},getInitialState:function(){return{activeIndex:null==this.props.defaultActiveIndex?0:this.props.defaultActiveIndex,previousActiveIndex:null,direction:null}},getDirection:function(e,t){return e===t?null:e>t?"prev":"next"},componentWillReceiveProps:function(e){var t=this.getActiveIndex();null!=e.activeIndex&&e.activeIndex!==t&&(clearTimeout(this.timeout),this.setState({previousActiveIndex:t,direction:null!=e.direction?e.direction:this.getDirection(t,e.activeIndex)}))},componentDidMount:function(){this.waitForNext()},componentWillUnmount:function(){clearTimeout(this.timeout)},next:function(e){e&&e.preventDefault();var t=this.getActiveIndex()+1,n=p["default"].count(this.props.children);if(t>n-1){if(!this.props.wrap)return;t=0}this.handleSelect(t,e,"next")},prev:function(e){e&&e.preventDefault();var t=this.getActiveIndex()-1;if(0>t){if(!this.props.wrap)return;t=p["default"].count(this.props.children)-1}this.handleSelect(t,e,"prev")},pause:function(){this.isPaused=!0,clearTimeout(this.timeout)},play:function(){this.isPaused=!1,this.waitForNext()},waitForNext:function(){!this.isPaused&&this.props.slide&&this.props.interval&&null==this.props.activeIndex&&(this.timeout=setTimeout(this.next,this.props.interval))},handleMouseOver:function(){this.props.pauseOnHover&&this.pause()},handleMouseOut:function(){this.isPaused&&this.play()},render:function(){var e,t=(e={},e[c.prefix(this.props)]=!0,e.slide=this.props.slide,e);return u["default"].createElement("div",i({},this.props,{className:s["default"](this.props.className,t),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut}),this.props.indicators?this.renderIndicators():null,u["default"].createElement("div",{ref:"inner",className:c.prefix(this.props,"inner")},p["default"].map(this.props.children,this.renderItem)),this.props.controls?this.renderControls():null)},renderPrev:function(){var e="left "+c.prefix(this.props,"control");return u["default"].createElement("a",{className:e,href:"#prev",key:0,onClick:this.prev},this.props.prevIcon)},renderNext:function(){var e="right "+c.prefix(this.props,"control");return u["default"].createElement("a",{className:e,href:"#next",key:1,onClick:this.next},this.props.nextIcon)},renderControls:function(){if(!this.props.wrap){var e=this.getActiveIndex(),t=p["default"].count(this.props.children);return[0!==e?this.renderPrev():null,e!==t-1?this.renderNext():null]}return[this.renderPrev(),this.renderNext()]},renderIndicator:function(e,t){var n=this,i=t===this.getActiveIndex()?"active":null;return u["default"].createElement("li",{key:t,className:i,onClick:function(e){return n.handleSelect(t,e,null)}})},renderIndicators:function(){var e=this,t=[];return p["default"].forEach(this.props.children,function(n,i){t.push(e.renderIndicator(n,i)," ")},this),u["default"].createElement("ol",{className:c.prefix(this.props,"indicators")},t)},getActiveIndex:function(){return null!=this.props.activeIndex?this.props.activeIndex:this.state.activeIndex},handleItemAnimateOutEnd:function(){var e=this;this.setState({previousActiveIndex:null,direction:null},function(){e.waitForNext(),e.props.onSlideEnd&&e.props.onSlideEnd()})},renderItem:function(e,t){var n=this.getActiveIndex(),i=t===n,r=null!=this.state.previousActiveIndex&&this.state.previousActiveIndex===t&&this.props.slide;return l.cloneElement(e,{active:i,ref:e.ref,key:e.key?e.key:t,index:t,animateOut:r,animateIn:i&&null!=this.state.previousActiveIndex&&this.props.slide,direction:this.state.direction,onAnimateOutEnd:r?this.handleItemAnimateOutEnd:null})},handleSelect:function(e,t,n){if(clearTimeout(this.timeout),this.isMounted()){var i=this.getActiveIndex();n=n||this.getDirection(i,e);var r=this.props.onSelect;if(r&&(r.length>1?(t.persist(),t.direction=n,r(e,t)):r(e)),null==this.props.activeIndex&&e!==i){if(null!=this.state.previousActiveIndex)return;this.setState({activeIndex:e,previousActiveIndex:i,direction:n})}}}});b=r(b,{Caption:h["default"],Item:v["default"]}),t["default"]=b,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(49),c=r(u),d=l["default"].createClass({displayName:"Carousel.Caption",propTypes:{componentClass:c["default"]},getDefaultProps:function(){return{componentClass:"div"}},render:function(){var e=this.props.componentClass;return l["default"].createElement(e,i({},this.props,{className:a["default"](this.props.className,"carousel-caption")}),this.props.children)}});t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(65),c=r(u),d=n(24),p=n(66),f=r(p),h=l["default"].createClass({displayName:"CarouselItem",propTypes:{direction:l["default"].PropTypes.oneOf(["prev","next"]),onAnimateOutEnd:l["default"].PropTypes.func,active:l["default"].PropTypes.bool,animateIn:l["default"].PropTypes.bool,animateOut:l["default"].PropTypes.bool,caption:l["default"].PropTypes.node,index:l["default"].PropTypes.number},getInitialState:function(){return{direction:null}},getDefaultProps:function(){return{bsStyle:"carousel",active:!1,animateIn:!1,animateOut:!1}},handleAnimateOutEnd:function(){this.props.onAnimateOutEnd&&this.isMounted()&&this.props.onAnimateOutEnd(this.props.index)},componentWillReceiveProps:function(e){this.props.active!==e.active&&this.setState({direction:null})},componentDidUpdate:function(e){!this.props.active&&e.active&&f["default"].addEndEventListener(c["default"].findDOMNode(this),this.handleAnimateOutEnd),this.props.active!==e.active&&setTimeout(this.startAnimation,20)},startAnimation:function(){this.isMounted()&&this.setState({direction:"prev"===this.props.direction?"right":"left"})},render:function(){var e={item:!0,active:this.props.active&&!this.props.animateIn||this.props.animateOut,next:this.props.active&&this.props.animateIn&&"next"===this.props.direction,prev:this.props.active&&this.props.animateIn&&"prev"===this.props.direction};return this.state.direction&&(this.props.animateIn||this.props.animateOut)&&(e[this.state.direction]=!0),l["default"].createElement("div",i({},this.props,{className:a["default"](this.props.className,e)}),this.props.children,this.props.caption?this.renderCaption():null)},renderCaption:function(){var e=d.prefix(this.props,"caption");return l["default"].createElement("div",{className:e},this.props.caption)}});t["default"]=h,e.exports=t["default"]},function(e,n){e.exports=t},function(e,t){"use strict";function n(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete a.animationend.animation,"TransitionEvent"in window||delete a.transitionend.transition;for(var n in a){var i=a[n];for(var r in i)if(r in t){s.push(i[r]);break}}}function i(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}t.__esModule=!0;var o=!("undefined"==typeof window||!window.document||!window.document.createElement),a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[];o&&n();var l={addEndEventListener:function(e,t){return 0===s.length?void window.setTimeout(t,0):void s.forEach(function(n){i(e,n,t)})},removeEndEventListener:function(e,t){0!==s.length&&s.forEach(function(n){r(e,n,t)})}};t["default"]=l,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(36),f=s(p),h=n(24),m={inline:d["default"].PropTypes.bool,disabled:d["default"].PropTypes.bool,validationState:d["default"].PropTypes.oneOf(["success","warning","error"]),inputRef:d["default"].PropTypes.func},v={inline:!1,disabled:!1},g=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.inline,n=e.disabled,i=e.validationState,r=e.inputRef,s=e.className,l=e.style,c=e.children,p=a(e,["inline","disabled","validationState","inputRef","className","style","children"]);delete p.bsClass;var m=d["default"].createElement("input",o({},p,{ref:r,type:"checkbox",disabled:n}));if(t){var v,g=(v={},v[h.prefix(this.props,"inline")]=!0,v.disabled=n,v);return f["default"](!i,"`validationState` is ignored on `<Checkbox inline>`. To display validation state on an inline checkbox, set `validationState` on a parent `<FormGroup>` or other element instead."),d["default"].createElement("label",{className:u["default"](s,g),style:l},m,c)}var y=o({},h.getClassSet(this.props),{disabled:n});return i&&(y["has-"+i]=!0),d["default"].createElement("div",{className:u["default"](s,y),style:l},d["default"].createElement("label",null,m,c))},t}(d["default"].Component);g.propTypes=m,g.defaultProps=v,t["default"]=h.bsClass("checkbox",g),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(28)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(23),u=o(l),c=n(25),d=o(c),p=n(49),f=o(p),h=s["default"].createClass({displayName:"Clearfix",propTypes:{componentClass:f["default"],visibleXsBlock:s["default"].PropTypes.bool,visibleSmBlock:s["default"].PropTypes.bool,visibleMdBlock:s["default"].PropTypes.bool,visibleLgBlock:s["default"].PropTypes.bool},getDefaultProps:function(){return{componentClass:"div"}},render:function(){var e=this,t=this.props.componentClass,n={};return r(d["default"].SIZES).forEach(function(t){var i=d["default"].SIZES[t];n["visible-"+i+"-block"]=e.props["visible"+i.charAt(0).toUpperCase()+i.slice(1)+"Block"]},this),s["default"].createElement(t,i({},this.props,{className:u["default"](this.props.className,"clearfix",n)}),this.props.children)}});t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(36),f=s(p),h=n(24),m={htmlFor:d["default"].PropTypes.string,srOnly:d["default"].PropTypes.bool},v={srOnly:!1},g={$bs_formGroup:d["default"].PropTypes.object},y=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,i=n.htmlFor,r=void 0===i?t:i,s=n.srOnly,l=n.className,c=a(n,["htmlFor","srOnly","className"]);f["default"](null==t||r===t,"`controlId` is ignored on `<ControlLabel>` when `htmlFor` is specified."),delete c.bsClass;var p=o({},h.getClassSet(this.props),{"sr-only":s});return d["default"].createElement("label",o({},c,{htmlFor:r,className:u["default"](l,p)}))},t}(d["default"].Component);y.propTypes=m,y.defaultProps=v,y.contextTypes=g,t["default"]=h.bsClass("control-label",y),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(28)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(23),u=o(l),c=n(25),d=o(c),p=n(49),f=o(p),h=s["default"].createClass({displayName:"Col",propTypes:{xs:s["default"].PropTypes.number,sm:s["default"].PropTypes.number,md:s["default"].PropTypes.number,lg:s["default"].PropTypes.number,xsHidden:s["default"].PropTypes.bool,smHidden:s["default"].PropTypes.bool,mdHidden:s["default"].PropTypes.bool,lgHidden:s["default"].PropTypes.bool,xsOffset:s["default"].PropTypes.number,smOffset:s["default"].PropTypes.number,mdOffset:s["default"].PropTypes.number,lgOffset:s["default"].PropTypes.number,xsPush:s["default"].PropTypes.number,smPush:s["default"].PropTypes.number,mdPush:s["default"].PropTypes.number,lgPush:s["default"].PropTypes.number,xsPull:s["default"].PropTypes.number,smPull:s["default"].PropTypes.number,mdPull:s["default"].PropTypes.number,lgPull:s["default"].PropTypes.number,componentClass:f["default"]},getDefaultProps:function(){return{componentClass:"div"}},render:function(){var e=this,t=this.props.componentClass,n={};return r(d["default"].SIZES).forEach(function(t){var i=d["default"].SIZES[t],r=i,o=i+"-";e.props[r]&&(n["col-"+o+e.props[r]]=!0),n["hidden-"+i]=e.props[i+"Hidden"],r=i+"Offset",o=i+"-offset-",e.props[r]>=0&&(n["col-"+o+e.props[r]]=!0),r=i+"Push",o=i+"-push-",e.props[r]>=0&&(n["col-"+o+e.props[r]]=!0),r=i+"Pull",o=i+"-pull-",e.props[r]>=0&&(n["col-"+o+e.props[r]]=!0)},this),s["default"].createElement(t,i({},this.props,{className:u["default"](this.props.className,n)}),this.props.children)}});t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){var n=t["offset"+y(e)],i=_[e];return n+parseInt(u["default"](t,i[0]),10)+parseInt(u["default"](t,i[1]),10)}var r=n(41)["default"],o=n(48)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(72),u=s(l),c=n(20),d=s(c),p=n(23),f=s(p),h=n(80),m=s(h),v=n(84),g=s(v),y=function(e){return e[0].toUpperCase()+e.substr(1)},b=function(e){return e.offsetHeight},_={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]},w=function(e){function t(n,i){o(this,t),e.call(this,n,i),this.onEnterListener=this.handleEnter.bind(this),this.onEnteringListener=this.handleEntering.bind(this),this.onEnteredListener=this.handleEntered.bind(this),this.onExitListener=this.handleExit.bind(this),this.onExitingListener=this.handleExiting.bind(this)}return r(t,e),t.prototype.render=function(){var e=g["default"](this.onEnterListener,this.props.onEnter),t=g["default"](this.onEnteringListener,this.props.onEntering),n=g["default"](this.onEnteredListener,this.props.onEntered),i=g["default"](this.onExitListener,this.props.onExit),r=g["default"](this.onExitingListener,this.props.onExiting);return d["default"].createElement(m["default"],a({ref:"transition"},this.props,{"aria-expanded":this.props.role?this.props["in"]:null,className:f["default"](this.props.className,{width:"width"===this._dimension()}),exitedClassName:"collapse",exitingClassName:"collapsing",enteredClassName:"collapse in",enteringClassName:"collapsing",onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,onExited:this.props.onExited}),this.props.children)},t.prototype.handleEnter=function(e){var t=this._dimension();e.style[t]="0"},t.prototype.handleEntering=function(e){var t=this._dimension();e.style[t]=this._getScrollDimensionValue(e,t)},t.prototype.handleEntered=function(e){var t=this._dimension();e.style[t]=null},t.prototype.handleExit=function(e){var t=this._dimension();e.style[t]=this.props.getDimensionValue(t,e)+"px"},t.prototype.handleExiting=function(e){var t=this._dimension();b(e),e.style[t]="0"},t.prototype._dimension=function(){return"function"==typeof this.props.dimension?this.props.dimension():this.props.dimension},t.prototype._getTransitionInstance=function(){return this.refs.transition},t.prototype._getScrollDimensionValue=function(e,t){return e["scroll"+y(t)]+"px"},t}(d["default"].Component);w.propTypes={"in":d["default"].PropTypes.bool,unmountOnExit:d["default"].PropTypes.bool,transitionAppear:d["default"].PropTypes.bool,timeout:d["default"].PropTypes.number,onEnter:d["default"].PropTypes.func,onEntering:d["default"].PropTypes.func,onEntered:d["default"].PropTypes.func,onExit:d["default"].PropTypes.func,onExiting:d["default"].PropTypes.func,onExited:d["default"].PropTypes.func,dimension:d["default"].PropTypes.oneOfType([d["default"].PropTypes.oneOf(["height","width"]),d["default"].PropTypes.func]),getDimensionValue:d["default"].PropTypes.func,role:d["default"].PropTypes.string},w.defaultProps={"in":!1,timeout:300,unmountOnExit:!1,transitionAppear:!1,dimension:"height",getDimensionValue:i},t["default"]=w,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(73),r=n(75),o=n(77),a=n(79),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var l="",u=t;if("string"==typeof t){if(void 0===n)return e.style[i(t)]||o(e).getPropertyValue(r(t));(u={})[t]=n}for(var c in u)s.call(u,c)&&(u[c]||0===u[c]?l+=r(c)+":"+u[c]+";":a(e,r(c)));e.style.cssText+=";"+l}},function(e,t,n){"use strict";var i=n(74),r=/^-ms-/;e.exports=function(e){return i(e.replace(r,"ms-"))}},function(e,t){"use strict";var n=/-(.)/g;e.exports=function(e){return e.replace(n,function(e,t){return t.toUpperCase()})}},function(e,t,n){"use strict";var i=n(76),r=/^ms-/;e.exports=function(e){return i(e).replace(r,"-ms-")}},function(e,t){"use strict";var n=/([A-Z])/g;e.exports=function(e){return e.replace(n,"-$1").toLowerCase()}},function(e,t,n){"use strict";var i=n(78),r=n(73),o=i.interopRequireDefault(r),a=/^(top|right|bottom|left)$/,s=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;t=(0,o["default"])(t),"float"==t&&(t="styleFloat");var i=e.currentStyle[t]||null;if(null==i&&n&&n[t]&&(i=n[t]),s.test(i)&&!a.test(t)){var r=n.left,l=e.runtimeStyle,u=l&&l.left;u&&(l.left=e.currentStyle.left),n.left="fontSize"===t?"1em":i,i=n.pixelLeft+"px",n.left=r,u&&(l.left=u)}return i}}}},function(e,t,n){var i,r,o;!function(n,a){r=[t],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e){var t=e;t.interopRequireDefault=function(e){return e&&e.__esModule?e:{"default":e}},t._extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}})},function(e,t){"use strict";e.exports=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=n(20),c=i(u),d=n(65),p=i(d),f=n(81),h=i(f),m=n(83),v=i(m),g=n(23),y=i(g),b=h["default"].end,_=0;t.UNMOUNTED=_;var w=1;t.EXITED=w;var C=2;t.ENTERING=C;var E=3;t.ENTERED=E;var x=4;t.EXITING=x;var T=function(e){function t(n,i){o(this,t),e.call(this,n,i);var r=void 0;r=n["in"]?n.transitionAppear?w:E:n.unmountOnExit?_:w,this.state={status:r},this.nextCallback=null}return a(t,e),t.prototype.componentDidMount=function(){this.props.transitionAppear&&this.props["in"]&&this.performEnter(this.props)},t.prototype.componentWillReceiveProps=function(e){e["in"]&&this.props.unmountOnExit?this.state.status===_&&this.setState({status:w}):this._needsUpdate=!0},t.prototype.componentDidUpdate=function(){var e=this.state.status;return this.props.unmountOnExit&&e===w?void(this.props["in"]?this.performEnter(this.props):this.setState({status:_})):void(this._needsUpdate&&(this._needsUpdate=!1,this.props["in"]?e===x?this.performEnter(this.props):e===w&&this.performEnter(this.props):(e===C||e===E)&&this.performExit(this.props)))},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.performEnter=function(e){var t=this;this.cancelNextCallback();var n=p["default"].findDOMNode(this);e.onEnter(n),this.safeSetState({status:C},function(){t.props.onEntering(n),t.onTransitionEnd(n,function(){t.safeSetState({status:E},function(){t.props.onEntered(n)})})})},t.prototype.performExit=function(e){var t=this;this.cancelNextCallback();var n=p["default"].findDOMNode(this);e.onExit(n),this.safeSetState({status:x},function(){t.props.onExiting(n),t.onTransitionEnd(n,function(){t.safeSetState({status:w},function(){t.props.onExited(n)})})})},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){this.setState(e,this.setNextCallback(t))},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t){this.setNextCallback(t),e?(v["default"](e,b,this.nextCallback),setTimeout(this.nextCallback,this.props.timeout)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===_)return null;var n=this.props,i=n.children,o=n.className,a=r(n,["children","className"]);Object.keys(t.propTypes).forEach(function(e){return delete a[e]});var s=void 0;e===w?s=this.props.exitedClassName:e===C?s=this.props.enteringClassName:e===E?s=this.props.enteredClassName:e===x&&(s=this.props.exitingClassName);var u=c["default"].Children.only(i);return c["default"].cloneElement(u,l({},a,{className:y["default"](u.props.className,o,s)}))},t}(c["default"].Component);T.propTypes={"in":c["default"].PropTypes.bool,unmountOnExit:c["default"].PropTypes.bool,transitionAppear:c["default"].PropTypes.bool,timeout:c["default"].PropTypes.number,exitedClassName:c["default"].PropTypes.string,exitingClassName:c["default"].PropTypes.string,enteredClassName:c["default"].PropTypes.string,enteringClassName:c["default"].PropTypes.string,onEnter:c["default"].PropTypes.func,onEntering:c["default"].PropTypes.func,onEntered:c["default"].PropTypes.func,onExit:c["default"].PropTypes.func,onExiting:c["default"].PropTypes.func,onExited:c["default"].PropTypes.func},T.displayName="Transition",T.defaultProps={"in":!1,unmountOnExit:!1,transitionAppear:!1,timeout:5e3,onEnter:s,onEntering:s,onEntered:s,onExit:s,onExiting:s,onExited:s},t["default"]=T},function(e,t,n){"use strict";function i(){var e,t="",n={O:"otransitionend",Moz:"transitionend",Webkit:"webkitTransitionEnd",ms:"MSTransitionEnd"},i=document.createElement("div");for(var r in n)if(u.call(n,r)&&void 0!==i.style[r+"TransitionProperty"]){t="-"+r.toLowerCase()+"-",e=n[r];break}return e||void 0===i.style.transitionProperty||(e="transitionend"),{end:e,prefix:t}}var r,o,a,s,l=n(82),u=Object.prototype.hasOwnProperty,c="transform",d={};l&&(d=i(),c=d.prefix+c,a=d.prefix+"transition-property",o=d.prefix+"transition-duration",s=d.prefix+"transition-delay",r=d.prefix+"transition-timing-function"),e.exports={transform:c,end:d.end,property:a,timing:r,delay:s,duration:o}},function(e,t){"use strict";e.exports=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";var i=n(82),r=function(){};i&&(r=function(){return document.addEventListener?function(e,t,n,i){return e.addEventListener(t,n,i||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n)}:void 0}()),e.exports=r},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.filter(function(e){return null!=e}).reduce(function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,i=Array(n),r=0;n>r;r++)i[r]=arguments[r];e.apply(this,i),t.apply(this,i)}},null)}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(86),c=a(u),d=n(88),p=a(d),f=n(89),h=a(f),m=n(90),v=a(m),g=n(143),y=a(g),b=n(20),_=a(b),w=n(65),C=a(w),E=n(53),x=a(E),T=n(49),k=a(T),P=n(158),S=a(P),O=n(159),I=a(O),N=n(24),A=n(84),M=a(A),D=n(162),j=a(D),L=n(33),R=a(L),B=n(52),F=a(B),U=n(164),$=a(U),H=n(170),W=a(H),z="toggle-btn",V=W["default"].defaultProps.bsRole,q=$["default"].defaultProps.bsRole,K=function(e){function t(n){r(this,t),e.call(this,n),this.Toggle=W["default"],this.toggleOpen=this.toggleOpen.bind(this),this.handleClick=this.handleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleClose=this.handleClose.bind(this),this.extractChildren=this.extractChildren.bind(this),this.refineMenu=this.refineMenu.bind(this),this.refineToggle=this.refineToggle.bind(this),this.childExtractors=[{key:"toggle",matches:function(e){return e.props.bsRole===V},refine:this.refineToggle},{key:"menu",exclusive:!0,matches:function(e){return e.props.bsRole===q},refine:this.refineMenu}],this.state={},this.lastOpenEventType=null}return i(t,e),t.prototype.componentDidMount=function(){this.focusNextOnOpen()},t.prototype.componentWillUpdate=function(e){!e.open&&this.props.open&&(this._focusInDropdown=p["default"](C["default"].findDOMNode(this.refs.menu),c["default"](document)))},t.prototype.componentDidUpdate=function(e){this.props.open&&!e.open&&this.focusNextOnOpen(),!this.props.open&&e.open&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},t.prototype.render=function(){var e,t=this.extractChildren(),n=this.props.componentClass,i=y["default"](this.props,["id","bsClass","role","onSelect"]),r=N.prefix(this.props),a=(e={open:this.props.open,disabled:this.props.disabled},e[r]=!this.props.dropup,e.dropup=this.props.dropup,e);return _["default"].createElement(n,o({},i,{className:l["default"](this.props.className,a)}),t)},t.prototype.toggleOpen=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=!this.props.open;t&&(this.lastOpenEventType=e),this.props.onToggle&&this.props.onToggle(t)},t.prototype.handleClick=function(){this.props.disabled||this.toggleOpen("click")},t.prototype.handleKeyDown=function(e){if(!this.props.disabled)switch(e.keyCode){case h["default"].codes.down:this.props.open?this.refs.menu.focusNext&&this.refs.menu.focusNext():this.toggleOpen("keydown"),e.preventDefault();break;case h["default"].codes.esc:case h["default"].codes.tab:this.handleClose(e)}},t.prototype.handleClose=function(){this.props.open&&this.toggleOpen()},t.prototype.focusNextOnOpen=function(){var e=this.refs.menu;e.focusNext&&("keydown"===this.lastOpenEventType||"menuitem"===this.props.role)&&e.focusNext()},t.prototype.focus=function(){var e=C["default"].findDOMNode(this.refs[z]);e&&e.focus&&e.focus()},t.prototype.extractChildren=function(){var e=this,t=!!this.props.open,n={};return R["default"].map(this.props.children,function(i){var r=v["default"](e.childExtractors,function(e){return e.matches(i)});if(r){if(n[r.key])return!1;n[r.key]=r.exclusive,i=r.refine(i,t)}return i})},t.prototype.refineMenu=function(e,t){var n={ref:"menu",open:t,labelledBy:this.props.id,pullRight:this.props.pullRight,bsClass:this.props.bsClass};return n.onClose=M["default"](e.props.onClose,this.props.onClose,this.handleClose),n.onSelect=M["default"](e.props.onSelect,this.props.onSelect,this.handleClose),b.cloneElement(e,n,e.props.children)},t.prototype.refineToggle=function(e,t){var n={open:t,id:this.props.id,ref:z,role:this.props.role};return n.onClick=M["default"](e.props.onClick,this.handleClick),n.onKeyDown=M["default"](e.props.onKeyDown,this.handleKeyDown),b.cloneElement(e,n,e.props.children)},t}(_["default"].Component);K.Toggle=W["default"],K.TOGGLE_REF=z,K.TOGGLE_ROLE=V,K.MENU_ROLE=q,K.defaultProps={componentClass:F["default"],bsClass:"dropdown"},K.propTypes={bsClass:_["default"].PropTypes.string,dropup:_["default"].PropTypes.bool,id:S["default"](_["default"].PropTypes.oneOfType([_["default"].PropTypes.string,_["default"].PropTypes.number])),componentClass:k["default"],children:x["default"](j["default"].requiredRoles(V,q),j["default"].exclusiveRoles(q)),disabled:_["default"].PropTypes.bool,pullRight:_["default"].PropTypes.bool,open:_["default"].PropTypes.bool,onClose:_["default"].PropTypes.func,onToggle:_["default"].PropTypes.func,onSelect:_["default"].PropTypes.func,role:_["default"].PropTypes.string},K=I["default"](K,{open:"onToggle"}),K.Toggle=W["default"],K.Menu=$["default"],t["default"]=K,e.exports=t["default"]},function(e,t,n){"use strict";function i(){var e=void 0===arguments[0]?document:arguments[0];try{return e.activeElement}catch(t){}}var r=n(78);t.__esModule=!0,t["default"]=i;var o=n(87);r.interopRequireDefault(o);e.exports=t["default"]},function(e,t){"use strict";function n(e){return e&&e.ownerDocument||document}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(82),r=function(){var e=i&&document.documentElement;return e&&e.contains?function(e,t){return e.contains(t)}:e&&e.compareDocumentPosition?function(e,t){return e===t||!!(16&e.compareDocumentPosition(t))}:function(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}}();e.exports=r},function(e,t){t=e.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var r=String(e),a=n[r.toLowerCase()];if(a)return a;var a=i[r.toLowerCase()];return a?a:1===r.length?r.charCodeAt(0):void 0};var n=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};for(r=97;123>r;r++)n[String.fromCharCode(r)]=r-32;for(var r=48;58>r;r++)n[r-48]=r;for(r=1;13>r;r++)n["f"+r]=r+111;for(r=0;10>r;r++)n["numpad "+r]=r+96;var o=t.names=t.title={};for(r in n)o[n[r]]=r;for(var a in i)n[a]=i[a]},function(e,t,n){var i=n(91),r=n(116),o=r(i);e.exports=o},function(e,t,n){var i=n(92),r=n(115),o=r(i);e.exports=o},function(e,t,n){function i(e,t){return r(e,t,o)}var r=n(93),o=n(100);e.exports=i},function(e,t,n){var i=n(94),r=i();e.exports=r},function(e,t,n){function i(e){return function(t,n,i){for(var o=r(t),a=i(t),s=a.length,l=e?s:-1;e?l--:++l<s;){var u=a[l];if(n(o[u],u,o)===!1)break}return t}}var r=n(95);e.exports=i},function(e,t,n){function i(e){if(a.unindexedChars&&o(e)){for(var t=-1,n=e.length,i=Object(e);++t<n;)i[t]=e.charAt(t);return i}return r(e)?e:Object(e)}var r=n(96),o=n(97),a=n(99);e.exports=i},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function i(e){return"string"==typeof e||r(e)&&s.call(e)==o}var r=n(98),o="[object String]",a=Object.prototype,s=a.toString;e.exports=i},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t){var n=Array.prototype,i=Error.prototype,r=Object.prototype,o=r.propertyIsEnumerable,a=n.splice,s={};!function(e){var t=function(){this.x=e},n={0:e,length:e},r=[];t.prototype={valueOf:e,y:e};for(var l in new t)r.push(l);s.enumErrorProps=o.call(i,"message")||o.call(i,"name"),s.enumPrototypes=o.call(t,"prototype"),s.nonEnumShadows=!/valueOf/.test(r),s.ownLast="x"!=r[0],
s.spliceObjects=(a.call(n,0,1),!n[0]),s.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),e.exports=s},function(e,t,n){var i=n(101),r=n(105),o=n(96),a=n(109),s=n(99),l=i(Object,"keys"),u=l?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||("function"==typeof e?s.enumPrototypes:r(e))?a(e):o(e)?l(e):[]}:a;e.exports=u},function(e,t,n){function i(e,t){var n=null==e?void 0:e[t];return r(n)?n:void 0}var r=n(102);e.exports=i},function(e,t,n){function i(e){return null==e?!1:r(e)?d.test(u.call(e)):a(e)&&(o(e)?d:s).test(e)}var r=n(103),o=n(104),a=n(98),s=/^\[object .+?Constructor\]$/,l=Object.prototype,u=Function.prototype.toString,c=l.hasOwnProperty,d=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return r(e)&&s.call(e)==o}var r=n(96),o="[object Function]",a=Object.prototype,s=a.toString;e.exports=i},function(e,t){var n=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}();e.exports=n},function(e,t,n){function i(e){return null!=e&&o(r(e))}var r=n(106),o=n(108);e.exports=i},function(e,t,n){var i=n(107),r=i("length");e.exports=r},function(e,t,n){function i(e){return function(t){return null==t?void 0:r(t)[e]}}var r=n(95);e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;e.exports=n},function(e,t,n){function i(e){for(var t=u(e),n=t.length,i=n&&e.length,c=!!i&&s(i)&&(o(e)||r(e)||l(e)),p=-1,f=[];++p<n;){var h=t[p];(c&&a(h,i)||d.call(e,h))&&f.push(h)}return f}var r=n(110),o=n(111),a=n(112),s=n(108),l=n(97),u=n(113),c=Object.prototype,d=c.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return o(e)&&r(e)&&s.call(e,"callee")&&!l.call(e,"callee")}var r=n(105),o=n(98),a=Object.prototype,s=a.hasOwnProperty,l=a.propertyIsEnumerable;e.exports=i},function(e,t,n){var i=n(101),r=n(108),o=n(98),a="[object Array]",s=Object.prototype,l=s.toString,u=i(Array,"isArray"),c=u||function(e){return o(e)&&r(e.length)&&l.call(e)==a};e.exports=c},function(e,t){function n(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?r:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,r=9007199254740991;e.exports=n},function(e,t,n){function i(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&u(t)&&(a(e)||o(e)||d(e))&&t||0;for(var n=e.constructor,i=-1,r=s(n)&&n.prototype||x,f=r===e,h=Array(t),m=t>0,g=p.enumErrorProps&&(e===E||e instanceof Error),y=p.enumPrototypes&&s(e);++i<t;)h[i]=i+"";for(var _ in e)y&&"prototype"==_||g&&("message"==_||"name"==_)||m&&l(_,t)||"constructor"==_&&(f||!k.call(e,_))||h.push(_);if(p.nonEnumShadows&&e!==x){var O=e===T?w:e===E?v:P.call(e),I=S[O]||S[b];for(O==b&&(r=x),t=C.length;t--;){_=C[t];var N=I[_];f&&N||(N?!k.call(e,_):e[_]===r[_])||h.push(_)}}return h}var r=n(114),o=n(110),a=n(111),s=n(103),l=n(112),u=n(108),c=n(96),d=n(97),p=n(99),f="[object Array]",h="[object Boolean]",m="[object Date]",v="[object Error]",g="[object Function]",y="[object Number]",b="[object Object]",_="[object RegExp]",w="[object String]",C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],E=Error.prototype,x=Object.prototype,T=String.prototype,k=x.hasOwnProperty,P=x.toString,S={};S[f]=S[m]=S[y]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},S[h]=S[w]={constructor:!0,toString:!0,valueOf:!0},S[v]=S[g]=S[_]={constructor:!0,toString:!0},S[b]={constructor:!0},r(C,function(e){for(var t in S)if(k.call(S,t)){var n=S[t];n[e]=k.call(n,e)}}),e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){function i(e,t){return function(n,i){var s=n?r(n):0;if(!o(s))return e(n,i);for(var l=t?s:-1,u=a(n);(t?l--:++l<s)&&i(u[l],l,u)!==!1;);return n}}var r=n(106),o=n(108),a=n(95);e.exports=i},function(e,t,n){function i(e,t){return function(n,i,l){if(i=r(i,l,3),s(n)){var u=a(n,i,t);return u>-1?n[u]:void 0}return o(n,i,e)}}var r=n(117),o=n(141),a=n(142),s=n(111);e.exports=i},function(e,t,n){function i(e,t,n){var i=typeof e;return"function"==i?void 0===t?e:a(e,t,n):null==e?s:"object"==i?r(e):void 0===t?l(e):o(e,t)}var r=n(118),o=n(130),a=n(137),s=n(138),l=n(139);e.exports=i},function(e,t,n){function i(e){var t=o(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null==e?!1:(e=a(e),e[n]===i&&(void 0!==i||n in e))}}return function(e){return r(e,t)}}var r=n(119),o=n(127),a=n(95);e.exports=i},function(e,t,n){function i(e,t,n){var i=t.length,a=i,s=!n;if(null==e)return!a;for(e=o(e);i--;){var l=t[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=t[i];var u=l[0],c=e[u],d=l[1];if(s&&l[2]){if(void 0===c&&!(u in e))return!1}else{var p=n?n(c,d,u):void 0;if(!(void 0===p?r(d,c,n,!0):p))return!1}}return!0}var r=n(120),o=n(95);e.exports=i},function(e,t,n){function i(e,t,n,s,l,u){return e===t?!0:null==e||null==t||!o(e)&&!a(t)?e!==e&&t!==t:r(e,t,i,n,s,l,u)}var r=n(121),o=n(96),a=n(98);e.exports=i},function(e,t,n){function i(e,t,n,i,f,v,g){var y=s(e),b=s(t),_=d,w=d;y||(_=m.call(e),_==c?_=p:_!=p&&(y=u(e))),b||(w=m.call(t),w==c?w=p:w!=p&&(b=u(t)));var C=_==p&&!l(e),E=w==p&&!l(t),x=_==w;if(x&&!y&&!C)return o(e,t,_);if(!f){var T=C&&h.call(e,"__wrapped__"),k=E&&h.call(t,"__wrapped__");if(T||k)return n(T?e.value():e,k?t.value():t,i,f,v,g)}if(!x)return!1;v||(v=[]),g||(g=[]);for(var P=v.length;P--;)if(v[P]==e)return g[P]==t;v.push(e),g.push(t);var S=(y?r:a)(e,t,n,i,f,v,g);return v.pop(),g.pop(),S}var r=n(122),o=n(124),a=n(125),s=n(111),l=n(104),u=n(126),c="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype,h=f.hasOwnProperty,m=f.toString;e.exports=i},function(e,t,n){function i(e,t,n,i,o,a,s){var l=-1,u=e.length,c=t.length;if(u!=c&&!(o&&c>u))return!1;for(;++l<u;){var d=e[l],p=t[l],f=i?i(o?p:d,o?d:p,l):void 0;if(void 0!==f){if(f)continue;return!1}if(o){if(!r(t,function(e){return d===e||n(d,e,i,o,a,s)}))return!1}else if(d!==p&&!n(d,p,i,o,a,s))return!1}return!0}var r=n(123);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n){switch(n){case i:case r:return+e==+t;case o:return e.name==t.name&&e.message==t.message;case a:return e!=+e?t!=+t:e==+t;case s:case l:return e==t+""}return!1}var i="[object Boolean]",r="[object Date]",o="[object Error]",a="[object Number]",s="[object RegExp]",l="[object String]";e.exports=n},function(e,t,n){function i(e,t,n,i,o,s,l){var u=r(e),c=u.length,d=r(t),p=d.length;if(c!=p&&!o)return!1;for(var f=c;f--;){var h=u[f];if(!(o?h in t:a.call(t,h)))return!1}for(var m=o;++f<c;){h=u[f];var v=e[h],g=t[h],y=i?i(o?g:v,o?v:g,h):void 0;if(!(void 0===y?n(v,g,i,o,s,l):y))return!1;m||(m="constructor"==h)}if(!m){var b=e.constructor,_=t.constructor;if(b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _))return!1}return!0}var r=n(100),o=Object.prototype,a=o.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return o(e)&&r(e.length)&&!!O[N.call(e)]}var r=n(108),o=n(98),a="[object Arguments]",s="[object Array]",l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Function]",p="[object Map]",f="[object Number]",h="[object Object]",m="[object RegExp]",v="[object Set]",g="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",E="[object Int16Array]",x="[object Int32Array]",T="[object Uint8Array]",k="[object Uint8ClampedArray]",P="[object Uint16Array]",S="[object Uint32Array]",O={};O[_]=O[w]=O[C]=O[E]=O[x]=O[T]=O[k]=O[P]=O[S]=!0,O[a]=O[s]=O[b]=O[l]=O[u]=O[c]=O[d]=O[p]=O[f]=O[h]=O[m]=O[v]=O[g]=O[y]=!1;var I=Object.prototype,N=I.toString;e.exports=i},function(e,t,n){function i(e){for(var t=o(e),n=t.length;n--;)t[n][2]=r(t[n][1]);return t}var r=n(128),o=n(129);e.exports=i},function(e,t,n){function i(e){return e===e&&!r(e)}var r=n(96);e.exports=i},function(e,t,n){function i(e){e=o(e);for(var t=-1,n=r(e),i=n.length,a=Array(i);++t<i;){var s=n[t];a[t]=[s,e[s]]}return a}var r=n(100),o=n(95);e.exports=i},function(e,t,n){function i(e,t){var n=s(e),i=l(e)&&u(t),f=e+"";return e=p(e),function(s){if(null==s)return!1;var l=f;if(s=d(s),(n||!i)&&!(l in s)){if(s=1==e.length?s:r(s,a(e,0,-1)),null==s)return!1;l=c(e),s=d(s)}return s[l]===t?void 0!==t||l in s:o(t,s[l],void 0,!0)}}var r=n(131),o=n(120),a=n(132),s=n(111),l=n(133),u=n(128),c=n(134),d=n(95),p=n(135);e.exports=i},function(e,t,n){function i(e,t,n){if(null!=e){e=r(e),void 0!==n&&n in e&&(t=[n]);for(var i=0,o=t.length;null!=e&&o>i;)e=r(e)[t[i++]];return i&&i==o?e:void 0}}var r=n(95);e.exports=i},function(e,t){function n(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}e.exports=n},function(e,t,n){function i(e,t){var n=typeof e;if("string"==n&&s.test(e)||"number"==n)return!0;if(r(e))return!1;var i=!a.test(e);return i||null!=t&&e in o(t)}var r=n(111),o=n(95),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=i},function(e,t){function n(e){var t=e?e.length:0;return t?e[t-1]:void 0}e.exports=n},function(e,t,n){function i(e){if(o(e))return e;var t=[];return r(e).replace(a,function(e,n,i,r){t.push(i?r.replace(s,"$1"):n||e)}),t}var r=n(136),o=n(111),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;e.exports=i},function(e,t){function n(e){return null==e?"":e+""}e.exports=n},function(e,t,n){function i(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,a){return e.call(t,n,i,r,o,a)}}return function(){return e.apply(t,arguments)}}var r=n(138);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e){return a(e)?r(e):o(e)}var r=n(107),o=n(140),a=n(133);e.exports=i},function(e,t,n){function i(e){var t=e+"";return e=o(e),function(n){return r(n,e,t)}}var r=n(131),o=n(135);e.exports=i},function(e,t){function n(e,t,n,i){var r;return n(e,function(e,n,o){return t(e,n,o)?(r=i?n:e,!1):void 0}),r}e.exports=n},function(e,t){function n(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}e.exports=n},function(e,t,n){var i=n(144),r=n(145),o=n(152),a=n(137),s=n(113),l=n(154),u=n(155),c=n(157),d=c(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=i(o(t),String);return l(e,r(s(e),t))}var n=a(t[0],t[1],3);return u(e,function(e,t,i){return!n(e,t,i)})});e.exports=d},function(e,t){function n(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}e.exports=n},function(e,t,n){function i(e,t){var n=e?e.length:0,i=[];if(!n)return i;var l=-1,u=r,c=!0,d=c&&t.length>=s?a(t):null,p=t.length;d&&(u=o,c=!1,t=d);e:for(;++l<n;){var f=e[l];if(c&&f===f){for(var h=p;h--;)if(t[h]===f)continue e;i.push(f)}else u(t,f,0)<0&&i.push(f)}return i}var r=n(146),o=n(148),a=n(149),s=200;e.exports=i},function(e,t,n){function i(e,t,n){if(t!==t)return r(e,n);for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}var r=n(147);e.exports=i},function(e,t){function n(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!==o)return r}return-1}e.exports=n},function(e,t,n){function i(e,t){var n=e.data,i="string"==typeof t||r(t)?n.set.has(t):n.hash[t];return i?0:-1}var r=n(96);e.exports=i},function(e,t,n){(function(t){function i(e){return s&&a?new r(e):null}var r=n(150),o=n(101),a=o(t,"Set"),s=o(Object,"create");e.exports=i}).call(t,function(){return this}())},function(e,t,n){(function(t){function i(e){var t=e?e.length:0;for(this.data={hash:s(null),set:new a};t--;)this.push(e[t])}var r=n(151),o=n(101),a=o(t,"Set"),s=o(Object,"create");i.prototype.push=r,e.exports=i}).call(t,function(){return this}())},function(e,t,n){function i(e){var t=this.data;"string"==typeof e||r(e)?t.set.add(e):t.hash[e]=!0}var r=n(96);e.exports=i},function(e,t,n){function i(e,t,n,u){u||(u=[]);for(var c=-1,d=e.length;++c<d;){var p=e[c];l(p)&&s(p)&&(n||a(p)||o(p))?t?i(p,t,n,u):r(u,p):n||(u[u.length]=p)}return u}var r=n(153),o=n(110),a=n(111),s=n(105),l=n(98);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}e.exports=n},function(e,t,n){function i(e,t){e=r(e);for(var n=-1,i=t.length,o={};++n<i;){var a=t[n];a in e&&(o[a]=e[a])}return o}var r=n(95);e.exports=i},function(e,t,n){function i(e,t){var n={};return r(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}var r=n(156);e.exports=i},function(e,t,n){function i(e,t){return r(e,t,o)}var r=n(93),o=n(113);e.exports=i},function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(i=-1;++i<t;)s[i]=n[i];return s[t]=a,e.apply(this,s)}}var i="Expected a function",r=Math.max;e.exports=n},function(e,t){"use strict";function n(e){return function(t,n,i){return null==t[n]?new Error("The prop '"+n+"' is required to make '"+i+"' accessible for users using assistive technologies such as screen readers"):e(t,n,i)}}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,i,r){n&&(e._notifying=!0,n.call.apply(n,[e,i].concat(r)),e._notifying=!1),e._values[t]=i,e.isMounted()&&e.forceUpdate()}t.__esModule=!0;var o=n(160),a=i(o),s={shouldComponentUpdate:function(){return!this._notifying}};t["default"]=a["default"]([s],r),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function a(e,t){function n(i,r){function a(e,n){var i=d.getLinkName(e),o=this.props[r[e]];i&&l(this.props,i)&&!o&&(o=this.props[i].requestChange);for(var a=arguments.length,s=Array(a>2?a-2:0),u=2;a>u;u++)s[u-2]=arguments[u];t(this,e,o,n,s)}function l(e,t){return void 0!==e[t]}var c,p=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],f=i.displayName||i.name||"Component",h=d.getType(i).propTypes;c=d.uncontrolledPropTypes(r,h,f),p=d.transform(p,function(e,t){e[t]=function(){var e;return(e=this.refs.inner)[t].apply(e,arguments)}},{});var m=u["default"].createClass(s({displayName:"Uncontrolled("+f+")",mixins:e,propTypes:c},p,{componentWillMount:function(){var e=this.props,t=Object.keys(r);this._values=d.transform(t,function(t,n){t[n]=e[d.defaultKey(n)]},{})},componentWillReceiveProps:function(e){var t=this,n=this.props,i=Object.keys(r);i.forEach(function(i){void 0===d.getValue(e,i)&&void 0!==d.getValue(n,i)&&(t._values[i]=e[d.defaultKey(i)])})},render:function(){var e=this,t={},n=this.props,c=(n.valueLink,n.checkedLink,o(n,["valueLink","checkedLink"]));return d.each(r,function(n,i){var r=d.getLinkName(i),o=e.props[i];r&&!l(e.props,i)&&l(e.props,r)&&(o=e.props[r].value),t[i]=void 0!==o?o:e._values[i],t[n]=a.bind(e,i)}),t=s({},c,t,{ref:"inner"}),u["default"].createElement(i,t)}}));return m.ControlledComponent=i,m.deferControlTo=function(e,t,i){return void 0===t&&(t={}),n(e,s({},r,t),i)},m}return n}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t["default"]=a;var l=n(20),u=r(l),c=n(161),d=i(c);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return function(i,r){return void 0!==i[r]?i[e]?t&&t(i,r,n):new Error("You have provided a `"+r+"` prop to `"+n+"` without an `"+e+"` handler. This will render a read-only field. If the field should be mutable use `"+c(r)+"`. Otherwise, set `"+e+"`"):void 0}}function o(e,t,n){var i={};return t&&p(e,function(e,i,o){var a=t[o];y["default"]("string"==typeof i&&i.trim().length,"Uncontrollable - [%s]: the prop `%s` needs a valid handler key name in order to make it uncontrollable",n,o),e[o]=r(i,a,n),void 0!==a&&(e[c(o)]=a)},i),i}function a(e){return b[0]>=15||0===b[0]&&b[1]>=13?e:e.type}function s(e,t){var n=u(t);return n&&!l(e,t)&&l(e,n)?e[n].value:e[t]}function l(e,t){return void 0!==e[t]}function u(e){return"value"===e?"valueLink":"checked"===e?"checkedLink":null}function c(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function d(e,t,n){return function(){for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];t&&t.call.apply(t,[e].concat(r)),n&&n.call.apply(n,[e].concat(r))}}function p(e,t,n){return f(e,t.bind(null,n=n||(Array.isArray(e)?[]:{}))),n}function f(e,t,n){if(Array.isArray(e))return e.forEach(t,n);for(var i in e)h(e,i)&&t.call(n,e[i],i,e)}function h(e,t){return e?Object.prototype.hasOwnProperty.call(e,t):!1}t.__esModule=!0,t.customPropType=r,t.uncontrolledPropTypes=o,t.getType=a,t.getValue=s,t.getLinkName=u,t.defaultKey=c,t.chain=d,t.transform=p,t.each=f,t.has=h;var m=n(20),v=i(m),g=n(32),y=i(g),b=v["default"].version.split(".").map(parseFloat);t.version=b},function(e,t,n){"use strict";var i=n(1)["default"];t.__esModule=!0;var r=n(50),o=n(163),a=i(o);t["default"]={requiredRoles:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return r.createChainableTypeChecker(function(e,n,i){var r=void 0,o=a["default"](e.children),s=function(e,t){return e===t.props.bsRole};return t.every(function(e){return o.some(function(t){return s(e,t)})?!0:(r=e,!1)}),r?new Error("(children) "+i+" - Missing a required child with bsRole: "+r+". "+(i+" must have at least one child of each of the following bsRoles: "+t.join(", "))):void 0})},exclusiveRoles:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return r.createChainableTypeChecker(function(e,n,i){var r=a["default"](e.children),o=void 0;return t.every(function(e){var t=r.filter(function(t){return t.props.bsRole===e});return t.length>1?(o=e,!1):!0}),o?new Error("(children) "+i+" - Duplicate children detected of bsRole: "+o+". Only one child each allowed with the following bsRoles: "+t.join(", ")):void 0})}},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){var t=[];return void 0===e?t:(a["default"].forEach(e,function(e){t.push(e)}),t)}var r=n(1)["default"];t.__esModule=!0,t["default"]=i;var o=n(33),a=r(o);e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(89),d=s(c),p=n(20),f=s(p),h=n(65),m=s(h),v=n(24),g=n(84),y=s(g),b=n(33),_=s(b),w=n(165),C=s(w),E=function(e){function t(n){r(this,t),e.call(this,n),this.focusNext=this.focusNext.bind(this),this.focusPrevious=this.focusPrevious.bind(this),this.getFocusableMenuItems=this.getFocusableMenuItems.bind(this),this.getItemsAndActiveIndex=this.getItemsAndActiveIndex.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}return i(t,e),t.prototype.handleKeyDown=function(e){switch(e.keyCode){case d["default"].codes.down:this.focusNext(),e.preventDefault();break;case d["default"].codes.up:this.focusPrevious(),e.preventDefault();break;case d["default"].codes.esc:case d["default"].codes.tab:this.props.onClose(e)}},t.prototype.focusNext=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeItemIndex;return 0!==t.length?n===t.length-1?void t[0].focus():void t[n+1].focus():void 0},t.prototype.focusPrevious=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeItemIndex;return 0===n?void t[t.length-1].focus():void t[n-1].focus()},t.prototype.getItemsAndActiveIndex=function(){var e=this.getFocusableMenuItems(),t=document.activeElement,n=e.indexOf(t);return{items:e,activeItemIndex:n}},t.prototype.getFocusableMenuItems=function(){var e=m["default"].findDOMNode(this);return void 0===e?[]:[].slice.call(e.querySelectorAll('[tabIndex="-1"]'),0)},t.prototype.render=function(){var e,t=this,n=this.props,i=n.children,r=n.onSelect,s=n.pullRight,l=n.className,c=n.labelledBy,d=n.open,p=n.onClose,h=o(n,["children","onSelect","pullRight","className","labelledBy","open","onClose"]),m=_["default"].map(i,function(e){var n=e.props||{};return f["default"].cloneElement(e,{onKeyDown:y["default"](n.onKeyDown,t.handleKeyDown),onSelect:y["default"](n.onSelect,r)},n.children)}),g=(e={},e[v.prefix(this.props,"menu")]=!0,e[v.prefix(this.props,"menu-right")]=s,e),b=f["default"].createElement("ul",a({className:u["default"](l,g),role:"menu","aria-labelledby":c},h),m);return d&&(b=f["default"].createElement(C["default"],{noWrap:!0,onRootClose:p},b)),b},t}(f["default"].Component);E.defaultProps={bsRole:"menu",bsClass:"dropdown",pullRight:!1},E.propTypes={open:f["default"].PropTypes.bool,pullRight:f["default"].PropTypes.bool,onClose:f["default"].PropTypes.func,labelledBy:f["default"].PropTypes.oneOfType([f["default"].PropTypes.string,f["default"].PropTypes.number]),onSelect:f["default"].PropTypes.func},t["default"]=E,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 0===e.button}function s(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function l(){var e=b+"_"+_++;return{id:e,suppressRootClose:function(t){t.nativeEvent[e]=!0}}}t.__esModule=!0;var u=n(20),c=i(u),d=n(65),p=i(d),f=n(166),h=i(f),m=n(168),v=i(m),g=n(169),y=i(g),b="__click_was_inside",_=0,w=function(e){function t(n){r(this,t),e.call(this,n),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleDocumentKeyUp=this.handleDocumentKeyUp.bind(this);var i=l(),o=i.id,a=i.suppressRootClose;this._suppressRootId=o,this._suppressRootCloseHandler=a}return o(t,e),t.prototype.bindRootCloseHandlers=function(){var e=y["default"](this);this._onDocumentClickListener=h["default"](e,"click",this.handleDocumentClick),this._onDocumentKeyupListener=h["default"](e,"keyup",this.handleDocumentKeyUp)},t.prototype.handleDocumentClick=function(e){e[this._suppressRootId]||!s(e)&&a(e)&&this.props.onRootClose()},t.prototype.handleDocumentKeyUp=function(e){27===e.keyCode&&this.props.onRootClose()},t.prototype.unbindRootCloseHandlers=function(){this._onDocumentClickListener&&this._onDocumentClickListener.remove(),this._onDocumentKeyupListener&&this._onDocumentKeyupListener.remove()},t.prototype.componentDidMount=function(){this.bindRootCloseHandlers()},t.prototype.render=function(){var e=this.props,t=e.noWrap,n=e.children,i=c["default"].Children.only(n);return t?c["default"].cloneElement(i,{onClick:v["default"](this._suppressRootCloseHandler,i.props.onClick)}):c["default"].createElement("div",{onClick:this._suppressRootCloseHandler},i)},t.prototype.getWrappedDOMNode=function(){var e=p["default"].findDOMNode(this);return this.props.noWrap?e:e.firstChild},t.prototype.componentWillUnmount=function(){this.unbindRootCloseHandlers()},t}(c["default"].Component);t["default"]=w,w.displayName="RootCloseWrapper",w.propTypes={onRootClose:c["default"].PropTypes.func.isRequired,noWrap:c["default"].PropTypes.bool},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(83),o=i(r),a=n(167),s=i(a);t["default"]=function(e,t,n){return o["default"](e,t,n),{remove:function(){s["default"](e,t,n)}}},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(82),r=function(){};i&&(r=function(){return document.addEventListener?function(e,t,n,i){return e.removeEventListener(t,n,i||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0}()),e.exports=r},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.filter(function(e){return null!=e}).reduce(function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,i=Array(n),r=0;n>r;r++)i[r]=arguments[r];e.apply(this,i),t.apply(this,i)}},null)}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(65),o=i(r),a=n(87),s=i(a);t["default"]=function(e){return s["default"](o["default"].findDOMNode(e))},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(20),l=a(s),u=n(23),c=a(u),d=n(51),p=a(d),f=n(40),h=a(f),m=l["default"].createElement("span",null," ",l["default"].createElement("span",{className:"caret"})),v=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props.noCaret?null:m,t={"dropdown-toggle":!0},n=this.props.useAnchor?h["default"]:p["default"];return l["default"].createElement(n,o({},this.props,{className:c["default"](t,this.props.className),role:"button","aria-haspopup":!0,"aria-expanded":this.props.open}),this.props.children||this.props.title,e)},t}(l["default"].Component);t["default"]=v,v.defaultProps={open:!1,useAnchor:!1,bsRole:"toggle"},v.propTypes={bsRole:l["default"].PropTypes.string,noCaret:l["default"].PropTypes.bool,open:l["default"].PropTypes.bool,title:l["default"].PropTypes.string,useAnchor:l["default"].PropTypes.bool},v.isToggle=!0,v.titleProp="title",v.onClickProp="onClick",e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(28)["default"],l=n(1)["default"];t.__esModule=!0;var u=n(20),c=l(u),d=n(85),p=l(d),f=n(143),h=l(f),m=n(172),v=l(m),g=n(51),y=l(g),b=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.bsStyle,n=e.bsSize,i=e.disabled,r=this.props,l=r.title,u=r.children,d=a(r,["title","children"]),f=v["default"](d,s(p["default"].ControlledComponent.propTypes)),m=h["default"](d,s(p["default"].ControlledComponent.propTypes));return c["default"].createElement(p["default"],o({},f,{bsSize:n,bsStyle:t}),c["default"].createElement(p["default"].Toggle,o({},m,{disabled:i}),l),c["default"].createElement(p["default"].Menu,null,u))},t}(c["default"].Component);b.propTypes=o({disabled:c["default"].PropTypes.bool,bsStyle:y["default"].propTypes.bsStyle,bsSize:y["default"].propTypes.bsSize,noCaret:c["default"].PropTypes.bool,title:c["default"].PropTypes.node.isRequired},p["default"].propTypes),b.defaultProps={disabled:!1,pullRight:!1,dropup:!1,navItem:!1,noCaret:!1},t["default"]=b,e.exports=t["default"]},function(e,t,n){var i=n(152),r=n(137),o=n(154),a=n(155),s=n(157),l=s(function(e,t){return null==e?{}:"function"==typeof t[0]?a(e,r(t[0],t[1],3)):o(e,i(t))});e.exports=l},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(20),l=a(s),u=n(23),c=a(u),d=n(80),p=a(d),f=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props.timeout;return l["default"].createElement(p["default"],o({},this.props,{timeout:e,className:c["default"](this.props.className,"fade"),enteredClassName:"in",enteringClassName:"in"}),this.props.children)},t}(l["default"].Component);f.propTypes={"in":l["default"].PropTypes.bool,unmountOnExit:l["default"].PropTypes.bool,transitionAppear:l["default"].PropTypes.bool,timeout:l["default"].PropTypes.number,onEnter:l["default"].PropTypes.func,onEntering:l["default"].PropTypes.func,onEntered:l["default"].PropTypes.func,onExit:l["default"].PropTypes.func,onExiting:l["default"].PropTypes.func,onExited:l["default"].PropTypes.func},f.defaultProps={"in":!1,timeout:300,unmountOnExit:!1,transitionAppear:!1},t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(49),f=s(p),h=n(24),m={horizontal:d["default"].PropTypes.bool,inline:d["default"].PropTypes.bool,componentClass:f["default"]},v={horizontal:!1,inline:!1,componentClass:"form"},g=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.horizontal,n=e.inline,i=e.componentClass,r=e.className,s=o(e,["horizontal","inline","componentClass","className"]);delete s.bsClass;var l=[];return t&&l.push(h.prefix(this.props,"horizontal")),n&&l.push(h.prefix(this.props,"inline")),d["default"].createElement(i,a({},s,{className:u["default"](r,l)}))},t}(d["default"].Component);g.propTypes=m,g.defaultProps=v,t["default"]=h.bsClass("form",g),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(49),f=s(p),h=n(36),m=s(h),v=n(24),g=n(176),y=s(g),b=n(177),_=s(b),w={componentClass:f["default"],type:d["default"].PropTypes.string,id:d["default"].PropTypes.string},C={componentClass:"input"},E={$bs_formGroup:d["default"].PropTypes.object},x=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,i=n.componentClass,r=n.type,s=n.id,l=void 0===s?t:s,c=n.className,p=o(n,["componentClass","type","id","className"]);m["default"](null==t||l===t,"`controlId` is ignored on `<FormControl>` when `id` is specified."),delete p.bsClass;var f=void 0;return"file"!==r&&(f=v.getClassSet(this.props)),d["default"].createElement(i,a({},p,{type:r,id:l,className:u["default"](c,f)}))},t}(d["default"].Component);x.propTypes=w,x.defaultProps=C,x.contextTypes=E,x.Feedback=y["default"],x.Static=_["default"],t["default"]=v.bsClass("form-control",x),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(24),f=n(57),h=s(f),m={bsRole:"feedback"},v={$bs_formGroup:d["default"].PropTypes.object},g=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.getGlyph=function(e){switch(e){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null}},t.prototype.renderDefaultFeedback=function(e,t,n,i){var r=this.getGlyph(e&&e.validationState);return r?d["default"].createElement(h["default"],o({},i,{glyph:r,className:u["default"](t,n)})):null},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=a(e,["className","children"]);delete i.bsClass;var r=p.getClassSet(this.props);if(!n)return this.renderDefaultFeedback(this.context.$bs_formGroup,t,r,i);var s=d["default"].Children.only(n);return d["default"].cloneElement(s,o({},i,{className:u["default"](s.props.className,t,r)}))},t}(d["default"].Component);g.defaultProps=m,g.contextTypes=v,t["default"]=p.bsClass("form-control-feedback",g),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];
t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(49),f=s(p),h=n(24),m={componentClass:f["default"]},v={componentClass:"p"},g=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=o(e,["componentClass","className"]);delete i.bsClass;var r=h.getClassSet(this.props);return d["default"].createElement(t,a({},i,{className:u["default"](n,r)}))},t}(d["default"].Component);g.propTypes=m,g.defaultProps=v,t["default"]=h.bsClass("form-control-static",g),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(23),l=r(s),u=n(49),c=r(u),d=a["default"].createClass({displayName:"Grid",propTypes:{fluid:a["default"].PropTypes.bool,componentClass:c["default"]},getDefaultProps:function(){return{componentClass:"div",fluid:!1}},render:function(){var e=this.props.componentClass,t=this.props.fluid?"container-fluid":"container";return a["default"].createElement(e,i({},this.props,{className:l["default"](this.props.className,t)}),this.props.children)}});t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(24),f=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=o(e,["className"]);delete n.bsClass;var i=p.getClassSet(this.props);return d["default"].createElement("span",a({},n,{className:u["default"](t,i)}))},t}(d["default"].Component);t["default"]=p.bsClass("help-block",f),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(23),l=r(s),u=a["default"].createClass({displayName:"Image",propTypes:{responsive:a["default"].PropTypes.bool,rounded:a["default"].PropTypes.bool,circle:a["default"].PropTypes.bool,thumbnail:a["default"].PropTypes.bool},getDefaultProps:function(){return{responsive:!1,rounded:!1,circle:!1,thumbnail:!1}},render:function(){var e={"img-responsive":this.props.responsive,"img-rounded":this.props.rounded,"img-circle":this.props.circle,"img-thumbnail":this.props.thumbnail};return a["default"].createElement("img",i({},this.props,{className:l["default"](this.props.className,e)}))}});t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(1)["default"],a=n(2)["default"];t.__esModule=!0;var s=n(20),l=o(s),u=n(182),c=a(u),d=n(56),p=o(d),f=n(60),h=o(f),m=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){return"static"===this.props.type?(h["default"]("Input type=static","FormControls.Static"),l["default"].createElement(c.Static,this.props)):e.prototype.render.call(this)},t}(p["default"]);m.propTypes={type:l["default"].PropTypes.string},t["default"]=h["default"].wrapper(m,"`<Input>`","`<FormControl>`, `<Checkbox>`, or `<Radio>`, with `<FormGroup>` and/or `<InputGroup>` as needed"),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];t.__esModule=!0;var r=n(183),o=i(r);t.Static=o["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(49),f=s(p),h=n(56),m=s(h),v=n(58),g=s(v),y=n(60),b=s(y),_=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.getValue=function(){var e=this.props,t=e.children,n=e.value;return t?t:n},t.prototype.renderInput=function(){var e=this.props,t=e.componentClass,n=o(e,["componentClass"]);return d["default"].createElement(t,a({},n,{className:u["default"](n.className,"form-control-static"),ref:"input",key:"input"}),this.getValue())},t}(m["default"]);_.propTypes={value:g["default"],componentClass:f["default"],children:g["default"]},_.defaultProps={componentClass:"p"},t["default"]=b["default"].wrapper(_,"`<FormControls.Static>`","`<FormControl.Static>`"),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(25),f=n(24),h=n(185),m=s(h),v=n(186),g=s(v),y=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=o(e,["className"]);delete n.bsClass,delete n.bsSize;var i=f.getClassSet(this.props);return d["default"].createElement("span",a({},n,{className:u["default"](t,i)}))},t}(d["default"].Component);y.Addon=m["default"],y.Button=g["default"],t["default"]=f.bsClass("input-group",f.bsSizes([p.Sizes.LARGE,p.Sizes.SMALL],y)),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(24),f=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=o(e,["className"]);delete n.bsClass;var i=p.getClassSet(this.props);return d["default"].createElement("span",a({},n,{className:u["default"](t,i)}))},t}(d["default"].Component);t["default"]=p.bsClass("input-group-addon",f),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(24),f=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=o(e,["className"]);delete n.bsClass;var i=p.getClassSet(this.props);return d["default"].createElement("span",a({},n,{className:u["default"](t,i)}))},t}(d["default"].Component);t["default"]=p.bsClass("input-group-btn",f),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(5)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(33),u=o(l),c=/\%\((.+?)\)s/,d=s["default"].createClass({displayName:"Interpolate",propTypes:{component:s["default"].PropTypes.node,format:s["default"].PropTypes.string,unsafe:s["default"].PropTypes.bool},getDefaultProps:function(){return{component:"span",unsafe:!1}},render:function(){var e=u["default"].count(this.props.children)>0||"string"==typeof this.props.children?this.props.children:this.props.format,t=this.props.component,n=this.props.unsafe===!0,r=i({},this.props);if(delete r.children,delete r.format,delete r.component,delete r.unsafe,n){var o=e.split(c).reduce(function(e,t,n){var i=void 0;if(n%2===0?i=t:(i=r[t],delete r[t]),s["default"].isValidElement(i))throw new Error("cannot interpolate a React component into unsafe text");return e+=i},"");return r.dangerouslySetInnerHTML={__html:o},s["default"].createElement(t,r)}var a=e.split(c).reduce(function(e,t,n){var i=void 0;if(n%2===0){if(0===t.length)return e;i=t}else i=r[t],delete r[t];return e.push(i),e},[]);return s["default"].createElement(t,r,a)}});r(d,{REGEXP:c}),t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(23),l=r(s),u=n(49),c=r(u),d=a["default"].createClass({displayName:"Jumbotron",propTypes:{componentClass:c["default"]},getDefaultProps:function(){return{componentClass:"div"}},render:function(){var e=this.props.componentClass;return a["default"].createElement(e,i({},this.props,{className:l["default"](this.props.className,"jumbotron")}),this.props.children)}});t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(25),p=n(24),f=function(e){function t(){r(this,n),e.apply(this,arguments)}i(t,e),t.prototype.render=function(){var e=p.getClassSet(this.props);return c["default"].createElement("span",o({},this.props,{className:l["default"](this.props.className,e)}),this.props.children)};var n=t;return t=p.bsStyles(d.State.values().concat(d.DEFAULT,d.PRIMARY),d.DEFAULT)(t)||t,t=p.bsClass("label")(t)||t}(c["default"].Component);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(20),l=a(s),u=n(191),c=a(u),d=n(23),p=a(d),f=n(33),h=a(f),m=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this,t=h["default"].map(this.props.children,function(e,t){return s.cloneElement(e,{key:e.key?e.key:t})});if(this.areCustomChildren(t)){var n=this.props.componentClass;return l["default"].createElement(n,o({},this.props,{className:p["default"](this.props.className,"list-group")}),t)}var i=!1;return this.props.children?h["default"].forEach(this.props.children,function(t){e.isAnchorOrButton(t.props)&&(i=!0)}):i=!0,i?this.renderDiv(t):this.renderUL(t)},t.prototype.isAnchorOrButton=function(e){return e.href||e.onClick},t.prototype.areCustomChildren=function(e){var t=!1;return h["default"].forEach(e,function(e){e.type!==c["default"]&&(t=!0)},this),t},t.prototype.renderUL=function(e){var t=h["default"].map(e,function(e){return s.cloneElement(e,{listItem:!0})});return l["default"].createElement("ul",o({},this.props,{className:p["default"](this.props.className,"list-group")}),t)},t.prototype.renderDiv=function(e){return l["default"].createElement("div",o({},this.props,{className:p["default"](this.props.className,"list-group")}),e)},t}(l["default"].Component);m.defaultProps={componentClass:"div"},m.propTypes={className:l["default"].PropTypes.string,componentClass:l["default"].PropTypes.oneOf(["ul","div"]),id:l["default"].PropTypes.oneOfType([l["default"].PropTypes.string,l["default"].PropTypes.number])},t["default"]=m,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(25),p=n(24),f=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=p.getClassSet(this.props);return e.active=this.props.active,e.disabled=this.props.disabled,this.props.href?this.renderAnchor(e):this.props.onClick?this.renderButton(e):this.props.listItem?this.renderLi(e):this.renderSpan(e)},t.prototype.renderLi=function(e){return c["default"].createElement("li",o({},this.props,{className:l["default"](this.props.className,e)}),this.props.header?this.renderStructuredContent():this.props.children)},t.prototype.renderAnchor=function(e){return c["default"].createElement("a",o({},this.props,{className:l["default"](this.props.className,e)}),this.props.header?this.renderStructuredContent():this.props.children)},t.prototype.renderButton=function(e){return c["default"].createElement("button",o({type:"button"},this.props,{className:l["default"](this.props.className,e)}),this.props.header?this.renderStructuredContent():this.props.children)},t.prototype.renderSpan=function(e){return c["default"].createElement("span",o({},this.props,{className:l["default"](this.props.className,e)}),this.props.header?this.renderStructuredContent():this.props.children)},t.prototype.renderStructuredContent=function(){var e=void 0,t=p.prefix(this.props,"heading");e=c["default"].isValidElement(this.props.header)?u.cloneElement(this.props.header,{key:"header",className:l["default"](this.props.header.props.className,t)}):c["default"].createElement("h4",{key:"header",className:t},this.props.header);var n=c["default"].createElement("p",{key:"content",className:p.prefix(this.props,"text")},this.props.children);return[e,n]},t}(c["default"].Component);f.propTypes={className:c["default"].PropTypes.string,active:c["default"].PropTypes.any,disabled:c["default"].PropTypes.any,header:c["default"].PropTypes.node,listItem:c["default"].PropTypes.bool,onClick:c["default"].PropTypes.func,eventKey:c["default"].PropTypes.any,href:c["default"].PropTypes.string,target:c["default"].PropTypes.string},f.defaultTypes={listItem:!1},t["default"]=p.bsStyles(d.State.values(),p.bsClass("list-group-item",f)),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(5)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(20),l=a(s),u=n(49),c=a(u),d=n(23),p=a(d),f=n(193),h=a(f),m=n(194),v=a(m),g=n(195),y=a(g),b=n(196),_=a(b),w=n(197),C=a(w),E=n(198),x=a(E),T=l["default"].createClass({displayName:"Media",propTypes:{componentClass:c["default"]},getDefaultProps:function(){return{componentClass:"div"}},render:function(){var e=this.props,t=e.componentClass,n=e.className,o=i(e,["componentClass","className"]);return l["default"].createElement(t,r({},o,{className:p["default"](n,"media")}))}});T=o(T,{Heading:h["default"],Body:v["default"],Left:y["default"],Right:_["default"],List:C["default"],ListItem:x["default"]}),t["default"]=T,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(49),u=o(l),c=n(23),d=o(c),p=s["default"].createClass({displayName:"Media.Heading",propTypes:{componentClass:u["default"]},getDefaultProps:function(){return{componentClass:"h4"}},render:function(){var e=this.props,t=e.componentClass,n=e.className,o=i(e,["componentClass","className"]);return s["default"].createElement(t,r({},o,{className:d["default"](n,"media-heading")}))}});t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(49),u=o(l),c=n(23),d=o(c),p=s["default"].createClass({displayName:"Media.Body",propTypes:{componentClass:u["default"]},getDefaultProps:function(){return{componentClass:"div"}},render:function(){var e=this.props,t=e.componentClass,n=e.className,o=i(e,["componentClass","className"]);return s["default"].createElement(t,r({},o,{className:d["default"](n,"media-body")}))}});t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(23),u=o(l),c=s["default"].createClass({displayName:"Media.Left",propTypes:{align:s["default"].PropTypes.oneOf(["top","middle","bottom"])},render:function(){var e,t=this.props,n=t.align,o=t.className,a=i(t,["align","className"]),l=u["default"](o,"media-left",(e={},e["media-"+n]=Boolean(n),e));return s["default"].createElement("div",r({},a,{className:l}))}});t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(23),u=o(l),c=s["default"].createClass({displayName:"Media.Right",propTypes:{align:s["default"].PropTypes.oneOf(["top","middle","bottom"])},render:function(){var e,t=this.props,n=t.align,o=t.className,a=i(t,["align","className"]),l=u["default"](o,"media-right",(e={},e["media-"+n]=Boolean(n),e));return s["default"].createElement("div",r({},a,{className:l}))}});t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(23),u=o(l),c=s["default"].createClass({displayName:"Media.List",render:function(){var e=this.props,t=e.className,n=i(e,["className"]);return s["default"].createElement("ul",r({},n,{className:u["default"](t,"media-list")}))}});t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(23),u=o(l),c=s["default"].createClass({displayName:"Media.ListItem",render:function(){var e=this.props,t=e.className,n=i(e,["className"]);return s["default"].createElement("li",r({},n,{className:u["default"](t,"media")}))}});t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(53),f=s(p),h=n(24),m=n(84),v=s(m),g=n(40),y=s(g),b=function(e){function t(n){r(this,t),e.call(this,n),this.handleClick=this.handleClick.bind(this)}return i(t,e),t.prototype.handleClick=function(e){(!this.props.href||this.props.disabled)&&e.preventDefault(),this.props.disabled||this.props.onSelect&&this.props.onSelect(this.props.eventKey,e)},t.prototype.render=function(){if(this.props.divider)return d["default"].createElement("li",{role:"separator",className:u["default"]("divider",this.props.className),style:this.props.style});if(this.props.header){var e=h.prefix(this.props,"header");return d["default"].createElement("li",{role:"heading",className:u["default"](e,this.props.className),style:this.props.style},this.props.children)}var t=this.props,n=t.className,i=t.style,r=t.onClick,s=o(t,["className","style","onClick"]);delete s.onSelect;var l={disabled:this.props.disabled,active:this.props.active};return d["default"].createElement("li",{role:"presentation",className:u["default"](n,l),style:i},d["default"].createElement(y["default"],a({},s,{role:"menuitem",tabIndex:"-1",onClick:v["default"](r,this.handleClick)})))},t}(d["default"].Component);b.propTypes={active:d["default"].PropTypes.bool,disabled:d["default"].PropTypes.bool,divider:f["default"](d["default"].PropTypes.bool,function(e){return e.divider&&e.children?new Error("Children will not be rendered for dividers"):void 0}),eventKey:d["default"].PropTypes.any,header:d["default"].PropTypes.bool,href:d["default"].PropTypes.string,target:d["default"].PropTypes.string,title:d["default"].PropTypes.string,onClick:d["default"].PropTypes.func,onKeyDown:d["default"].PropTypes.func,onSelect:d["default"].PropTypes.func,id:d["default"].PropTypes.oneOfType([d["default"].PropTypes.string,d["default"].PropTypes.number])},b.defaultProps={divider:!1,disabled:!1,header:!1},t["default"]=h.bsClass("dropdown",b),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(22)["default"],o=n(28)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(201),c=a(u),d=n(87),p=a(d),f=n(82),h=a(f),m=n(204),v=a(m),g=n(172),y=a(g),b=n(20),_=a(b),w=n(65),C=a(w),E=n(205),x=a(E),T=n(216),k=a(T),P=n(35),S=a(P),O=n(49),I=a(O),N=n(25),A=n(24),M=n(173),D=a(M),j=n(220),L=a(j),R=n(221),B=a(R),F=n(222),U=a(F),$=n(223),H=a($),W=n(224),z=a(W),V=_["default"].createClass({displayName:"Modal",propTypes:i({},x["default"].propTypes,L["default"].propTypes,{backdrop:_["default"].PropTypes.oneOf(["static",!0,!1]),keyboard:_["default"].PropTypes.bool,animation:_["default"].PropTypes.bool,dialogComponentClass:I["default"],dialogComponent:S["default"](I["default"],"Use `dialogComponentClass`."),autoFocus:_["default"].PropTypes.bool,enforceFocus:_["default"].PropTypes.bool,bsStyle:_["default"].PropTypes.string,show:_["default"].PropTypes.bool,onHide:_["default"].PropTypes.func,onEnter:_["default"].PropTypes.func,onEntering:_["default"].PropTypes.func,onEntered:_["default"].PropTypes.func,onExit:_["default"].PropTypes.func,onExiting:_["default"].PropTypes.func,onExited:_["default"].PropTypes.func}),childContextTypes:{$bs_onModalHide:_["default"].PropTypes.func},getDefaultProps:function(){return i({},x["default"].defaultProps,{bsClass:"modal",animation:!0,dialogComponentClass:L["default"]})},getInitialState:function(){return{modalStyles:{}}},getChildContext:function(){return{$bs_onModalHide:this.props.onHide}},componentWillUnmount:function(){c["default"].off(window,"resize",this.handleWindowResize)},render:function(){var e=this,t=this.props,n=t.className,a=(t.children,t.dialogClassName),s=t.animation,u=r(t,["className","children","dialogClassName","animation"]),c=this.state.modalStyles,d={"in":u.show&&!s},p=u.dialogComponent||u.dialogComponentClass,f=y["default"](u,o(x["default"].propTypes).concat(["onExit","onExiting","onEnter","onEntered"])),h=_["default"].createElement(p,i({key:"modal",ref:function(t){return e._modal=t}},u,{style:c,className:l["default"](n,d),dialogClassName:a,onClick:u.backdrop===!0?this.handleDialogClick:null}),this.props.children);return _["default"].createElement(x["default"],i({},f,{show:u.show,ref:function(t){e._wrapper=t&&t.refs.modal,e._backdrop=t&&t.refs.backdrop},onEntering:this._onShow,onExited:this._onHide,backdropClassName:l["default"](A.prefix(u,"backdrop"),d),containerClassName:A.prefix(u,"open"),transition:s?D["default"]:void 0,dialogTransitionTimeout:V.TRANSITION_DURATION,backdropTransitionTimeout:V.BACKDROP_TRANSITION_DURATION}),h)},_onShow:function(){if(c["default"].on(window,"resize",this.handleWindowResize),this.setState(this._getStyles()),this.props.onEntering){var e;(e=this.props).onEntering.apply(e,arguments)}},_onHide:function(){if(c["default"].off(window,"resize",this.handleWindowResize),this.props.onExited){var e;(e=this.props).onExited.apply(e,arguments)}},handleDialogClick:function(e){e.target===e.currentTarget&&this.props.onHide()},handleWindowResize:function(){this.setState(this._getStyles())},_getStyles:function(){if(!h["default"])return{};var e=C["default"].findDOMNode(this._modal),t=p["default"](e),n=e.scrollHeight,i=k["default"](C["default"].findDOMNode(this.props.container||t.body)),r=n>t.documentElement.clientHeight;return{modalStyles:{paddingRight:i&&!r?v["default"]():void 0,paddingLeft:!i&&r?v["default"]():void 0}}}});V.Body=B["default"],V.Header=U["default"],V.Title=H["default"],V.Footer=z["default"],V.Dialog=L["default"],V.TRANSITION_DURATION=300,V.BACKDROP_TRANSITION_DURATION=150,t["default"]=A.bsSizes([N.Sizes.LARGE,N.Sizes.SMALL],A.bsClass("modal",V)),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(83),r=n(167),o=n(202);e.exports={on:i,off:r,filter:o}},function(e,t,n){"use strict";var i=n(88),r=n(203);e.exports=function(e,t){return function(n){var o=n.currentTarget,a=n.target,s=r(o,e);s.some(function(e){return i(e,a)})&&t.call(this,n)}}},function(e,t){"use strict";var n=/^[\w-]*$/,i=Function.prototype.bind.call(Function.prototype.call,[].slice);e.exports=function(e,t){var r,o="#"===t[0],a="."===t[0],s=o||a?t.slice(1):t,l=n.test(s);return l?o?(e=e.getElementById?e:document,(r=e.getElementById(s))?[r]:[]):i(e.getElementsByClassName&&a?e.getElementsByClassName(s):e.getElementsByTagName(t)):i(e.querySelectorAll(t))}},function(e,t,n){"use strict";var i,r=n(82);e.exports=function(e){if((!i||e)&&r){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),i=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return i}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(20),s=i(a),l=n(36),u=i(l),c=n(206),d=i(c),p=n(208),f=i(p),h=n(209),m=i(h),v=n(211),g=i(v),y=n(169),b=i(y),_=n(166),w=i(_),C=n(219),E=i(C),x=n(82),T=i(x),k=n(86),P=i(k),S=n(88),O=i(S),I=n(210),N=i(I),A=new g["default"],M=s["default"].createClass({displayName:"Modal",propTypes:o({},m["default"].propTypes,{show:s["default"].PropTypes.bool,container:s["default"].PropTypes.oneOfType([d["default"],s["default"].PropTypes.func]),onShow:s["default"].PropTypes.func,onHide:s["default"].PropTypes.func,backdrop:s["default"].PropTypes.oneOfType([s["default"].PropTypes.bool,s["default"].PropTypes.oneOf(["static"])]),onEscapeKeyUp:s["default"].PropTypes.func,onBackdropClick:s["default"].PropTypes.func,backdropStyle:s["default"].PropTypes.object,backdropClassName:s["default"].PropTypes.string,containerClassName:s["default"].PropTypes.string,keyboard:s["default"].PropTypes.bool,transition:f["default"],dialogTransitionTimeout:s["default"].PropTypes.number,backdropTransitionTimeout:s["default"].PropTypes.number,autoFocus:s["default"].PropTypes.bool,enforceFocus:s["default"].PropTypes.bool,onEnter:s["default"].PropTypes.func,onEntering:s["default"].PropTypes.func,onEntered:s["default"].PropTypes.func,onExit:s["default"].PropTypes.func,onExiting:s["default"].PropTypes.func,onExited:s["default"].PropTypes.func}),getDefaultProps:function(){var e=function(){};return{show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,onHide:e}},getInitialState:function(){return{exited:!this.props.show}},render:function(){var e=this.props,t=(e.children,e.transition),n=e.backdrop,i=e.dialogTransitionTimeout,o=r(e,["children","transition","backdrop","dialogTransitionTimeout"]),l=o.onExit,u=o.onExiting,c=o.onEnter,d=o.onEntering,p=o.onEntered,f=!!o.show,h=s["default"].Children.only(this.props.children),v=f||t&&!this.state.exited;if(!v)return null;var g=h.props,y=g.role,b=g.tabIndex;return(void 0===y||void 0===b)&&(h=a.cloneElement(h,{role:void 0===y?"document":y,tabIndex:null==b?"-1":b})),t&&(h=s["default"].createElement(t,{transitionAppear:!0,unmountOnExit:!0,"in":f,timeout:i,onExit:l,onExiting:u,onExited:this.handleHidden,onEnter:c,onEntering:d,onEntered:p},h)),s["default"].createElement(m["default"],{ref:this.setMountNode,container:o.container},s["default"].createElement("div",{ref:"modal",role:o.role||"dialog",style:o.style,className:o.className},n&&this.renderBackdrop(),h))},renderBackdrop:function(){var e=this.props,t=e.transition,n=e.backdropTransitionTimeout,i=s["default"].createElement("div",{ref:"backdrop",style:this.props.backdropStyle,className:this.props.backdropClassName,onClick:this.handleBackdropClick});return t&&(i=s["default"].createElement(t,{transitionAppear:!0,"in":this.props.show,timeout:n},i)),i},componentWillReceiveProps:function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},componentWillUpdate:function(e){e.show&&this.checkForFocus()},componentDidMount:function(){this.props.show&&this.onShow()},componentDidUpdate:function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},componentWillUnmount:function(){var e=this.props,t=e.show,n=e.transition;(t||n&&!this.state.exited)&&this.onHide()},onShow:function(){var e=b["default"](this),t=N["default"](this.props.container,e.body);A.add(this,t,this.props.containerClassName),this._onDocumentKeyupListener=w["default"](e,"keyup",this.handleDocumentKeyUp),this._onFocusinListener=E["default"](this.enforceFocus),this.focus(),this.props.onShow&&this.props.onShow()},onHide:function(){A.remove(this),this._onDocumentKeyupListener.remove(),this._onFocusinListener.remove(),this.restoreLastFocus()},setMountNode:function(e){this.mountNode=e?e.getMountNode():e},handleHidden:function(){if(this.setState({exited:!0}),this.onHide(),this.props.onExited){var e;(e=this.props).onExited.apply(e,arguments)}},handleBackdropClick:function(e){e.target===e.currentTarget&&(this.props.onBackdropClick&&this.props.onBackdropClick(e),this.props.backdrop===!0&&this.props.onHide())},handleDocumentKeyUp:function(e){this.props.keyboard&&27===e.keyCode&&this.isTopModal()&&(this.props.onEscapeKeyUp&&this.props.onEscapeKeyUp(e),this.props.onHide())},checkForFocus:function(){T["default"]&&(this.lastFocus=P["default"]())},focus:function(){var e=this.props.autoFocus,t=this.getDialogElement(),n=P["default"](b["default"](this)),i=n&&O["default"](t,n);t&&e&&!i&&(this.lastFocus=n,t.hasAttribute("tabIndex")||(t.setAttribute("tabIndex",-1),u["default"](!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".')),t.focus())},restoreLastFocus:function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},enforceFocus:function D(){var D=this.props.enforceFocus;if(D&&this.isMounted()&&this.isTopModal()){var e=P["default"](b["default"](this)),t=this.getDialogElement();t&&t!==e&&!O["default"](t,e)&&t.focus()}},getDialogElement:function(){var e=this.refs.modal;return e&&e.lastChild},isTopModal:function(){return A.isTopModal(this)}});M.manager=A,t["default"]=M,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t,n){return"object"!=typeof e[t]||"function"!=typeof e[t].render&&1!==e[t].nodeType?new Error(r.errMsg(e,t,n,", expected a DOM element or an object that has a `render` method")):void 0}t.__esModule=!0;var r=n(207);t["default"]=r.createChainableTypeChecker(i),e.exports=t["default"]},function(e,t){"use strict";function n(e,t,n,i){return"Invalid prop '"+t+"' of value '"+e[t]+"'"+(" supplied to '"+n+"'"+i)}function i(e){function t(t,n,i,r){return r=r||"<<anonymous>>",null!=n[i]?e(n,i,r):t?new Error("Required prop '"+i+"' was not specified in '"+r+"'."):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}t.__esModule=!0,t.errMsg=n,t.createChainableTypeChecker=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){var i=s.errMsg(e,t,n,". Expected an Element `type`");if("function"!=typeof e[t]){if(a["default"].isValidElement(e[t]))return new Error(i+", not an actual Element");if("string"!=typeof e[t])return new Error(i+" such as a tag name or return value of React.createClass(...)")}}t.__esModule=!0;var o=n(20),a=i(o),s=n(207);t["default"]=s.createChainableTypeChecker(r),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(20),o=i(r),a=n(65),s=i(a),l=n(206),u=i(l),c=n(169),d=i(c),p=n(210),f=i(p),h=o["default"].createClass({displayName:"Portal",propTypes:{container:o["default"].PropTypes.oneOfType([u["default"],o["default"].PropTypes.func])},componentDidMount:function(){this._renderOverlay()},componentDidUpdate:function(){this._renderOverlay()},componentWillReceiveProps:function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=f["default"](e.container,d["default"](this).body),this._portalContainerNode.appendChild(this._overlayTarget))},componentWillUnmount:function(){this._unrenderOverlay(),this._unmountOverlayTarget()},_mountOverlayTarget:function(){this._overlayTarget||(this._overlayTarget=document.createElement("div"),this._portalContainerNode=f["default"](this.props.container,d["default"](this).body),this._portalContainerNode.appendChild(this._overlayTarget))},_unmountOverlayTarget:function(){this._overlayTarget&&(this._portalContainerNode.removeChild(this._overlayTarget),this._overlayTarget=null),this._portalContainerNode=null},_renderOverlay:function(){var e=this.props.children?o["default"].Children.only(this.props.children):null;null!==e?(this._mountOverlayTarget(),this._overlayInstance=s["default"].unstable_renderSubtreeIntoContainer(this,e,this._overlayTarget)):(this._unrenderOverlay(),this._unmountOverlayTarget())},_unrenderOverlay:function(){this._overlayTarget&&(s["default"].unmountComponentAtNode(this._overlayTarget),this._overlayInstance=null)},render:function(){return null},getMountNode:function(){return this._overlayTarget},getOverlayDOMNode:function(){if(!this.isMounted())throw new Error("getOverlayDOMNode(): A component must be mounted to have a DOM node.");return this._overlayInstance?this._overlayInstance.getWrappedDOMNode?this._overlayInstance.getWrappedDOMNode():s["default"].findDOMNode(this._overlayInstance):null}});t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return e="function"==typeof e?e():e,a["default"].findDOMNode(e)||t}t.__esModule=!0,t["default"]=r;var o=n(65),a=i(o);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=-1;return e.some(function(e,i){
return t(e,i)?(n=i,!0):void 0}),n}function a(e,t){return o(e,function(e){return-1!==e.modals.indexOf(t)})}t.__esModule=!0;var s=n(72),l=i(s),u=n(212),c=i(u),d=n(204),p=i(d),f=n(216),h=i(f),m=n(218),v=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];r(this,e),this.hideSiblingNodes=t,this.modals=[],this.containers=[],this.data=[]}return e.prototype.add=function(e,t,n){var i=this.modals.indexOf(e),r=this.containers.indexOf(t);if(-1!==i)return i;if(i=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&m.hideSiblings(t,e.mountNode),-1!==r)return this.data[r].modals.push(e),i;var o={modals:[e],classes:n?n.split(/\s+/):[],style:{overflow:t.style.overflow,paddingRight:t.style.paddingRight}},a={overflow:"hidden"};return o.overflowing=h["default"](t),o.overflowing&&(a.paddingRight=parseInt(l["default"](t,"paddingRight")||0,10)+p["default"]()+"px"),l["default"](t,a),o.classes.forEach(c["default"].addClass.bind(null,t)),this.containers.push(t),this.data.push(o),i},e.prototype.remove=function(e){var t=this.modals.indexOf(e);if(-1!==t){var n=a(this.data,e),i=this.data[n],r=this.containers[n];i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(t,1),0===i.modals.length?(Object.keys(i.style).forEach(function(e){return r.style[e]=i.style[e]}),i.classes.forEach(c["default"].removeClass.bind(null,r)),this.hideSiblingNodes&&m.showSiblings(r,e.mountNode),this.containers.splice(n,1),this.data.splice(n,1)):this.hideSiblingNodes&&m.ariaHidden(!1,i.modals[i.modals.length-1].mountNode)}},e.prototype.isTopModal=function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e},e}();t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";e.exports={addClass:n(213),removeClass:n(215),hasClass:n(214)}},function(e,t,n){"use strict";var i=n(214);e.exports=function(e,t){e.classList?e.classList.add(t):i(e)||(e.className=e.className+" "+t)}},function(e,t){"use strict";e.exports=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")}},function(e,t){"use strict";e.exports=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e&&"body"===e.tagName.toLowerCase()}function o(e){var t=c["default"](e),n=l["default"](t),i=n.innerWidth;if(!i){var r=t.documentElement.getBoundingClientRect();i=r.right-Math.abs(r.left)}return t.body.clientWidth<i}function a(e){var t=l["default"](e);return t||r(e)?o(e):e.scrollHeight>e.clientHeight}t.__esModule=!0,t["default"]=a;var s=n(217),l=i(s),u=n(87),c=i(u);e.exports=t["default"]},function(e,t){"use strict";e.exports=function(e){return e===e.window?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}},function(e,t){"use strict";function n(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function i(e,t){s(e,t,function(e){return n(!0,e)})}function r(e,t){s(e,t,function(e){return n(!1,e)})}t.__esModule=!0,t.ariaHidden=n,t.hideSiblings=i,t.showSiblings=r;var o=["template","script","style"],a=function(e){var t=e.nodeType,n=e.tagName;return 1===t&&-1===o.indexOf(n.toLowerCase())},s=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(e){-1===t.indexOf(e)&&a(e)&&n(e)})}},function(e,t){"use strict";function n(e){var t=!document.addEventListener,n=void 0;return t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)}),{remove:n}}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(25),c=n(24),d=l["default"].createClass({displayName:"ModalDialog",propTypes:{dialogClassName:l["default"].PropTypes.string},render:function(){var e=i({display:"block"},this.props.style),t=c.prefix(this.props),n=c.getClassSet(this.props);return delete n[t],n[c.prefix(this.props,"dialog")]=!0,l["default"].createElement("div",i({},this.props,{title:null,tabIndex:"-1",role:"dialog",style:e,className:a["default"](this.props.className,t)}),l["default"].createElement("div",{className:a["default"](this.props.dialogClassName,n)},l["default"].createElement("div",{className:c.prefix(this.props,"content"),role:"document"},this.props.children)))}});t["default"]=c.bsSizes([u.Sizes.LARGE,u.Sizes.SMALL],c.bsClass("modal",d)),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(24),p=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){return c["default"].createElement("div",o({},this.props,{className:l["default"](this.props.className,d.prefix(this.props,"body"))}),this.props.children)},t}(c["default"].Component);t["default"]=d.bsClass("modal",p),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(24),f=n(84),h=s(f),m=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e["aria-label"],n=o(e,["aria-label"]),i=h["default"](this.context.$bs_onModalHide,this.props.onHide);return d["default"].createElement("div",a({},n,{className:u["default"](this.props.className,p.prefix(this.props,"header"))}),this.props.closeButton&&d["default"].createElement("button",{type:"button",className:"close","aria-label":t,onClick:i},d["default"].createElement("span",{"aria-hidden":"true"},"×")),this.props.children)},t}(d["default"].Component);m.propTypes={"aria-label":d["default"].PropTypes.string,bsClass:d["default"].PropTypes.string,closeButton:d["default"].PropTypes.bool,onHide:d["default"].PropTypes.func},m.contextTypes={$bs_onModalHide:d["default"].PropTypes.func},m.defaultProps={"aria-label":"Close",closeButton:!1},t["default"]=p.bsClass("modal",m),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(24),p=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){return c["default"].createElement("h4",o({},this.props,{className:l["default"](this.props.className,d.prefix(this.props,"title"))}),this.props.children)},t}(c["default"].Component);t["default"]=d.bsClass("modal",p),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(24),p=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){return c["default"].createElement("div",o({},this.props,{className:l["default"](this.props.className,d.prefix(this.props,"footer"))}),this.props.children)},t}(c["default"].Component);p.propTypes={bsClass:c["default"].PropTypes.string},p.defaultProps={bsClass:"modal"},t["default"]=d.bsClass("modal",p),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(89),c=a(u),d=n(20),p=a(d),f=n(65),h=a(f),m=n(53),v=a(m),g=n(36),y=a(g),b=n(24),_=n(84),w=a(_),C=n(226),E=n(33),x=a(E),T=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.componentDidUpdate=function(){if(this._needsRefocus){var e=this.refs.ul&&h["default"].findDOMNode(this.refs.ul),t=e?e.children||[]:[],n=this.eventKeys().indexOf(this.getActiveKey());if(this._needsRefocus=!1,-1!==n){var i=t[n];i&&i.firstChild&&i.firstChild.focus()}}},t.prototype.render=function(){var e=this.props.className,t=null!=this.props.navbar?this.props.navbar:this.context.$bs_navbar,n=b.getClassSet(this.props);if(n[b.prefix(this.props,"stacked")]=this.props.stacked,n[b.prefix(this.props,"justified")]=this.props.justified,t){var i=this.context.$bs_navbar_bsClass||"navbar";n[b.prefix({bsClass:i},"nav")]=!0,n[b.prefix({bsClass:i},"right")]=this.props.pullRight,n[b.prefix({bsClass:i},"left")]=this.props.pullLeft}else n["pull-right"]=this.props.pullRight,n["pull-left"]=this.props.pullLeft;var r=p["default"].createElement("ul",o({ref:"ul"},this.props,{role:this.getNavRole(),className:l["default"](e,n)}),x["default"].map(this.props.children,this.renderNavItem,this));return r},t.prototype.renderNavItem=function(e,t){var n=w["default"](e.props.onSelect,this.props.onSelect),i=this.isChildActive(e),r=this.getTabProps(e,i,n);return d.cloneElement(e,o({active:i,activeKey:this.props.activeKey,activeHref:this.props.activeHref,onSelect:n,key:e.key||t,navItem:!0},r))},t.prototype.getActiveKey=function(){var e=this.context.$bs_tabcontainer;return e?(y["default"](!(null!=this.props.activeKey||this.props.activeHref),"Specifing a Nav `activeKey` or `activeHref` prop in the context of a `TabContainer` is not supported. Instead use `<TabContainer activeKey={"+this.props.activeKey+"} />`"),e.activeKey):this.props.activeKey},t.prototype.isChildActive=function(e){var t=this.getActiveKey();return this.context.$bs_tabcontainer?(y["default"](!e.props.active,"Specifying a NavItem `active` prop in the context of a `TabContainer` is not supported. Instead use `<TabContainer activeKey={"+e.props.eventKey+"} />`"),e.props.eventKey===t):e.props.active?!0:null!=this.props.activeKey&&e.props.eventKey===this.props.activeKey?!0:null!=this.props.activeHref&&e.props.href===this.props.activeHref?!0:e.props.active},t.prototype.getTabProps=function(e,t,n){var i=this.getNavRole(),r=this.context.$bs_tabcontainer;if(!r&&"tablist"!==i)return null;var o=e.props,a=o.id,s=o["aria-controls"],l=o.eventKey,u=o.role,c=o.onKeyDown,d=o.tabIndex,p=void 0===d?0:d;return r&&r.getId&&(y["default"](!(a||s),"In the context of a TabContainer, NavItems are given generated `id` and `aria-controls` attributes for the sake of proper component accessibility. Any provided ones will be ignored. To control these attributes directly provide a `generateChildId` prop to the parent TabContainer."),a=r.getId(l,C.TAB)||null,s=r.getId(l,C.PANE)||null,n=w["default"](n,r.onSelect)),"tablist"===i&&(u=u||"tab",c=w["default"](this.handleTabKeyDown.bind(this,n||function(){}),c),p=t?p:-1),{onSelect:n,id:a,role:u,onKeyDown:c,"aria-controls":s,tabIndex:p}},t.prototype.handleTabKeyDown=function(e,t){var n=this.eventKeys(),i=this.getActiveKey()||n[0],r=void 0;switch(t.keyCode){case c["default"].codes.left:case c["default"].codes.up:r=C.nextEnabled(this.props.children,i,n,!1),r&&r!==i&&(t.preventDefault(),e(r),this._needsRefocus=!0);break;case c["default"].codes.right:case c["default"].codes.down:r=C.nextEnabled(this.props.children,i,n,!0),r&&r!==i&&(t.preventDefault(),e(r),this._needsRefocus=!0)}},t.prototype.eventKeys=function(){var e=[];return x["default"].forEach(this.props.children,function(t){var n=t.props.eventKey;return e.push(n)}),e},t.prototype.getNavRole=function(){return this.props.role||(this.context.$bs_tabcontainer?"tablist":null)},t}(p["default"].Component);T.propTypes={activeHref:p["default"].PropTypes.string,activeKey:p["default"].PropTypes.any,stacked:p["default"].PropTypes.bool,justified:v["default"](p["default"].PropTypes.bool,function(e){var t=e.justified,n=e.navbar;return t&&n?Error("justified navbar `Nav`s are not supported"):null}),onSelect:p["default"].PropTypes.func,className:p["default"].PropTypes.string,id:p["default"].PropTypes.oneOfType([p["default"].PropTypes.string,p["default"].PropTypes.number]),role:p["default"].PropTypes.string,navbar:p["default"].PropTypes.bool,pullRight:p["default"].PropTypes.bool,pullLeft:p["default"].PropTypes.bool},T.contextTypes={$bs_navbar:p["default"].PropTypes.bool,$bs_navbar_bsClass:p["default"].PropTypes.string,$bs_tabcontainer:p["default"].PropTypes.shape({activeKey:p["default"].PropTypes.any,onSelect:p["default"].PropTypes.func,getId:p["default"].PropTypes.func})},T.defaultProps={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},t["default"]=b.bsClass("nav",b.bsStyles(["tabs","pills"],T)),e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t,n,i){function r(){var t=n.indexOf(l);return l=i?n[Math.min(o,t+1)]:n[Math.max(0,t-1)],s(e,function(e){return e.props.eventKey===l})}for(var o=n.length-1,a=n[i?Math.max(o,0):0],l=t,u=r();u.props.eventKey!==a&&u.props.disabled;)u=r();return u.props.disabled?t:u.props.eventKey}var r=n(1)["default"];t.__esModule=!0,t.nextEnabled=i;var o=n(33),a=r(o),s=a["default"].find,l="tab";t.TAB=l;var u="pane";t.PANE=u},function(e,t,n){"use strict";function i(e,t,n){var i=function(e,n){var i,a=e.componentClass,s=e.className,u=r(e,["componentClass","className"]),d=n.$bs_navbar_bsClass,p=void 0===d?"navbar":d;return c["default"].createElement(a,o({},u,{className:l["default"](s,v.prefix({bsClass:p},t),(i={},i[v.prefix({bsClass:p},"right")]=u.pullRight,i[v.prefix({bsClass:p},"left")]=u.pullLeft,i))}))};return i.displayName=n,i.propTypes={componentClass:p["default"],pullRight:c["default"].PropTypes.bool,pullLeft:c["default"].PropTypes.bool},i.defaultProps={componentClass:e,pullRight:!1,pullLeft:!1},i.contextTypes={$bs_navbar_bsClass:u.PropTypes.string},i}var r=n(22)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(49),p=a(d),f=n(159),h=a(f),m=n(25),v=n(24),g=n(178),y=a(g),b=n(228),_=a(b),w=n(229),C=a(w),E=n(230),x=a(E),T=n(231),k=a(T),P=c["default"].createClass({displayName:"Navbar",propTypes:{fixedTop:c["default"].PropTypes.bool,fixedBottom:c["default"].PropTypes.bool,staticTop:c["default"].PropTypes.bool,inverse:c["default"].PropTypes.bool,fluid:c["default"].PropTypes.bool,componentClass:p["default"],onToggle:c["default"].PropTypes.func,expanded:c["default"].PropTypes.bool},childContextTypes:{$bs_navbar:u.PropTypes.bool,$bs_navbar_bsClass:u.PropTypes.string,$bs_navbar_onToggle:u.PropTypes.func,$bs_navbar_expanded:u.PropTypes.bool},getDefaultProps:function(){return{componentClass:"nav",fixedTop:!1,fixedBottom:!1,staticTop:!1,inverse:!1,fluid:!1}},getChildContext:function(){return{$bs_navbar:!0,$bs_navbar_bsClass:this.props.bsClass,$bs_navbar_onToggle:this.handleToggle,$bs_navbar_expanded:this.props.expanded}},handleToggle:function(){this.props.onToggle(!this.props.expanded)},isNavExpanded:function(){return!!this.props.expanded},render:function(){var e=this.props,t=e.fixedTop,n=e.fixedBottom,i=e.staticTop,a=e.inverse,s=e.componentClass,u=e.fluid,d=e.className,p=e.children,f=r(e,["fixedTop","fixedBottom","staticTop","inverse","componentClass","fluid","className","children"]);void 0===f.role&&"nav"!==s&&(f.role="navigation"),a&&(f.bsStyle=m.INVERSE);var h=v.getClassSet(f);return h[v.prefix(this.props,"fixed-top")]=t,h[v.prefix(this.props,"fixed-bottom")]=n,h[v.prefix(this.props,"static-top")]=i,c["default"].createElement(s,o({},f,{className:l["default"](d,h)}),c["default"].createElement(y["default"],{fluid:u},p))}}),S=[m.DEFAULT,m.INVERSE];P=v.bsStyles(S,m.DEFAULT,v.bsClass("navbar",h["default"](P,{expanded:"onToggle"}))),P.Brand=_["default"],P.Header=x["default"],P.Toggle=k["default"],P.Collapse=C["default"],P.Form=i("div","form","NavbarForm"),P.Text=i("p","text","NavbarText"),P.Link=i("a","link","NavbarLink"),t["default"]=P,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(22)["default"],a=n(4)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(24),f=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=o(e,["className","children"]),r=this.context.$bs_navbar_bsClass,s=void 0===r?"navbar":r,l=p.prefix({bsClass:s},"brand");return d["default"].isValidElement(n)?d["default"].cloneElement(n,{className:u["default"](n.props.className,t,l)}):d["default"].createElement("span",a({},i,{className:u["default"](t,l)}),n)},t}(d["default"].Component);f.contextTypes={$bs_navbar_bsClass:d["default"].PropTypes.string},t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(20),s=o(a),l=n(24),u=n(71),c=o(u),d=s["default"].createClass({displayName:"NavbarCollapse",contextTypes:{$bs_navbar_bsClass:a.PropTypes.string,$bs_navbar_expanded:a.PropTypes.bool},render:function(){var e=this.props,t=e.children,n=i(e,["children"]),o=this.context,a=o.$bs_navbar_bsClass,u=void 0===a?"navbar":a,d=o.$bs_navbar_expanded;return s["default"].createElement(c["default"],r({"in":d},n),s["default"].createElement("div",{className:l.prefix({bsClass:u},"collapse")},t))}});t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(24),d=u["default"].createClass({displayName:"NavbarHeader",contextTypes:{$bs_navbar_bsClass:l.PropTypes.string},render:function(){var e=this.props,t=e.className,n=i(e,["className"]),o=this.context.$bs_navbar_bsClass,a=void 0===o?"navbar":o,l=c.prefix({bsClass:a},"header");return u["default"].createElement("div",r({},n,{className:s["default"](t,l)}))}});t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(22)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(24),d=n(84),p=o(d),f=u["default"].createClass({displayName:"NavbarToggle",propTypes:{onClick:u["default"].PropTypes.func,children:l.PropTypes.node},contextTypes:{$bs_navbar_bsClass:l.PropTypes.string,$bs_navbar_onToggle:l.PropTypes.func,$bs_navbar_expanded:l.PropTypes.bool},render:function(){var e=this.props,t=e.onClick,n=e.className,o=e.children,a=r(e,["onClick","className","children"]),l=this.context,d=l.$bs_navbar_bsClass,f=void 0===d?"navbar":d,h=l.$bs_navbar_onToggle,m=l.$bs_navbar_expanded,v=i({type:"button"},a,{onClick:p["default"](t,h),className:s["default"](n,c.prefix({bsClass:f},"toggle"),!m&&"collapsed")});return o?u["default"].createElement("button",v,o):u["default"].createElement("button",v,u["default"].createElement("span",{className:"sr-only"},"Toggle navigation"),u["default"].createElement("span",{className:"icon-bar"}),u["default"].createElement("span",{className:"icon-bar"}),u["default"].createElement("span",{className:"icon-bar"}))}});t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(20),u=s(l),c=n(85),d=s(c),p=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.title,i=e.noCaret,r=a(e,["children","title","noCaret"]);return u["default"].createElement(d["default"],o({},r,{componentClass:"li"}),u["default"].createElement(d["default"].Toggle,{useAnchor:!0,disabled:r.disabled,noCaret:i},n),u["default"].createElement(d["default"].Menu,null,t))},t}(u["default"].Component);p.propTypes=o({noCaret:u["default"].PropTypes.bool,title:u["default"].PropTypes.node.isRequired},d["default"].propTypes),t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(40),d=o(c),p=n(84),f=o(p),h=u["default"].createClass({displayName:"NavItem",propTypes:{active:u["default"].PropTypes.bool,disabled:u["default"].PropTypes.bool,role:u["default"].PropTypes.string,href:u["default"].PropTypes.string,onClick:u["default"].PropTypes.func,onSelect:u["default"].PropTypes.func,eventKey:u["default"].PropTypes.any},getDefaultProps:function(){return{active:!1,disabled:!1}},render:function(){var e=this.props,t=e.active,n=e.disabled,o=e.role,a=e.href,l=e.onClick,c=e.className,p=e.style,h=i(e,["active","disabled","role","href","onClick","className","style"]);return delete h.onSelect,delete h.eventKey,o?"tab"===o&&(h["aria-selected"]=t):"#"===a&&(o="button"),u["default"].createElement("li",{role:"presentation",className:s["default"](c,{active:t,disabled:n}),style:p},u["default"].createElement(d["default"],r({},h,{disabled:n,role:o,href:a,onClick:f["default"](l,this.handleClick)})))},handleClick:function(e){this.props.onSelect&&(e.preventDefault(),this.props.disabled||this.props.onSelect(this.props.eventKey,e))}});t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(20),u=s(l),c=n(235),d=s(c),p=n(49),f=s(p),h=n(173),m=s(h),v=n(23),g=s(v),y=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.animation,i=a(e,["children","animation"]);return n===!0&&(n=m["default"]),n===!1&&(n=null),n||(t=l.cloneElement(t,{className:g["default"]("in",t.props.className)})),u["default"].createElement(d["default"],o({},i,{transition:n}),t)},t}(u["default"].Component);y.propTypes=o({},d["default"].propTypes,{show:u["default"].PropTypes.bool,rootClose:u["default"].PropTypes.bool,onHide:u["default"].PropTypes.func,animation:u["default"].PropTypes.oneOfType([u["default"].PropTypes.bool,f["default"]]),onEnter:u["default"].PropTypes.func,onEntering:u["default"].PropTypes.func,onEntered:u["default"].PropTypes.func,onExit:u["default"].PropTypes.func,onExiting:u["default"].PropTypes.func,onExited:u["default"].PropTypes.func}),y.defaultProps={animation:m["default"],rootClose:!1,show:!1},t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=n(20),u=i(l),c=n(209),d=i(c),p=n(236),f=i(p),h=n(165),m=i(h),v=n(208),g=i(v),y=function(e){function t(n,i){o(this,t),e.call(this,n,i),this.state={exited:!n.show},this.onHiddenListener=this.handleHidden.bind(this)}return a(t,e),t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.render=function(){var e=this.props,t=e.container,n=e.containerPadding,i=e.target,o=e.placement,a=e.shouldUpdatePosition,s=e.rootClose,l=e.children,c=e.transition,p=r(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]),h=p.show||c&&!this.state.exited;if(!h)return null;var v=l;if(v=u["default"].createElement(f["default"],{container:t,containerPadding:n,target:i,placement:o,shouldUpdatePosition:a},v),c){var g=p.onExit,y=p.onExiting,b=p.onEnter,_=p.onEntering,w=p.onEntered;v=u["default"].createElement(c,{"in":p.show,transitionAppear:!0,onExit:g,onExiting:y,onExited:this.onHiddenListener,onEnter:b,onEntering:_,onEntered:w},v)}return s&&(v=u["default"].createElement(m["default"],{onRootClose:p.onHide},v)),u["default"].createElement(d["default"],{container:t},v)},t.prototype.handleHidden=function(){if(this.setState({exited:!0}),this.props.onExited){var e;(e=this.props).onExited.apply(e,arguments)}},t}(u["default"].Component);y.propTypes=s({},d["default"].propTypes,f["default"].propTypes,{show:u["default"].PropTypes.bool,rootClose:u["default"].PropTypes.bool,onHide:function(e,t,n){var i=u["default"].PropTypes.func;return e.rootClose&&(i=i.isRequired),i(e,t,n)},transition:g["default"],onEnter:u["default"].PropTypes.func,onEntering:u["default"].PropTypes.func,onEntered:u["default"].PropTypes.func,onExit:u["default"].PropTypes.func,onExiting:u["default"].PropTypes.func,onExited:u["default"].PropTypes.func}),t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=n(20),u=i(l),c=n(65),d=i(c),p=n(23),f=i(p),h=n(169),m=i(h),v=n(210),g=i(v),y=n(237),b=n(206),_=i(b),w=function(e){function t(n,i){o(this,t),e.call(this,n,i),this.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},this._needsFlush=!1,this._lastTarget=null}return a(t,e),t.prototype.componentDidMount=function(){this.updatePosition()},t.prototype.componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(e){this._needsFlush&&(this._needsFlush=!1,this.updatePosition(e.placement!==this.props.placement))},t.prototype.componentWillUnmount=function(){this._lastTarget=null},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,i=r(e,["children","className"]),o=this.state,a=o.positionLeft,c=o.positionTop,d=r(o,["positionLeft","positionTop"]);delete i.target,delete i.container,delete i.containerPadding;var p=u["default"].Children.only(t);return l.cloneElement(p,s({},i,d,{positionLeft:a,positionTop:c,className:f["default"](n,p.props.className),style:s({},p.props.style,{left:a,top:c})}))},t.prototype.getTargetSafe=function(){if(!this.props.target)return null;var e=this.props.target(this.props);return e?e:null},t.prototype.updatePosition=function(e){var t=this.getTargetSafe();if(this.props.shouldUpdatePosition||t!==this._lastTarget||e){if(this._lastTarget=t,!t)return void this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});var n=d["default"].findDOMNode(this),i=g["default"](this.props.container,m["default"](this).body);this.setState(y.calcOverlayPosition(this.props.placement,n,t,i,this.props.containerPadding))}},t}(u["default"].Component);w.propTypes={target:u["default"].PropTypes.func,container:u["default"].PropTypes.oneOfType([_["default"],u["default"].PropTypes.func]),containerPadding:u["default"].PropTypes.number,placement:u["default"].PropTypes.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:u["default"].PropTypes.bool},w.displayName="Position",w.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t["default"]=w,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,i){var r=h.getContainerDimensions(n),o=r.scroll,a=r.height,s=e-i-o,l=e+i-o+t;return 0>s?-s:l>a?a-l:0}function o(e,t,n,i){var r=h.getContainerDimensions(n),o=r.width,a=e-i,s=e+i+t;return 0>a?-a:s>o?o-s:0}t.__esModule=!0;var a=n(169),s=i(a),l=n(238),u=i(l),c=n(239),d=i(c),p=n(241),f=i(p),h={getContainerDimensions:function(e){var t=void 0,n=void 0,i=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,i=f["default"](s["default"](e).documentElement)||f["default"](e);else{var r=u["default"](e);t=r.width,n=r.height,i=f["default"](e)}return{width:t,height:n,scroll:i}},getPosition:function(e,t){var n="BODY"===t.tagName?u["default"](e):d["default"](e,t);return n},calcOverlayPosition:function(e,t,n,i,a){var s=h.getPosition(n,i),l=u["default"](t),c=l.height,d=l.width,p=void 0,f=void 0,m=void 0,v=void 0;if("left"===e||"right"===e){f=s.top+(s.height-c)/2,p="left"===e?s.left-d:s.left+s.width;var g=r(f,c,i,a);f+=g,v=50*(1-2*g/c)+"%",m=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');p=s.left+(s.width-d)/2,f="top"===e?s.top-c:s.top+s.height;var y=o(p,d,i,a);p+=y,m=50*(1-2*y/d)+"%",v=void 0}return{positionLeft:p,positionTop:f,arrowOffsetLeft:m,arrowOffsetTop:v}}};t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(88),r=n(217),o=n(87);e.exports=function(e){var t=o(e),n=r(t),a=t&&t.documentElement,s={top:0,left:0,height:0,width:0};if(t)return i(a,e)?(void 0!==e.getBoundingClientRect&&(s=e.getBoundingClientRect()),(s.width||s.height)&&(s={top:s.top+(n.pageYOffset||a.scrollTop)-(a.clientTop||0),left:s.left+(n.pageXOffset||a.scrollLeft)-(a.clientLeft||0),width:(null==s.width?e.offsetWidth:s.width)||0,height:(null==s.height?e.offsetHeight:s.height)||0}),s):s}},function(e,t,n){"use strict";function i(e){return e.nodeName&&e.nodeName.toLowerCase()}function r(e,t){var n,r={top:0,left:0};return"fixed"===(0,m["default"])(e,"position")?n=e.getBoundingClientRect():(t=t||(0,u["default"])(e),n=(0,s["default"])(e),"html"!==i(t)&&(r=(0,s["default"])(t)),r.top+=parseInt((0,m["default"])(t,"borderTopWidth"),10)-(0,d["default"])(t)||0,r.left+=parseInt((0,m["default"])(t,"borderLeftWidth"),10)-(0,f["default"])(t)||0),o._extends({},n,{top:n.top-r.top-(parseInt((0,m["default"])(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,m["default"])(e,"marginLeft"),10)||0)})}var o=n(78);t.__esModule=!0,t["default"]=r;var a=n(238),s=o.interopRequireDefault(a),l=n(240),u=o.interopRequireDefault(l),c=n(241),d=o.interopRequireDefault(c),p=n(242),f=o.interopRequireDefault(p),h=n(72),m=o.interopRequireDefault(h);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e.nodeName&&e.nodeName.toLowerCase()}function r(e){for(var t=(0,s["default"])(e),n=e&&e.offsetParent;n&&"html"!==i(e)&&"static"===(0,u["default"])(n,"position");)n=n.offsetParent;return n||t.documentElement}var o=n(78);t.__esModule=!0,t["default"]=r;var a=n(87),s=o.interopRequireDefault(a),l=n(72),u=o.interopRequireDefault(l);e.exports=t["default"]},function(e,t,n){"use strict";var i=n(217);e.exports=function(e,t){var n=i(e);return void 0===t?n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop:void(n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t)}},function(e,t,n){"use strict";var i=n(217);e.exports=function(e,t){var n=i(e);return void 0===t?n?"pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft:e.scrollLeft:void(n?n.scrollTo(t,"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop):e.scrollLeft=t)}},function(e,t,n){"use strict";function i(e,t){return Array.isArray(t)?t.indexOf(e)>=0:e===t}var r=n(4)["default"],o=n(28)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(88),l=a(s),u=n(172),c=a(u),d=n(20),p=a(d),f=n(65),h=a(f),m=n(36),v=a(m),g=n(234),y=a(g),b=n(84),_=a(b),w=p["default"].createClass({displayName:"OverlayTrigger",propTypes:r({},y["default"].propTypes,{trigger:p["default"].PropTypes.oneOfType([p["default"].PropTypes.oneOf(["click","hover","focus"]),p["default"].PropTypes.arrayOf(p["default"].PropTypes.oneOf(["click","hover","focus"]))]),delay:p["default"].PropTypes.number,delayShow:p["default"].PropTypes.number,delayHide:p["default"].PropTypes.number,defaultOverlayShown:p["default"].PropTypes.bool,overlay:p["default"].PropTypes.node.isRequired,onBlur:p["default"].PropTypes.func,onClick:p["default"].PropTypes.func,
onFocus:p["default"].PropTypes.func,onMouseEnter:p["default"].PropTypes.func,onMouseLeave:p["default"].PropTypes.func,target:function(){},onHide:function(){},show:function(){}}),getDefaultProps:function(){return{defaultOverlayShown:!1,trigger:["hover","focus"]}},getInitialState:function(){return{isOverlayShown:this.props.defaultOverlayShown}},show:function(){this.setState({isOverlayShown:!0})},hide:function(){this.setState({isOverlayShown:!1})},toggle:function(){this.state.isOverlayShown?this.hide():this.show()},componentWillMount:function(){this.handleMouseOver=this.handleMouseOverOut.bind(null,this.handleDelayedShow),this.handleMouseOut=this.handleMouseOverOut.bind(null,this.handleDelayedHide)},componentDidMount:function(){this._mountNode=document.createElement("div"),this.renderOverlay()},renderOverlay:function(){h["default"].unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)},componentWillUnmount:function(){h["default"].unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)},componentDidUpdate:function(){this._mountNode&&this.renderOverlay()},getOverlayTarget:function(){return h["default"].findDOMNode(this)},getOverlay:function(){var e=r({},c["default"](this.props,o(y["default"].propTypes)),{show:this.state.isOverlayShown,onHide:this.hide,target:this.getOverlayTarget,onExit:this.props.onExit,onExiting:this.props.onExiting,onExited:this.props.onExited,onEnter:this.props.onEnter,onEntering:this.props.onEntering,onEntered:this.props.onEntered}),t=d.cloneElement(this.props.overlay,{placement:e.placement,container:e.container});return p["default"].createElement(y["default"],e,t)},render:function(){var e=p["default"].Children.only(this.props.children),t=e.props,n={"aria-describedby":this.props.overlay.props.id};return this._overlay=this.getOverlay(),n.onClick=_["default"](t.onClick,this.props.onClick),i("click",this.props.trigger)&&(n.onClick=_["default"](this.toggle,n.onClick)),i("hover",this.props.trigger)&&(v["default"](!("hover"===this.props.trigger),'[react-bootstrap] Specifying only the `"hover"` trigger limits the visibilty of the overlay to just mouse users. Consider also including the `"focus"` trigger so that touch and keyboard only users can see the overlay as well.'),n.onMouseOver=_["default"](this.handleMouseOver,this.props.onMouseOver,t.onMouseOver),n.onMouseOut=_["default"](this.handleMouseOut,this.props.onMouseOut,t.onMouseOut)),i("focus",this.props.trigger)&&(n.onFocus=_["default"](this.handleDelayedShow,this.props.onFocus,t.onFocus),n.onBlur=_["default"](this.handleDelayedHide,this.props.onBlur,t.onBlur)),d.cloneElement(e,n)},handleDelayedShow:function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.isOverlayShown&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;return t?void(this._hoverShowDelay=setTimeout(function(){e._hoverShowDelay=null,e.show()},t)):void this.show()}},handleDelayedHide:function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.isOverlayShown&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;return t?void(this._hoverHideDelay=setTimeout(function(){e._hoverHideDelay=null,e.hide()},t)):void this.hide()}},handleMouseOverOut:function(e,t){var n=t.currentTarget,i=t.relatedTarget||t.nativeEvent.toElement;(!i||i!==n&&!l["default"](n,i))&&e(t)}});t["default"]=w,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(23),l=r(s),u=a["default"].createClass({displayName:"PageHeader",render:function(){return a["default"].createElement("div",i({},this.props,{className:l["default"](this.props.className,"page-header")}),a["default"].createElement("h1",null,this.props.children))}});t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(40),d=o(c),p=n(84),f=o(p),h=u["default"].createClass({displayName:"PageItem",propTypes:{disabled:u["default"].PropTypes.bool,previous:u["default"].PropTypes.bool,next:u["default"].PropTypes.bool,onClick:u["default"].PropTypes.func,onSelect:u["default"].PropTypes.func,eventKey:u["default"].PropTypes.any},getDefaultProps:function(){return{disabled:!1,previous:!1,next:!1}},render:function(){var e=this.props,t=e.disabled,n=e.previous,o=e.next,a=e.onClick,l=e.className,c=e.style,p=i(e,["disabled","previous","next","onClick","className","style"]);return delete p.onSelect,delete p.eventKey,u["default"].createElement("li",{className:s["default"](l,{disabled:t,previous:n,next:o}),style:c},u["default"].createElement(d["default"],r({},p,{disabled:t,onClick:f["default"](a,this.handleSelect)})))},handleSelect:function(e){(this.props.onSelect||this.props.disabled)&&(e.preventDefault(),this.props.disabled||this.props.onSelect(this.props.eventKey,e))}});t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(23),l=r(s),u=n(33),c=r(u),d=n(84),p=r(d),f=a["default"].createClass({displayName:"Pager",propTypes:{onSelect:a["default"].PropTypes.func},render:function(){return a["default"].createElement("ul",i({},this.props,{className:l["default"](this.props.className,"pager")}),c["default"].map(this.props.children,this.renderPageItem))},renderPageItem:function(e,t){return o.cloneElement(e,{onSelect:p["default"](e.props.onSelect,this.props.onSelect),key:e.key?e.key:t})}});t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(49),c=r(u),d=n(24),p=n(248),f=r(p),h=n(40),m=r(h),v=l["default"].createClass({displayName:"Pagination",propTypes:{activePage:l["default"].PropTypes.number,items:l["default"].PropTypes.number,maxButtons:l["default"].PropTypes.number,boundaryLinks:l["default"].PropTypes.bool,ellipsis:l["default"].PropTypes.oneOfType([l["default"].PropTypes.bool,l["default"].PropTypes.node]),first:l["default"].PropTypes.oneOfType([l["default"].PropTypes.bool,l["default"].PropTypes.node]),last:l["default"].PropTypes.oneOfType([l["default"].PropTypes.bool,l["default"].PropTypes.node]),prev:l["default"].PropTypes.oneOfType([l["default"].PropTypes.bool,l["default"].PropTypes.node]),next:l["default"].PropTypes.oneOfType([l["default"].PropTypes.bool,l["default"].PropTypes.node]),onSelect:l["default"].PropTypes.func,buttonComponentClass:c["default"]},getDefaultProps:function(){return{activePage:1,items:1,maxButtons:0,first:!1,last:!1,prev:!1,next:!1,ellipsis:!0,boundaryLinks:!1,buttonComponentClass:m["default"],bsClass:"pagination"}},renderPageButtons:function(){var e=[],t=void 0,n=void 0,i=void 0,r=this.props,o=r.maxButtons,a=r.activePage,s=r.items,u=r.onSelect,c=r.ellipsis,d=r.buttonComponentClass,p=r.boundaryLinks;if(o){var h=a-parseInt(o/2,10);t=h>1?h:1,i=s>=t+o,i?n=t+o-1:(n=s,t=s-o+1,1>t&&(t=1))}else t=1,n=s;for(var m=t;n>=m;m++)e.push(l["default"].createElement(f["default"],{key:m,eventKey:m,active:m===a,onSelect:u,buttonComponentClass:d},m));return p&&c&&1!==t&&(e.unshift(l["default"].createElement(f["default"],{key:"ellipsisFirst",disabled:!0,buttonComponentClass:d},l["default"].createElement("span",{"aria-label":"More"},this.props.ellipsis===!0?"…":this.props.ellipsis))),e.unshift(l["default"].createElement(f["default"],{key:1,eventKey:1,active:!1,onSelect:u,buttonComponentClass:d},"1"))),o&&i&&c&&(e.push(l["default"].createElement(f["default"],{key:"ellipsis",disabled:!0,buttonComponentClass:d},l["default"].createElement("span",{"aria-label":"More"},this.props.ellipsis===!0?"…":this.props.ellipsis))),p&&n!==s&&e.push(l["default"].createElement(f["default"],{key:s,eventKey:s,active:!1,onSelect:u,buttonComponentClass:d},s))),e},renderPrev:function(){return this.props.prev?l["default"].createElement(f["default"],{key:"prev",eventKey:this.props.activePage-1,disabled:1===this.props.activePage,onSelect:this.props.onSelect,buttonComponentClass:this.props.buttonComponentClass},l["default"].createElement("span",{"aria-label":"Previous"},this.props.prev===!0?"‹":this.props.prev)):null},renderNext:function(){return this.props.next?l["default"].createElement(f["default"],{key:"next",eventKey:this.props.activePage+1,disabled:this.props.activePage>=this.props.items,onSelect:this.props.onSelect,buttonComponentClass:this.props.buttonComponentClass},l["default"].createElement("span",{"aria-label":"Next"},this.props.next===!0?"›":this.props.next)):null},renderFirst:function(){return this.props.first?l["default"].createElement(f["default"],{key:"first",eventKey:1,disabled:1===this.props.activePage,onSelect:this.props.onSelect,buttonComponentClass:this.props.buttonComponentClass},l["default"].createElement("span",{"aria-label":"First"},this.props.first===!0?"«":this.props.first)):null},renderLast:function(){return this.props.last?l["default"].createElement(f["default"],{key:"last",eventKey:this.props.items,disabled:this.props.activePage>=this.props.items,onSelect:this.props.onSelect,buttonComponentClass:this.props.buttonComponentClass},l["default"].createElement("span",{"aria-label":"Last"},this.props.last===!0?"»":this.props.last)):null},render:function(){return l["default"].createElement("ul",i({},this.props,{className:a["default"](this.props.className,d.getClassSet(this.props))}),this.renderFirst(),this.renderPrev(),this.renderPageButtons(),this.renderNext(),this.renderLast())}});t["default"]=d.bsClass("pagination",v),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(49),d=o(c),p=n(84),f=o(p),h=u["default"].createClass({displayName:"PaginationButton",propTypes:{className:u["default"].PropTypes.string,eventKey:u["default"].PropTypes.any,onSelect:u["default"].PropTypes.func,disabled:u["default"].PropTypes.bool,active:u["default"].PropTypes.bool,onClick:u["default"].PropTypes.func,buttonComponentClass:d["default"]},getDefaultProps:function(){return{active:!1,disabled:!1}},handleClick:function(e){this.props.disabled||this.props.onSelect&&this.props.onSelect(this.props.eventKey,e)},render:function(){var e=this.props,t=e.active,n=e.disabled,o=e.onClick,a=e.buttonComponentClass,l=e.className,c=e.style,d=i(e,["active","disabled","onClick","buttonComponentClass","className","style"]);return delete d.onSelect,u["default"].createElement("li",{className:s["default"](l,{active:t,disabled:n}),style:c},u["default"].createElement(a,r({},d,{disabled:n,onClick:f["default"](o,this.handleClick)})))}});t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(4)["default"],o=n(1)["default"];t.__esModule=!0;var a=n(23),s=o(a),l=n(20),u=o(l),c=n(25),d=n(24),p=n(71),f=o(p),h=u["default"].createClass({displayName:"Panel",propTypes:{collapsible:u["default"].PropTypes.bool,onSelect:u["default"].PropTypes.func,header:u["default"].PropTypes.node,id:u["default"].PropTypes.oneOfType([u["default"].PropTypes.string,u["default"].PropTypes.number]),footer:u["default"].PropTypes.node,defaultExpanded:u["default"].PropTypes.bool,expanded:u["default"].PropTypes.bool,eventKey:u["default"].PropTypes.any,headerRole:u["default"].PropTypes.string,panelRole:u["default"].PropTypes.string,onEnter:f["default"].propTypes.onEnter,onEntering:f["default"].propTypes.onEntering,onEntered:f["default"].propTypes.onEntered,onExit:f["default"].propTypes.onExit,onExiting:f["default"].propTypes.onExiting,onExited:f["default"].propTypes.onExited},getDefaultProps:function(){return{defaultExpanded:!1}},getInitialState:function(){return{expanded:this.props.defaultExpanded}},handleSelect:function(e){e.persist(),e.selected=!0,this.props.onSelect?this.props.onSelect(this.props.eventKey,e):e.preventDefault(),e.selected&&this.handleToggle()},handleToggle:function(){this.setState({expanded:!this.state.expanded})},isExpanded:function(){return null!=this.props.expanded?this.props.expanded:this.state.expanded},render:function(){var e=this.props,t=e.headerRole,n=e.panelRole,o=i(e,["headerRole","panelRole"]);return u["default"].createElement("div",r({},o,{className:s["default"](this.props.className,d.getClassSet(this.props)),id:this.props.collapsible?null:this.props.id,onSelect:null}),this.renderHeading(t),this.props.collapsible?this.renderCollapsibleBody(n):this.renderBody(),this.renderFooter())},renderCollapsibleBody:function(e){var t={onEnter:this.props.onEnter,onEntering:this.props.onEntering,onEntered:this.props.onEntered,onExit:this.props.onExit,onExiting:this.props.onExiting,onExited:this.props.onExited,"in":this.isExpanded()},n={className:d.prefix(this.props,"collapse"),id:this.props.id,ref:"panel","aria-hidden":!this.isExpanded()};return e&&(n.role=e),u["default"].createElement(f["default"],t,u["default"].createElement("div",n,this.renderBody()))},renderBody:function(){function e(){return{key:s.length}}function t(t){s.push(l.cloneElement(t,e()))}function n(t){s.push(u["default"].createElement("div",r({className:p},e()),t))}function i(){0!==c.length&&(n(c),c=[])}var o=this,a=this.props.children,s=[],c=[],p=d.prefix(this.props,"body");return Array.isArray(a)&&0!==a.length?(a.forEach(function(e){o.shouldRenderFill(e)?(i(),t(e)):c.push(e)}),i()):this.shouldRenderFill(a)?t(a):n(a),s},shouldRenderFill:function(e){return u["default"].isValidElement(e)&&null!=e.props.fill},renderHeading:function(e){var t=this.props.header;if(!t)return null;if(!u["default"].isValidElement(t)||Array.isArray(t))t=this.props.collapsible?this.renderCollapsibleTitle(t,e):t;else{var n=s["default"](d.prefix(this.props,"title"),t.props.className);t=this.props.collapsible?l.cloneElement(t,{className:n,children:this.renderAnchor(t.props.children,e)}):l.cloneElement(t,{className:n})}return u["default"].createElement("div",{className:d.prefix(this.props,"heading")},t)},renderAnchor:function(e,t){return u["default"].createElement("a",{href:"#"+(this.props.id||""),"aria-controls":this.props.collapsible?this.props.id:null,className:this.isExpanded()?null:"collapsed","aria-expanded":this.isExpanded(),"aria-selected":this.isExpanded(),onClick:this.handleSelect,role:t},e)},renderCollapsibleTitle:function(e,t){return u["default"].createElement("h4",{className:d.prefix(this.props,"title"),role:"presentation"},this.renderAnchor(e,t))},renderFooter:function(){return this.props.footer?u["default"].createElement("div",{className:d.prefix(this.props,"footer")},this.props.footer):null}}),m=c.State.values().concat(c.DEFAULT,c.PRIMARY);t["default"]=d.bsStyles(m,c.DEFAULT,d.bsClass("panel",h)),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(158),c=r(u),d=n(24),p=l["default"].createClass({displayName:"Popover",propTypes:{id:c["default"](l["default"].PropTypes.oneOfType([l["default"].PropTypes.string,l["default"].PropTypes.number])),placement:l["default"].PropTypes.oneOf(["top","right","bottom","left"]),positionLeft:l["default"].PropTypes.number,positionTop:l["default"].PropTypes.number,arrowOffsetLeft:l["default"].PropTypes.oneOfType([l["default"].PropTypes.number,l["default"].PropTypes.string]),arrowOffsetTop:l["default"].PropTypes.oneOfType([l["default"].PropTypes.number,l["default"].PropTypes.string]),title:l["default"].PropTypes.node},getDefaultProps:function(){return{placement:"right",bsClass:"popover"}},render:function(){var e,t=(e={},e[d.prefix(this.props)]=!0,e[this.props.placement]=!0,e),n=i({left:this.props.positionLeft,top:this.props.positionTop,display:"block"},this.props.style),r={left:this.props.arrowOffsetLeft,top:this.props.arrowOffsetTop};return l["default"].createElement("div",i({role:"tooltip"},this.props,{className:a["default"](this.props.className,t),style:n,title:null}),l["default"].createElement("div",{className:"arrow",style:r}),this.props.title?this.renderTitle():null,l["default"].createElement("div",{className:d.prefix(this.props,"content")},this.props.children))},renderTitle:function(){return l["default"].createElement("h3",{className:d.prefix(this.props,"title")},this.props.title)}});t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t,n){if(e[t]){var i=function(){var i=void 0,r=void 0;return p["default"].Children.forEach(e[t],function(e){e.type!==w&&(r=e.type.displayName?e.type.displayName:e.type,i=new Error("Children of "+n+" can contain only ProgressBar components. Found "+r))}),{v:i}}();if("object"==typeof i)return i.v}}var r=n(41)["default"],o=n(48)["default"],a=n(4)["default"],s=n(22)["default"],l=n(1)["default"];t.__esModule=!0;var u=n(23),c=l(u),d=n(20),p=l(d),f=n(25),h=n(24),m=n(60),v=l(m),g=n(33),y=l(g),b=n(187),_=l(b),w=function(e){function t(){o(this,t),e.apply(this,arguments)}return r(t,e),t.prototype.getPercentage=function(e,t,n){var i=1e3;return Math.round((e-t)/(n-t)*100*i)/i},t.prototype.render=function(){if(this.props.isChild)return this.renderProgressBar();var e=void 0;return e=this.props.children?y["default"].map(this.props.children,this.renderChildBar):this.renderProgressBar(),p["default"].createElement("div",a({},this.props,{className:c["default"](this.props.className,"progress"),min:null,max:null,label:null,"aria-valuetext":null}),e)},t.prototype.renderChildBar=function(e,t){return d.cloneElement(e,{isChild:!0,key:e.key?e.key:t})},t.prototype.renderProgressBar=function(){var e,t=this.props,n=t.className,i=t.label,r=t.now,o=t.min,l=t.max,u=t.style,d=s(t,["className","label","now","min","max","style"]),f=this.getPercentage(r,o,l);"string"==typeof i&&(i=this.renderLabel(f)),this.props.srOnly&&(i=p["default"].createElement("span",{className:"sr-only"},i));var m=c["default"](n,h.getClassSet(this.props),(e={active:this.props.active},e[h.prefix(this.props,"striped")]=this.props.active||this.props.striped,e));return p["default"].createElement("div",a({},d,{className:m,role:"progressbar",style:a({width:f+"%"},u),"aria-valuenow":this.props.now,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max}),i)},t.prototype.renderLabel=function(e){var t=this.props,n=t.interpolateClass,i=t.now,r=t.min,o=t.max,a=t.bsStyle,s=t.label,l=n||_["default"],u=l.REGEXP;return u&&u.exec(s)&&v["default"]("String interpolation in <ProgressBar label>","ES2015 template strings or other patterns"),p["default"].createElement(l,{now:i,min:r,max:o,percent:e,bsStyle:a},s)},t}(p["default"].Component);w.propTypes={min:d.PropTypes.number,now:d.PropTypes.number,max:d.PropTypes.number,label:d.PropTypes.node,srOnly:d.PropTypes.bool,striped:d.PropTypes.bool,active:d.PropTypes.bool,children:i,className:p["default"].PropTypes.string,interpolateClass:d.PropTypes.node,isChild:d.PropTypes.bool},w.defaultProps={min:0,max:100,active:!1,isChild:!1,srOnly:!1,striped:!1},t["default"]=h.bsStyles(f.State.values(),h.bsClass("progress-bar",w)),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(36),f=s(p),h=n(24),m={inline:d["default"].PropTypes.bool,disabled:d["default"].PropTypes.bool,validationState:d["default"].PropTypes.oneOf(["success","warning","error"]),inputRef:d["default"].PropTypes.func},v={inline:!1,disabled:!1},g=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.inline,n=e.disabled,i=e.validationState,r=e.inputRef,s=e.className,l=e.style,c=e.children,p=a(e,["inline","disabled","validationState","inputRef","className","style","children"]);delete p.bsClass;var m=d["default"].createElement("input",o({},p,{ref:r,type:"radio",disabled:n}));if(t){var v,g=(v={},v[h.prefix(this.props,"inline")]=!0,v.disabled=n,v);return f["default"](!i,"`validationState` is ignored on `<Radio inline>`. To display validation state on an inline radio, set `validationState` on a parent `<FormGroup>` or other element instead."),d["default"].createElement("label",{className:u["default"](s,g),style:l},m,c)}var y=o({},h.getClassSet(this.props),{disabled:n});return i&&(y["has-"+i]=!0),d["default"].createElement("div",{className:u["default"](s,y),style:l},d["default"].createElement("label",null,m,c))},t}(d["default"].Component);g.propTypes=m,g.defaultProps=v,t["default"]=h.bsClass("radio",g),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(20),d=s(c),p=n(36),f=s(p),h=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.bsClass,n=e.className,i=e.a16by9,r=e.a4by3,s=e.children,l=a(e,["bsClass","className","a16by9","a4by3","children"]);f["default"](!(!i&&!r),"`a16by9` or `a4by3` attribute must be set."),f["default"](!(i&&r),"Either `a16by9` or `a4by3` attribute can be set. Not both.");var p={"embed-responsive-16by9":i,"embed-responsive-4by3":r};return d["default"].createElement("div",{className:u["default"](t,p)},c.cloneElement(s,o({},l,{className:u["default"](n,"embed-responsive-item")})))},t}(d["default"].Component);h.defaultProps={bsClass:"embed-responsive",a16by9:!1,a4by3:!1},h.propTypes={bsClass:c.PropTypes.string,children:c.PropTypes.element.isRequired,a16by9:c.PropTypes.bool,a4by3:c.PropTypes.bool},t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(23),l=r(s),u=n(49),c=r(u),d=a["default"].createClass({displayName:"Row",propTypes:{componentClass:c["default"]},getDefaultProps:function(){return{componentClass:"div"}},render:function(){var e=this.props.componentClass;return a["default"].createElement(e,i({},this.props,{className:l["default"](this.props.className,"row")}),this.props.children)}});t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(28)["default"],l=n(1)["default"];t.__esModule=!0;var u=n(20),c=l(u),d=n(51),p=l(d),f=n(85),h=l(f),m=n(256),v=l(m),g=n(143),y=l(g),b=n(172),_=l(b),w=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.title,i=e.onClick,r=e.target,l=e.href,u=e.toggleLabel,d=e.bsSize,f=e.bsStyle,m=a(e,["children","title","onClick","target","href","toggleLabel","bsSize","bsStyle"]),g=m.disabled,b=_["default"](m,s(h["default"].ControlledComponent.propTypes)),w=y["default"](m,s(h["default"].ControlledComponent.propTypes));return c["default"].createElement(h["default"],b,c["default"].createElement(p["default"],o({},w,{onClick:i,bsStyle:f,bsSize:d,disabled:g,target:r,href:l}),n),c["default"].createElement(v["default"],{"aria-label":u||n,bsStyle:f,bsSize:d,disabled:g}),c["default"].createElement(h["default"].Menu,null,t))},t}(c["default"].Component);w.propTypes=o({},h["default"].propTypes,{bsStyle:p["default"].propTypes.bsStyle,onClick:function(){},target:c["default"].PropTypes.string,href:c["default"].PropTypes.string,title:c["default"].PropTypes.node.isRequired,toggleLabel:c["default"].PropTypes.string}),w.defaultProps={disabled:!1,dropup:!1,pullRight:!1},w.Toggle=v["default"],t["default"]=w,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(20),l=a(s),u=n(170),c=a(u),d=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){return l["default"].createElement(c["default"],o({},this.props,{useAnchor:!1,noCaret:!1}))},t}(l["default"].Component);t["default"]=d,d.defaultProps=c["default"].defaultProps,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(22)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(20),u=s(l),c=n(258),d=s(c),p=n(259),f=s(p),h=n(260),m=s(h),v=function(e){function t(){r(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.render=function(){var e=this.props,t=(e.title,e.disabled,e.tabClassName,a(e,["title","disabled","tabClassName"]));return u["default"].createElement(d["default"],t)},t}(u["default"].Component);v.propTypes=o({},d["default"].propTypes,{disabled:u["default"].PropTypes.bool,title:u["default"].PropTypes.node,tabClassName:u["default"].PropTypes.string}),v.Container=f["default"],v.Content=m["default"],v.Pane=d["default"],t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(213),l=r(s),u=n(20),c=r(u),d=n(49),p=r(d),f=n(36),h=r(f),m=n(24),v=n(84),g=r(v),y=n(226),b=n(173),_=r(b),w=c["default"].createClass({displayName:"TabPane",propTypes:{eventKey:u.PropTypes.any,animation:u.PropTypes.oneOfType([u.PropTypes.bool,p["default"]]),id:u.PropTypes.string,"aria-labelledby":u.PropTypes.string,onEnter:u.PropTypes.func,onEntering:u.PropTypes.func,onEntered:u.PropTypes.func,onExit:u.PropTypes.func,onExiting:u.PropTypes.func,onExited:u.PropTypes.func,unmountOnExit:u.PropTypes.bool},contextTypes:{$bs_tabcontainer:u.PropTypes.shape({getId:u.PropTypes.func,unmountOnExit:u.PropTypes.bool}),$bs_tabcontent:u.PropTypes.shape({bsClass:u.PropTypes.string,animation:u.PropTypes.oneOfType([u.PropTypes.bool,p["default"]]),activeKey:u.PropTypes.any,onExited:u.PropTypes.func,register:u.PropTypes.func,unmountOnExit:u.PropTypes.bool})},childContextTypes:{$bs_tabcontainer:u.PropTypes.oneOf([null])},componentWillMount:function(){this.exited=!this.isActive(),this.registerWithParent()},componentWillReceiveProps:function(e,t){e.eventKey!==this.props.eventKey&&(this.unregisterWithParent(),this.registerWithParent(e,t))},componentWillUpdate:function(e,t,n){this.isActive(e,n)?this.exited=!1:this.exited||this.getTransition(e,n)||(this.exited=!0,this._fireExitedCallback=!0)},componentDidUpdate:function(){this._fireExitedCallback&&(this._fireExitedCallback=!1,this.onExited())},componentWillUnmount:function(){this.unregisterWithParent()},getChildContext:function(){return{$bs_tabcontainer:null}},getTransition:function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.context:arguments[1];return t=this.getContext("$bs_tabcontent",t),null!=e.animation?e.animation:t.animation},getUnmountOnExit:function(){var e=this.getContext("$bs_tabcontent",this.context);return null!=this.props.unmountOnExit?this.props.unmountOnExit:e.unmountOnExit},isActive:function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.context:arguments[1];return this.getContext("$bs_tabcontent",t).activeKey===e.eventKey},render:function(){var e,t=this.isActive(),n=t||!this.exited,r=this.getContext("$bs_tabcontainer").getId,o=this.props.bsClass||this.getContext("$bs_tabcontent").bsClass,s=this.getTransition();if(!n&&!s&&this.getUnmountOnExit())return null;var l=(e={active:n},e[m.prefix({bsClass:o},"pane")]=!0,e),u=this.props,d=u.eventKey,p=u.id,f=u["aria-labelledby"],v=u.onExit,b=u.onExiting,w=u.onExited,C=u.onEnter,E=u.onEntering,x=u.onEntered;"boolean"==typeof s&&(s=s?_["default"]:null),r&&(h["default"](!(p||f),"In the context of a TabContainer, TabPanes are given generated `id` and `aria-labelledby` attributes for the sake of proper component accessibility. Any provided ones will be ignored. To control these attributes directly provide a `generateChildId` prop to the parent TabContainer."),p=r(d,y.PANE)||null,f=r(d,y.TAB)||null);var T=c["default"].createElement("div",i({},this.props,{id:p,role:"tabpanel","aria-hidden":!n,"aria-labelledby":f,className:a["default"](this.props.className,l,{"in":!s})}),this.props.children);return s&&(T=c["default"].createElement(s,{"in":t,onExit:v,onExiting:b,onExited:g["default"](this.handleExited,w),onEnter:g["default"](this.handleEnter,C),onEntering:E,onEntered:x,unmountOnExit:this.getUnmountOnExit()},T)),T},onExited:function(){var e=this.getContext("$bs_tabcontent");e.onExited&&e.onExited(this.props.eventKey)},handleEnter:function(e){this.isActive()&&(l["default"](e,"active"),e.offsetWidth)},handleExited:function(){this.exited=!0,this.onExited(),this.forceUpdate()},registerWithParent:function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.context:arguments[1],n=this.getContext("$bs_tabcontent",t).register;n&&(this.unregister=n(e.eventKey))},unregisterWithParent:function(){this.unregister&&this.unregister()},getContext:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.context:arguments[1];return t[e]||{}}});t["default"]=m.bsClass("tab",w),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(22)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(159),l=r(s),u=o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number]),c=a["default"].createClass({displayName:"TabContainer",propTypes:{id:function(e){var t=null;if(!e.generateChildId){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];t=u.apply(void 0,[e].concat(i)),t||e.id||(t=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return t},generateChildId:o.PropTypes.func,onSelect:o.PropTypes.func,activeKey:o.PropTypes.any},childContextTypes:{$bs_tabcontainer:a["default"].PropTypes.shape({activeKey:o.PropTypes.any,onSelect:o.PropTypes.func,getId:o.PropTypes.func})},getChildContext:function(){var e=this.props,t=e.activeKey,n=e.onSelect,i=e.generateChildId,r=e.id;return{$bs_tabcontainer:{activeKey:t,onSelect:n,getId:i||function(e,t){return r?r+"-"+t+"-"+e:null}}}},render:function(){var e=this.props,t=e.children,n=i(e,["children"]);return delete n.generateChildId,delete n.onSelect,delete n.activeKey,a["default"].cloneElement(a["default"].Children.only(t),n)}});t["default"]=l["default"](c,{activeKey:"onSelect"}),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];t.__esModule=!0;var r=n(23),o=i(r),a=n(32),s=i(a),l=n(20),u=i(l),c=n(49),d=i(c),p=n(24),f=l.PropTypes.oneOfType([l.PropTypes.bool,d["default"]]),h=u["default"].createClass({displayName:"TabContent",propTypes:{componentClass:d["default"],animation:l.PropTypes.oneOfType([l.PropTypes.bool,d["default"]]),unmountOnExit:l.PropTypes.bool},contextTypes:{$bs_tabcontainer:u["default"].PropTypes.shape({activeKey:u["default"].PropTypes.any,onSelect:l.PropTypes.func})},childContextTypes:{$bs_tabcontent:l.PropTypes.shape({bsClass:l.PropTypes.string,animation:f,activeKey:l.PropTypes.any,onExited:l.PropTypes.func,register:l.PropTypes.func,unmountOnExit:l.PropTypes.bool})},getDefaultProps:function(){return{componentClass:"div",animation:!0,unmountOnExit:!1}},getInitialState:function(){return{exitingPane:null}},getChildContext:function(){var e=this._exitingPane;return{$bs_tabcontent:{bsClass:this.props.bsClass,animation:this.props.animation,activeKey:e?void 0:this.getActiveKey(),onExited:this.handlePaneExited,register:this.registerPane,unmountOnExit:this.props.unmountOnExit}}},componentWillMount:function(){this.panes=[]},componentWillUpdate:function(e,t,n){var i=this.getActiveKey(),r=this.getActiveKey(n),o=-1!==this.panes.indexOf(i);-1===this.panes.indexOf(this._exitingPane)&&(this._exitingPane=null),r!==i&&o&&(this._exitingPane=i)},render:function(){var e=this.props,t=e.className,n=e.children,i=this.props.componentClass,r=p.prefix(this.props,"content");return u["default"].createElement(i,{className:o["default"](r,t)},n)},handlePaneExited:function(){
this._exitingPane=null,this.forceUpdate()},registerPane:function(e){var t=this,n=this.panes;return-1!==n.indexOf(e)?s["default"](!1,"You cannot have multiple TabPanes of with the same `eventKey` in the same TabContent component. Duplicate eventKey: "+e):void 0,n.push(e),function(){n.splice(n.indexOf(e),1),e===t.getActiveKey()&&t.getContext("$bs_tabcontainer").onSelect()}},getActiveKey:function(){var e=arguments.length<=0||void 0===arguments[0]?this.context:arguments[0];return this.getContext("$bs_tabcontainer",e).activeKey},getContext:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.context:arguments[1];return t[e]||{}}});t["default"]=p.bsClass("tab",h),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(20),a=r(o),s=n(23),l=r(s),u=a["default"].createClass({displayName:"Table",propTypes:{striped:a["default"].PropTypes.bool,bordered:a["default"].PropTypes.bool,condensed:a["default"].PropTypes.bool,hover:a["default"].PropTypes.bool,responsive:a["default"].PropTypes.bool},getDefaultProps:function(){return{bordered:!1,condensed:!1,hover:!1,responsive:!1,striped:!1}},render:function(){var e={table:!0,"table-striped":this.props.striped,"table-bordered":this.props.bordered,"table-condensed":this.props.condensed,"table-hover":this.props.hover},t=a["default"].createElement("table",i({},this.props,{className:l["default"](this.props.className,e)}),this.props.children);return this.props.responsive?a["default"].createElement("div",{className:"table-responsive"},t):t}});t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){var t=void 0;return P["default"].forEach(e,function(e){null==t&&(t=e.props.eventKey)}),t}var r=n(4)["default"],o=n(22)["default"],a=n(28)["default"],s=n(1)["default"];t.__esModule=!0;var l=n(23),u=s(l),c=n(159),d=s(c),p=n(20),f=s(p),h=n(70),m=s(h),v=n(225),g=s(v),y=n(233),b=s(y),_=n(25),w=s(_),C=n(158),E=s(C),x=n(60),T=s(x),k=n(33),P=s(k),S=n(259),O=s(S),I=n(260),N=s(I),A=O["default"].ControlledComponent,M=f["default"].createClass({displayName:"Tabs",propTypes:{activeKey:f["default"].PropTypes.any,bsStyle:f["default"].PropTypes.oneOf(["tabs","pills"]),animation:f["default"].PropTypes.bool,id:E["default"](f["default"].PropTypes.oneOfType([f["default"].PropTypes.string,f["default"].PropTypes.number])),onSelect:f["default"].PropTypes.func,unmountOnExit:f["default"].PropTypes.bool,position:f["default"].PropTypes.oneOf(["top","left","right"]),tabWidth:f["default"].PropTypes.oneOfType([f["default"].PropTypes.number,f["default"].PropTypes.object]),paneWidth:f["default"].PropTypes.oneOfType([f["default"].PropTypes.number,f["default"].PropTypes.object]),standalone:f["default"].PropTypes.bool},getDefaultProps:function(){return{bsClass:"tab",animation:!0,tabWidth:2,position:"top",standalone:!1,unmountOnExit:!1}},render:function(){var e=this.props,t=e.id,n=e.className,i=e.style,a=e.position,s=e.bsStyle,l=e.tabWidth,c=e.paneWidth,d=e.standalone,p=e.children,h=e.onSelect,v=e.activeKey,y=o(e,["id","className","style","position","bsStyle","tabWidth","paneWidth","standalone","children","onSelect","activeKey"]);v=this.getActiveKey();var b="left"===a||"right"===a;null==s&&(s=b?"pills":"tabs");var _={id:t,className:n,style:i,activeKey:v,onSelect:h},w=r({},y,{bsStyle:s,bsClass:void 0,stacked:b,ref:"tabs",role:"tablist"}),C=P["default"].map(p,this.renderTab),E={ref:"panes",animation:y.animation,unmountOnExit:y.unmountOnExit},x=p;if(b){T["default"]({message:'Horizontal Tabs (position "left" or "right") are deprecated in favor of the more flexible TabContainer component.'}),d||(_.className=u["default"](_.className,"clearfix"));var k=this.getColProps({tabWidth:l,paneWidth:c}),S=k.tabsColProps,O=k.panesColProps,I=f["default"].createElement(m["default"],r({componentClass:g["default"]},w,S),C),M=f["default"].createElement(m["default"],r({componentClass:N["default"]},E,O),x);return"left"===a?f["default"].createElement(A,_,f["default"].createElement("div",null,I,M)):f["default"].createElement(A,_,f["default"].createElement("div",null,M,I))}return f["default"].createElement(A,_,f["default"].createElement("div",null,f["default"].createElement(g["default"],w,C),f["default"].createElement(N["default"],E,x)))},getActiveKey:function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=e.activeKey,n=e.children;return void 0===t?i(n):t},renderPane:function(e,t){return p.cloneElement(e,{key:e.key?e.key:t})},renderTab:function(e){if(null==e.props.title)return null;var t=e.props,n=t.eventKey,i=t.title,r=t.disabled,o=t.tabClassName;return f["default"].createElement(b["default"],{eventKey:n,disabled:r,className:o},i)},getColProps:function(e){var t=e.tabWidth,n=e.paneWidth,i=void 0;i=t instanceof Object?t:{xs:t};var r=void 0;return null==n?(r={},a(i).forEach(function(e){r[e]=w["default"].GRID_COLUMNS-i[e]})):r=n instanceof Object?n:{xs:n},{tabsColProps:i,panesColProps:r}}});t["default"]=d["default"](M,{activeKey:"onSelect"}),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(24),c=n(40),d=r(c),p=l["default"].createClass({displayName:"Thumbnail",propTypes:{alt:l["default"].PropTypes.string,href:l["default"].PropTypes.string,src:l["default"].PropTypes.string},render:function(){var e=u.getClassSet(this.props);return this.props.href?l["default"].createElement(d["default"],i({},this.props,{href:this.props.href,className:a["default"](this.props.className,e)}),l["default"].createElement("img",{src:this.props.src,alt:this.props.alt})):this.props.children?l["default"].createElement("div",i({},this.props,{className:a["default"](this.props.className,e)}),l["default"].createElement("img",{src:this.props.src,alt:this.props.alt}),l["default"].createElement("div",{className:"caption"},this.props.children)):l["default"].createElement("div",i({},this.props,{className:a["default"](this.props.className,e)}),l["default"].createElement("img",{src:this.props.src,alt:this.props.alt}))}});t["default"]=u.bsClass("thumbnail",p),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(4)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(23),a=r(o),s=n(20),l=r(s),u=n(158),c=r(u),d=n(24),p=l["default"].createClass({displayName:"Tooltip",propTypes:{id:c["default"](l["default"].PropTypes.oneOfType([l["default"].PropTypes.string,l["default"].PropTypes.number])),placement:l["default"].PropTypes.oneOf(["top","right","bottom","left"]),positionLeft:l["default"].PropTypes.number,positionTop:l["default"].PropTypes.number,arrowOffsetLeft:l["default"].PropTypes.oneOfType([l["default"].PropTypes.number,l["default"].PropTypes.string]),arrowOffsetTop:l["default"].PropTypes.oneOfType([l["default"].PropTypes.number,l["default"].PropTypes.string]),title:l["default"].PropTypes.node},getDefaultProps:function(){return{bsClass:"tooltip",placement:"right"}},render:function(){var e,t=(e={},e[d.prefix(this.props)]=!0,e[this.props.placement]=!0,e),n=i({left:this.props.positionLeft,top:this.props.positionTop},this.props.style),r={left:this.props.arrowOffsetLeft,top:this.props.arrowOffsetTop};return l["default"].createElement("div",i({role:"tooltip"},this.props,{className:a["default"](this.props.className,t),style:n}),l["default"].createElement("div",{className:d.prefix(this.props,"arrow"),style:r}),l["default"].createElement("div",{className:d.prefix(this.props,"inner")},this.props.children))}});t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(41)["default"],r=n(48)["default"],o=n(4)["default"],a=n(1)["default"];t.__esModule=!0;var s=n(23),l=a(s),u=n(20),c=a(u),d=n(25),p=n(24),f=function(e){function t(){r(this,n),e.apply(this,arguments)}i(t,e),t.prototype.render=function(){var e=p.getClassSet(this.props);return c["default"].createElement("div",o({},this.props,{className:l["default"](this.props.className,e)}),this.props.children)};var n=t;return t=p.bsSizes([d.Sizes.LARGE,d.Sizes.SMALL])(t)||t,t=p.bsClass("well")(t)||t}(c["default"].Component);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(2)["default"],r=n(1)["default"];t.__esModule=!0;var o=n(24),a=i(o);t.bootstrapUtils=a;var s=n(58),l=r(s);t.childrenValueInputValidation=l["default"];var u=n(84),c=r(u);t.createChainedFunction=c["default"];var d=n(33),p=r(d);t.ValidComponentChildren=p["default"]}])}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/TransitionOverlay",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/TransitionOverlay",["module","exports","react","react-bootstrap","lib-build/less!./TransitionOverlay"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t={transition:"Transition"},n=function(t){var n="item",i=null;return t.enabled||(n+=" disabled"),e.transition.id===t.id&&(n+=" selected",i=a["default"].createElement("span",{className:"icon"},a["default"].createElement("span",{className:"glyphicon glyphicon-ok"}))),a["default"].createElement("li",{key:t.id,className:n,onClick:function(){t.enabled&&e.onItemClick(t.id)}},i,t.label)},r=function(){return e.transitions.map(function(t){return t.enabled?n(t):a["default"].createElement(i.OverlayTrigger,{key:t.id,overlay:a["default"].createElement(i.Tooltip,{id:"transition-tooltip-"+e.itemID+"-"+t.id,placement:"right"},t.tooltip)},n(t))})};return a["default"].createElement(i.Popover,s({},e,{id:"transition-popover-"+e.itemID,placement:"top"}),a["default"].createElement("h6",{className:"title"},t.transition),a["default"].createElement("ul",{className:"list"},r()))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t["default"]=o,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Transition",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Transition",["module","exports","react","react-dom","react-bootstrap","./TransitionOverlay","lib-build/less!./Transition"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(){s(this,t);var e=l(this,Object.getPrototypeOf(t).call(this));return e.state={shown:!1},e.hidePopover=e.hidePopover.bind(e),e.togglePopover=e.togglePopover.bind(e),e.onTransitionClick=e.onTransitionClick.bind(e),e}return u(t,e),f(t,[{key:"hidePopover",value:function(){this.setState({shown:!1})}},{key:"togglePopover",value:function(){this.setState({shown:!this.state.shown})}},{key:"onTransitionClick",value:function(e){this.hidePopover(),this.props.callbacks.updateItemTransition(this.props.index,e)}},{key:"render",value:function(){var e=this,t="op-transition-button";return this.props.firstItem?null:c["default"].createElement("div",{className:"op-transition-container"},c["default"].createElement(r.Overlay,{trigger:"click",placement:"top",rootClose:!0,show:this.state.shown,target:function(){return d["default"].findDOMNode(e.refs.target)},onHide:this.hidePopover},c["default"].createElement(p["default"],{className:"op-transition-overlay",itemID:this.props.itemID,transitions:this.props.transitions,transition:this.props.transition,onItemClick:this.onTransitionClick})),c["default"].createElement("div",{ref:"target",className:t,title:"Choose transition",onClick:function(t){e.togglePopover(),t.stopPropagation()}},c["default"].createElement("img",{className:"icon",src:this.props.transition.icon})))}}]),t}(c["default"].Component);t["default"]=h,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/ItemMain",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/ItemMain",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMain"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return a["default"].createElement("div",{style:{backgroundImage:"url("+e.item.thumbnail+")"},className:"op-item-main"},a["default"].createElement(s["default"],e))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i);t["default"]=o,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Item",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Item",["module","exports","react","./InlineAdd","./Transition","./ItemMain","lib-build/less!./../common/Item","lib-build/less!./Item"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){s(this,t);var e=l(this,Object.getPrototypeOf(t).call(this));return e.state={showActions:!1},e.renderInlineAdd=e.renderInlineAdd.bind(e),e.renderInnerItem=e.renderInnerItem.bind(e),e.renderTransition=e.renderTransition.bind(e),e}return u(t,e),m(t,[{key:"renderInlineAdd",value:function(){return c["default"].createElement(d["default"],{organize:this.props.organize,lastItem:this.props.lastItem,addItem:this.props.callbacks.addItem,index:this.props.index})}},{key:"renderTransition",value:function(){var e=this;return c["default"].createElement(p["default"],{firstItem:this.props.firstItem,itemID:this.props.item.id,transitions:this.props.item.transitions,transition:this.props.item.transitions.find(function(t){return t.id===e.props.item.transition}),callbacks:this.props.callbacks,index:this.props.index})}},{key:"renderInnerItem",value:function(){var e=this,t="op-item";return this.props.selected&&(t+=" selected"),this.props.item.hasOrganize||(t+=" undraggable"),this.props.organize&&(t+=" organize"),c["default"].createElement("div",{className:t,onClick:function(){e.props.organize||(e.props.onItemClicked(e.props.item.id),e.props.callbacks.selectItem(e.props.item.id))},onMouseOver:function(){e.props.organize||e.setState({showActions:!0})},onMouseLeave:function(){e.setState({showActions:!1})},"data-id":this.props.item.id},this.renderTransition(),c["default"].createElement(f["default"],h({showMedia:!0,showActions:this.state.showActions},this.props)))}},{key:"render",value:function(){return c["default"].createElement("div",{className:"op-item-outer","data-id":this.props.item.id},this.renderInnerItem(),this.renderInlineAdd())}}]),t}(c["default"].Component);t["default"]=v,e.exports=t["default"]}),!function(e){"function"==typeof define&&define.amd?define("lib/jquery-mousewheel/jquery.mousewheel.min",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),u=0,d=0,p=0,f=0,h=0,m=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(p=-1*a.detail),"wheelDelta"in a&&(p=a.wheelDelta),"wheelDeltaY"in a&&(p=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*p,p=0),u=0===p?d:p,"deltaY"in a&&(p=-1*a.deltaY,u=p),"deltaX"in a&&(d=a.deltaX,0===p&&(u=-1*d)),0!==p||0!==d){if(1===a.deltaMode){var v=e.data(this,"mousewheel-line-height");u*=v,p*=v,d*=v}else if(2===a.deltaMode){var g=e.data(this,"mousewheel-page-height");u*=g,p*=g,d*=g}if(f=Math.max(Math.abs(p),Math.abs(d)),(!o||o>f)&&(o=f,i(a,f)&&(o/=40)),i(a,f)&&(u/=40,d/=40,p/=40),u=Math[u>=1?"floor":"ceil"](u/o),d=Math[d>=1?"floor":"ceil"](d/o),p=Math[p>=1?"floor":"ceil"](p/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();h=t.clientX-y.left,m=t.clientY-y.top}return t.deltaX=d,t.deltaY=p,t.deltaFactor=o,t.offsetX=h,t.offsetY=m,t.deltaMode=0,s.unshift(t,u,d,p),r&&clearTimeout(r),r=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){o=null}function i(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var r,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/List",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/List",["module","exports","react","lib/Sortable/Sortable","./item/builderOverview/Item","./item/immersiveView/Item","lib/jquery-mousewheel/jquery.mousewheel.min","lib-build/less!./List"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){s(this,t);var e=l(this,Object.getPrototypeOf(t).call(this));return e.sortableContainersDecorator=e.sortableContainersDecorator.bind(e),e.sortableGroupDecorator=e.sortableGroupDecorator.bind(e),e.showItems=e.showItems.bind(e),e.preventPageScroll=e.preventPageScroll.bind(e),e.onScroll=e.onScroll.bind(e),e.handleHorizontalScroll=e.handleHorizontalScroll.bind(e),e.sortableGroupInstance=null,e.sortableContainerInstance=null,e.listNode=null,e}return u(t,e),h(t,[{key:"componentDidMount",value:function(){this.listNode=$(this.props.container).find(".op-list.group-list")[0],$(this.listNode).on("mousewheel",this.onScroll)}},{key:"onScroll",value:function(e){"vertical"===this.props.orientation?this.preventPageScroll(e.originalEvent):this.handleHorizontalScroll(e)}},{key:"handleHorizontalScroll",value:function(e){var t=$(e.currentTarget),n=e.deltaX,i=e.deltaY;e.preventDefault(),Math.abs(n)>Math.abs(i)?t.scrollLeft(t.scrollLeft()+n*e.deltaFactor):t.scrollLeft(t.scrollLeft()-i*e.deltaFactor)}},{key:"preventPageScroll",value:function(e){this.listNode.scrollHeight>=this.listNode.clientHeight&&(this.listNode.scrollHeight-this.listNode.scrollTop<=this.listNode.clientHeight&&e.deltaY>0&&e.preventDefault(),0===this.listNode.scrollTop&&e.deltaY<0&&e.preventDefault())}},{key:"componentDidUpdate",value:function(e){e.organize!==this.props.organize&&this.sortableGroupInstance.option("disabled",!this.props.organize)}},{key:"componentWillUnmount",value:function(){this.sortableGroupInstance.destroy(),this.sortableContainerInstance.destroy(),this.listNode.removeEventListener("wheel",this.preventPageScroll)}},{key:"sortableContainersDecorator",value:function(e){var t=null;e&&(t={},this.sortableContainerInstance=d["default"].create(e,t))}},{key:"sortableGroupDecorator",value:function(e){var t=this,n=null;e&&(n={disabled:!0,ghostClass:"drop-zone",chosenClass:"chosen",filter:".undraggable",animation:300,onUpdate:function(){var e=t.sortableGroupInstance.toArray();t.props.updateOrder(e)},onMove:function(e){return $(e.related).hasClass("undraggable")?!1:void 0}},this.sortableGroupInstance=d["default"].create(e,n))}},{key:"showItems",value:function(){var e=this,t=p["default"];return"horizontal"===this.props.orientation&&(t=f["default"]),this.props.items.map(function(n,i,r){var o=0===i,a=i===r.length-1;return c["default"].createElement(t,{key:n.id,item:n,index:i,onItemClicked:e.props.changeSelectedItem,selected:e.props.selectedItem===n.id,callbacks:e.props.callbacks,organize:e.props.organize,orientation:e.props.orientation,firstItem:o,lastItem:a})})}},{key:"render",value:function(){var e="op-list";return this.props.organize&&(e+=" organize"),c["default"].createElement("div",{className:"group-list "+e,ref:this.sortableGroupDecorator},this.showItems())}}]),t}(c["default"].Component);t["default"]=m,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/Panel",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/Panel",["module","exports","react","./list/List","lib-build/less!./Panel"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.organize?l.done:l.organize,n="icon glyphicon",i="op-panel";return"horizontal"===e.orientation&&(i+=" op-style-horizontal"),n+=e.organize?" glyphicon-ok done":" glyphicon-sort organize",a["default"].createElement("div",{className:i},a["default"].createElement(s["default"],e),a["default"].createElement("div",{className:"organize-toggle",onClick:function(){e.organize&&e.callbacks.organize(e.order),e.toggleOrganize()}},a["default"].createElement("span",{className:n}),"horizontal"===e.orientation?null:t))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l={organize:"Organize",done:"Done"};t["default"]=o,e.exports=t["default"]}),define("storymaps-react/tpl/builder/overviewPanel/PanelContainer",["module","exports","react-redux","./actions","./Panel"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var s=a(i),l=o(r),u=function(e){return{items:e.items,organize:e.organize,selectedItem:e.selectedItem,order:e.order}},c=function(e){return{toggleOrganize:function(){e(s.toggleOrganize())},changeSelectedItem:function(t){e(s.changeSelectedItem(t))},updateOrder:function(t){e(s.updateOrder(t))}}};t["default"]=(0,n.connect)(u,c)(l["default"]),e.exports=t["default"]}),define("storymaps-react/tpl/builder/overviewPanel/OverviewPanel",["module","exports","react","react-dom","redux","react-redux","./reducer","./actions","./PanelContainer"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function c(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n,i){function a(e,n){var i=500,r=800,o=0,a=0,s=0,l=0,u=0,c=0,d=0,p=0;"horizontal"===t?(s=n[0].offsetWidth/2,l=e[0].offsetWidth/2,a=l-s,d=n.offset().left-(e.offset().left-e.scrollLeft()),o=d-a,0>o&&(o=0),e.animate({scrollLeft:o},r)):(u=n[0].offsetHeight/2,c=e[0].offsetHeight/2,a=c-u,p=n.offset().top-(e.offset().top-e.scrollTop()),o=p-a,0>o&&(o=0),e.animate({scrollTop:o},i))}var s={selectedItem:n.length?n[0].id:"",items:n,organize:!1,order:n.map(function(e){return e.id})},l=(0,r.createStore)(f["default"],s);p["default"].render(d["default"].createElement(o.Provider,{store:l},d["default"].createElement(m["default"],{callbacks:i,orientation:t,container:e})),e),this.updateItems=function(e){l.dispatch(h.updateItems(e));var t=e.map(function(e){return e.id});l.dispatch(h.updateOrder(t))},this.navigateTo=function(t){l.dispatch(h.changeSelectedItem(t));var n=$(e).find(".group-list"),i=n.find('[data-id="'+t+'"]');n.length&&i.length&&a(n,i)}};var d=c(n),p=c(i),f=c(a),h=u(s),m=c(l);e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/ImmersiveBuilderPanel",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/ImmersiveBuilderPanel",["module","exports","storymaps-react/tpl/builder/overviewPanel/OverviewPanel","lib-build/less!./ImmersiveBuilderPanel"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s={"fade-fast":{id:"fade-fast",label:"Fade",icon:"resources/tpl/builder/icons/immersive-panel/FadeFast.png"},"fade-slow":{id:"fade-slow",label:"Fade slow",icon:"resources/tpl/builder/icons/immersive-panel/Fade.png"},"swipe-vertical":{id:"swipe-vertical",label:"Swipe Vertical",icon:"resources/tpl/builder/icons/immersive-panel/SwipeVertical.png"},"swipe-horizontal":{id:"swipe-horizontal",label:"Swipe Horizontal",icon:"resources/tpl/builder/icons/immersive-panel/SwipeHorizontal.png"},none:{id:"none",label:"None",icon:"resources/tpl/builder/icons/immersive-panel/None.png"}},l=function(){function e(t){r(this,e),t=t||{},t.container&&(this._node=t.container,this._medias=null,this._panels=null,this._transitions=null,this._overview=new o["default"](this._node[0],"horizontal",[],{selectItem:function(e){t.selectView(this._getViewById(e))}.bind(this),addItem:t.addView,deleteItem:function(e){t.deleteView(this._getViewById(e))}.bind(this),duplicateItem:function(e){t.duplicateView(this._getViewById(e))}.bind(this),updateItemTransition:t.updateTransition,organize:t.organize}))}return a(e,[{key:"update",value:function(e){e=e||{},e.medias&&e.panels&&(this._medias=e.medias,this._panels=e.panels,this._transitions=e.transitions,this._overview.updateItems(this._getViewsOverview(e.transitionsInfos)))}},{key:"selectView",value:function(e){0>e||this._overview.navigateTo(this._getViewIdByIndex(e))}},{key:"_getViewById",value:function(e){for(var t in this._panels){var n=this._panels[t];if(n.id==e)return parseInt(t,10)}return-1}},{key:"_getViewIdByIndex",value:function(e){return 0>e?null:this._panels[e].id}},{key:"_getViewsOverview",value:function(e){for(var t=[],n=0;n<this._medias.length;n++){var i=this._medias[n],r=this._panels[n],o=this._transitions[n],a=e[n];t.push({id:r.id,type:"thumbnail",icon:i.getPreviewIcon(),transition:o,transitions:this._getTransition({index:n,mediaType:i.type,isDuplicate:a.isDuplicate,isDuplicateConsecutive:a.isDuplicateConsecutive,firstOccurenceTransition:a.firstOccurenceTransition,duplicateConsecutiveTransitions:a.duplicateConsecutiveTransitions}),thumbnail:i.getPreviewThumbnail(),hidden:!1,hasDelete:!0,hasHide:!0,hasDuplicate:!0,hasOrganize:!0})}return t}},{key:"_getTransition",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=[];if(0===e.index)return t;if(e.isDuplicateConsecutive){var n="Not available when consecutive views use the same media",i="To use this transition the visible layers in both views must be different and the other map properties must be the same",r="Not available when consecutive views use the same map",o="Not available in beta",a=["fade-fast","fade-slow","swipe-vertical","swipe-horizontal"],l=!0,u=!1,c=void 0;try{for(var d,p=a[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value,h=Object.assign({},s[f]);e.duplicateConsecutiveTransitions.indexOf(f)>-1?(h.enabled=!0,h.tooltip=""):"webmap"==e.mediaType?"fade-slow"==f||"fade-fast"==f?(h.enabled=!1,h.tooltip=r):"swipe-horizontal"==f?(h.enabled=!1,h.tooltip=o):(h.enabled=!1,h.tooltip=i):(h.enabled=!1,h.tooltip=n),t.push(h)}}catch(m){u=!0,c=m}finally{try{!l&&p["return"]&&p["return"]()}finally{if(u)throw c}}var v=Object.assign({},s.none);v.enabled=!0,v.tooltip="",t.push(v)}else if(e.isDuplicate&&e.firstOccurenceTransition){var g="Not available as there is another occurence of this media that is non consecutive";e.firstOccurenceTransition="none";for(var y in s){var b=Object.assign({},s[y]);y!=e.firstOccurenceTransition?(b.enabled=!1,b.tooltip=g):(b.enabled=!0,b.tooltip=""),t.push(b)}}else for(var _ in s){var w=Object.assign({},s[_]);w.enabled=!0,w.tooltip="",t.push(w)}return t}}]),e}();t["default"]=l,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/builder/notification/Undo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="builder-notification">\r\n  <div class="alert alert-warning alert-dismissible" role="alert">\r\n    '+s((r=null!=(r=t.label||(null!=e?e.label:e))?r:a,typeof r===o?r.call(e,{name:"label",hash:{},data:i}):r))+'\r\n    <button class="btn btn-primary btn-sm btn-undo">'+s((r=null!=(r=t.labelUndo||(null!=e?e.labelUndo:e))?r:a,typeof r===o?r.call(e,{name:"labelUndo",hash:{},data:i}):r))+' (<span class="undo-countdown"></span>)</button>\r\n    <button type="button" class="close" data-dismiss="alert" aria-label="Close">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n';
},useData:!0})}),define("lib-build/less!storymaps-react/tpl/builder/notification/Undo",[],function(){}),define("storymaps-react/tpl/builder/notification/Undo",["module","exports","./Notification","lib-build/hbars!./Undo","lib-build/less!./Undo"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=1e4,p=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return o(this,t),a(this,Object.getPrototypeOf(t).call(this,e))}return s(t,e),c(t,[{key:"render",value:function(){return(0,u["default"])({id:this._id,label:this._label,labelUndo:"Undo"})}},{key:"postCreate",value:function(){void 0!==this._positionTop&&this._node.css("top",this._positionTop),this._initEvents()}},{key:"_initEvents",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.delay||d,n=Math.floor(t/1e3),i=setInterval(function(){n>0&&this._node.find(".undo-countdown").html(--n)}.bind(this),1e3);this._node.find(".undo-countdown").html(n),setTimeout(function(){this._node.remove(),this._resultDeferred.reject(),clearInterval(i)}.bind(this),t+1200),this._node.find(".btn-undo").click(function(){this._node.remove(),this._resultDeferred.resolve()}.bind(this))}}]),t}(l["default"]);t["default"]=p,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/ImmersiveBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/ImmersiveBuilder",["module","exports","./Immersive","./ImmersiveBuilderPanel","storymaps/tpl/view/section/Common","storymaps-react/tpl/builder/notification/Undo","../builder/AddMenu","dojo/topic","dojo/_base/lang","lib-build/less!./ImmersiveBuilder"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),y=u(s),b=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function E(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:E(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},C=function(e){function t(e,n){c(this,t);var i=d(this,Object.getPrototypeOf(t).call(this,e));return i.MEDIA_BUILDER_TABS_BACKGROUND=["appearance","manage"],i.MEDIA_BUILDER_TABS_PANEL=["appearance","manage"],i._latestOnScrollParams=null,i._currentScrollPosition=null,i._builderPanel=null,i._builderPanelNode=null,i._initialMedia=n,i._addMenu=new g["default"]({buttons:["sequence","title","immersive"]}),i}return p(t,e),_(t,[{key:"render",value:function(){var e=this._section.views;if(!e||!e.length){var n=this._initialMedia||{type:"empty",empty:"empty"};this._section.views=[{transition:"fade-fast",background:m["default"].initMedia(n).serialize(),foreground:{panels:[app.ui.ImmersivePanelFactory.createInstance().serialize()]}}]}return w(Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){w(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._builderPanelNode=this._node.find(".builder-panel"),this._builderPanel=new h["default"]({container:this._builderPanelNode,selectView:this._selectView.bind(this),addView:this._addEmptyView.bind(this),deleteView:this._deleteView.bind(this),duplicateView:this._duplicateView.bind(this),updateTransition:this._updateTransition.bind(this),organize:this._organizeByIds.bind(this)}),this._node.find(".background-title h2").attr("contenteditable",!0).attr("placeholder","Enter a title...").on("blur keyup",function(){this.serialize(),this._onContentChange()}.bind(this)).on("paste",function(){setTimeout(function(){this._node.find(".background-title h2").html($("<div>"+this._node.find(".background-title h2").text()).text()),this.serialize(),this._onContentChange()}.bind(this),0)}.bind(this)).keydown(function(e){return 13===e.keyCode?!1:void 0}),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._updateBuilderPanel()}},{key:"update",value:function(){var e=this._medias[this._currentViewIndex-1];e&&"webmap"==e.type&&e.resetSwipe(),w(Object.getPrototypeOf(t.prototype),"update",this).call(this),this._updateBuilderPanel(),this._onContentChange()}},{key:"onScroll",value:function(e){this._latestOnScrollParams=e,this._currentScrollPosition=e.currentSectionScroll;var n=this._currentViewIndex;if(w(Object.getPrototypeOf(t.prototype),"onScroll",this).call(this,e),n!=this._currentViewIndex&&(this._builderPanel.selectView(this._currentViewIndex-1),app.isInBuilder)){var i=this._medias[this._currentViewIndex-1];i&&this._node.toggleClass("hide-foreground",i.isConfigActive())}}},{key:"navigateToViewByIndex",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];w(Object.getPrototypeOf(t.prototype),"navigateToViewByIndex",this).call(this,e),this._builderPanel.selectView(e.index)}},{key:"getPreviewThumbnail",value:function(){return this._medias.length?this._medias[0].getPreviewThumbnail():""}},{key:"getPreviewText",value:function(){var e="";return this._node.find(".background-title h2").text()?this._node.find(".background-title h2").text():this._panels.length?this._panels[0].getPreviewText():e}},{key:"getPreviewIcon",value:function(){return"glyphicon glyphicon-random"}},{key:"onUpdatePanelLayout",value:function(e){this._node.removeClass("layout-scroll-full layout-scroll-partial").addClass("layout-"+e),this._node.find(".imm-panel").css({opacity:"scroll-full"==e?"inherit":0,transform:""});for(var t=0;t<this._panels.length;t++){var n=this._panels[t];n.layout=e,t==this._currentViewIndex-1&&n.updatePosition({currentSectionScroll:this._currentScrollPosition})}}},{key:"focus",value:function(){setTimeout(function(){this._panels[0]&&this._panels[0].focus()}.bind(this),50)}},{key:"serialize",value:function(){for(var e=[],t=0;t<this._medias.length;t++){var n=this._medias[t],i=this._panels[t],r=this._transitions[t];e.push({transition:r,background:n.serialize(),foreground:{panels:[i.serialize()]}}),0===t&&(e[0].foreground.title={value:$("<div>"+this._node.find(".background-title h2").text()+"</div>").text(),global:!0})}return this._section.views=e,b["default"].clone(this._section)}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"_onContentChange",value:function(){this.serialize(),y["default"].publish("builder-section-update")}},{key:"_updateBuilderPanel",value:function(){if(this._builderPanel){for(var e=[],t=0;t<this._medias.length;t++)e.push(this._getTransitionInfo(t));this._builderPanel.update({medias:this._medias,panels:this._panels,transitions:this._transitions,transitionsInfos:e})}}},{key:"_onToggleMediaConfig",value:function(){this._node.toggleClass("hide-foreground")}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.action&&e.media&&"swap"==e.action&&app.builder.mediaPicker.open({mode:"add"}).then(function(t){"empty"!=e.media.type&&this._onToggleMediaConfig(),this._onEditMedia(e.media,t)}.bind(this),function(){})}},{key:"_onMediaConfigChange",value:function(){this.update()}},{key:"_onEditMedia",value:function(e,t){console.log(e,t);var n=this._medias.indexOf(e),i=m["default"].initMedia(t,this._mediaCache),r=this.isMediaAlreadyLoaded(t);r||e.getNode().after(m["default"].renderBackground({media:i,transition:this._transitions[n]})),i.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"}),r||i.load({isBuilderAdd:!0}),e.destroy(),this._medias[n]=i,this.update(),i.getNode().addClass("active")}},{key:"_selectView",value:function(e){console.log("selectView:",e),e!=this._currentViewIndex-1&&this.navigateToViewByIndex({index:e,animate:!1})}},{key:"_addEmptyView",value:function(e){console.log("addEmptyView:",e);var t="fade-fast",n=m["default"].initMedia({type:"empty",empty:"empty"});this._medias.splice(e+1,0,n),this._medias[e].getNode().after(m["default"].renderBackground({media:n,transition:t})),n.postCreate({container:this._node,delayBuilderInit:!0,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"});var i=app.ui.ImmersivePanelFactory.duplicateWithoutContent(this._panels[e]?this._panels[e].serialize():null,{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)});this._panels.splice(e+1,0,i),this._node.find(".foreground .imm-panel").eq(e).after(i.render()),i.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),i.focus(),this._transitions.splice(e+1,0,t),this.update();var r=this._currentViewIndex;this._currentViewIndex=-1,this.navigateToViewByIndex({index:e+1,animate:!1}),e+1==r-1&&app.ui.update({forceUpdate:!0})}},{key:"_addView",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];console.log("addView:",e);var t=e.index,n=e.media,i=e.panel,r=e.transition;if(void 0!==t&&n&&i&&r){n=m["default"].initMedia(n,this._mediaCache),this._medias.splice(t,0,n);var o=this.isMediaAlreadyLoaded(n.serialize());o||this._medias[t-1].getNode().after(m["default"].renderBackground({media:n,transition:r})),n.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"}),i=app.ui.ImmersivePanelFactory.createInstance(i,{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)}),this._panels.splice(t,0,i),this._node.find(".foreground .imm-panel").eq(t-1).after(i.render()),i.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),this._transitions.splice(t+1,0,r),this.update(),this.navigateToViewByIndex({index:t+1,animate:!1})}}},{key:"_deleteView",value:function(e){if(console.log("deleteView:",e),1===this._medias.length)return void app.Controller.deleteActiveSection();var t={index:e,panel:this._panels[e].serialize(),media:this._medias[e].serialize(),transition:this._transitions[e]};if(this.isMediaUniqueInSection(this._medias[e].serialize())&&this._node.find(".background").eq(e).remove(),this._node.find(".imm-panel").eq(e).remove(),this._panels.splice(e,1),this._medias.splice(e,1),this._transitions.splice(e,1),this.update(),e==this._currentViewIndex-1)e>0?this.navigateToViewByIndex({index:e-1,animate:!1}):this._medias.length&&this.navigateToViewByIndex({index:e,animate:!1});else if(e<this._currentViewIndex-1){var n=this._currentViewIndex;this.navigateToViewByIndex({index:n-2,animate:!1})}this._currentViewIndex=-1,app.ui.update({forceUpdate:!0});var i=new v["default"]({container:this._node,label:"You deleted a view",positionTop:70});i.display().then(function(){this._addView(t)}.bind(this),function(){})}},{key:"_duplicateView",value:function(e){console.log("duplicateView:",e);var t=app.ui.MediaFactory.createInstance(this._medias[e].serialize(),this._mediaCache);this._medias.splice(e+1,0,t);var n=this.isMediaAlreadyLoaded(t.serialize());n||this._medias[e].getNode().after(m["default"].renderBackground({media:t,transition:this._transitions[e]})),t.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"});var i=app.ui.ImmersivePanelFactory.duplicateWithoutContent(this._panels[e].serialize(),{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)});this._panels.splice(e+1,0,i),this._node.find(".foreground .imm-panel").eq(e).after(i.render()),i.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),i.focus(),this._transitions.splice(e+1,0,this._transitions[e]),this.update();var r=this._currentViewIndex;this._currentViewIndex=-1,this.navigateToViewByIndex({index:e+1,animate:!1}),e+1==r-1&&app.ui.update({forceUpdate:!0})}},{key:"_updateTransition",value:function(e,t){console.log("updateTransition:",e,t),this._applyViewTransition({media:this._medias[e],prevTransition:this._transitions[e],newTransition:t}),this._transitions[e]=t,this.update(),this.onScroll(this._latestOnScrollParams)}},{key:"_applyViewTransition",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(e.media){var t=e.media.getNode();e.prevTransition&&e.newTransition?(t.css("clip","").removeClass("transition-"+e.prevTransition),"fade-slow"==e.newTransition||"fade-fast"==e.newTransition?(this._node.addClass("disable-transition"),t.removeClass("active").addClass("transition-"+e.newTransition),setTimeout(function(){this._node.removeClass("disable-transition"),t.addClass("active")}.bind(this),10)):t.addClass("transition-"+e.newTransition)):console.error("TODO")}}},{key:"_organizeByIds",value:function(e){var t=this._getViewsIndexesByIds(e);this._organizeByIndexes(t,!0)}},{key:"_organizeByIndexes",value:function(e,t){console.log("Organize:",e);for(var n=!0,i=0;i<e.length-1;i++)if(e[i]>e[i+1]){n=!1;break}if(!n){for(var r=[],o=[],a=[],s=-1,l=[],u=[],c=[],d=this._currentViewIndex,p=0;p<this._medias.length;p++)l[p]=this._medias[p],u[p]=this._panels[p],c[p]=this._transitions[p];for(var f=0;f<e.length;f++){var h=e[f];r.push(this._medias[h]),o.push(this._panels[h]),a.push(this._transitions[h]),h==this._currentViewIndex-1&&(s=f)}this._medias=r,this._panels=o,this._transitions=a;for(var m=this._panels.length-1;m>=0;m--){var g=this._panels[m];this._node.find(".foreground").prepend(g._node)}if(this.update(),-1!=s&&setTimeout(function(){this.navigateToViewByIndex({index:s,animate:!1})}.bind(this),50),t){var y=new v["default"]({container:this._node,label:"You organized the views",positionTop:70});y.display().then(function(){this._medias=l,this._panels=u,this._transitions=c;for(var e=this._panels.length-1;e>=0;e--){var t=this._panels[e];this._node.find(".foreground").prepend(t._node)}this.update(),d!=this._currentViewIndex&&setTimeout(function(){this.navigateToViewByIndex({index:d-1,animate:!1})}.bind(this),50)}.bind(this),function(){})}}}},{key:"_getViewsIndexesByIds",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)for(var s=o.value,l=0;l<this._panels.length;l++){var u=this._panels[l];u.id==s&&t.push(l)}}catch(c){i=!0,r=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return t}}]),t}(f["default"]);t["default"]=C,e.exports=t["default"]}),define("lib-build/less!storymaps-react/tpl/view/section/CreditsBuilder",[],function(){}),define("storymaps-react/tpl/view/section/CreditsBuilder",["module","exports","./Credits","./builder/AddMenu","storymaps-react/common/builder/textEditor/MediumEditorWrapper","dojo/_base/lang","lib-build/less!./CreditsBuilder"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function y(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},v="#000",g=function(e){function t(e){s(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n._addMenu=new d["default"]({buttons:["sequence","title","immersive"]}),n}return u(t,e),h(t,[{key:"render",value:function(){return this._section.background||(this._section={type:"credits",layout:"credits-1",background:{type:"color",color:{value:v}},foreground:{panels:[{type:"blocks",blocks:[{type:"text",text:{value:'<p class="block" style="text-align: center;"></p>'}}]},{type:"credits",credits:[]}]}}),m(Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){m(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node});var n=this._node.find(".credits > .blocks"),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=$(l).index();this._panels[u].editor=new p["default"]({node:$(l),addMedia:function(){},style:"compact",addButtons:null,authorizedMedia:[],placeholder:"Enter an optional introduction to your credits section..."})}}catch(c){r=!0,o=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}}},{key:"focus",value:function(){setTimeout(function(){this._panels[0]&&this._panels[0].editor&&this._panels[0].editor.focus()}.bind(this),50)}},{key:"serialize",value:function(){for(var e=[],t=0;t<this._panels.length;t++){var n=this._panels[t];"credits"===n.type?e.push(n.credits.serialize()):"blocks"===n.type&&e.push(this.serializeBlocks(n))}return this._section.foreground.panels=e,f["default"].clone(this._section)}},{key:"serializeBlocks",value:function(e){var t=[];if(e.editor){t=e.editor.serialize();for(var n=0;n<t.length;n++){var i=t[n];if("media"===i.type){var r=this.findBlock(e,i.id);r&&(t[n]=r.serialize())}}e.blocks=t}return{type:"blocks",blocks:t}}},{key:"findBlock",value:function(e,t){if(!t)return null;var n=!0,i=!1,r=void 0;try{for(var o,a=e.blocks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s._domID===t)return s}}catch(l){i=!0,r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}}}]),t}(c["default"]);t["default"]=g,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/section/builder/CreditsPlaceholder",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l='<div class="section section-layout-credits-placeholder">\r\n\r\n  ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(l+=r),l+'\r\n\r\n  <div class="foreground">\r\n    <button class="btn btn-primary btn-lg btn-add-credits">Add a credits section</button>\r\n  </div>\r\n\r\n  <div class="builder-section-add-menu"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/builder/CreditsPlaceholder",[],function(){}),define("storymaps-react/tpl/view/section/builder/CreditsPlaceholder",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","./AddMenu","lib-build/hbars!./CreditsPlaceholder","lib-build/less!./CreditsPlaceholder"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=a(n),u=a(i),c=a(r),d=a(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(){s(this,e),this.type="credits-placeholder",this.id=u["default"].getUID(),this._node=null,this._addMenu=new c["default"]({buttons:["sequence","title","immersive"]})}return p(e,[{key:"render",value:function(){return(0,d["default"])({background:l["default"].renderBackground({media:l["default"].initMedia({type:"color",color:{value:"#777"}})})})}},{key:"postCreate",value:function(e){this._node=e,this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._node.find(".btn-add-credits").click(this._onClickAddCredits.bind(this))}},{key:"resize",value:function(){}},{key:"onScroll",value:function(){}},{key:"serialize",value:function(){return null}},{key:"getArcGISContent",value:function(){return[]}},{key:"setVisibility",value:function(e){this._node.toggleClass("hidden",!e)}},{key:"_onClickAddCredits",value:function(){app.Controller.addSection({type:"credits",index:this._node.index()})}}]),e}();t["default"]=f,e.exports=t["default"]}),define("storymaps-react/tpl/view/section/FactoryBuilder",["module","exports","./FactoryViewer","./Cover/CoverBuilder","./SequenceBuilder","./TitleBuilder","./Immersive/ImmersiveBuilder","./CreditsBuilder","./builder/CreditsPlaceholder"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),y=u(s),b=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){return c(this,t),d(this,Object.getPrototypeOf(t).apply(this,arguments))}return p(t,e),_(t,null,[{key:"getClasses",value:function(){return{Cover:h["default"],Sequence:m["default"],Title:v["default"],Immersive:g["default"],Credits:y["default"],CreditsPlaceholder:b["default"]}}}]),t}(f["default"]);t["default"]=w,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/Panel",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'">\r\n  <div class="blocksWrapper">\r\n    <div class="blocks">\r\n      ';return o=null!=(o=t.blocks||(null!=e?e.blocks:e))?o:s,r=typeof o===a?o.call(e,{name:"blocks",hash:{},data:i}):o,null!=r&&(u+=r),u+'\r\n    </div>\r\n    <div class="builder-ui panel-cfg"></div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/Panel",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/Panel",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Panel","lib-build/less!./Panel"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=o(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=125,f=function(){function e(t){s(this,e),this.id=u["default"].getUID(),this.layout=t.layout,this._settings=t.settings,this._blocksJSON=t.blocks,this._blocks=null,this._node=null}return d(e,[{key:"render",value:function(){var e=l["default"].renderBlocks(this._blocksJSON,{});return this._blocks=e.blocks,(0,c["default"])({id:this.id,classes:this.getClasses(),blocks:e.output})}},{key:"load",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._blocks[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;o.load()}}catch(a){t=!0,n=a}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw n}}}},{key:"postCreate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(e.container){this._node=e.container.find("#"+this.id);var t=!0,n=!1,i=void 0;try{for(var r,o=this._blocks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs})}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}app.isInBuilder||1!=this._blocks.length||"text"!=this._blocks[0].type||this._blocks[0].getPreviewText()||this._node.find(".blocksWrapper").hide()}}},{key:"getClasses",value:function(){var e=["imm-panel"];return this._settings&&(e.push("style-"+this._settings.style),e.push("theme-"+this._settings.theme),e.push("placement-"+this._settings["position-x"]),e.push("size-"+this._settings.size)),e.join(" ")}},{key:"updatePosition",value:function(e){if(e.currentSectionScroll){var t=app.display.windowHeight,n=e.currentSectionScroll%t,i=n/t,r=null,o=1;if("scroll-partial"==this.layout){var a=app.display.windowHeight;app.isInBuilder&&(a-=p);var s=a/2,l=75;r=s+l-i*(t/4),o=.5>=i?2*i*1.5:1-2*(i-.5)/1.5,o>1?o=1:0>o&&(o=0),o>.9&&(o=1),this._node.parent().find(".imm-panel").css({transform:"inherit",opacity:0,visibility:"hidden"}),this._node.css({transform:"translateY("+r+"px)",opacity:o,visibility:"visible"})}}}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._blocks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e.push.apply(e,a(s.getArcGISContent()))}}catch(l){n=!0,i=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}return e}}]),e}();t["default"]=f,e.exports=t["default"]}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/PanelBuilder",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config-panel">\r\n  <div class="panel-scrolling">\r\n\r\n\r\n    <div class="panel-config-row">\r\n\r\n      <div class="options-container panel-scrolling-placement" data-option="position-x">\r\n        <div class="column-label">Position</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'left\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignLeft.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'center\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignCenter.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'right\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignRight.png" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="options-container panel-scrolling-size" data-option="size">\r\n        <div class="column-label">Size</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'small\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthNarrow.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'medium\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthMedium.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'large\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthWide.png" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="panel-config-row">\r\n\r\n      <div class="options-container panel-scrolling-theme" data-option="theme">\r\n        <div class="column-label">Theme</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'black-over-white\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelThemeLight.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'white-over-black\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelThemeDark.png" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="options-container panel-scrolling-style" data-option="style">\r\n        <div class="column-label">Background</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'background\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundFill.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'text-shadow\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundShadow.png" />\r\n            </div>\r\n          </div>\r\n          <!--\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'auto\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundAuto.png" />\r\n            </div>\r\n          </div>\r\n          -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row-scrolling column-label">Scrolling (for all panels)</div>\r\n    <div class="options-container panel-scrolling-layout" data-option="layout">\r\n      <div class="panel-cfg-item">\r\n        <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'scroll-full\'>\r\n          <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelScrollFull.gif" />\r\n        </div>\r\n      </div>\r\n      <div class="panel-cfg-item">\r\n        <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'scroll-partial\'>\r\n          <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelScrollPartial.gif" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-panel-btn">\r\n  <i class="builder-invite-open fa fa-cog" aria-hidden="true"></i>\r\n  <i class="builder-invite-close fa fa-times" aria-hidden="true"></i>\r\n</div>\r\n';
},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/PanelBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/PanelBuilder",["module","exports","./Panel","storymaps/tpl/view/section/Common","storymaps-react/common/builder/textEditor/MediumEditorWrapper","lib-build/hbars!./PanelBuilder","dojo/topic","dojo/_base/lang","lib-build/less!./PanelBuilder"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_=function(e){function t(e,n){u(this,t);var i=c(this,Object.getPrototypeOf(t).call(this,e));return i._callbacks=n,i._editor=null,i._configPanelIsInit=!1,i._configPanelIsOpen=!1,i._configPanelMedia=null,i._mediaConfigurationTabs=null,i}return d(t,e),y(t,[{key:"postCreate",value:function(e){this._mediaConfigurationTabs=e.mediaConfigurationTabs,b(Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._editor=new h["default"]({node:this._node.find(".blocks"),addMedia:this.addMedia.bind(this),addButtons:["text","media"],style:"compact",authorizedMedia:["image","video","webpage"],onChange:this._onContentChange.bind(this)}),this.updateBuilderEditorPlacementRules(),this._node.find(".panel-cfg").html((0,m["default"])({})),this._node.find(".blocks").click(this.onPanelClick.bind(this)),this._node.find(".builder-config-panel-btn").click(this.toggleBuilderPanel.bind(this))}},{key:"updatePosition",value:function(e,n){if(b(Object.getPrototypeOf(t.prototype),"updatePosition",this).call(this,e,n),this._editor.hideToolbars(),this._configPanelIsOpen)if(e.isNewView)this._configPanelMedia.closeConfigPanel(),this._configPanelIsOpen=!1,this._configPanelMedia=null;else{var i=this._configPanelMedia.getNode(),r=i[0].getBoundingClientRect();i.find(".media-cfg-panel").css("top",r.bottom)}}},{key:"focus",value:function(){}},{key:"onPanelClick",value:function(){this._node.find(".panel-cfg").addClass("active"),"scroll-partial"==this.layout&&this._node.css("opacity",1)}},{key:"toggleBuilderPanel",value:function(){var e=this._node.find(".builder-config-panel-btn"),t=this._node.find(".builder-config-panel");if(!this._configPanelIsInit){this._node.find(".panel-cfg-item").click(this.onOptionChange.bind(this));var n=Object.assign({},this._settings,{layout:this.layout});this._node.find('.panel-cfg-item-wrapper[data-value="scroll-full"]').hover(function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollFullHover.gif")},function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollFull.gif")}),this._node.find('.panel-cfg-item-wrapper[data-value="scroll-partial"]').hover(function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollPartialHover.gif")},function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollPartial.gif")});for(var i in n){var r=n[i],o=this._node.find('.options-container[data-option="'+i+'"]');o.find('.panel-cfg-item-wrapper[data-value="'+r+'"]').addClass("active")}}this._editor.hideToolbars(),e.toggleClass("active"),t.toggleClass("active"),"scroll-partial"==this.layout&&(t.hasClass("active")?(this._node.data("opacity-tmp",this._node.css("opacity")),this._node.css("opacity",1)):(this._node.css("opacity",this._node.data("opacity-tmp")),this._node.data("opacity-tmp","")))}},{key:"onOptionChange",value:function(e){var t=$(e.target),n=t.parents(".options-container"),i=n.data("option"),r=t.data("value");t.hasClass("panel-cfg-item-wrapper")&&("layout"==i&&this._callbacks.onUpdateLayout(r),n.find(".panel-cfg-item-wrapper").removeClass("active"),t.addClass("active"),this._settings[i]=r,this.updateSettings(),"scroll-partial"==this.layout&&this._node.css("opacity",1),v["default"].publish("builder-section-update"))}},{key:"updateSettings",value:function(){this._node.removeClass().addClass(this.getClasses()),this.updateBuilderEditorPlacementRules()}},{key:"updateBuilderEditorPlacementRules",value:function(){var e=this._settings,t=e.size,n=e["position-x"],i={width:"",minWidth:"250px",maxWidth:"400px",left:"",marginLeft:"",marginRight:""};"small"==t?(i.width="calc((100vw - 250px) * .28)",i.maxWidth="300px"):"medium"==t?i.width="calc((100vw - 250px) * .38)":"large"==t&&(i.width="calc((100vw - 250px) * .48)",i.maxWidth="600px"),"left"==n?i.marginLeft="30px":"center"==n?(i.minWidth="",i.maxWidth="",i.width=""):"right"==n&&(i.marginRight="30px",i.left="inherit !important"),this._editor.setAddMenuPlacementRules(i)}},{key:"_onContentChange",value:function(){this.serialize(),this._callbacks.onChange()}},{key:"addMedia",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(e.media){var t=f["default"].createBlock(e.media);return this._blocks.push(t),setTimeout(function(){t.postCreate({container:this._node,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs}),t.load()}.bind(this),50),t.render({placement:"block"})}}},{key:"_onToggleMediaConfig",value:function(e){console.log("Immersive > toggle media config",e);var t=e.getNode().find(".media-cfg-panel"),n=e.getNode()[0],i=n.getBoundingClientRect(),r=0;if(!t.hasClass("active"))return t.css("top",""),this._configPanelIsOpen=!1,void(this._configPanelMedia=null);if(this._configPanelIsOpen&&this._configPanelMedia&&this._configPanelMedia.closeConfigPanel(),this._configPanelIsOpen=!0,this._configPanelMedia=e,t.css("top",i.bottom),i.bottom+175+125>app.display.windowHeight&&(r=app.display.windowHeight-i.bottom-175-125),r){var o=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:o-r+10},150)}}},{key:"_onEditMedia",value:function(e,t){var n=f["default"].initMedia(t);e.getNode().before(n.render({placement:"block"})),e.getNode().remove(),n.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs}),n.load(),this._blocks.splice(this._blocks.indexOf(e),0,n)}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.action&&e.media&&("remove"==e.action?(e.media.remove(),this._blocks.splice(this._blocks.indexOf(e.media),1)):"swap"==e.action&&app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image","video","webpage"]}).then(function(t){this._onToggleMediaConfig(e.media),this._onEditMedia(e.media,t)}.bind(this),function(){}))}},{key:"getPreviewText",value:function(){return this._blocksJSON&&this._blocksJSON.length?$(this._blocksJSON[0].text.value).text():""}},{key:"findBlock",value:function(e){if(!e)return null;for(var t=0;t<this._blocks.length;t++)if(this._blocks[t]._domID==e)return this._blocks[t]}},{key:"serialize",value:function(){var e=[];if(this._editor){e=this._editor.serialize();for(var t=0;t<e.length;t++){var n=e[t];if("media"==n.type){var i=this.findBlock(n.id);i&&(e[t]=i.serialize())}}this._blocksJSON=e}return g["default"].clone({layout:this.layout,settings:this._settings,blocks:this._blocksJSON})}}]),t}(p["default"]);t["default"]=_,e.exports=t["default"]}),define("storymaps/tpl/view/section/Immersive/PanelFactoryBuilder",["storymaps-react/tpl/view/section/Immersive/PanelBuilder"],function(e){var t="scroll-full",n={"position-x":"left",size:"medium",style:"background",theme:"white-over-black"},i=[{type:"text",text:{value:'<p class="block"></p>'}}];return{createInstance:function(r,o){if(r)return new e(r,o);var a={layout:t,settings:n,blocks:i};return new e(a,o)},duplicateWithoutContent:function(r,o){var a={};return r?(a=JSON.parse(JSON.stringify(r)),a.blocks=i):a={layout:t,settings:n,blocks:i},new e(a,o)}}}),function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){(function(t){"use strict";if(t._babelPolyfill)throw new Error("only one instance of babel/polyfill is allowed");t._babelPolyfill=!0,e("core-js/shim"),e("regenerator/runtime")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/shim":72,"regenerator/runtime":73}],2:[function(e,t,n){"use strict";var i=e("./$");t.exports=function(e){return function(t){var n,r=i.toObject(this),o=i.toLength(r.length),a=i.toIndex(arguments[1],o);if(e&&t!=t){for(;o>a;)if(n=r[a++],n!=n)return!0}else for(;o>a;a++)if((e||a in r)&&r[a]===t)return e||a;return!e&&-1}}},{"./$":16}],3:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.ctx");t.exports=function(e){var t=1==e,n=2==e,o=3==e,a=4==e,s=6==e,l=5==e||s;return function(u){for(var c,d,p=Object(i.assertDefined(this)),f=i.ES5Object(p),h=r(u,arguments[1],3),m=i.toLength(f.length),v=0,g=t?Array(m):n?[]:void 0;m>v;v++)if((l||v in f)&&(c=f[v],d=h(c,v,p),e))if(t)g[v]=d;else if(d)switch(e){case 3:return!0;case 5:return c;case 6:return v;case 2:g.push(c)}else if(a)return!1;return s?-1:o||a?a:g}}},{"./$":16,"./$.ctx":10}],4:[function(e,t,n){function i(e,t,n){if(!e)throw TypeError(n?t+n:t)}var r=e("./$");i.def=r.assertDefined,i.fn=function(e){if(!r.isFunction(e))throw TypeError(e+" is not a function!");return e},i.obj=function(e){if(!r.isObject(e))throw TypeError(e+" is not an object!");return e},i.inst=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e},t.exports=i},{"./$":16}],5:[function(e,t,n){var i=e("./$");t.exports=Object.assign||function(e,t){for(var n=Object(i.assertDefined(e)),r=arguments.length,o=1;r>o;)for(var a,s=i.ES5Object(arguments[o++]),l=i.getKeys(s),u=l.length,c=0;u>c;)n[a=l[c++]]=s[a];return n}},{"./$":16}],6:[function(e,t,n){function i(e){return a.call(e).slice(8,-1)}var r=e("./$"),o=e("./$.wks")("toStringTag"),a={}.toString;i.classof=function(e){var t,n;return void 0==e?void 0===e?"Undefined":"Null":"string"==typeof(n=(t=Object(e))[o])?n:i(t)},i.set=function(e,t,n){e&&!r.has(e=n?e:e.prototype,o)&&r.hide(e,o,t)},t.exports=i},{"./$":16,"./$.wks":27}],7:[function(e,t,n){"use strict";function i(e,t){if(!p(e))return("string"==typeof e?"S":"P")+e;if(m(e))return"F";if(!c(e,v)){if(!t)return"E";f(e,v,++C)}return"O"+e[v]}function r(e,t){var n,r=i(t);if("F"!=r)return e[g][r];for(n=e[b];n;n=n.n)if(n.k==t)return n}var o=e("./$"),a=e("./$.ctx"),s=e("./$.uid").safe,l=e("./$.assert"),u=e("./$.iter"),c=o.has,d=o.set,p=o.isObject,f=o.hide,h=u.step,m=Object.isFrozen||o.core.Object.isFrozen,v=s("id"),g=s("O1"),y=s("last"),b=s("first"),_=s("iter"),w=o.DESC?s("size"):"size",C=0;t.exports={getConstructor:function(e,t,n){function i(r){var a=l.inst(this,i,e);d(a,g,o.create(null)),d(a,w,0),d(a,y,void 0),d(a,b,void 0),void 0!=r&&u.forOf(r,t,a[n],a)}return o.mix(i.prototype,{clear:function(){for(var e=this,t=e[g],n=e[b];n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e[b]=e[y]=void 0,e[w]=0},"delete":function(e){var t=this,n=r(t,e);if(n){var i=n.n,o=n.p;delete t[g][n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),t[b]==n&&(t[b]=i),t[y]==n&&(t[y]=o),t[w]--}return!!n},forEach:function(e){for(var t,n=a(e,arguments[1],3);t=t?t.n:this[b];)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!r(this,e)}}),o.DESC&&o.setDesc(i.prototype,"size",{get:function(){return l.def(this[w])}}),i},def:function(e,t,n){var o,a,s=r(e,t);return s?s.v=n:(e[y]=s={i:a=i(t,!0),k:t,v:n,p:o=e[y],n:void 0,r:!1},e[b]||(e[b]=s),o&&(o.n=s),e[w]++,"F"!=a&&(e[g][a]=s)),e},getEntry:r,getIterConstructor:function(){return function(e,t){d(this,_,{o:e,k:t})}},next:function(){for(var e=this[_],t=e.k,n=e.l;n&&n.r;)n=n.p;return e.o&&(e.l=n=n?n.n:e.o[b])?"key"==t?h(0,n.k):"value"==t?h(0,n.v):h(0,[n.k,n.v]):(e.o=void 0,h(1))}}},{"./$":16,"./$.assert":4,"./$.ctx":10,"./$.iter":15,"./$.uid":25}],8:[function(e,t,n){"use strict";function i(e,t){return y.call(e.array,function(e){return e[0]===t})}function r(e){return e[v]||d(e,v,{array:[],get:function(e){var t=i(this,e);return t?t[1]:void 0},has:function(e){return!!i(this,e)},set:function(e,t){var n=i(this,e);n?n[1]=t:this.array.push([e,t])},"delete":function(e){var t=b.call(this.array,function(t){return t[0]===e});return~t&&this.array.splice(t,1),!!~t}})[v]}var o=e("./$"),a=e("./$.uid").safe,s=e("./$.assert"),l=e("./$.iter").forOf,u=o.has,c=o.isObject,d=o.hide,p=Object.isFrozen||o.core.Object.isFrozen,f=0,h=a("id"),m=a("weak"),v=a("leak"),g=e("./$.array-methods"),y=g(5),b=g(6);t.exports={getConstructor:function(e,t,n){function i(r){o.set(s.inst(this,i,e),h,f++),void 0!=r&&l(r,t,this[n],this)}return o.mix(i.prototype,{"delete":function(e){return c(e)?p(e)?r(this)["delete"](e):u(e,m)&&u(e[m],this[h])&&delete e[m][this[h]]:!1},has:function(e){return c(e)?p(e)?r(this).has(e):u(e,m)&&u(e[m],this[h]):!1}}),i},def:function(e,t,n){return p(s.obj(t))?r(e).set(t,n):(u(t,m)||d(t,m,{}),t[m][e[h]]=n),e},leakStore:r,WEAK:m,ID:h}},{"./$":16,"./$.array-methods":3,"./$.assert":4,"./$.iter":15,"./$.uid":25}],9:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.def"),o=e("./$.iter"),a=e("./$.assert").inst;t.exports=function(t,n,s,l,u){function c(e,t){var n=h[e];i.FW&&(h[e]=function(e,i){var r=n.call(this,0===e?0:e,i);return t?this:r})}var d=i.g[t],p=d,f=l?"set":"add",h=p&&p.prototype,m={};if(i.isFunction(p)&&(u||!o.BUGGY&&h.forEach&&h.entries)){var v,g=new p,y=g[f](u?{}:-0,1);e("./$.iter-detect")(function(e){new p(e)})||(p=function(e){a(this,p,t);var n=new d;return void 0!=e&&o.forOf(e,l,n[f],n),n},p.prototype=h,i.FW&&(h.constructor=p)),u||g.forEach(function(e,t){v=1/t===-(1/0)}),v&&(c("delete"),c("has"),l&&c("get")),(v||y!==g)&&c(f,!0)}else p=s.getConstructor(t,l,f),i.mix(p.prototype,n);return e("./$.cof").set(p,t),e("./$.species")(p),m[t]=p,r(r.G+r.W+r.F*(p!=d),m),u||o.std(p,t,s.getIterConstructor(),s.next,l?"key+value":"value",!l,!0),p}},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.def":11,"./$.iter":15,"./$.iter-detect":14,"./$.species":22}],10:[function(e,t,n){var i=e("./$.assert").fn;t.exports=function(e,t,n){if(i(e),~n&&void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},{"./$.assert":4}],11:[function(e,t,n){function i(e,t){return function(){return e.apply(t,arguments)}}function r(e,t,n){var u,c,d,p,f=e&r.G,h=f?a:e&r.S?a[t]:(a[t]||{}).prototype,m=f?s:s[t]||(s[t]={});f&&(n=t);for(u in n)c=!(e&r.F)&&h&&u in h,d=(c?h:n)[u],p=e&r.B&&c?i(d,a):e&r.P&&l(d)?i(Function.call,d):d,h&&!c&&(f?h[u]=d:delete h[u]&&o.hide(h,u,d)),m[u]!=d&&o.hide(m,u,p)}var o=e("./$"),a=o.g,s=o.core,l=o.isFunction;a.core=s,r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,t.exports=r},{"./$":16}],12:[function(e,t,n){t.exports=function(e){return e.FW=!0,e.path=e.g,e}},{}],13:[function(e,t,n){t.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);case 5:return i?e(t[0],t[1],t[2],t[3],t[4]):e.call(n,t[0],t[1],t[2],t[3],t[4])}return e.apply(n,t)}},{}],14:[function(e,t,n){var i=e("./$.wks")("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(e){if(!r)return!1;var t=!1;try{var n=[7],o=n[i]();o.next=function(){t=!0},n[i]=function(){return o},e(n)}catch(a){}return t}},{"./$.wks":27}],15:[function(e,t,n){"use strict";function i(e,t){l.hide(e,f,t),h in[]&&l.hide(e,h,t)}function r(e,t,n,r){var o=e.prototype,a=o[f]||o[h]||r&&o[r]||n;if(l.FW&&i(o,a),a!==n){var s=l.getProto(a.call(new e));c.set(s,t+" Iterator",!0),l.FW&&l.has(o,h)&&i(s,l.that)}return m[t]=a,m[t+" Iterator"]=l.that,a}function o(e){var t=l.g.Symbol,n=e[t&&t.iterator||h],i=n||e[f]||m[c.classof(e)];return p(i.call(e))}function a(e){var t=e["return"];void 0!==t&&p(t.call(e))}function s(e,t,n,i){try{return i?t(p(n)[0],n[1]):t(n)}catch(r){throw a(e),r}}var l=e("./$"),u=e("./$.ctx"),c=e("./$.cof"),d=e("./$.def"),p=e("./$.assert").obj,f=e("./$.wks")("iterator"),h="@@iterator",m={},v={},g="keys"in[]&&!("next"in[].keys());i(v,l.that);var y=t.exports={BUGGY:g,Iterators:m,prototype:v,step:function(e,t){return{value:t,done:!!e}},stepCall:s,close:a,is:function(e){var t=Object(e),n=l.g.Symbol,i=n&&n.iterator||h;return i in t||f in t||l.has(m,c.classof(t))},get:o,set:i,create:function(e,t,n,i){e.prototype=l.create(i||y.prototype,{next:l.desc(1,n)}),c.set(e,t+" Iterator")},define:r,std:function(e,t,n,i,o,a,s){function u(e){return function(){return new n(this,e)}}y.create(n,t,i);var c,p,f=u("key+value"),h=u("value"),m=e.prototype;if("value"==o?h=r(e,t,h,"values"):f=r(e,t,f,"entries"),o&&(c={entries:f,keys:a?h:u("key"),values:h},d(d.P+d.F*g,t,c),s))for(p in c)p in m||l.hide(m,p,c[p])},forOf:function(e,t,n,i){for(var r,l=o(e),c=u(n,i,t?2:1);!(r=l.next()).done;)if(s(l,c,r.value,t)===!1)return a(l)}}},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.ctx":10,"./$.def":11,"./$.wks":27}],16:[function(e,t,n){"use strict";function i(e){return isNaN(e=+e)?0:(e>0?m:h)(e)}function r(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function o(e,t,n){return e[t]=n,e}function a(e){return y?function(t,n,i){return _.setDesc(t,n,r(e,i))}:o}function s(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function l(e){return"function"==typeof e}function u(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var c="undefined"!=typeof self?self:Function("return this")(),d={},p=Object.defineProperty,f={}.hasOwnProperty,h=Math.ceil,m=Math.floor,v=Math.max,g=Math.min,y=!!function(){try{return 2==p({},"a",{get:function(){return 2}}).a}catch(e){}}(),b=a(1),_=t.exports=e("./$.fw")({g:c,core:d,html:c.document&&document.documentElement,isObject:s,isFunction:l,it:function(e){return e},that:function(){return this},toInteger:i,toLength:function(e){return e>0?g(i(e),9007199254740991):0},toIndex:function(e,t){return e=i(e),0>e?v(e+t,0):g(e,t)},has:function(e,t){return f.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:y,desc:r,getDesc:Object.getOwnPropertyDescriptor,setDesc:p,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:u,ES5Object:Object,toObject:function(e){return _.ES5Object(u(e))},hide:b,def:a(0),set:c.Symbol?o:b,mix:function(e,t){for(var n in t)b(e,n,t[n]);return e},each:[].forEach});"undefined"!=typeof __e&&(__e=d),"undefined"!=typeof __g&&(__g=c)},{"./$.fw":12}],17:[function(e,t,n){var i=e("./$");t.exports=function(e,t){for(var n,r=i.toObject(e),o=i.getKeys(r),a=o.length,s=0;a>s;)if(r[n=o[s++]]===t)return n}},{"./$":16}],18:[function(e,t,n){var i=e("./$"),r=e("./$.assert").obj;t.exports=function(e){return r(e),i.getSymbols?i.getNames(e).concat(i.getSymbols(e)):i.getNames(e)}},{"./$":16,"./$.assert":4}],19:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.invoke"),o=e("./$.assert").fn;t.exports=function(){for(var e=o(this),t=arguments.length,n=Array(t),a=0,s=i.path._,l=!1;t>a;)(n[a]=arguments[a++])===s&&(l=!0);return function(){var i,o=this,a=arguments.length,u=0,c=0;if(!l&&!a)return r(e,n,o);if(i=n.slice(),l)for(;t>u;u++)i[u]===s&&(i[u]=arguments[c++]);for(;a>c;)i.push(arguments[c++]);return r(e,i,o)}}},{"./$":16,"./$.assert":4,"./$.invoke":13}],20:[function(e,t,n){"use strict";t.exports=function(e,t,n){var i=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(n?t:this).replace(e,i)}}},{}],21:[function(e,t,n){function i(e,t){o.obj(e),o(null===t||r.isObject(t),t,": can't set as prototype!")}var r=e("./$"),o=e("./$.assert");t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n){try{n=e("./$.ctx")(Function.call,r.getDesc(Object.prototype,"__proto__").set,2),n({},[])}catch(o){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}():void 0),check:i}},{"./$":16,"./$.assert":4,"./$.ctx":10}],22:[function(e,t,n){var i=e("./$");t.exports=function(t){i.DESC&&i.FW&&i.setDesc(t,e("./$.wks")("species"),{configurable:!0,get:i.that})}},{"./$":16,"./$.wks":27}],23:[function(e,t,n){"use strict";var i=e("./$");t.exports=function(e){return function(t){var n,r,o=String(i.assertDefined(this)),a=i.toInteger(t),s=o.length;return 0>a||a>=s?e?"":void 0:(n=o.charCodeAt(a),55296>n||n>56319||a+1===s||(r=o.charCodeAt(a+1))<56320||r>57343?e?o.charAt(a):n:e?o.slice(a,a+2):(n-55296<<10)+(r-56320)+65536)}}},{"./$":16}],24:[function(e,t,n){"use strict";function i(){var e=+this;if(l.has(E,e)){var t=E[e];delete E[e],t()}}function r(e){i.call(e.data)}var o,a,s,l=e("./$"),u=e("./$.ctx"),c=e("./$.cof"),d=e("./$.invoke"),p=l.g,f=l.isFunction,h=l.html,m=p.document,v=p.process,g=p.setImmediate,y=p.clearImmediate,b=p.postMessage,_=p.addEventListener,w=p.MessageChannel,C=0,E={},x="onreadystatechange";f(g)&&f(y)||(g=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return E[++C]=function(){d(f(e)?e:Function(e),t)},o(C),C},y=function(e){delete E[e]},"process"==c(v)?o=function(e){v.nextTick(u(i,e,1))}:_&&f(b)&&!p.importScripts?(o=function(e){b(e,"*")},_("message",r,!1)):f(w)?(a=new w,s=a.port2,a.port1.onmessage=r,o=u(s.postMessage,s,1)):o=m&&x in m.createElement("script")?function(e){h.appendChild(m.createElement("script"))[x]=function(){h.removeChild(this),i.call(e)}}:function(e){setTimeout(u(i,e,1),0)}),t.exports={set:g,clear:y}},{"./$":16,"./$.cof":6,"./$.ctx":10,"./$.invoke":13}],25:[function(e,t,n){function i(e){return"Symbol("+e+")_"+(++r+Math.random()).toString(36)}var r=0;i.safe=e("./$").g.Symbol||i,t.exports=i},{"./$":16}],26:[function(e,t,n){var i=e("./$"),r=e("./$.wks")("unscopables");!i.FW||r in[]||i.hide(Array.prototype,r,{}),t.exports=function(e){i.FW&&([][r][e]=!0)}},{"./$":16,"./$.wks":27}],27:[function(e,t,n){var i=e("./$").g,r={};t.exports=function(t){return r[t]||(r[t]=i.Symbol&&i.Symbol[t]||e("./$.uid").safe("Symbol."+t))}},{"./$":16,"./$.uid":25}],28:[function(e,t,n){function i(e,t){return function(n){var i,r=P(n),o=0,a=[];for(i in r)i!=h&&E(r,i)&&a.push(i);for(;t>o;)E(r,i=e[o++])&&(~_.call(a,i)||a.push(i));return a}}function r(e){return!u.isObject(e)}function o(){}function a(e){return function(){return e.apply(u.ES5Object(this),arguments)}}function s(e){return function(t,n){m.fn(t);var i=P(this),r=S(i.length),o=e?r-1:0,a=e?-1:1;if(arguments.length<2)for(;;){if(o in i){n=i[o],o+=a;break}o+=a,m(e?o>=0:r>o,"Reduce of empty array with no initial value")}for(;e?o>=0:r>o;o+=a)o in i&&(n=t(n,i[o],o,this));return n}}function l(e){return e>9?e:"0"+e}var u=e("./$"),c=e("./$.cof"),d=e("./$.def"),p=e("./$.invoke"),f=e("./$.array-methods"),h=e("./$.uid").safe("__proto__"),m=e("./$.assert"),v=m.obj,g=Object.prototype,y=[],b=y.slice,_=y.indexOf,w=c.classof,C=Object.defineProperties,E=u.has,x=u.setDesc,T=u.getDesc,k=u.isFunction,P=u.toObject,S=u.toLength,O=!1;if(!u.DESC){try{O=8==x(document.createElement("div"),"x",{get:function(){return 8}}).x}catch(I){}u.setDesc=function(e,t,n){if(O)try{return x(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(v(e)[t]=n.value),e},u.getDesc=function(e,t){if(O)try{return T(e,t)}catch(n){}return E(e,t)?u.desc(!g.propertyIsEnumerable.call(e,t),e[t]):void 0},C=function(e,t){v(e);for(var n,i=u.getKeys(t),r=i.length,o=0;r>o;)u.setDesc(e,n=i[o++],t[n]);return e}}d(d.S+d.F*!u.DESC,"Object",{getOwnPropertyDescriptor:u.getDesc,defineProperty:u.setDesc,defineProperties:C});var N="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),A=N.concat("length","prototype"),M=N.length,D=function(){var e,t=document.createElement("iframe"),n=M,i=">";for(t.style.display="none",u.html.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script"+i),e.close(),D=e.F;n--;)delete D.prototype[N[n]];return D()};d(d.S,"Object",{getPrototypeOf:u.getProto=u.getProto||function(e){return e=Object(m.def(e)),E(e,h)?e[h]:k(e.constructor)&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?g:null},getOwnPropertyNames:u.getNames=u.getNames||i(A,A.length,!0),create:u.create=u.create||function(e,t){var n;return null!==e?(o.prototype=v(e),n=new o,o.prototype=null,n[h]=e):n=D(),void 0===t?n:C(n,t)},keys:u.getKeys=u.getKeys||i(N,M,!1),seal:u.it,freeze:u.it,preventExtensions:u.it,isSealed:r,isFrozen:r,isExtensible:u.isObject}),d(d.P,"Function",{bind:function(e){function t(){var r=i.concat(b.call(arguments));return p(n,r,this instanceof t?u.create(n.prototype):e)}var n=m.fn(this),i=b.call(arguments,1);return n.prototype&&(t.prototype=n.prototype),t}}),0 in Object("z")&&"z"=="z"[0]||(u.ES5Object=function(e){return"String"==c(e)?e.split(""):Object(e)}),d(d.P+d.F*(u.ES5Object!=Object),"Array",{slice:a(b),join:a(y.join)}),d(d.S,"Array",{isArray:function(e){return"Array"==c(e)}}),d(d.P,"Array",{forEach:u.each=u.each||f(0),map:f(1),filter:f(2),some:f(3),every:f(4),reduce:s(!1),reduceRight:s(!0),indexOf:_=_||e("./$.array-includes")(!1),lastIndexOf:function(e,t){var n=P(this),i=S(n.length),r=i-1;for(arguments.length>1&&(r=Math.min(r,u.toInteger(t))),0>r&&(r=S(i+r));r>=0;r--)if(r in n&&n[r]===e)return r;return-1}}),d(d.P,"String",{trim:e("./$.replacer")(/^\s*([\s\S]*\S)?\s*$/,"$1")}),d(d.S,"Date",{now:function(){return+new Date}}),d(d.P,"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=0>t?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+l(e.getUTCMonth()+1)+"-"+l(e.getUTCDate())+"T"+l(e.getUTCHours())+":"+l(e.getUTCMinutes())+":"+l(e.getUTCSeconds())+"."+(n>99?n:"0"+l(n))+"Z"}}),"Object"==w(function(){return arguments}())&&(c.classof=function(e){var t=w(e);return"Object"==t&&k(e.callee)?"Arguments":t})},{"./$":16,"./$.array-includes":2,"./$.array-methods":3,"./$.assert":4,"./$.cof":6,"./$.def":11,"./$.invoke":13,"./$.replacer":20,"./$.uid":25}],29:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.def"),o=i.toIndex;r(r.P,"Array",{copyWithin:function(e,t){var n=Object(i.assertDefined(this)),r=i.toLength(n.length),a=o(e,r),s=o(t,r),l=arguments[2],u=void 0===l?r:o(l,r),c=Math.min(u-s,r-a),d=1;for(a>s&&s+c>a&&(d=-1,s=s+c-1,a=a+c-1);c-- >0;)s in n?n[a]=n[s]:delete n[a],a+=d,s+=d;return n}}),e("./$.unscope")("copyWithin")},{"./$":16,"./$.def":11,"./$.unscope":26}],30:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.def"),o=i.toIndex;r(r.P,"Array",{fill:function(e){for(var t=Object(i.assertDefined(this)),n=i.toLength(t.length),r=o(arguments[1],n),a=arguments[2],s=void 0===a?n:o(a,n);s>r;)t[r++]=e;return t}}),e("./$.unscope")("fill")},{"./$":16,"./$.def":11,"./$.unscope":26}],31:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{findIndex:e("./$.array-methods")(6)}),e("./$.unscope")("findIndex")},{"./$.array-methods":3,"./$.def":11,"./$.unscope":26}],32:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{find:e("./$.array-methods")(5)}),e("./$.unscope")("find")},{"./$.array-methods":3,"./$.def":11,"./$.unscope":26}],33:[function(e,t,n){var i=e("./$"),r=e("./$.ctx"),o=e("./$.def"),a=e("./$.iter"),s=a.stepCall;o(o.S+o.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,l,u=Object(i.assertDefined(e)),c=arguments[1],d=void 0!==c,p=d?r(c,arguments[2],2):void 0,f=0;if(a.is(u))for(l=a.get(u),n=new("function"==typeof this?this:Array);!(o=l.next()).done;f++)n[f]=d?s(l,p,[o.value,f],!0):o.value;else for(n=new("function"==typeof this?this:Array)(t=i.toLength(u.length));t>f;f++)n[f]=d?p(u[f],f):u[f];return n.length=f,n}})},{"./$":16,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.iter-detect":14}],34:[function(e,t,n){var i=e("./$"),r=e("./$.unscope"),o=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step,l=a.Iterators;a.std(Array,"Array",function(e,t){i.set(this,o,{o:i.toObject(e),i:0,k:t})},function(){var e=this[o],t=e.o,n=e.k,i=e.i++;return!t||i>=t.length?(e.o=void 0,s(1)):"key"==n?s(0,i):"value"==n?s(0,t[i]):s(0,[i,t[i]])},"value"),l.Arguments=l.Array,r("keys"),r("values"),r("entries")},{"./$":16,"./$.iter":15,"./$.uid":25,"./$.unscope":26}],35:[function(e,t,n){var i=e("./$.def");i(i.S,"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)n[e]=arguments[e++];return n.length=t,n}})},{"./$.def":11}],36:[function(e,t,n){e("./$.species")(Array)},{"./$.species":22}],37:[function(e,t,n){"use strict";var i=e("./$"),r="name",o=i.setDesc,a=Function.prototype;r in a||i.FW&&i.DESC&&o(a,r,{configurable:!0,get:function(){var e=String(this).match(/^\s*function ([^ (]*)/),t=e?e[1]:"";return i.has(this,r)||o(this,r,i.desc(5,t)),t},set:function(e){i.has(this,r)||o(this,r,i.desc(0,e))}})},{"./$":16}],38:[function(e,t,n){"use strict";var i=e("./$.collection-strong");e("./$.collection")("Map",{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},{"./$.collection":9,"./$.collection-strong":7}],39:[function(e,t,n){function i(e){return e+1/g-1/g}function r(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}function o(e){return isFinite(e=+e)&&0!=e?0>e?-o(-e):f(e+h(e*e+1)):e}function a(e){return 0==(e=+e)?e:e>-1e-6&&1e-6>e?e+e*e/2:p(e)-1}var s=1/0,l=e("./$.def"),u=Math.E,c=Math.pow,d=Math.abs,p=Math.exp,f=Math.log,h=Math.sqrt,m=Math.ceil,v=Math.floor,g=c(2,-52),y=c(2,-23),b=c(2,127)*(2-y),_=c(2,-126);l(l.S,"Math",{acosh:function(e){return(e=+e)<1?NaN:isFinite(e)?f(e/u+h(e+1)*h(e-1)/u)+1:e},asinh:o,atanh:function(e){return 0==(e=+e)?e:f((1+e)/(1-e))/2},cbrt:function(e){return r(e=+e)*c(d(e),1/3)},clz32:function(e){return(e>>>=0)?31-v(f(e+.5)*Math.LOG2E):32},cosh:function(e){return(p(e=+e)+p(-e))/2},expm1:a,fround:function(e){var t,n,o=d(e),a=r(e);return _>o?a*i(o/_/y)*_*y:(t=(1+y/g)*o,n=t-(t-o),n>b||n!=n?a*s:a*n)},hypot:function(e,t){for(var n,i=0,r=arguments.length,o=r,a=Array(r),l=-s;r--;){if(n=a[r]=+arguments[r],n==s||n==-s)return s;n>l&&(l=n)}for(l=n||1;o--;)i+=c(a[o]/l,2);return l*h(i)},imul:function(e,t){var n=65535,i=+e,r=+t,o=n&i,a=n&r;return 0|o*a+((n&i>>>16)*a+o*(n&r>>>16)<<16>>>0)},log1p:function(e){return(e=+e)>-1e-8&&1e-8>e?e-e*e/2:f(1+e)},log10:function(e){return f(e)/Math.LN10},log2:function(e){return f(e)/Math.LN2},sign:r,sinh:function(e){return d(e=+e)<1?(a(e)-a(-e))/2:(p(e-1)-p(-e-1))*(u/2)},tanh:function(e){var t=a(e=+e),n=a(-e);return t==s?1:n==s?-1:(t-n)/(p(e)+p(-e));
},trunc:function(e){return(e>0?v:m)(e)}})},{"./$.def":11}],40:[function(e,t,n){"use strict";function i(e){var t,n;if(s(t=e.valueOf)&&!a(n=t.call(e)))return n;if(s(t=e.toString)&&!a(n=t.call(e)))return n;throw TypeError("Can't convert object to number")}function r(e){if(a(e)&&(e=i(e)),"string"==typeof e&&e.length>2&&48==e.charCodeAt(0)){var t=!1;switch(e.charCodeAt(1)){case 66:case 98:t=!0;case 79:case 111:return parseInt(e.slice(2),t?2:8)}}return+e}var o=e("./$"),a=o.isObject,s=o.isFunction,l="Number",u=o.g[l],c=u,d=u.prototype;!o.FW||u("0o1")&&u("0b1")||(u=function p(e){return this instanceof p?new c(r(e)):r(e)},o.each.call(o.DESC?o.getNames(c):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(e){o.has(c,e)&&!o.has(u,e)&&o.setDesc(u,e,o.getDesc(c,e))}),u.prototype=d,d.constructor=u,o.hide(o.g,l,u))},{"./$":16}],41:[function(e,t,n){function i(e){return!r.isObject(e)&&l(e)&&s(e)===e}var r=e("./$"),o=e("./$.def"),a=Math.abs,s=Math.floor,l=r.g.isFinite,u=9007199254740991;o(o.S,"Number",{EPSILON:Math.pow(2,-52),isFinite:function(e){return"number"==typeof e&&l(e)},isInteger:i,isNaN:function(e){return e!=e},isSafeInteger:function(e){return i(e)&&a(e)<=u},MAX_SAFE_INTEGER:u,MIN_SAFE_INTEGER:-u,parseFloat:parseFloat,parseInt:parseInt})},{"./$":16,"./$.def":11}],42:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{assign:e("./$.assign")})},{"./$.assign":5,"./$.def":11}],43:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{is:function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}})},{"./$.def":11}],44:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.def":11,"./$.set-proto":21}],45:[function(e,t,n){function i(e,t){var n=(r.core.Object||{})[e]||Object[e],i=0,l={};l[e]=1==t?function(e){return a(e)?n(e):e}:2==t?function(e){return a(e)?n(e):!0}:3==t?function(e){return a(e)?n(e):!1}:4==t?function(e,t){return n(s(e),t)}:5==t?function(e){return n(Object(r.assertDefined(e)))}:function(e){return n(s(e))};try{n("z")}catch(u){i=1}o(o.S+o.F*i,"Object",l)}var r=e("./$"),o=e("./$.def"),a=r.isObject,s=r.toObject;i("freeze",1),i("seal",1),i("preventExtensions",1),i("isFrozen",2),i("isSealed",2),i("isExtensible",3),i("getOwnPropertyDescriptor",4),i("getPrototypeOf",5),i("keys"),i("getOwnPropertyNames")},{"./$":16,"./$.def":11}],46:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.cof"),o={};o[e("./$.wks")("toStringTag")]="z",i.FW&&"z"!=r(o)&&i.hide(Object.prototype,"toString",function(){return"[object "+r.classof(this)+"]"})},{"./$":16,"./$.cof":6,"./$.wks":27}],47:[function(e,t,n){"use strict";function i(e){var t=S(e)[v];return void 0!=t?t:e}function r(e){var t;return k(e)&&(t=e.then),T(t)?t:!1}function o(e){var t,n=e[g],i=n.c,r=0;if(n.h)return!1;for(;i.length>r;)if(t=i[r++],t.fail||!o(t.P))return!1;return!0}function a(e,t){var n=e.c;(t||n.length)&&C(function(){var i=e.p,a=e.v,s=1==e.s,l=0;if(t&&o(i))setTimeout(function(){o(i)&&("process"==p(w)?w.emit("unhandledRejection",a,i):_.console&&T(console.error)&&console.error("Unhandled promise rejection",a))},1e3);else for(;n.length>l;)!function(t){var n,i,o=s?t.ok:t.fail;try{o?(s||(e.h=!0),n=o===!0?a:o(a),n===t.P?t.rej(TypeError(b+"-chain cycle")):(i=r(n))?i.call(n,t.res,t.rej):t.res(n)):t.rej(a)}catch(l){t.rej(l)}}(n[l++]);n.length=0})}function s(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,a(t,!0))}function l(e){var t,n,i=this;if(!i.d){i.d=!0,i=i.r||i;try{(t=r(e))?(n={r:i,d:!1},t.call(e,d(l,n,1),d(s,n,1))):(i.v=e,i.s=1,a(i))}catch(o){s.call(n||{r:i,d:!1},o)}}}var u,c=e("./$"),d=e("./$.ctx"),p=e("./$.cof"),f=e("./$.def"),h=e("./$.assert"),m=e("./$.iter"),v=e("./$.wks")("species"),g=e("./$.uid").safe("record"),y=m.forOf,b="Promise",_=c.g,w=_.process,C=w&&w.nextTick||e("./$.task").set,E=_[b],x=E,T=c.isFunction,k=c.isObject,P=h.fn,S=h.obj;T(E)&&T(E.resolve)&&E.resolve(u=new E(function(){}))==u||(E=function(e){P(e);var t={p:h.inst(this,E,b),c:[],s:0,d:!1,v:void 0,h:!1};c.hide(this,g,t);try{e(d(l,t,1),d(s,t,1))}catch(n){s.call(t,n)}},c.mix(E.prototype,{then:function(e,t){var n=S(S(this).constructor)[v],i={ok:T(e)?e:!0,fail:T(t)?t:!1},r=i.P=new(void 0!=n?n:E)(function(e,t){i.res=P(e),i.rej=P(t)}),o=this[g];return o.c.push(i),o.s&&a(o),r},"catch":function(e){return this.then(void 0,e)}})),f(f.G+f.W+f.F*(E!=x),{Promise:E}),p.set(E,b),e("./$.species")(E),f(f.S,b,{reject:function(e){return new(i(this))(function(t,n){n(e)})},resolve:function(e){return k(e)&&g in e&&c.getProto(e)===this.prototype?e:new(i(this))(function(t){t(e)})}}),f(f.S+f.F*!e("./$.iter-detect")(function(e){E.all(e)["catch"](function(){})}),b,{all:function(e){var t=i(this),n=[];return new t(function(i,r){y(e,!1,n.push,n);var o=n.length,a=Array(o);o?c.each.call(n,function(e,n){t.resolve(e).then(function(e){a[n]=e,--o||i(a)},r)}):i(a)})},race:function(e){var t=i(this);return new t(function(n,i){y(e,!1,function(e){t.resolve(e).then(n,i)})})}})},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.iter-detect":14,"./$.species":22,"./$.task":24,"./$.uid":25,"./$.wks":27}],48:[function(e,t,n){function i(e){var t,n=[];for(t in e)n.push(t);s.set(this,d,{o:e,a:n,i:0})}function r(e){return function(t){b(t);try{return e.apply(void 0,arguments),!0}catch(n){return!1}}}function o(e,t){var n,i=arguments.length<3?e:arguments[2],r=m(b(e),t);return r?s.has(r,"value")?r.value:void 0===r.get?void 0:r.get.call(i):h(n=g(e))?o(n,t,i):void 0}function a(e,t,n){var i,r,o=arguments.length<4?e:arguments[3],l=m(b(e),t);if(!l){if(h(r=g(e)))return a(r,t,n,o);l=s.desc(0)}return s.has(l,"value")?l.writable!==!1&&h(o)?(i=m(o,t)||s.desc(0),i.value=n,v(o,t,i),!0):!1:void 0===l.set?!1:(l.set.call(o,n),!0)}var s=e("./$"),l=e("./$.def"),u=e("./$.set-proto"),c=e("./$.iter"),d=e("./$.uid").safe("iter"),p=c.step,f=e("./$.assert"),h=s.isObject,m=s.getDesc,v=s.setDesc,g=s.getProto,y=Function.apply,b=f.obj,_=Object.isExtensible||s.it;c.create(i,"Object",function(){var e,t=this[d],n=t.a;do if(t.i>=n.length)return p(1);while(!((e=n[t.i++])in t.o));return p(0,e)});var w={apply:e("./$.ctx")(Function.call,y,3),construct:function(e,t){var n=f.fn(arguments.length<3?e:arguments[2]).prototype,i=s.create(h(n)?n:Object.prototype),r=y.call(e,i,t);return h(r)?r:i},defineProperty:r(v),deleteProperty:function(e,t){var n=m(b(e),t);return n&&!n.configurable?!1:delete e[t]},enumerate:function(e){return new i(b(e))},get:o,getOwnPropertyDescriptor:function(e,t){return m(b(e),t)},getPrototypeOf:function(e){return g(b(e))},has:function(e,t){return t in e},isExtensible:function(e){return!!_(b(e))},ownKeys:e("./$.own-keys"),preventExtensions:r(Object.preventExtensions||s.it),set:a};u&&(w.setPrototypeOf=function(e,t){u.check(e,t);try{return u.set(e,t),!0}catch(n){return!1}}),l(l.G,{Reflect:{}}),l(l.S,"Reflect",w)},{"./$":16,"./$.assert":4,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.own-keys":18,"./$.set-proto":21,"./$.uid":25}],49:[function(e,t,n){var i=e("./$"),r=e("./$.cof"),o=i.g.RegExp,a=o,s=o.prototype;i.FW&&i.DESC&&(function(){try{return"/a/i"==o(/a/g,"i")}catch(e){}}()||(o=function(e,t){return new a("RegExp"==r(e)&&void 0!==t?e.source:e,t)},i.each.call(i.getNames(a),function(e){e in o||i.setDesc(o,e,{configurable:!0,get:function(){return a[e]},set:function(t){a[e]=t}})}),s.constructor=o,o.prototype=s,i.hide(i.g,"RegExp",o)),"g"!=/./g.flags&&i.setDesc(s,"flags",{configurable:!0,get:e("./$.replacer")(/^.*\/(\w*)$/,"$1")})),e("./$.species")(o)},{"./$":16,"./$.cof":6,"./$.replacer":20,"./$.species":22}],50:[function(e,t,n){"use strict";var i=e("./$.collection-strong");e("./$.collection")("Set",{add:function(e){return i.def(this,e=0===e?0:e,e)}},i)},{"./$.collection":9,"./$.collection-strong":7}],51:[function(e,t,n){var i=e("./$.def");i(i.P,"String",{codePointAt:e("./$.string-at")(!1)})},{"./$.def":11,"./$.string-at":23}],52:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.cof"),o=e("./$.def"),a=i.toLength;o(o.P,"String",{endsWith:function(e){if("RegExp"==r(e))throw TypeError();var t=String(i.assertDefined(this)),n=arguments[1],o=a(t.length),s=void 0===n?o:Math.min(a(n),o);return e+="",t.slice(s-e.length,s)===e}})},{"./$":16,"./$.cof":6,"./$.def":11}],53:[function(e,t,n){var i=e("./$.def"),r=e("./$").toIndex,o=String.fromCharCode;i(i.S,"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,a=0;i>a;){if(t=+arguments[a++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(65536>t?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},{"./$":16,"./$.def":11}],54:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.cof"),o=e("./$.def");o(o.P,"String",{includes:function(e){if("RegExp"==r(e))throw TypeError();return!!~String(i.assertDefined(this)).indexOf(e,arguments[1])}})},{"./$":16,"./$.cof":6,"./$.def":11}],55:[function(e,t,n){var i=e("./$").set,r=e("./$.string-at")(!0),o=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step;a.std(String,"String",function(e){i(this,o,{o:String(e),i:0})},function(){var e,t=this[o],n=t.o,i=t.i;return i>=n.length?s(1):(e=r.call(n,i),t.i+=e.length,s(0,e))})},{"./$":16,"./$.iter":15,"./$.string-at":23,"./$.uid":25}],56:[function(e,t,n){var i=e("./$"),r=e("./$.def");r(r.S,"String",{raw:function(e){for(var t=i.toObject(e.raw),n=i.toLength(t.length),r=arguments.length,o=[],a=0;n>a;)o.push(String(t[a++])),r>a&&o.push(String(arguments[a]));return o.join("")}})},{"./$":16,"./$.def":11}],57:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.def");r(r.P,"String",{repeat:function(e){var t=String(i.assertDefined(this)),n="",r=i.toInteger(e);if(0>r||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}})},{"./$":16,"./$.def":11}],58:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.cof"),o=e("./$.def");o(o.P,"String",{startsWith:function(e){if("RegExp"==r(e))throw TypeError();var t=String(i.assertDefined(this)),n=i.toLength(Math.min(arguments[1],t.length));return e+="",t.slice(n,n+e.length)===e}})},{"./$":16,"./$.cof":6,"./$.def":11}],59:[function(e,t,n){"use strict";function i(e){var t=y[e]=r.set(r.create(f.prototype),v,e);return r.DESC&&m&&r.setDesc(Object.prototype,e,{configurable:!0,set:function(t){c(this,e,t)}}),t}var r=e("./$"),o=e("./$.cof").set,a=e("./$.uid"),s=e("./$.def"),l=e("./$.keyof"),u=r.has,c=r.hide,d=r.getNames,p=r.toObject,f=r.g.Symbol,h=f,m=!1,v=a.safe("tag"),g={},y={};r.isFunction(f)||(f=function _(e){if(this instanceof _)throw TypeError("Symbol is not a constructor");return i(a(e))},c(f.prototype,"toString",function(){return this[v]})),s(s.G+s.W,{Symbol:f});var b={"for":function(e){return u(g,e+="")?g[e]:g[e]=f(e)},keyFor:function(e){return l(g,e)},pure:a.safe,set:r.set,useSetter:function(){m=!0},useSimple:function(){m=!1}};r.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var n=e("./$.wks")(t);b[t]=f===h?n:i(n)}),m=!0,s(s.S,"Symbol",b),s(s.S+s.F*(f!=h),"Object",{getOwnPropertyNames:function(e){for(var t,n=d(p(e)),i=[],r=0;n.length>r;)u(y,t=n[r++])||i.push(t);return i},getOwnPropertySymbols:function(e){for(var t,n=d(p(e)),i=[],r=0;n.length>r;)u(y,t=n[r++])&&i.push(y[t]);return i}}),o(f,"Symbol"),o(Math,"Math",!0),o(r.g.JSON,"JSON",!0)},{"./$":16,"./$.cof":6,"./$.def":11,"./$.keyof":17,"./$.uid":25,"./$.wks":27}],60:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.collection-weak"),o=r.leakStore,a=r.ID,s=r.WEAK,l=i.has,u=i.isObject,c=Object.isFrozen||i.core.Object.isFrozen,d={},p=e("./$.collection")("WeakMap",{get:function(e){if(u(e)){if(c(e))return o(this).get(e);if(l(e,s))return e[s][this[a]]}},set:function(e,t){return r.def(this,e,t)}},r,!0,!0);i.FW&&7!=(new p).set((Object.freeze||Object)(d),7).get(d)&&i.each.call(["delete","has","get","set"],function(e){var t=p.prototype[e];p.prototype[e]=function(n,i){if(u(n)&&c(n)){var r=o(this)[e](n,i);return"set"==e?this:r}return t.call(this,n,i)}})},{"./$":16,"./$.collection":9,"./$.collection-weak":8}],61:[function(e,t,n){"use strict";var i=e("./$.collection-weak");e("./$.collection")("WeakSet",{add:function(e){return i.def(this,e,!0)}},i,!1,!0)},{"./$.collection":9,"./$.collection-weak":8}],62:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{includes:e("./$.array-includes")(!0)}),e("./$.unscope")("includes")},{"./$.array-includes":2,"./$.def":11,"./$.unscope":26}],63:[function(e,t,n){var i=e("./$"),r=e("./$.def"),o=e("./$.own-keys");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){var t=i.toObject(e),n={};return i.each.call(o(t),function(e){i.setDesc(n,e,i.desc(0,i.getDesc(t,e)))}),n}})},{"./$":16,"./$.def":11,"./$.own-keys":18}],64:[function(e,t,n){function i(e){return function(t){var n,i=r.toObject(t),o=r.getKeys(t),a=o.length,s=0,l=Array(a);if(e)for(;a>s;)l[s]=[n=o[s++],i[n]];else for(;a>s;)l[s]=i[o[s++]];return l}}var r=e("./$"),o=e("./$.def");o(o.S,"Object",{values:i(!1),entries:i(!0)})},{"./$":16,"./$.def":11}],65:[function(e,t,n){var i=e("./$.def");i(i.S,"RegExp",{escape:e("./$.replacer")(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",!0)})},{"./$.def":11,"./$.replacer":20}],66:[function(e,t,n){var i=e("./$.def"),r=e("./$.iter").forOf;i(i.P,"Set",{toJSON:function(){var e=[];return r(this,!1,e.push,e),e}})},{"./$.def":11,"./$.iter":15}],67:[function(e,t,n){var i=e("./$.def");i(i.P,"String",{at:e("./$.string-at")(!0)})},{"./$.def":11,"./$.string-at":23}],68:[function(e,t,n){function i(t,n){r.each.call(t.split(","),function(t){void 0==n&&t in a?s[t]=a[t]:t in[]&&(s[t]=e("./$.ctx")(Function.call,[][t],n))})}var r=e("./$"),o=e("./$.def"),a=r.core.Array||Array,s={};i("pop,reverse,shift,keys,values,entries",1),i("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),i("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill,turn"),o(o.S,"Array",s)},{"./$":16,"./$.ctx":10,"./$.def":11}],69:[function(e,t,n){e("./es6.array.iterator");var i=e("./$"),r=e("./$.iter").Iterators,o=e("./$.wks")("iterator"),a=i.g.NodeList;!i.FW||!a||o in a.prototype||i.hide(a.prototype,o,r.Array),r.NodeList=r.Array},{"./$":16,"./$.iter":15,"./$.wks":27,"./es6.array.iterator":34}],70:[function(e,t,n){var i=e("./$.def"),r=e("./$.task");i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},{"./$.def":11,"./$.task":24}],71:[function(e,t,n){function i(e){return l?function(t,n){return e(a(s,[].slice.call(arguments,2),r.isFunction(t)?t:Function(t)),n)}:e}var r=e("./$"),o=e("./$.def"),a=e("./$.invoke"),s=e("./$.partial"),l=!!r.g.navigator&&/MSIE .\./.test(navigator.userAgent);o(o.G+o.B+o.F*l,{setTimeout:i(r.g.setTimeout),setInterval:i(r.g.setInterval)})},{"./$":16,"./$.def":11,"./$.invoke":13,"./$.partial":19}],72:[function(e,t,n){e("./modules/es5"),e("./modules/es6.symbol"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.object.statics-accept-primitives"),e("./modules/es6.function.name"),e("./modules/es6.number.constructor"),e("./modules/es6.number.statics"),e("./modules/es6.math"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.iterator"),e("./modules/es6.array.species"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.regexp"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.reflect"),e("./modules/es7.array.includes"),e("./modules/es7.string.at"),e("./modules/es7.regexp.escape"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.to-array"),e("./modules/es7.set.to-json"),e("./modules/js.array.statics"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/$").core},{"./modules/$":16,"./modules/es5":28,"./modules/es6.array.copy-within":29,"./modules/es6.array.fill":30,"./modules/es6.array.find":32,"./modules/es6.array.find-index":31,"./modules/es6.array.from":33,"./modules/es6.array.iterator":34,"./modules/es6.array.of":35,"./modules/es6.array.species":36,"./modules/es6.function.name":37,"./modules/es6.map":38,"./modules/es6.math":39,"./modules/es6.number.constructor":40,"./modules/es6.number.statics":41,"./modules/es6.object.assign":42,"./modules/es6.object.is":43,"./modules/es6.object.set-prototype-of":44,"./modules/es6.object.statics-accept-primitives":45,"./modules/es6.object.to-string":46,"./modules/es6.promise":47,"./modules/es6.reflect":48,"./modules/es6.regexp":49,"./modules/es6.set":50,"./modules/es6.string.code-point-at":51,"./modules/es6.string.ends-with":52,"./modules/es6.string.from-code-point":53,"./modules/es6.string.includes":54,"./modules/es6.string.iterator":55,"./modules/es6.string.raw":56,"./modules/es6.string.repeat":57,"./modules/es6.string.starts-with":58,"./modules/es6.symbol":59,"./modules/es6.weak-map":60,"./modules/es6.weak-set":61,"./modules/es7.array.includes":62,"./modules/es7.object.get-own-property-descriptors":63,"./modules/es7.object.to-array":64,"./modules/es7.regexp.escape":65,"./modules/es7.set.to-json":66,"./modules/es7.string.at":67,"./modules/js.array.statics":68,"./modules/web.dom.iterable":69,"./modules/web.immediate":70,"./modules/web.timers":71}],73:[function(e,t,n){(function(e){!function(e){"use strict";function n(e,t,n,i){var o=Object.create((t||r).prototype);return o._invoke=s(e,n||null,new d(i||[])),o}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}function r(){}function o(){}function a(){}function s(e,t,n){var r=b;return function(o,a){if(r===w)throw new Error("Generator is already running");if(r===C)return f();for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator["throw"]===h){n.delegate=null;var l=s.iterator["return"];if(l){var u=i(l,s.iterator,a);if("throw"===u.type){o="throw",a=u.arg;continue}}if("return"===o)continue}var u=i(s.iterator[o],s.iterator,a);if("throw"===u.type){n.delegate=null,o="throw",a=u.arg;continue}o="next",a=h;var c=u.arg;if(!c.done)return r=_,c;n[s.resultName]=c.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)r===_?n.sent=a:delete n.sent;else if("throw"===o){if(r===b)throw r=C,a;n.dispatchException(a)&&(o="next",a=h)}else"return"===o&&n.abrupt("return",a);r=w;var u=i(e,t,n);if("normal"===u.type){r=n.done?C:_;var c={value:u.arg,done:n.done};if(u.arg!==E)return c;n.delegate&&"next"===o&&(a=h)}else"throw"===u.type&&(r=C,o="throw",a=u.arg)}}}function l(e){x[e]=function(t){return this._invoke(e,t)}}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function c(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(u,this),this.reset()}function p(e){if(e){var t=e[v];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(m.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=h,r.done=!0,r};return i.next=i}}return{next:f}}function f(){return{value:h,done:!0}}var h,m=Object.prototype.hasOwnProperty,v="function"==typeof Symbol&&Symbol.iterator||"@@iterator",g="object"==typeof t,y=e.regeneratorRuntime;if(y)return void(g&&(t.exports=y));y=e.regeneratorRuntime=g?t.exports:{},y.wrap=n;var b="suspendedStart",_="suspendedYield",w="executing",C="completed",E={},x=a.prototype=r.prototype;o.prototype=x.constructor=a,a.constructor=o,o.displayName="GeneratorFunction",y.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===o||"GeneratorFunction"===(t.displayName||t.name):!1},y.mark=function(e){return e.__proto__=a,e.prototype=Object.create(x),e},y.async=function(e,t,r,o){return new Promise(function(a,s){function l(e,t){var n=i(u[e],u,t);if("throw"===n.type)return void s(n.arg);var r=n.arg;r.done?a(r.value):Promise.resolve(r.value).then(c,d)}var u=n(e,t,r,o),c=l.bind(u,"next"),d=l.bind(u,"throw");c()})},l("next"),l("throw"),l("return"),x[v]=function(){return this},x.toString=function(){return"[object Generator]"},y.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},y.values=p,d.prototype={constructor:d,reset:function(){this.prev=0,this.next=0,this.sent=h,this.done=!1,this.delegate=null,this.tryEntries.forEach(c);for(var e,t=0;m.call(this,e="t"+t)||20>t;++t)this[e]=null},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,n.next=t,!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var a=m.call(r,"catchLoc"),s=m.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&m.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?this.next=r.finallyLoc:this.complete(o),E},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc)}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;c(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},E}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),define("lib/babel-polyfill/browser-polyfill",function(){}),define("lib-build/less!storymaps/tpl/core/MainView",[],function(){}),define("lib-build/css!storymaps/tpl/view/media/Common",[],function(){}),define("storymaps-react/tpl/core/Controller",["module","exports","dojo/_base/lang","dojo/topic","storymaps-react/tpl/view/media/Media"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=o(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p={logo:{enabled:!0,url:"resources/tpl/viewer/icons/esri-logo.png",link:"https://www.esri.com"},link:{url:"https://storymaps.arcgis.com",title:"A Story Map"},social:{enabled:!0}},f=function(){function e(){s(this,e)}return d(e,null,[{key:"getStoryTitle",value:function(){var e=this._sections&&this._sections[0];return e?e.getPreviewText():""}},{key:"getStoryURL",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.url||document.location.href;return t=t.replace(/\?edit(=.*)*&/,"?"),t=t.replace(/\&edit(=.*)*/,""),t=t.replace(/\?edit/,""),t=t.replace(/\?locale(=[a-zA-Z\-]+)+&/,"?"),t=t.replace(/\&locale(=[a-zA-Z\-]+)+/,""),e.urlEncoding?encodeURIComponent(t):t}},{key:"isStoryBlank",value:function(){return app.data.appItem&&app.data.appItem.data&&app.data.appItem.data.values&&app.data.appItem.data.values.config&&app.data.appItem.data.values.settings&&app.data.appItem.data.values.sections&&app.data.appItem.data.values.template?!1:!0}},{key:"renderHeader",value:function(){var t=app.data.appItem,n=t?t.data.values.settings.header:null;n&&n.logo&&n.link||(n=e.DEFAULT_HEADER_SETTINGS),app.ui.header.render({logo:n.logo,link:n.link,social:n.social,bookmarks:this.getBookmarks(),title:this.getStoryTitle()})}},{key:"renderStory",value:function(e,t){this._sections=[],this._currentSection=null,this._$currentSection=null,this._currentSectionIndex=null,this._container=$(".sections");var n=!1,i=t.length;app.data.errorWebGL=!1,$.each(t,function(e,r){var o=!1,a=app.ui.SectionFactory.createInstance(r);if(a){if(r.alternate===!0&&!n)return;try{this._container.append(a.render(e))}catch(s){console.error(s),o=!0,n=!0,"RUNTIME-NO-WEBGL"==s&&(app.data.errorWebGL=!0)}o||this._sections.push(a)}if(app.data.errorWebGL&&(app.isInBuilder&&(e==i-3&&"credits-placeholder"==t[e+1].type||e==i-2&&"credits-placeholder"==t[e+1].type)||!app.isInBuilder&&(e==i-2&&"credits"==t[e+1].type||e==i-1&&"credits"!=r.type))){var l=this.getErrorSection({type:app.data.errorWebGL?"WEBGL":""});l&&(this._sections.push(l),this._container.append(l.render(e)))}}.bind(this)),app.data.sections=this._sections,app.data.sectionsJSON=t,app.data.title=app.Controller.getStoryTitle(),document.title=app.data.title,$(".section").each(function(e,t){this._sections[e].postCreate($(t))}.bind(this))}},{key:"getBookmarks",value:function(){var e=[];return $.each(this._sections,function(t,n){if(n.getBookmark){var i=n.getBookmark();i&&"visible"==i.status&&e.push({index:t,title:i.bookmark})}}),e}},{key:"preloadSectionByIndex",value:function(e){this.preloadSection(this._sections[e],{})}},{key:"preloadSection",value:function(e,t){e&&window.requestAnimationFrame(function(){e.onScroll(l["default"].mixin(t,{status:"preload"}))})}},{key:"toggleScrollEvents",value:function(e){this._disableScrollEvents=!e}},{key:"onScroll",value:function(e){var t=this._sections[e.currentSectionIndex];if(t&&!this._disableScrollEvents){var n=app.display.sections[e.currentSectionIndex].top;if(t.onScroll(l["default"].mixin(e,{status:"current",viewportTop:e.scrollTop-n,viewportBottom:e.scrollTop+app.display.sectionHeight-n})),e.currentSectionIndex!=this._currentSectionIndex){console.log("Scroll to section ",e.currentSectionIndex),e.$currentSection.addClass("active"),u["default"].publish("story-navigated-section",{index:e.currentSectionIndex,data:this._currentSection});var i=this._sections[e.currentSectionIndex+1];i&&e.currentSectionIndex!=this._currentSectionIndex&&this.preloadSection(i,e);var r=this._currentSection,o=this._$currentSection;o&&window.requestAnimationFrame(function(){o.removeClass("active"),r.onScroll({status:"unload"})})}$.each(e.visibleSections,function(t,n){var i=this._sections[n],r=app.display.sections[n].top;n!=e.currentSectionIndex&&i.onScroll(l["default"].mixin(e,{status:"visible",viewportTop:e.scrollTop-r,viewportBottom:e.scrollTop+app.display.sectionHeight-r}))}.bind(this)),this._$currentSection=e.$currentSection,this._currentSectionIndex=e.currentSectionIndex,this._currentSection=t}}},{key:"onResize",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._sections[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.resize(e)}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}}},{key:"navigateToSection",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return new Promise(function(n){if(void 0!=t.index&&void 0!=t.animate&&!(t.index>app.display.sections.length-1)){var i=50,r=e._sections[t.index].type,o=app.display.sections[t.index].top,a=1,s=0;"immersive"==r&&(a=app.display.windowHeight-250+i,app.isInBuilder&&(a+=125)),s=Math.floor(o-i+a),t.animate?(e.toggleScrollEvents(!1),$("html,body").animate({scrollTop:s},{done:function(){this.toggleScrollEvents(!0),app.ui.update({forceUpdate:!0}),n(t.index)}.bind(e)})):(document.body.scrollTop=s,document.documentElement.scrollTop=s,n(t.index))}})}},{key:"getSectionById",value:function(e){for(var t in this._sections){var n=this._sections[t];if(n.id==e)return parseInt(t,10)}return-1}},{key:"getSectionIndexById",value:function(e){return this._sections[e].id}},{key:"getErrorSection",value:function(e){e=e||{};var t=null;if("WEBGL"==e.type){var n="mailto:?to=&subject=Check%20out%20this%20story&body="+document.location.href;t=app.ui.SectionFactory.createInstance({type:"sequence",layout:"sequence-2",background:{type:"color",color:{value:"#FFF"}},foreground:{blocks:[{type:"text",text:{value:'<div class="block"><table><tr><td style="padding-bottom: 10px;"><img src="resources/tpl/viewer/icons/warning-mobile-smartphone.png" /></td><td style="padding-bottom: 10px; padding-left: 13px;">You\'ve read the mobile version of this story. For the full version, with richer media elements try it out on a desktop computer.</td></tr><tr><td colspan="2" style="padding-top: 10px; border-top: 1px solid white; text-align: center;"><a class="btn btn-warning-email" style="background-color: white; color: rgba(255, 0, 0, 0.7);" href="'+n+'"><img src="resources/tpl/viewer/icons/warning-mobile-laptop.png" style="margin-right: 5px;"/>Email a link to this story</a></td></tr></table></div>'}}]}})}return t}},{key:"getArcGISContent",value:function(){var e=[],t=app.data.appItem&&app.data.appItem.data&&app.data.appItem.data.values,n=t&&t.settings&&t.settings.header&&t.settings.header.logo;if(n&&n.enabled&&n.url){var i=c["default"].getArcGISItemResourceURL(n.url);i&&e.push({type:"item-resource",mediaType:"image",url:i.url,file:i.file})}var r=!0,o=!1,s=void 0;try{for(var l,u=this._sections[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var d=l.value;e.push.apply(e,a(d.getArcGISContent()))}}catch(p){o=!0,s=p}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw s}}return e}},{key:"DEFAULT_HEADER_SETTINGS",get:function(){return p}}]),e}();t["default"]=f,e.exports=t["default"]}),function(e,t){"object"==typeof exports?t(exports):"function"==typeof define&&define.amd?define("lib/progress.js/minified/progress.min",["exports"],t):t(e)}(this,function(e){function t(e){this._targetElement="undefined"!=typeof e.length?e:[e],"undefined"==typeof window._progressjsId&&(window._progressjsId=1),"undefined"==typeof window._progressjsIntervals&&(window._progressjsIntervals={}),this._options={theme:"blue",overlayMode:!1,considerTransition:!0}}function n(e,t){var n=this;t>=100&&(t=100),e.hasAttribute("data-progressjs")&&setTimeout(function(){"undefined"!=typeof n._onProgressCallback&&n._onProgressCallback.call(n,e,t);var r=i(e);r.style.width=parseInt(t)+"%";var r=r.querySelector(".progressjs-percent"),o=parseInt(r.innerHTML.replace("%","")),a=parseInt(t),s=function(e,t,n){var i=Math.abs(t-n);3>i?u=30:20>i?u=20:intervanIn=1,0!=t-n&&(e.innerHTML=(l?++t:--t)+"%",setTimeout(function(){s(e,t,n)},u))},l=!0;o>a&&(l=!1);var u=10;s(r,o,a)},50)}function i(e){return e=parseInt(e.getAttribute("data-progressjs")),document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+e+'"] > .progressjs-inner')}function r(e){for(var t=0,r=this._targetElement.length;r>t;t++){var o=this._targetElement[t];if(o.hasAttribute("data-progressjs")){var a=i(o);(a=parseInt(a.style.width.replace("%","")))&&n.call(this,o,a+(e||1))}}}function o(){
var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}var a=function(e){if("object"==typeof e)return new t(e);if("string"==typeof e){if(e=document.querySelectorAll(e))return new t(e);throw Error("There is no element with given selector.")}return new t(document.body)};return a.version="0.1.0",a.fn=t.prototype={clone:function(){return new t(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){var t,n=this._options,i={};for(t in n)i[t]=n[t];for(t in e)i[t]=e[t];return this._options=i,this},start:function(){if("undefined"!=typeof this._onBeforeStartCallback&&this._onBeforeStartCallback.call(this),!document.querySelector(".progressjs-container")){var e=document.createElement("div");e.className="progressjs-container",document.body.appendChild(e)}for(var e=0,t=this._targetElement.length;t>e;e++){var i=this._targetElement[e];if(!i.hasAttribute("data-progressjs")){var r,o,a,s=i;"body"===s.tagName.toLowerCase()?(r=s.clientWidth,o=s.clientHeight):(r=s.offsetWidth,o=s.offsetHeight);for(var l=a=0;s&&!isNaN(s.offsetLeft)&&!isNaN(s.offsetTop);)a+=s.offsetLeft,l+=s.offsetTop,s=s.offsetParent;s=l,i.setAttribute("data-progressjs",window._progressjsId),l=document.createElement("div"),l.className="progressjs-progress progressjs-theme-"+this._options.theme,l.style.position="body"===i.tagName.toLowerCase()?"fixed":"absolute",l.setAttribute("data-progressjs",window._progressjsId);var u=document.createElement("div");u.className="progressjs-inner";var c=document.createElement("div");c.className="progressjs-percent",c.innerHTML="1%",u.appendChild(c),this._options.overlayMode&&"body"===i.tagName.toLowerCase()?(l.style.left=0,l.style.right=0,l.style.top=0,l.style.bottom=0):(l.style.left=a+"px",l.style.top=s+"px",l.style.width=r+"px",this._options.overlayMode&&(l.style.height=o+"px")),l.appendChild(u),document.querySelector(".progressjs-container").appendChild(l),n(i,1),++window._progressjsId}}return this},set:function(e){for(var t=0,i=this._targetElement.length;i>t;t++)n.call(this,this._targetElement[t],e);return this},increase:function(e){return r.call(this,e),this},autoIncrease:function(e,t){var n=this,i=parseInt(this._targetElement[0].getAttribute("data-progressjs"));return"undefined"!=typeof window._progressjsIntervals[i]&&clearInterval(window._progressjsIntervals[i]),window._progressjsIntervals[i]=setInterval(function(){r.call(n,e)},t),this},end:function(){e:{"undefined"!=typeof this._onBeforeEndCallback&&(!0===this._options.considerTransition?i(this._targetElement[0]).addEventListener(o(),this._onBeforeEndCallback,!1):this._onBeforeEndCallback.call(this));for(var e=parseInt(this._targetElement[0].getAttribute("data-progressjs")),t=0,r=this._targetElement.length;r>t;t++){var a=this._targetElement[t],s=i(a);if(!s)break e;var l=1;100>parseInt(s.style.width.replace("%",""))&&(n.call(this,a,100),l=500),function(e,t){setTimeout(function(){e.parentNode.className+=" progressjs-end",setTimeout(function(){e.parentNode.parentNode.removeChild(e.parentNode),t.removeAttribute("data-progressjs")},1e3)},l)}(s,a)}if(window._progressjsIntervals[e])try{clearInterval(window._progressjsIntervals[e]),window._progressjsIntervals[e]=null,delete window._progressjsIntervals[e]}catch(u){}}return this},onbeforeend:function(e){if("function"!=typeof e)throw Error("Provided callback for onbeforeend was not a function");return this._onBeforeEndCallback=e,this},onbeforestart:function(e){if("function"!=typeof e)throw Error("Provided callback for onbeforestart was not a function");return this._onBeforeStartCallback=e,this},onprogress:function(e){if("function"!=typeof e)throw Error("Provided callback for onprogress was not a function");return this._onProgressCallback=e,this}},e.progressJs=a}),define("lib-build/css!lib/progress.js/minified/progressjs.min",[],function(){}),define("lib-build/less!storymaps/tpl/view/ui/ProgressBar",[],function(){}),define("storymaps/tpl/view/ui/ProgressBar",["lib/progress.js/minified/progress.min","lib-build/css!lib/progress.js/minified/progressjs.min","lib-build/less!./ProgressBar"],function(e){return function(){var t=new e;this.start=function(){t.start()},this.update=function(e){t.set(e)}}}),define("lib-build/hbars!storymaps-react/tpl/view/ui/Bookmark",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<li class="bookmark" data-index="'+s((r=null!=(r=t.index||(null!=e?e.index:e))?r:a,typeof r===o?r.call(e,{name:"index",hash:{},data:i}):r))+'">'+s((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,typeof r===o?r.call(e,{name:"title",hash:{},data:i}):r))+"</li>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/ui/BookmarksMore",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l='<li class="dropdown bookmark-dropdown">\r\n	<a class="dropdown-toggle" data-toggle="dropdown">\r\n		<span class="glyphicon glyphicon-th-list"></span> <span class="caret"></span>\r\n	</a>\r\n	<ul class="dropdown-menu dropdown-menu-right">\r\n		';return o=null!=(o=t.bookmarks||(null!=e?e.bookmarks:e))?o:s,r=typeof o===a?o.call(e,{name:"bookmarks",hash:{},data:i}):o,null!=r&&(l+=r),l+"\r\n	</ul>\r\n</li>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/ui/Bookmarks",[],function(){}),define("storymaps-react/tpl/view/ui/Bookmarks",["module","exports","lib-build/hbars!./Bookmark","lib-build/hbars!./BookmarksMore","lib-build/less!./Bookmarks"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){o(this,e),this.container=t,this.bookmarkIndex=0,this.bookmarkNavigationInProgress=!1}return l(e,[{key:"update",value:function(e){this.showBookmarkIndex(e)}},{key:"resize",value:function(){var e=this,t=this.container.width();this.container.children("li").addClass("visible"),this.container.find(".dropdown").removeClass("visible"),this.container.find(".dropdown-menu li").removeClass("visible");var n=0,i=0,r=!1,o=this.container.children(".bookmark"),a=this.container.find("li.dropdown").outerWidth(!0);o.each(function(s,l){var u=$(l);i++,n+=u.outerWidth(!0);var c=n>t,d=n+a>t,p=i<o.length;(c||d&&p)&&(r=!0,u.removeClass("visible"),e.container.find(".dropdown-menu li").eq(u.index()).addClass("visible"))});var s=this.container.children(".bookmark.active"),l=this.container.find(".dropdown-menu li.active");s.length&&!s.hasClass("visible")?(s.removeClass("active"),this.container.find(".nav-tabs .dropdown-menu li").eq(s.index()).addClass("active"),this.container.find(".nav-tabs > .dropdown").addClass("active")):l.length&&!l.hasClass("visible")&&(l.removeClass("active"),this.container.find(".nav-tabs > .bookmark").eq(l.index()).addClass("active"),this.container.find(".nav-tabs > .dropdown").removeClass("active")),r&&this.container.find(".dropdown").addClass("visible")}},{key:"updateVisibleBookmark",value:function(e){var t=this.container.find(".bookmark.visible").filter(function(t,n){return $(n).data("index")<=e});t.length&&$(t[t.length-1]).addClass("active")}},{key:"showBookmarkIndex",value:function(e){if(!this.bookmarkNavigationInProgress){e||0===e||(e=this.bookmarkIndex),this.container.find("li, .bookmark").removeClass("active"),this.updateVisibleBookmark(e);var t=this.container.find(".bookmark.active").closest(".bookmark-dropdown").length>0;t?(this.container.find(".dropdown").addClass("active"),app.isLoading||this.container.find(".dropdown").hasClass("open")||this.container.find(".dropdown-toggle").click()):app.isLoading||this.container.find(".dropdown").hasClass("open")&&this.container.find(".dropdown-toggle").click(),this.bookmarkIndex=e}}},{key:"render",value:function(e){e||(e=[]);var t="",n=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value;t+=(0,a["default"])(u)}}catch(c){i=!0,r=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw r}}this.container.html(t+(0,s["default"])({bookmarks:t})),this.addEvents(),this.resize(),this.showBookmarkIndex()}},{key:"addEvents",value:function(){var e=this;this.container.find(".bookmark").off("click").on("click",function(t){e.onBookmarkNavigate($(t.currentTarget))})}},{key:"onBookmarkNavigate",value:function(e){var t=this,n=e.data("index");this.bookmarkNavigationInProgress=!0,app.Controller.navigateToSection({index:n,animate:!0}).then(function(){t.bookmarkNavigationInProgress=!1,t.showBookmarkIndex(n)})}}]),e}();t["default"]=u,e.exports=t["default"]}),define("lib-build/tpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("lib-build/tpl!storymaps/common/ui/share/ShareDialog",[],function(){return function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="modal-dialog">\r\n	<div class="modal-content">\r\n		<div class="modal-logo"></div>\r\n		<div class="modal-header">\r\n			<h4 class="modal-title"></h4>\r\n		</div>\r\n\r\n		<div class="modal-body">\r\n			<div class="share-url-social">\r\n				<div class="share-url-panel"></div>\r\n				<div class="share-social-container">\r\n					<i class="social-icon share_facebook fa fa-facebook-square"></i>\r\n					<i class="social-icon share_twitter fa fa-twitter"></i>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="embed-title"></div>\r\n			<div class="share-embed-panel"></div>\r\n		</div>\r\n\r\n		<div class="modal-footer">\r\n			<button type="button" class="btn btnCancel btn-naked btn-close" data-dismiss="modal"></button>\r\n		</div>\r\n	</div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareDialog",[],function(){}),define("lib-build/tpl!storymaps/common/ui/share/ShareURLPanel",[],function(){return function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="share-url-container">\r\n	<span class="share-btn glyphicon glyphicon-copy"></span>\r\n	<input type="text" class="form-control bitlylink" readonly="true"/>\r\n	<a class="btn btn-primary btn-bitlylink-open" target="_blank"></a>\r\n	<div class="share-status-wrapper"><span class="share-status"></span></div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareURLPanel",[],function(){}),function(e,t){"use strict";var n,i,r,o=e,a=o.document,s=o.navigator,l=o.setTimeout,u=o.clearTimeout,c=o.setInterval,d=o.clearInterval,p=o.getComputedStyle,f=o.encodeURIComponent,h=o.ActiveXObject,m=o.Error,v=o.Number.parseInt||o.parseInt,g=o.Number.parseFloat||o.parseFloat,y=o.Number.isNaN||o.isNaN,b=o.Date.now,_=o.Object.keys,w=o.Object.defineProperty,C=o.Object.prototype.hasOwnProperty,E=o.Array.prototype.slice,x=function(){var e=function(e){return e};if("function"==typeof o.wrap&&"function"==typeof o.unwrap)try{var t=a.createElement("div"),n=o.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=o.unwrap)}catch(i){}return e}(),T=function(e){return E.call(e,0)},k=function(){var e,n,i,r,o,a,s=T(arguments),l=s[0]||{};for(e=1,n=s.length;n>e;e++)if(null!=(i=s[e]))for(r in i)C.call(i,r)&&(o=l[r],a=i[r],l!==a&&a!==t&&(l[r]=a));return l},P=function(e){var t,n,i,r;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,i=e.length;i>n;n++)C.call(e,n)&&(t[n]=P(e[n]));else{t={};for(r in e)C.call(e,r)&&(t[r]=P(e[r]))}return t},S=function(e,t){for(var n={},i=0,r=t.length;r>i;i++)t[i]in e&&(n[t[i]]=e[t[i]]);return n},O=function(e,t){var n={};for(var i in e)-1===t.indexOf(i)&&(n[i]=e[i]);return n},I=function(e){if(e)for(var t in e)C.call(e,t)&&delete e[t];return e},N=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},A=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},M=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},D=function(){var e,t;try{throw new m}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||M(t.stack)),e},j=function(){var e,n,i;if(a.currentScript&&(e=a.currentScript.src))return e;if(n=a.getElementsByTagName("script"),1===n.length)return n[0].src||t;if("readyState"in n[0])for(i=n.length;i--;)if("interactive"===n[i].readyState&&(e=n[i].src))return e;return"loading"===a.readyState&&(e=n[n.length-1].src)?e:(e=D())?e:t},L=function(){var e,n,i,r=a.getElementsByTagName("script");for(e=r.length;e--;){if(!(i=r[e].src)){n=null;break}if(i=A(i),null==n)n=i;else if(n!==i){n=null;break}}return n||t},R=function(){var e=A(j())||L()||"";return e+"ZeroClipboard.swf"},B=function(){return null==e.opener&&(!!e.top&&e!=e.top||!!e.parent&&e!=e.parent)}(),F={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},U="11.0.0",$={},H={},W=null,z=0,V=0,q={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},K=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],G=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],Y=new RegExp("^flash-("+G.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),X=new RegExp("^flash-("+G.slice(1).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),J={swfPath:R(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},Z=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(C.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))J[t]=e[t];else if(null==F.bridge)if("containerId"===t||"swfObjectId"===t){if(!fe(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");J[t]=e[t]}else J[t]=e[t];{if("string"!=typeof e||!e)return P(J);if(C.call(J,e))return J[e]}},Q=function(){return Ve(),{browser:S(s,["userAgent","platform","appName"]),flash:O(F,["bridge"]),zeroclipboard:{version:Ke.version,config:Ke.config()}}},ee=function(){return!!(F.disabled||F.outdated||F.sandboxed||F.unavailable||F.degraded||F.deactivated)},te=function(e,i){var r,o,a,s={};if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof i)for(r in e)C.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&Ke.on(r,e[r]);if(a&&a.length){for(r=0,o=a.length;o>r;r++)e=a[r].replace(/^on/,""),s[e]=!0,$[e]||($[e]=[]),$[e].push(i);if(s.ready&&F.ready&&Ke.emit({type:"ready"}),s.error){for(r=0,o=G.length;o>r;r++)if(F[G[r].replace(/^flash-/,"")]===!0){Ke.emit({type:"error",name:G[r]});break}n!==t&&Ke.version!==n&&Ke.emit({type:"error",name:"version-mismatch",jsVersion:Ke.version,swfVersion:n})}}return Ke},ne=function(e,t){var n,i,r,o,a;if(0===arguments.length)o=_($);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)C.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&Ke.off(n,e[n]);if(o&&o.length)for(n=0,i=o.length;i>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=$[e],a&&a.length)if(t)for(r=a.indexOf(t);-1!==r;)a.splice(r,1),r=a.indexOf(t,r);else a.length=0;return Ke},ie=function(e){var t;return t="string"==typeof e&&e?P($[e])||null:P($)},re=function(e){var t,n,i;return e=he(e),e&&!we(e)?"ready"===e.type&&F.overdue===!0?Ke.emit({type:"error",name:"flash-overdue"}):(t=k({},e),be.call(this,t),"copy"===e.type&&(i=Oe(H),n=i.data,W=i.formatMap),n):void 0},oe=function(){var e=F.sandboxed;if(Ve(),"boolean"!=typeof F.ready&&(F.ready=!1),F.sandboxed!==e&&F.sandboxed===!0)F.ready=!1,Ke.emit({type:"error",name:"flash-sandboxed"});else if(!Ke.isFlashUnusable()&&null===F.bridge){var t=J.flashLoadTimeout;"number"==typeof t&&t>=0&&(z=l(function(){"boolean"!=typeof F.deactivated&&(F.deactivated=!0),F.deactivated===!0&&Ke.emit({type:"error",name:"flash-deactivated"})},t)),F.overdue=!1,Pe()}},ae=function(){Ke.clearData(),Ke.blur(),Ke.emit("destroy"),Se(),Ke.off()},se=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,Ke.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var i in n)"string"==typeof i&&i&&C.call(n,i)&&"string"==typeof n[i]&&n[i]&&(H[i]=n[i])},le=function(e){"undefined"==typeof e?(I(H),W=null):"string"==typeof e&&C.call(H,e)&&delete H[e]},ue=function(e){return"undefined"==typeof e?P(H):"string"==typeof e&&C.call(H,e)?H[e]:void 0},ce=function(e){if(e&&1===e.nodeType){i&&(Re(i,J.activeClass),i!==e&&Re(i,J.hoverClass)),i=e,Le(e,J.hoverClass);var t=e.getAttribute("title")||J.title;if("string"==typeof t&&t){var n=ke(F.bridge);n&&n.setAttribute("title",t)}var r=J.forceHandCursor===!0||"pointer"===Be(e,"cursor");We(r),He()}},de=function(){var e=ke(F.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),i&&(Re(i,J.hoverClass),Re(i,J.activeClass),i=null)},pe=function(){return i||null},fe=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},he=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=r),k(e,{type:t,target:e.target||i||null,relatedTarget:e.relatedTarget||null,currentTarget:F&&F.bridge||null,timeStamp:e.timeStamp||b()||null});var n=q[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&k(e,{target:null,version:F.version}),"error"===e.type&&(Y.test(e.name)&&k(e,{target:null,minimumVersion:U}),X.test(e.name)&&k(e,{version:F.version})),"copy"===e.type&&(e.clipboardData={setData:Ke.setData,clearData:Ke.clearData}),"aftercopy"===e.type&&(e=Ie(e,W)),e.target&&!e.relatedTarget&&(e.relatedTarget=me(e.target)),ve(e)}},me=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?a.getElementById(t):null},ve=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,i="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,r="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=Fe(n),l=o.screenLeft||o.screenX||0,u=o.screenTop||o.screenY||0,c=a.body.scrollLeft+a.documentElement.scrollLeft,d=a.body.scrollTop+a.documentElement.scrollTop,p=s.left+("number"==typeof e._stageX?e._stageX:0),f=s.top+("number"==typeof e._stageY?e._stageY:0),h=p-c,m=f-d,v=l+h,g=u+m,y="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,k(e,{srcElement:n,fromElement:i,toElement:r,screenX:v,screenY:g,pageX:p,pageY:f,clientX:h,clientY:m,x:h,y:m,movementX:y,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ge=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},ye=function(e,t,n,i){i?l(function(){e.apply(t,n)},0):e.apply(t,n)},be=function(e){if("object"==typeof e&&e&&e.type){var t=ge(e),n=$["*"]||[],i=$[e.type]||[],r=n.concat(i);if(r&&r.length){var a,s,l,u,c,d=this;for(a=0,s=r.length;s>a;a++)l=r[a],u=d,"string"==typeof l&&"function"==typeof o[l]&&(l=o[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(u=l,l=l.handleEvent),"function"==typeof l&&(c=k({},e),ye(l,u,[c],t))}return this}},_e=function(e){var t=null;return(B===!1||e&&"error"===e.type&&e.name&&-1!==K.indexOf(e.name))&&(t=!1),t},we=function(e){var t=e.target||i||null,o="swf"===e._source;switch(delete e._source,e.type){case"error":var a="flash-sandboxed"===e.name||_e(e);"boolean"==typeof a&&(F.sandboxed=a),-1!==G.indexOf(e.name)?k(F,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(n=e.swfVersion,k(F,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),$e();break;case"ready":n=e.swfVersion;var s=F.deactivated===!0;k(F,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:s,ready:!s}),$e();break;case"beforecopy":r=t;break;case"copy":var l,u,c=e.relatedTarget;!H["text/html"]&&!H["text/plain"]&&c&&(u=c.value||c.outerHTML||c.innerHTML)&&(l=c.value||c.textContent||c.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),u!==l&&e.clipboardData.setData("text/html",u)):!H["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":Ce(e),Ke.clearData(),t&&t!==je()&&t.focus&&t.focus();break;case"_mouseover":Ke.focus(t),J.bubbleEvents===!0&&o&&(t&&t!==e.relatedTarget&&!N(e.relatedTarget,t)&&Ee(k({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),Ee(k({},e,{type:"mouseover"})));break;case"_mouseout":Ke.blur(),J.bubbleEvents===!0&&o&&(t&&t!==e.relatedTarget&&!N(e.relatedTarget,t)&&Ee(k({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),Ee(k({},e,{type:"mouseout"})));break;case"_mousedown":Le(t,J.activeClass),J.bubbleEvents===!0&&o&&Ee(k({},e,{type:e.type.slice(1)}));break;case"_mouseup":Re(t,J.activeClass),J.bubbleEvents===!0&&o&&Ee(k({},e,{type:e.type.slice(1)}));break;case"_click":r=null,J.bubbleEvents===!0&&o&&Ee(k({},e,{type:e.type.slice(1)}));break;case"_mousemove":J.bubbleEvents===!0&&o&&Ee(k({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},Ce=function(e){if(e.errors&&e.errors.length>0){var t=P(e);k(t,{type:"error",name:"clipboard-error"}),delete t.success,l(function(){Ke.emit(t)},0)}},Ee=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,i=n&&n.ownerDocument||a,r={view:i.defaultView||o,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:i.createEvent?0:1},s=k(r,e);n&&i.createEvent&&n.dispatchEvent&&(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=i.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),t._source="js",n.dispatchEvent(t)))}},xe=function(){var e=J.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=J.swfObjectId+"_fallbackContent";V=c(function(){var e=a.getElementById(n);Ue(e)&&($e(),F.deactivated=null,Ke.emit({type:"error",name:"swf-not-found"}))},t)}},Te=function(){var e=a.createElement("div");return e.id=J.containerId,e.className=J.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+ze(J.zIndex),e},ke=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Pe=function(){var e,t=F.bridge,n=ke(t);if(!t){var i=De(o.location.host,J),r="never"===i?"none":"all",s=Ae(k({jsVersion:Ke.version},J)),l=J.swfPath+Ne(J.swfPath,J);n=Te();var u=a.createElement("div");n.appendChild(u),a.body.appendChild(n);var c=a.createElement("div"),d="activex"===F.pluginType;c.innerHTML='<object id="'+J.swfObjectId+'" name="'+J.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(d?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+i+'"/><param name="allowNetworking" value="'+r+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/><div id="'+J.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=c.firstChild,c=null,x(t).ZeroClipboard=Ke,n.replaceChild(t,u),xe()}return t||(t=a[J.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),F.bridge=t||null,t},Se=function(){var e=F.bridge;if(e){var i=ke(e);i&&("activex"===F.pluginType&&"readyState"in e?(e.style.display="none",function r(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i)}else l(r,10)}()):(e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i))),$e(),F.ready=null,F.bridge=null,F.deactivated=null,n=t}},Oe=function(e){var t={},n={};if("object"==typeof e&&e){for(var i in e)if(i&&C.call(e,i)&&"string"==typeof e[i]&&e[i])switch(i.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[i],n.text=i;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[i],n.html=i;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[i],n.rtf=i}return{data:t,formatMap:n}}},Ie=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var i in e)if(C.call(e,i))if("errors"===i){n[i]=e[i]?e[i].slice():[];for(var r=0,o=n[i].length;o>r;r++)n[i][r].format=t[n[i][r].format]}else if("success"!==i&&"data"!==i)n[i]=e[i];else{n[i]={};var a=e[i];for(var s in a)s&&C.call(a,s)&&C.call(t,s)&&(n[i][t[s]]=a[s])}return n},Ne=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+b():""},Ae=function(e){var t,n,i,r,a="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?r=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(r=e.trustedDomains)),r&&r.length)for(t=0,n=r.length;n>t;t++)if(C.call(r,t)&&r[t]&&"string"==typeof r[t]){if(i=Me(r[t]),!i)continue;if("*"===i){s.length=0,s.push(i);break}s.push.apply(s,[i,"//"+i,o.location.protocol+"//"+i])}return s.length&&(a+="trustedOrigins="+f(s.join(","))),e.forceEnhancedClipboard===!0&&(a+=(a?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(a+=(a?"&":"")+"swfObjectId="+f(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(a+=(a?"&":"")+"jsVersion="+f(e.jsVersion)),a},Me=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},De=function(){var e=function(e){var t,n,i,r=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return r;for(t=0,n=e.length;n>t;t++)if(C.call(e,t)&&(i=Me(e[t]))){if("*"===i){r.length=0,r.push("*");break}-1===r.indexOf(i)&&r.push(i)}return r};return function(t,n){var i=Me(n.swfPath);null===i&&(i=t);var r=e(n.trustedDomains),o=r.length;if(o>0){if(1===o&&"*"===r[0])return"always";if(-1!==r.indexOf(t))return 1===o&&t===i?"sameDomain":"always"}return"never"}}(),je=function(){try{return a.activeElement}catch(e){return null}},Le=function(e,t){var n,i,r,o=[];if("string"==typeof t&&t&&(o=t.split(/\s+/)),e&&1===e.nodeType&&o.length>0)if(e.classList)for(n=0,i=o.length;i>n;n++)e.classList.add(o[n]);else if(e.hasOwnProperty("className")){for(r=" "+e.className+" ",n=0,i=o.length;i>n;n++)-1===r.indexOf(" "+o[n]+" ")&&(r+=o[n]+" ");e.className=r.replace(/^\s+|\s+$/g,"")}return e},Re=function(e,t){var n,i,r,o=[];if("string"==typeof t&&t&&(o=t.split(/\s+/)),e&&1===e.nodeType&&o.length>0)if(e.classList&&e.classList.length>0)for(n=0,i=o.length;i>n;n++)e.classList.remove(o[n]);else if(e.className){for(r=(" "+e.className+" ").replace(/[\r\n\t]/g," "),n=0,i=o.length;i>n;n++)r=r.replace(" "+o[n]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}return e},Be=function(e,t){var n=p(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Fe=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),i=o.pageXOffset,r=o.pageYOffset,s=a.documentElement.clientLeft||0,l=a.documentElement.clientTop||0,u=0,c=0;if("relative"===Be(a.body,"position")){var d=a.body.getBoundingClientRect(),p=a.documentElement.getBoundingClientRect();u=d.left-p.left||0,c=d.top-p.top||0}t.left=n.left+i-s-u,t.top=n.top+r-l-c,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},Ue=function(e){if(!e)return!1;var t=p(e,null),n=g(t.height)>0,i=g(t.width)>0,r=g(t.top)>=0,o=g(t.left)>=0,a=n&&i&&r&&o,s=a?null:Fe(e),l="none"!==t.display&&"collapse"!==t.visibility&&(a||!!s&&(n||s.height>0)&&(i||s.width>0)&&(r||s.top>=0)&&(o||s.left>=0));return l},$e=function(){u(z),z=0,d(V),V=0},He=function(){var e;if(i&&(e=ke(F.bridge))){var t=Fe(i);k(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+ze(J.zIndex)})}},We=function(e){F.ready===!0&&(F.bridge&&"function"==typeof F.bridge.setHandCursor?F.bridge.setHandCursor(e):F.ready=!1)},ze=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||y(e)?"string"==typeof e&&(t=ze(v(e,10))):t=e,"number"==typeof t?t:"auto"},Ve=function(t){var n,i,r,o=F.sandboxed,a=null;if(t=t===!0,B===!1)a=!1;else{try{i=e.frameElement||null}catch(s){r={name:s.name,message:s.message}}if(i&&1===i.nodeType&&"IFRAME"===i.nodeName)try{a=i.hasAttribute("sandbox")}catch(s){a=null}else{try{n=document.domain||null}catch(s){n=null}(null===n||r&&"SecurityError"===r.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&&(a=!0)}}return F.sandboxed=a,o===a||t||qe(h),a},qe=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13));
}function i(e){e&&(l=!0,e.version&&(d=t(e.version)),!d&&e.description&&(d=t(e.description)),e.filename&&(c=n(e.filename)))}var r,o,a,l=!1,u=!1,c=!1,d="";if(s.plugins&&s.plugins.length)r=s.plugins["Shockwave Flash"],i(r),s.plugins["Shockwave Flash 2.0"]&&(l=!0,d="2.0.0.11");else if(s.mimeTypes&&s.mimeTypes.length)a=s.mimeTypes["application/x-shockwave-flash"],r=a&&a.enabledPlugin,i(r);else if("undefined"!=typeof e){u=!0;try{o=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,d=t(o.GetVariable("$version"))}catch(p){try{o=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,d="6.0.21"}catch(f){try{o=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,d=t(o.GetVariable("$version"))}catch(h){u=!1}}}}F.disabled=l!==!0,F.outdated=d&&g(d)<g(U),F.version=d||"0.0.0",F.pluginType=c?"pepper":u?"activex":l?"netscape":"unknown"};qe(h),Ve(!0);var Ke=function(){return this instanceof Ke?void("function"==typeof Ke._createClient&&Ke._createClient.apply(this,T(arguments))):new Ke};w(Ke,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Ke.config=function(){return Z.apply(this,T(arguments))},Ke.state=function(){return Q.apply(this,T(arguments))},Ke.isFlashUnusable=function(){return ee.apply(this,T(arguments))},Ke.on=function(){return te.apply(this,T(arguments))},Ke.off=function(){return ne.apply(this,T(arguments))},Ke.handlers=function(){return ie.apply(this,T(arguments))},Ke.emit=function(){return re.apply(this,T(arguments))},Ke.create=function(){return oe.apply(this,T(arguments))},Ke.destroy=function(){return ae.apply(this,T(arguments))},Ke.setData=function(){return se.apply(this,T(arguments))},Ke.clearData=function(){return le.apply(this,T(arguments))},Ke.getData=function(){return ue.apply(this,T(arguments))},Ke.focus=Ke.activate=function(){return ce.apply(this,T(arguments))},Ke.blur=Ke.deactivate=function(){return de.apply(this,T(arguments))},Ke.activeElement=function(){return pe.apply(this,T(arguments))};var Ge=0,Ye={},Xe=0,Je={},Ze={};k(J,{autoActivate:!0});var Qe=function(e){var t=this;t.id=""+Ge++,Ye[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),Ke.on("*",function(e){return t.emit(e)}),Ke.on("destroy",function(){t.destroy()}),Ke.create()},et=function(e,i){var r,o,a,s={},l=Ye[this.id],u=l&&l.handlers;if(!l)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof i)for(r in e)C.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&this.on(r,e[r]);if(a&&a.length){for(r=0,o=a.length;o>r;r++)e=a[r].replace(/^on/,""),s[e]=!0,u[e]||(u[e]=[]),u[e].push(i);if(s.ready&&F.ready&&this.emit({type:"ready",client:this}),s.error){for(r=0,o=G.length;o>r;r++)if(F[G[r].replace(/^flash-/,"")]){this.emit({type:"error",name:G[r],client:this});break}n!==t&&Ke.version!==n&&this.emit({type:"error",name:"version-mismatch",jsVersion:Ke.version,swfVersion:n})}}return this},tt=function(e,t){var n,i,r,o,a,s=Ye[this.id],l=s&&s.handlers;if(!l)return this;if(0===arguments.length)o=_(l);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)C.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(o&&o.length)for(n=0,i=o.length;i>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=l[e],a&&a.length)if(t)for(r=a.indexOf(t);-1!==r;)a.splice(r,1),r=a.indexOf(t,r);else a.length=0;return this},nt=function(e){var t=null,n=Ye[this.id]&&Ye[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:P(n)),t},it=function(e){if(lt.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=k({},e));var t=k({},he(e),{client:this});ut.call(this,t)}return this},rt=function(e){if(!Ye[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=ct(e);for(var t=0;t<e.length;t++)if(C.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Je[e[t].zcClippingId].indexOf(this.id)&&Je[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Xe++,Je[e[t].zcClippingId]=[this.id],J.autoActivate===!0&&dt(e[t]));var n=Ye[this.id]&&Ye[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},ot=function(e){var t=Ye[this.id];if(!t)return this;var n,i=t.elements;e="undefined"==typeof e?i.slice(0):ct(e);for(var r=e.length;r--;)if(C.call(e,r)&&e[r]&&1===e[r].nodeType){for(n=0;-1!==(n=i.indexOf(e[r],n));)i.splice(n,1);var o=Je[e[r].zcClippingId];if(o){for(n=0;-1!==(n=o.indexOf(this.id,n));)o.splice(n,1);0===o.length&&(J.autoActivate===!0&&pt(e[r]),delete e[r].zcClippingId)}}return this},at=function(){var e=Ye[this.id];return e&&e.elements?e.elements.slice(0):[]},st=function(){Ye[this.id]&&(this.unclip(),this.off(),delete Ye[this.id])},lt=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Ye[this.id],n=t&&t.elements,i=!!n&&n.length>0,r=!e.target||i&&-1!==n.indexOf(e.target),o=e.relatedTarget&&i&&-1!==n.indexOf(e.relatedTarget),a=e.client&&e.client===this;return t&&(r||o||a)?!0:!1},ut=function(e){var t=Ye[this.id];if("object"==typeof e&&e&&e.type&&t){var n=ge(e),i=t&&t.handlers["*"]||[],r=t&&t.handlers[e.type]||[],a=i.concat(r);if(a&&a.length){var s,l,u,c,d,p=this;for(s=0,l=a.length;l>s;s++)u=a[s],c=p,"string"==typeof u&&"function"==typeof o[u]&&(u=o[u]),"object"==typeof u&&u&&"function"==typeof u.handleEvent&&(c=u,u=u.handleEvent),"function"==typeof u&&(d=k({},e),ye(u,c,[d],n))}}},ct=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},dt=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=o.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=o.event))&&(t(n),Ke.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Ze[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},pt=function(e){if(e&&1===e.nodeType){var t=Ze[e.zcClippingId];if("object"==typeof t&&t){for(var n,i,r=["move","leave","enter","out","over"],o=0,a=r.length;a>o;o++)n="mouse"+r[o],i=t[n],"function"==typeof i&&e.removeEventListener(n,i,!1);delete Ze[e.zcClippingId]}}};Ke._createClient=function(){Qe.apply(this,T(arguments))},Ke.prototype.on=function(){return et.apply(this,T(arguments))},Ke.prototype.off=function(){return tt.apply(this,T(arguments))},Ke.prototype.handlers=function(){return nt.apply(this,T(arguments))},Ke.prototype.emit=function(){return it.apply(this,T(arguments))},Ke.prototype.clip=function(){return rt.apply(this,T(arguments))},Ke.prototype.unclip=function(){return ot.apply(this,T(arguments))},Ke.prototype.elements=function(){return at.apply(this,T(arguments))},Ke.prototype.destroy=function(){return st.apply(this,T(arguments))},Ke.prototype.setText=function(e){if(!Ye[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.setData("text/plain",e),this},Ke.prototype.setHtml=function(e){if(!Ye[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.setData("text/html",e),this},Ke.prototype.setRichText=function(e){if(!Ye[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.setData("application/rtf",e),this},Ke.prototype.setData=function(){if(!Ye[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.setData.apply(this,T(arguments)),this},Ke.prototype.clearData=function(){if(!Ye[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.clearData.apply(this,T(arguments)),this},Ke.prototype.getData=function(){if(!Ye[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.getData.apply(this,T(arguments))},"function"==typeof define&&define.amd?define("lib/zero-clipboard/dist/ZeroClipboard",[],function(){return Ke}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Ke:e.ZeroClipboard=Ke}(function(){return this||window}()),define("storymaps/common/ui/share/ShareURLPanel",["lib-build/tpl!./ShareURLPanel","lib-build/css!./ShareURLPanel","../../utils/SocialSharing","dojo/has","lib/zero-clipboard/dist/ZeroClipboard"],function(e,t,n,i,r){return function(t){function o(e){s.val(e),t.find(".btn-bitlylink-open").attr("href",e),n.requestBitly(e).then(function(e){s.val(e).select()});var i="resources/lib/zero-clipboard/ZeroClipboard.swf";app.isProduction||(i="lib/zero-clipboard/dist/ZeroClipboard.swf"),r.config({swfPath:i});var o=new r(t.find(".share-btn"));o.on("copy",function(e){var n=e.clipboardData;n.setData("text/plain",t.find(".bitlylink").val()),t.find(".share-btn").removeClass("glyphicon-copy").addClass("glyphicon-ok"),t.find(".share-status").show(),t.find(".bitlylink")[0].selectionStart=t.find(".bitlylink")[0].selectionEnd=-1,t.find(".bitlylink").focus(),setTimeout(function(){t.find(".share-btn").addClass("glyphicon-copy").removeClass("glyphicon-ok"),t.find(".share-status").hide()},2e3)})}function a(){t.find(".bitlylink").click(function(){this.setSelectionRange(0,this.value.length)})}t.append(e({}));var s=t.find(".bitlylink");a(),this.present=function(e){o(e),t.find(".btn-bitlylink-open").html(i18n.viewer.shareFromCommon.open),t.find(".share-url-container").toggleClass("touch",!!i("touch")),t.find(".share-btn").attr("title",i18n.viewer.shareFromCommon.copy),t.find(".share-status").html(i18n.viewer.shareFromCommon.copied)},this.focus=function(){s.select()}}}),define("lib-build/tpl!storymaps/common/ui/share/ShareEmbedPanel",[],function(){return function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="share-embed-container">\r\n	<div class="embed-explain"></div>\r\n\r\n	<div class="share-embed-wrapper">\r\n		<div class="share-btn glyphicon glyphicon-copy"></div>	\r\n		<textarea class="form-control embedTextarea" readonly="true"></textarea>\r\n	</div>\r\n	<div class="share-status-wrapper"><span class="share-status"></span></div>\r\n\r\n	<div>\r\n		<span class="embed-lbl-size"></span>\r\n		<div class="btn-group">\r\n			<button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">\r\n				<span class="embed-sizes-btn"></span>&nbsp;<span class="caret"></span>\r\n			</button>\r\n			<ul class="dropdown-menu embed-sizes" role="menu"></ul>\r\n		</div>\r\n	</div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareEmbedPanel",[],function(){}),define("storymaps/common/ui/share/ShareEmbedPanel",["lib-build/tpl!./ShareEmbedPanel","lib-build/css!./ShareEmbedPanel","dojo/has","lib/zero-clipboard/dist/ZeroClipboard"],function(e,t,n,i){return function(t){function r(){$.each(l,function(e,n){t.find(".embed-sizes").append('<li><a data-width="'+n.width+'" data-height="'+n.height+'">'+n.width+" / "+n.height+"</a></li>")}),t.find(".embed-sizes a").click(function(){var e=$(this);e.parents(".btn-group").find(".embed-sizes-btn").text(e.text()),o(e.data("width"),e.data("height"))})}function o(e,n){t.find(".embedTextarea").val(s.replace("%URL%",u).replace("%WIDTH%",e).replace("%HEIGHT%",n));var r="resources/lib/zero-clipboard/ZeroClipboard.swf";app.isProduction||(r="lib/zero-clipboard/dist/ZeroClipboard.swf"),i.config({swfPath:r});var o=new i(t.find(".share-btn"));o.on("copy",function(e){var n=e.clipboardData;n.setData("text/plain",t.find(".embedTextarea").val()),t.find(".share-btn").removeClass("glyphicon-copy").addClass("glyphicon-ok"),t.find(".share-status").show(),t.find(".embedTextarea")[0].selectionStart=t.find(".embedTextarea")[0].selectionEnd=-1,t.find(".bitlylink").focus(),setTimeout(function(){t.find(".share-btn").addClass("glyphicon-copy").removeClass("glyphicon-ok"),t.find(".share-status").hide()},2e3)})}function a(){t.find(".embedTextarea").click(function(){this.setSelectionRange(0,this.value.length)})}var s='<iframe width="%WIDTH%" height="%HEIGHT%" src="%URL%" frameborder="0" scrolling="no"></iframe>',l=[{width:"100%",height:"800px"},{width:"100%",height:"640px"},{width:"800px",height:"600px"},{width:"640px",height:"480px"}],u=null;t.append(e({})),r(),a(),this.present=function(e){u=e,t.find(".embed-explain").html(i18n.viewer.shareFromCommon.embedExplain),t.find(".embed-lbl-size").html(i18n.viewer.shareFromCommon.size),t.find(".embed-sizes a").eq(0).click(),t.find(".share-embed-wrapper").toggleClass("touch",!!n("touch")),t.find(".share-clipboard").attr("title",i18n.viewer.shareFromCommon.copy),t.find(".share-status").html(i18n.viewer.shareFromCommon.copied)}}}),define("storymaps/common/ui/share/ShareDialog",["lib-build/tpl!./ShareDialog","lib-build/css!./ShareDialog","./ShareURLPanel","./ShareEmbedPanel","../../utils/SocialSharing"],function(e,t,n,i,r){return function(t){function o(e){var n=$("<div>"+app.data.title+"</div>").text();t.find(".share_facebook").toggle(e.facebook),e.facebook&&t.find(".share_facebook").off("click").click(function(){r.shareFacebook("","",null,$(this).data("url"))}),t.find(".share_twitter").toggle(e.twitter),e.twitter&&t.find(".share_twitter").off("click").click(function(){r.shareTwitter(n,$(this).data("url"))})}t.append(e({}));var a=new n(t.find(".share-url-panel")),s=new i(t.find(".share-embed-panel"));t.on("shown.bs.modal",function(){a.focus()}),this.present=function(e,n){n=n||{facebook:!1,twitter:!1},t.find(".social-container").toggle(n.facebook||n.twitter),o(n),a.present(e),s.present(e),t.find(".modal-title").html(i18n.viewer.headerFromCommon.share),t.find(".embed-title").html(i18n.viewer.shareFromCommon.embed),t.find(".btn-close").html(i18n.viewer.common.close),t.modal({keyboard:!0})}}}),define("lib-build/less!storymaps-react/tpl/view/ui/Header",[],function(){}),define("storymaps-react/tpl/view/ui/Header",["module","exports","storymaps/common/utils/CommonHelper","storymaps-react/tpl/view/media/Media","storymaps/tpl/view/ui/ProgressBar","./Bookmarks","storymaps/common/ui/share/ShareDialog","storymaps/common/utils/SocialSharing","dojo/has","lib-build/less!./Header"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=u(n),p=u(i),f=u(r),h=u(o),m=u(a),v=u(s),g=u(l),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=50,_=function(){function e(){c(this,e),this._node=$(".story-header"),this._bookmarksNode=this._node.find(".bookmarks"),this._shareDialog=new m["default"]($("#shareDialog")),this._progressBar=new f["default"],this._bookmarks=new h["default"](this._node.find(".bookmarks")),this._isCompact=null,this._currentSection=null,this.initShareTooltip()}return y(e,[{key:"render",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.logo,i=t.link,r=t.social,o=t.title,a={logoEnabled:n.enabled,logoURL:p["default"].addToken(n.url),logoTarget:n.link,linkURL:i.url,linkText:i.title};this.setLogo(this._node,a).then(function(){e._bookmarks.render(t.bookmarks)},function(){e._bookmarks.render(t.bookmarks)}),this.setLink(this._node,a),this._node.find(".title").html(o),this._node.find(".share-btn").off("click").click(this._onShareBtnClick.bind(this)).toggleClass("active",!!r.enabled),this._progressBar.start(),this._bookmarks.render(t.bookmarks),this.toggleShareButton()}},{key:"initShareTooltip",value:function(){var e=this._node.find('.share-btn-container[data-toggle="tooltip"]');e.tooltip({title:"This is not available until you share the story",placement:"auto left"}),e.on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("custom-share-tooltip")}),e.tooltip("disable")}},{key:"toggleShareButton",value:function(){var e=!0;window.app.data.appItem&&window.app.data.appItem.item&&window.app.data.appItem.item.access&&"private"!==app.data.appItem.item.access&&"shared"!==app.data.appItem.item.access&&(e=!1);var t=this._node.find(".share-btn"),n=this._node.find('.share-btn-container[data-toggle="tooltip"]');e||app.builder&&app.builder.isDirectCreationFirstSave?(t.addClass("share-disabled"),n.tooltip("enable")):(t.removeClass("share-disabled"),n.tooltip("disable"))}},{key:"setLogo",value:function(e,t){return new Promise(function(n,i){if(t.logoEnabled&&t.logoURL&&"NO_LOGO"!=t.logoURL){e.find(".logoLink").css("cursor",t.logoTarget?"pointer":"default"),t.logoTarget&&e.find(".logoLink").attr("href",t.logoTarget);var r=e.find(".logoImg");r.on("error",function(){i()}),r.on("load",function(){n()}),r.attr("src",t.logoURL).show()}else e.find(".logoImg").hide(),i()})}},{key:"setLink",value:function(e,t){t.linkURL&&t.linkText?e.find(".linkContainer").html('<a href="'+t.linkURL+'" class="link" target="_blank" tabindex="-1">'+t.linkText+"</a>"):e.find(".linkContainer").html(t.linkText)}},{key:"update",value:function(e){this._progressBar.update(e.storyProgress),this._isCompact!==e.headerCompact&&(this._isCompact=e.headerCompact,this._node.toggleClass("compact",this._isCompact),this._bookmarksNode.toggleClass("bookmarks-hidden",this._isCompact),this._isCompact||this._node.css("background-color","rgba(0,0,0,1)")),this._currentSection!==e.sectionIndex&&(this._currentSection=e.sectionIndex,this._bookmarks.update(e.sectionIndex))}},{key:"resize",value:function(){this._bookmarks.resize()}},{key:"getHeight",value:function(){return b}},{key:"_onShareBtnClick",value:function(){this._shareDialog.present(v["default"].cleanURL(document.location.href,!0),{facebook:!0,twitter:!0})}},{key:"showEditButton",value:function(){this._node.find(".header-edit-button").html('<i class="header-edit-icon fa fa-pencil"></i>Edit<span aria-hidden="true" class="header-edit-close">×</span>').show().off("click").click(d["default"].switchToBuilder),(0,g["default"])("ff")||(0,g["default"])("ie")||7==(0,g["default"])("trident")?this._node.find(".header-edit-close").hide():this._node.find(".header-edit-close").click(function(){return this._node.find(".header-edit-button").hide(),$(window).resize(),!1}.bind(this))}}]),e}();t["default"]=_,e.exports=t["default"]}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof t&&r[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var r=e(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=e(o);t&&t.preventDefault(),a.length||(a=r.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.button"),o="object"==typeof t&&t;r||i.data("bs.button",r=new n(this,o)),"toggle"==t?r.toggle():t&&r.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.6",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();t+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy(function(){i[r](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),a="string"==typeof t?t:o.slide;r||i.data("bs.carousel",r=new n(this,o)),"number"==typeof t?r.to(t):a?r[a]():o.interval&&r.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),i="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var r="prev"==e?-1:1,o=(n+r)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(t,r),a=this.interval,s="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var u=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,r.addClass(s),o.addClass(s),r.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(n){var i,r=e(this),o=e(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),r.data()),s=r.attr("data-slide-to");s&&(a.interval=!1),t.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!r&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),r||n.data("bs.collapse",r=new i(this,o)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.6",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),t||r.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var r=e(i);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=e(this);r.attr("data-target")||i.preventDefault();var o=t(r),a=o.data("bs.collapse"),s=a?"toggle":r.data();n.call(o,s)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function n(n){n&&3===n.which||(e(r).remove(),e(o).each(function(){var i=e(this),r=t(i),o={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(r[0],n.target)||(r.trigger(n=e.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof t&&i[t].call(n)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.6",a.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var o=t(r),a=o.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(o.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=e(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=t(i),a=r.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&r.find(o).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+s);if(l.length){var u=l.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown);
}(jQuery),+function(e){"use strict";function t(t,i){return this.each(function(){var r=e(this),o=r.data("bs.modal"),a=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);o||r.data("bs.modal",o=new n(this,a)),"string"==typeof t?o[t](i):a.show&&o.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),r=i.attr("href"),o=e(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},o.data(),i.data());i.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(o,a,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),o="object"==typeof t&&t;(r||!/destroy|hide/.test(t))&&(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=o[0].offsetWidth,p=o[0].offsetHeight;if(u){var f=s,h=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+p>h.bottom?"top":"top"==s&&c.top-p<h.top?"bottom":"right"==s&&c.right+d>h.width?"left":"left"==s&&c.left-d<h.left?"right":s,o.removeClass(f).addClass(s)}var m=this.getCalculatedOffset(s,c,d,p);this.applyPlacement(m,s);var v=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=o&&(t.top=t.top+o-u);var c=this.getViewportAdjustedDelta(n,t,l,u);c.left?t.left+=c.left:t.top+=c.top;var d=/top|bottom/.test(n),p=d?2*c.left-r+l:2*c.top-o+u,f=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][f],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=i?{top:0,left:0}:t.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,a,s,o)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var u=t.left-o,c=t.left+o+n;u<a.left?r.left=a.left-u:c>a.right&&(r.left=a.left+a.width-c)}return r},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.popover"),o="object"==typeof t&&t;(r||!/destroy|hide/.test(t))&&(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.6",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),+function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,o)),"string"==typeof n&&r[n]()})}t.VERSION="3.3.6",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),r=t.data("target")||t.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[n]().top+i,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)a!=o[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof t&&r[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(t,i,r){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var a=i.find("> .active"),s=r&&e.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.affix"),o="object"==typeof t&&t;r||i.data("bs.affix",r=new n(this,o)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.6",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>r?"top":!1;if("bottom"==this.affixed)return null!=n?r+this.unpin<=o.top?!1:"bottom":e-i>=r+a?!1:"bottom";var s=null==this.affixed,l=s?r:o.top,u=s?a:t;return null!=n&&n>=r?"top":null!=i&&l+u>=e-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,r=i.top,o=i.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof i&&(o=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element));var s=this.getState(a,t,r,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=e.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-o})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery),define("lib/calcite-bootstrap/js/bootstrap.min",function(){}),define("lib-build/css!storymaps/common/utils/SocialSharing",[],function(){}),define("storymaps/tpl/core/MainView",["lib/babel-polyfill/browser-polyfill","lib/jquery/dist/jquery.min","lib-build/less!./MainView","lib-build/css!../view/media/Common","storymaps-react/tpl/core/Controller","storymaps/common/Core","storymaps/common/utils/CommonHelper","storymaps/tpl/utils/UI","storymaps-react/tpl/view/ui/Header","lib/calcite-bootstrap/js/bootstrap.min","lib-build/css!storymaps/common/Core","lib-build/css!storymaps/common/utils/SocialSharing","esri/arcgis/utils","dojo/_base/lang","dojo/on","dojo/has","dojo/topic"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f,h,m,v){function g(e){return console.log("App loaded"),A=e,!0}function y(e,t,n){w(),app.display.browserWidth<768&&($("body").addClass("mobile-view"),app.isMobileView=!0),m("touch")&&$("body").addClass("touch"),app.Controller.renderStory(e,n),app.Controller.renderHeader(),C(),setTimeout(function(){w()},100),setTimeout(function(){w()},300),setTimeout(function(){w()},500)}function b(e){e=e||{};var t=app.display.scrollTop;if(app.isInBuilder&&w(),app.display.scrollTop=t,N!=t||e.forceUpdate){N=t;var n=_(t,t+app.display.windowHeight),i=n.activeSection;if(i){var r=i.index,o=i.node,a=t-i.top;app.Controller.onScroll({currentSectionIndex:r,scrollTop:t,windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight,$currentSection:o,sectionHeight:app.display.sectionHeight,currentSectionScroll:a,visibleSections:n.visibleSections});var s=!1;if(t<=app.display.windowHeight){var l=app.display.windowHeight-t-50;40>l&&(l=0),s=0!==l}O.update({headerCompact:s,storyProgress:(t+app.display.windowHeight)/app.display.storyHeight*100,sectionIndex:r})}}}function _(e,t){for(var n=app.display.sections,i=n.length,r=null,o=[],a=0,s=0,l=null,u=0;i>u;u++)a=n[u].top,s=u-1,l=n[u+1]?n[u+1].top:-1,a>e+50&&(r||(r={index:s,top:n[s].top,node:n[s].node})),u!=i-1||r||"credits"==n[u].type||(r={index:u,top:n[u].top,node:n[u].node}),e>=a&&l>e?o.push(s+1):t>a&&a>e&&o.push(s+1);return{activeSection:r,visibleSections:o}}function w(){var e=[];$(".section").each(function(t){var n=$(this);e.push({top:n.hasClass("hidden")?Number.MAX_VALUE:n.position().top,node:n,type:app.data.sections[t].type})});var t=[],n=$(window),i=n.width(),r=n.height(),o=O.getHeight();app.display={browserWidth:i,windowWidth:i-(app.isInBuilder?$(".section-builder-panel").width():0),windowHeight:r,headerHeight:o,sectionHeight:r-o,storyHeight:$("body").height(),scrollTop:app.display?app.display.scrollTop:0,sections:e,inlineVideos:t}}function C(){var e=!0,t=a.getUrlParams();"false"===t.forceScrollTop&&(e=!1),e&&$(window).on("beforeunload",function(){$(window).scrollTop(0)});var n=E(function(){x()},50);$(window).resize(n).trigger("resize");var i=!0,r=$(document);if("false"===t.useRafLoop&&(i=!1),i)window.requestAnimationFrame(function l(){var e=!1;$("body").hasClass("modal-open")&&(e=!0),e||(app.display.scrollTop=r.scrollTop(),b()),window.requestAnimationFrame(l)});else{var o=!1,s=function(){var e=window.performance,t=e.now();b(),console.log("onScroll took",e.now()-t),o=!1};$(window).scroll(function(){app.isInBuilder&&$("body").hasClass("modal-open")||(app.display.scrollTop=r.scrollTop(),o||(window.requestAnimationFrame(s),o=!0))})}$(".modal").on("show.bs.modal",function(){I=app.display.scrollTop,$("body").css({position:"fixed",top:-app.display.scrollTop}),$(".sections").css({position:"fixed"})}),$(".modal").on("hide.bs.modal",function(){$("body").css({position:"",top:""}),$(".sections").css({position:""}),$("html,body").scrollTop(I)}),A.hasSwitchBuilderButton()&&app.ui.header.showEditButton(),b(),v.publish("tpl-ready"),P()}function E(e,t,n){t||(t=250);var i,r;return function(){var o=n||this,a=+new Date,s=arguments;i&&i+t>a?(clearTimeout(r),r=setTimeout(function(){i=a,e.apply(o,s)},t)):(i=a,e.apply(o,s))}}function x(){if(w(),O.resize(),app.Controller.onResize({windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight,sectionHeight:app.display.sectionHeight}),app.isInBuilder){var e=app.display.browserWidth<768;$("body").toggleClass("error modal-open",e),$("#loadingOverlay").toggleClass("error",e),$("#fatalError").toggle(e),$(".progressjs-container").toggle(!e)}}function T(){return app.Controller.isStoryBlank()}function k(){if(app.data.appItem&&app.data.appItem.data){var e=app.data.appItem.data.values;y(e.config,e.settings,e.sections)}}function P(){$("#loadingIndicator").css("margin-left","-25px"),setTimeout(function(){$("#loadingIndicator, #loadingMessage").addClass("fadeOut").fadeOut(300),$("#loadingOverlay").fadeOut(600)},0)}function S(e){e||alert("No configuration specified in index.html > configOptions.story"),$.ajax({type:"GET",url:"stories/"+e+".json",dataType:"json"}).then(function(e){e&&e.config&&e.sections&&e.sections.length?y(e.config,e.settings,e.sections):alert("The specified configuration couldn't be loaded because of a JSON syntax error.")},function(){alert("The specified configuration hasn't been found or couldn't be loaded because of a JSON syntax error.")})}var O=new l,I=null,N=null,A=null;return app.ui={header:O,update:b},require([app.isInBuilder?"storymaps-react/tpl/view/section/FactoryBuilder":"storymaps-react/tpl/view/section/FactoryViewer"],function(e){app.ui.SectionFactory=e}),require([app.isInBuilder?"storymaps/tpl/view/section/Immersive/PanelFactoryBuilder":"storymaps/tpl/view/section/Immersive/PanelFactoryViewer"],function(e){app.ui.ImmersivePanelFactory=e}),require([app.isInBuilder?"storymaps-react/tpl/view/media/FactoryBuilder":"storymaps-react/tpl/view/media/FactoryViewer"],function(e){app.ui.MediaFactory=e}),require([app.isInBuilder?"storymaps-react/tpl/builder/Controller":"storymaps-react/tpl/core/Controller"],function(e){app.Controller=e}),{init:g,isStoryBlank:T,getConfig:S,appInitComplete:k,updateUI:b}}),define("lib-build/css!storymaps/common/builder/Builder",[],function(){}),define("lib-build/hbars!storymaps-react/tpl/builder/panel/BuilderPanel",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="builder-buttons">\r\n  <img src="resources/tpl/builder/icons/builder.jpg" />\r\n\r\n  <button class="btn btn-settings">\r\n    <i class="fa fa-cogs" aria-hidden="true"></i>\r\n    <span class="btn-label">Settings</span>\r\n  </button>\r\n  <div class="beta-feedback">\r\n    <a href="http://links.esri.com/storymaps/cascade-beta-feedback" target="_blank">Beta feedback</a>\r\n    <i class="beta-tooltip fa fa-info-circle" aria-hidden="true"></i>\r\n  </div>\r\n\r\n  <button class="btn btn-share">\r\n    <i class="fa fa-share" aria-hidden="true"></i>\r\n    <span class="btn-label">Share</span>\r\n\r\n    <div class="btn-share-container">\r\n      <div class="btn-share-outer-tooltip" data-level="private">\r\n        <div class="btn-share-wrapper" data-level="private" data-title="Private">\r\n    			<span class="small-loader"></span>\r\n    			<i class="share-icon fa fa-user" aria-hidden="true"></i>\r\n    		</div>\r\n      </div>\r\n      <div class="btn-share-outer-tooltip tooltip-enabled" data-level="account" data-title="To ensure this story can be seen by others when shared with your organization, you must also share its maps, scenes, layers, or apps with your organization using the My Content page of ArcGIS.com.">\r\n        <div class="btn-share-wrapper" data-level="account" data-title="Organization">\r\n    			<span class="small-loader"></span>\r\n    			<i class="share-icon fa fa-users" aria-hidden="true"></i>\r\n    		</div>\r\n      </div>\r\n      <div class="btn-share-outer-tooltip tooltip-enabled" data-level="public" data-title="To ensure this story can be seen by others when shared publicly, you must also share its maps, scenes, layers, or apps publicly using the My Content page of ArcGIS.com.">\r\n        <div class="btn-share-wrapper" data-level="public" data-title="Public">\r\n    			<span class="small-loader"></span>\r\n    			<i class="share-icon fa fa-globe" aria-hidden="true"></i>\r\n    		</div>\r\n      </div>\r\n    </div>\r\n  </button>\r\n\r\n  <button class="btn btn-preview">\r\n    <i class="fa fa-eye" aria-hidden="true"></i>\r\n    <span class="btn-label">View story</span>\r\n  </button>\r\n\r\n  <button id="save-button" class="btn btn-save" data-toggle="tooltip" data-placement="top" data-title="There was an error saving your story.">\r\n    <i class="btn-save-icon fa fa-floppy-o" aria-hidden="true"></i>\r\n    <span class="btn-save-loader small-loader"></span>\r\n    <span class="btn-save-success glyphicon glyphicon-ok"></span>\r\n    <span class="btn-save-error glyphicon glyphicon-exclamation-sign"></span>\r\n    <span class="btn-save-label">'+s((r=null!=(r=t.btnSave||(null!=e?e.btnSave:e))?r:a,typeof r===o?r.call(e,{name:"btnSave",
hash:{},data:i}):r))+'</span>\r\n  </button>\r\n</div>\r\n\r\n<div class="overview"></div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/builder/panel/BuilderPanel",[],function(){}),define("storymaps-react/tpl/builder/panel/BuilderPanel",["module","exports","lib-build/hbars!./BuilderPanel","../overviewPanel/OverviewPanel","dojo/topic","lib-build/less!./BuilderPanel"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return a(this,e),this._node=t.container,this._saveApp=t.saveApp,this._shareApp=t.shareApp,this._saveFailed=!1,this._node&&this._saveApp&&this._shareApp?(this._node.html((0,s["default"])({btnSave:i18n.viewer.common.save})),this._overviewPanel=null,this._node.find(".btn-share-container .btn-share-wrapper").tooltip({container:".section-builder-panel",placement:"top"}),this._node.find(".btn-share-container .btn-share-wrapper").on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("share-tooltip")}),this._node.find(".btn-share-container .btn-share-wrapper").on("show.bs.tooltip",function(){$(this).closest(".btn-share-outer-tooltip.tooltip-enabled").tooltip("show")}),this._node.find(".btn-share-container .btn-share-wrapper").on("hide.bs.tooltip",function(){$(this).closest(".btn-share-outer-tooltip.tooltip-enabled").tooltip("hide")}),this._node.find(".btn-share-outer-tooltip.tooltip-enabled").tooltip({placement:"bottom",container:".section-builder-panel",trigger:"manual"}),this._node.find(".btn-share-outer-tooltip.tooltip-enabled").on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("custom-warning")}),void this._initEvents()):void console.error("Could not initialize Builder Panel")}return c(e,[{key:"_initEvents",value:function(){u["default"].subscribe("tpl-ready",this._onStoryReady.bind(this)),u["default"].subscribe("builder-section-update",this._updateOverview.bind(this)),u["default"].subscribe("story-navigated-section",this._onSectionNavigate.bind(this)),u["default"].subscribe("builder-story-title-update",this._updateStoryTitle.bind(this)),u["default"].subscribe("builder-story-update",this._updateSaveButtonStatus.bind(this)),this._node.find(".btn-settings").click(this._onSettings.bind(this)),this._node.find(".btn-preview").click(this._onPreview.bind(this)),this._node.find(".btn-save").click(this._onSave.bind(this)),this._node.find(".beta-tooltip").tooltip({title:"Story Map Cascade is in beta. Please let us know what you think or if something is not working as you expected.",placement:"bottom",container:".section-builder-panel"})}},{key:"_onStoryReady",value:function(){this._initShareButtons(),this._updateShareButtons(),this._updatePreviewButton(),this._updateOverview()}},{key:"_updateStoryTitle",value:function(){var e=this._node.find(".builder-buttons .btn"),t=this._node.find(".builder-buttons .btn:not(.btn-save)"),n=app.Controller.getStoryTitle();e.toggleClass("disabled",!n),n?this._saveFailed?t.tooltip("destroy"):e.tooltip("destroy"):e.tooltip({title:"Add a title for your story on the cover to save",placement:"right",container:".section-builder-panel"}),this._updatePreviewButton()}},{key:"_onSettings",value:function(e){$(e.currentTarget).hasClass("disabled")||app.Controller.openSettings()}},{key:"_initShareButtons",value:function(){var e=app.portal.isOrganization!==!1,t=app.portal.getPortalUser().privileges||[],n=app.data.appItem.item.access,i=app.data.appItem.item.itemControl,r=e&&t.indexOf("portal:user:shareToOrg")>-1,o=!e||t.indexOf("portal:user:shareToPublic")>-1,a="private"==n||"shared"==n,s="account"==n,l=app.data.appItem.item.owner==app.portal.getPortalUser().username;"update"==i?(r=!1,o=!1):"admin"!=i||l||(r=t.indexOf("portal:admin:shareToOrg")>-1,o=t.indexOf("portal:admin:shareToPublic")>-1),s?r=!0:a||(o=!0),this._node.find('.btn-share-outer-tooltip[data-level="account"]').toggle(r),this._node.find('.btn-share-outer-tooltip[data-level="public"]').toggle(o),this._node.find(".btn-share-wrapper").click(this._onChangeSharing.bind(this))}},{key:"_onChangeSharing",value:function(e){var t=$(e.currentTarget);this._node.find(".btn-share-this._node").addClass("disabled"),this._node.find(".btn-share-wrapper").removeClass("active"),t.addClass("sharing"),this._shareApp({sharingLevel:t.data("level")}).then(function(){this._updateShareButtons(),this._updatePreviewButton(),app.Controller.renderHeader()}.bind(this),function(){})}},{key:"_updateShareButtons",value:function(){var e="private";this._node.find(".btn-share-wrapper").removeClass("sharing"),app.data.appItem.item&&app.data.appItem.item.access&&app.Controller.getStoryTitle()?(e=app.data.appItem.item.access,this._node.find(".btn-share-container").removeClass("disabled"),this._node.find(".btn-share-wrapper[data-level="+e+"]").addClass("active")):this._node.find(".btn-share-container").addClass("disabled")}},{key:"_updatePreviewButton",value:function(){var e=app.data.appItem.item.access,t=!!app.data.appItem.item.id,n="account"==e||"public"==e,i=this._node.find(".btn-preview");i.toggleClass("disabled",!t),n?i.tooltip("destroy"):i.tooltip({title:"Your story isn't shared, only you can see it",placement:"right",container:".section-builder-panel"})}},{key:"_onPreview",value:function(e){$(e.currentTarget).hasClass("disabled")||window.open(app.Controller.getStoryURL(),"_blank")}},{key:"_updateSaveButtonStatus",value:function(){var e=this._node.find(".btn-save"),t=app.Controller.getStoryTitle();e.toggleClass("btn-primary",!(!t||!app.builder.pendingChanges))}},{key:"_onSave",value:function(e){var t=$(e.currentTarget);t.hasClass("disabled")||(t.removeClass("saved").addClass("saving disabled"),t.find(".btn-save-label").html(i18n.commonCore.builderPanel.buttonSaving),this._saveApp())}},{key:"saveSucceeded",value:function(){var e=this;this._saveFailed=!1,this._node.find(".btn-save").removeClass("saving disabled").addClass("saved"),this._node.find(".btn-save-label").html(i18n.commonCore.builderPanel.buttonSaved),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip("destroy"),setTimeout(function(){e._node.find(".btn-save").removeClass("saved").find(".btn-save-label").html(i18n.viewer.common.save)},3500),this._updateSaveButtonStatus(),this._updateShareButtons(),this._updatePreviewButton()}},{key:"saveFailed",value:function(){var e=this;this._saveFailed=!0,this._node.find(".btn-save").removeClass("saving").addClass("error"),this._node.find(".btn-save-label").html(i18n.commonCore.builderPanel.buttonError),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip({trigger:"manual",placement:"right",container:".builder-buttons"}),this._node.find('.btn-save[data-toggle="tooltip"]').on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("custom-error")}),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip("show"),setTimeout(function(){e._node.find(".btn-save").removeClass("error disabled").find(".btn-save-label").html(i18n.viewer.common.save)},3500)}},{key:"_updateOverview",value:function(){var e=app.Controller.getStoryOverview();this._overviewPanel?this._overviewPanel.updateItems(e):this._initOverviewPanel(e)}},{key:"_onSectionNavigate",value:function(e){this._overviewPanel&&this._overviewPanel.navigateTo(app.Controller.getSectionIndexById(e.index))}},{key:"_initOverviewPanel",value:function(e){this._overviewPanel=new l["default"](this._node.find(".overview")[0],"vertical",e,{selectItem:function(e){var t=app.Controller.getSectionById(e);console.log("selectItem:",t),app.Controller.navigateToSection({index:t,animate:!1})},duplicateItem:function(e){var t=app.Controller.getSectionById(e);console.log("duplicateItem:",t),app.Controller.duplicateSection({index:t})},toggleHidden:function(e){var t=app.Controller.getSectionById(e);console.log("toggleHidden:",t),console.log("TODO NOT IMPLEMENTED")},deleteItem:function(e){var t=app.Controller.getSectionById(e);console.log("deleteItem:",t),app.Controller.deleteSection({index:t})},organize:function(e){var t=app.Controller.getSectionsIndexesByIds(e);console.log("organize:",e,t),app.Controller.organizeSections(t)}})}}]),e}();t["default"]=d,e.exports=t["default"]}),define("lib-build/hbars!storymaps/common/builder/SaveErrorPopupSocial",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="modal-dialog">\r\n	<div class="modal-content">\r\n		<div class="modal-logo"></div>\r\n		<div class="modal-header">\r\n			<h4 class="modal-title">'+l((o=null!=(o=t.title||(null!=e?e.title:e))?o:s,typeof o===a?o.call(e,{name:"title",hash:{},data:i}):o))+'</h4>\r\n		</div>\r\n\r\n		<div class="modal-body">\r\n			<div class="panel1">\r\n				';return o=null!=(o=t.panel1||(null!=e?e.panel1:e))?o:s,r=typeof o===a?o.call(e,{name:"panel1",hash:{},data:i}):o,null!=r&&(u+=r),u+='\r\n				<a href="#" class="help" data-toggle="tooltip">\r\n					<i class="fa fa-question-circle" aria-hidden="true"></i>\r\n				</a>\r\n			</div>\r\n			<div class="panel2">\r\n				<div class="panel2lbl">'+l((o=null!=(o=t.panel2||(null!=e?e.panel2:e))?o:s,typeof o===a?o.call(e,{name:"panel2",hash:{},data:i}):o))+'</div>\r\n				<div class="form-group">\r\n					<div class="radio">\r\n						<label>\r\n							<input type="radio" name="optErrorSocial" value="story" checked>\r\n							<span>\r\n								'+l((o=null!=(o=t.panel2q1||(null!=e?e.panel2q1:e))?o:s,typeof o===a?o.call(e,{name:"panel2q1",hash:{},data:i}):o))+'\r\n								<a href="#" class="help" data-toggle="tooltip" title="'+l((o=null!=(o=t.panel2q1tooltip||(null!=e?e.panel2q1tooltip:e))?o:s,typeof o===a?o.call(e,{name:"panel2q1tooltip",hash:{},data:i}):o))+'">\r\n									<i class="fa fa-question-circle" aria-hidden="true"></i>\r\n								</a>\r\n							</span>\r\n						</label>\r\n					</div>\r\n					<div class="radio">\r\n						<label>\r\n							<input type="radio" name="optErrorSocial" value="item">\r\n							<span>',o=null!=(o=t.panel2q2||(null!=e?e.panel2q2:e))?o:s,r=typeof o===a?o.call(e,{name:"panel2q2",hash:{},data:i}):o,null!=r&&(u+=r),u+='</span>\r\n						</label>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div class="panel3">',o=null!=(o=t.panel3||(null!=e?e.panel3:e))?o:s,r=typeof o===a?o.call(e,{name:"panel3",hash:{},data:i}):o,null!=r&&(u+=r),u+'</div>\r\n		</div>\r\n\r\n		<div class="modal-footer">\r\n			<div class="stop-asking">\r\n				<div class="checkbox">\r\n					<label class="disabled">\r\n						<input type="checkbox" value="" disabled>\r\n						'+l((o=null!=(o=t.panel4||(null!=e?e.panel4:e))?o:s,typeof o===a?o.call(e,{name:"panel4",hash:{},data:i}):o))+'\r\n					</label>\r\n				</div>\r\n			</div>\r\n			<button type="button" class="btn btn-primary">'+l((o=null!=(o=t.btnSave||(null!=e?e.btnSave:e))?o:s,typeof o===a?o.call(e,{name:"btnSave",hash:{},data:i}):o))+"</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/css!storymaps/common/builder/SaveErrorPopupSocial",[],function(){}),define("storymaps/common/builder/SaveErrorPopupSocial",["lib-build/hbars!./SaveErrorPopupSocial","lib-build/css!./SaveErrorPopupSocial","../utils/CommonHelper","dojo/Deferred","dojo/i18n!commonResources/nls/core.js?v="+app.version],function(e,t,n,i,r){return function(t){function o(){t.find('input[name="optErrorSocial"]').change(function(){var e=t.find('input[name="optErrorSocial"]:checked').val();"story"==e?(t.find(".stop-asking input").attr("disabled","disabled").prop("checked",!1),t.find(".stop-asking label").addClass("disabled")):(t.find(".stop-asking input").removeAttr("disabled"),t.find(".stop-asking label").removeClass("disabled"))}),t.find(".btn-primary").click(function(){t.find(".stop-asking input").is(":checked")&&(app.data.appItem.data.values.config.doNotWarnTitle=!0),a.resolve({choice:t.find('input[name="optErrorSocial"]:checked').val()}),t.modal("hide")})}var a=null;t.append(e({title:r.commonCore.saveErrorSocial.title,panel1:r.commonCore.saveErrorSocial.panel1,panel2:r.commonCore.saveErrorSocial.panel2,panel2q1:r.commonCore.saveErrorSocial.panel2q1,panel2q1tooltip:r.commonCore.saveErrorSocial.panel2q1tooltip,panel2q2:r.commonCore.saveErrorSocial.panel2q2,panel3:r.commonCore.saveErrorSocial.panel3.replace("${MYSTORIES}",'<a href="'+n.getMyStoriesURL()+'" target="_blank">'+r.commonCore.saveErrorSocial.mystories+"</a>"),panel4:r.commonCore.saveErrorSocial.panel4,btnSave:r.commonCore.saveErrorSocial.save})),o(),this.present=function(){return a=new i,t.find(".panel1 .help").tooltip({title:r.commonCore.saveErrorSocial.panel1tooltip+'<img src="resources/tpl/builder/icons/share/builder-help-social.png"/>',html:!0,placement:"right"}),t.find(".panel2 .help").tooltip(),t.modal({keyboard:!1}),a}}}),define("storymaps/common/builder/Builder",["lib-build/css!./Builder","esri/arcgis/Portal","storymaps-react/tpl/builder/panel/BuilderPanel","./SaveErrorPopupSocial","./BuilderHelper","../utils/CommonHelper","esri/IdentityManager","dojo/Deferred","dojo/_base/lang"],function(e,t,n,i,r,o,a,s,l){function u(e,t){y=e,b=t,console.log("common.builder.Builder - init");var a=o.getUrlParams();app.builder.isDirectCreation=null!=a.fromScratch||null!=a.fromscratch,app.builder.isGalleryCreation=null!=a.fromGallery,app.builder.isDirectCreationFirstSave=app.builder.isDirectCreation,app.builder.isDirectCreation?console.log("common.builder.Builder - Builder start in direct creation mode"):app.builder.isGalleryCreation&&console.log("common.builder.Builder - Builder start in gallery creation mode"),$("body").addClass("builder-mode"),b.init(w),_=new n({container:$(".section-builder-panel"),saveApp:b.saveApp,openSettings:function(){},shareApp:m}),app.builder.builderPanel=_,C=new i($("#saveErrorPopupSocial")),window.onbeforeunload=function(e){return e=e||window.event,app.isInBuilder&&app.builder.pendingChanges?(e&&(e.returnValue=i18n.commonCore.builderPanel.closeWithPendingChange),i18n.commonCore.builderPanel.closeWithPendingChange):void 0},app.builder.cleanApp=r.cleanApp}function c(){var e="",t="";app.data.title&&(e=app.data.title.trim()),app.data.appItem&&app.data.appItem.item&&app.data.appItem.item.title&&(t=app.data.appItem.item.title.trim()),app.builder.titleMatchOnLoad=t==e,(app.builder.isDirectCreation||app.builder.isGalleryCreation)&&(app.builder.titleMatchOnLoad=!0),b.appInitComplete()}function d(){}function p(){if(!app.portal)return console.error("Fatal error - not signed in"),void g("APP");var e="",t="";if(app.data.title&&(e=app.data.title.trim()),app.data.appItem&&app.data.appItem.item&&app.data.appItem.item.title&&(t=app.data.appItem.item.title.trim()),!e)return void g("NONAME");if(app.builder.isDirectCreationFirstSave)app.portal.getPortalUser().getItems().then(function(t){var n=!1;t&&$.each(t,function(t,i){i.title&&i.title.toLowerCase()==e.toLowerCase()&&(n=!0)}),n?g("DUPLICATE"):h(e)});else if(app.builder.titleMatchOnLoad||app.data.appItem.data.values.config.doNotWarnTitle||"public"!=app.data.appItem.item.access||e==t){var n=app.data.appItem.data.values.config.doNotWarnTitle||"public"!=app.data.appItem.item.access&&!app.builder.titleMatchOnLoad;f(n)}else app.builder.titleMatchDialogDisplayed?f(app.builder.titleFromItem):(app.builder.titleMatchDialogDisplayed=!0,C.present().then(function(e){e=e||{},app.builder.titleFromItem="item"==e.choice,f(app.builder.titleFromItem)}))}function f(e){r.saveApp(e).then(function(){v()},function(){g("APP")})}function h(e){var t=a.findCredential(r.getPortalURL()).userId;l.mixin(app.data.appItem.item,{title:e,snippet:"",uploaded:Date.now(),modified:Date.now(),owner:t,access:"private"}),r.saveApp(!1).then(function(e){var t=document.location.protocol+"//"+document.location.host+document.location.pathname;t.match(/index\.html$/)||(t+="index.html"),l.mixin(app.data.appItem.item,{id:e.id,item:e.item,url:t+"?appid="+e.id}),r.saveApp(!1).then(function(){console.log("common.builder.Builder - saveAppFromScratch - appid:",e.id),app.builder.isDirectCreationFirstSave=!1,window.history.replaceState({},"","index.html?appid="+e.id+"&edit"),v()})},function(){g()})}function m(e){var t=new s,n=app.data.appItem.item;if(!e||!e.sharingLevel||!n)return t.reject(),t;var i=e.sharingLevel;"public"!=i&&"account"!=i&&"private"!=i&&(i="private");var o=[app.data.appItem.item.id];return r.shareItems(o.join(","),i).then(function(e){var n=e&&e.results&&e.results.length==o.length;n&&($.each(e.results,function(e,t){t.success||(n=!1)}),app.data.appItem.item.access=i),t.resolve()}),t}function v(){app.mystories=app.mystories||{},app.mystories.isChecking=!0,app.isWebMapCreation=!1,app.builder.pendingChanges=0,_.saveSucceeded(),(app.builder.isGalleryCreation||app.builder.isDirectCreationFirstSave)&&(app.builder.isDirectCreationFirstSave=!1,app.builder.isGalleryCreation=!1)}function g(e,t){_.saveFailed(e,t),b.saveFailed(e,t)}var y=null,b=null,_=null,w=null,C=null;return this.isDirectCreation=!1,this.isGalleryCreation=!1,this.isDirectCreationFirstSave=!1,{init:u,resize:d,appInitComplete:c,saveApp:p}}),define("lib-build/tpl!storymaps/tpl/builder/BuilderView",[],function(){return function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="modal fade" id="settingsPopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="modal fade builderShare" id="sharePopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n<div class="modal fade builderShareError" id="sharePopupError" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="modal fade saveErrorPopup" id="saveErrorPopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n<div class="modal fade saveErrorPopupSocial" id="saveErrorPopupSocial" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="modal fade media-picker-popup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="notification-container">\r\n\r\n</div>\r\n';return __p}}),define("lib-build/less!storymaps/tpl/builder/BuilderView",[],function(){}),define("storymaps-react/tpl/builder/Controller",["module","exports","../core/Controller","dojo/topic","./notification/Undo"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)};c["default"].subscribe("builder-section-update",function(){h.storyChange()}),c["default"].subscribe("builder-media-update",function(){h.storyChange()});var h=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,null,[{key:"storyChange",value:function(){app.builder.pendingChanges++,c["default"].publish("builder-story-update")}},{key:"storyUndo",value:function(){app.builder.pendingChanges--,c["default"].publish("builder-story-update")}},{key:"renderStory",value:function(e,n){var i=n[n.length-1],r=n.length;i&&"credits"==i.type&&(r-=1),n.splice(r,0,app.ui.SectionFactory.createInstance({type:"credits-placeholder"})),f(Object.getPrototypeOf(t),"renderStory",this).call(this,e,n)}},{key:"onScroll",value:function(e){f(Object.getPrototypeOf(t),"onScroll",this).call(this,e)}},{key:"openSettings",value:function(){var e=app.data.appItem.data.values.settings.header;e&&e.logo&&e.link||(e=u["default"].DEFAULT_HEADER_SETTINGS);var t={context:{headerBackground:"#000"},settings:Object.assign({},e,{bookmarks:this.getBookmarksBuilder()})};app.builder.settingsPopup.open(t).then(function(e){app.data.appItem.data.values.settings.header={logo:e.logo,link:e.link,social:e.social},this._setBookmarksBuilder(e.bookmarks),this.renderHeader(),this.storyChange()}.bind(this),function(){})}},{key:"getBookmarksBuilder",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._sections[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(a.getBookmark){var s=a.getBookmark();s&&(s.title?"cover"==a.type&&(s.title+=" (Cover)"):"sequence"==a.type?s.title="Sequential section (no text found)":"immersive"==a.type?s.title="Immersive section (no text found)":"title"==a.type?s.title="Title section (no text found)":"cover"==a.type&&(s.title="Cover section (no text found)"),e.push(s))}}}catch(l){n=!0,i=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}return e}},{key:"_setBookmarksBuilder",value:function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var o,a=this._sections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.getBookmark&&s.setBookmark(e[t++])}}catch(l){i=!0,r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}}},{key:"serializeStory",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._sections[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=a.serialize();s&&e.push(s)}}catch(l){n=!0,i=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}return e}},{key:"getStoryOverview",value:function(){var e=[];if(!this._sections)return e;var t=!1;(3==this._sections.length||4==this._sections.length&&"credits"==this._sections[3].type)&&(t=!0);var n=!0,i=!1,r=void 0;try{for(var o,a=this._sections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.type;"credits-placeholder"!=l&&("cover"==l?e.push({id:s.id,style:"button",label:"Cover",hasDelete:!1,hasHide:!1,hasDuplicate:!1,hasOrganize:!1}):"credits"==l?e.push({id:s.id,style:"button",label:"Credits",hasDelete:!0,hasHide:!0,hasDuplicate:!1,hasOrganize:!1}):"title"==l?e.push({id:s.id,style:"thumbnail",size:"short",thumbnail:s.getPreviewThumbnail(),label:s.getPreviewText(),icon:s.getPreviewIcon(),hasDelete:!t,hasHide:!0,hasDuplicate:!0,hasOrganize:!0}):"sequence"==l?e.push({id:s.id,style:"thumbnail",size:"tall",thumbnail:s.getPreviewThumbnail(),text:s.getPreviewText(),hasDelete:!t,hasHide:!0,hasDuplicate:!0,hasOrganize:!0}):e.push({id:s.id,style:"thumbnail",size:"tall",showTitleBar:!0,thumbnail:s.getPreviewThumbnail(),title:s.getPreviewText(),icon:s.getPreviewIcon(),hasDelete:!t,hasHide:!0,hasDuplicate:!0,hasOrganize:!0}))}}catch(u){i=!0,r=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return e}},{key:"addSection",value:function(e){if(console.log("addSection:",e),e&&(e.type||e.section)&&!(void 0===e.index||e.index<0||e.index>this._sections.length)){var t=e.section||{type:e.type},n=app.ui.SectionFactory.createInstance(t);this._sections.splice(e.index+1,0,n),this._container.find(".section").eq(e.index).after(n.render()),n.postCreate(this._container.find(".section").eq(e.index+1)),window.requestAnimationFrame(function(){this.navigateToSection({index:e.index+1,animate:!0}),n.focus()}.bind(this)),c["default"].publish("builder-section-update")}}},{key:"deleteActiveSection",value:function(){this.deleteSection({index:this._currentSectionIndex})}},{key:"deleteSection",value:function(e){if(console.log("deleteSection:",e),e&&e.index){var t={index:e.index-1,section:this._sections[e.index].serialize()};this._sections.splice(e.index,1),this._container.find(".section").eq(e.index).remove(),e.index==this._currentSectionIndex&&this.navigateToSection({index:e.index-1,animate:!0}),c["default"].publish("builder-section-update");var n=new d["default"]({container:this._container.find(".section").eq(e.index+1),label:"You deleted a section"});n.display().then(function(){this.addSection(t),this.storyUndo()}.bind(this),function(){})}}},{key:"duplicateSection",value:function(e){if(console.log("duplicateSection:",e),e&&e.index){var t=this._sections.slice(e.index,e.index+1)[0],n=t.serialize();n.bookmark&&(n.bookmark.enabled=!1);var i=app.ui.SectionFactory.createInstance(n);this._sections.splice(e.index+1,0,i),this._container.find(".section").eq(e.index).after(i.render()),i.postCreate(this._container.find(".section").eq(e.index+1)),this.navigateToSection({index:e.index+1,animate:!1}),c["default"].publish("builder-section-update")}}},{key:"getSectionsIndexesByIds",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)for(var s=o.value,l=0;l<this._sections.length;l++){var u=this._sections[l];u.id==s&&t.push(l)}}catch(c){i=!0,r=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return t}},{key:"organizeSections",value:function(e,t){console.log("organizeSections:",e);for(var n=!0,i=0;i<e.length-1;i++)if(e[i]>e[i+1]){n=!1;break}if(!n){for(var r=[],o=this._currentSectionIndex,a=0;a<this._sections.length;a++)r[a]=this._sections[a];for(var s=[],l=-1,u=null,p=0;p<e.length;p++)u=e[p],s.push(this._sections[u]),u==this._currentSectionIndex&&(l=p);var f=this._sections[this._sections.length-1];for("credits"==f.type?s.splice(s.length-1,0,this._sections[this._sections.length-2]):s.push(f),this._sections=s,this.prototype.__proto__.constructor._sections=this._sections,app.data.sections=s,u=this._sections.length-1;u>=0;u--){var h=this._sections[u];this._container.prepend(h._node)}if(-1!=l&&window.requestAnimationFrame(function(){this._currentSectionIndex=-1,this._currentSection=null,this._$currentSection=null,this.navigateToSection({index:l,animate:!1})}.bind(this)),!t){var m=new d["default"]({container:this._node,label:"You organized the sections"});m.display().then(function(){this._sections=r,this.prototype.__proto__.constructor._sections=r,app.data.sections=r;for(var e=this._sections.length-1;e>=0;e--){var t=this._sections[e];this._container.prepend(t._node)}c["default"].publish("builder-section-update"),this._currentSectionIndex!=o&&window.requestAnimationFrame(function(){this._currentSectionIndex=-1,this._currentSection=null,this._$currentSection=null,this.navigateToSection({index:o,animate:!1})}.bind(this))}.bind(this),function(){})}c["default"].publish("builder-section-update")}}}]),t}(u["default"]);t["default"]=h,e.exports=t["default"]}),define("lib-build/tpl!storymaps/common/builder/mediaPicker/MediaPickerPopup",[],function(){return function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="modal-dialog">\r\n  <div class="modal-content">\r\n    <div class="modal-logo"></div>\r\n    <div class="modal-header">\r\n      <h4 class="modal-title"></h4>\r\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n    <div class="modal-body" id="media-picker">\r\n    </div>\r\n  </div>\r\n</div>\r\n';return __p}}),define("lib-build/less!storymaps/common/builder/mediaPicker/MediaPickerPopup",[],function(){}),define("storymaps-react/common/builder/mediaPicker/constants",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={providers:{GOOGLE_PHOTOS:"googlePhotos",FLICKR:"flickr",ARCGIS:"arcgis",URL:"urlContent"},contentType:{IMAGE:"image",VIDEO:"video",WEBPAGE:"webpage",WEBMAP:"webmap",WEBSCENE:"webscene"},fetchStatus:{NOT_FETCHED:"NOT_FETCHED",FETCHING:"FETCHING",SUCCESS:"SUCCESS",ERROR:"ERROR",NON_MATCHING_URL:"NON_MATCHING_URL",NOT_AUTHORIZED:"NOT_AUTHORIZED",NOT_FOUND:"NOT_FOUND",BAD_FORMAT:"BAD_FORMAT"},galleryContent:{ALBUMS:"ALBUMS",IMAGES:"IMAGES",AGOL:"AGOL",IMG_HEIGHT:100,ALBUM_HEIGHT:150},searchType:{USER:"USER",TEXT:"TEXT"},searchLocation:{STORY:"STORY",AGOL:"AGOL",ORG:"ORG",MINE:"MINE"},agolContentType:{WEBMAP:"Web Map",WEBSCENE:"Web Scene",IMAGE:"Image"},sortField:{DATE:"modified",TITLE:"title"},sortOrder:{ASC:"asc",DESC:"desc"},flickrLicenseStrings:{PUBLIC_DOMAIN:"PUBLIC_DOMAIN",COMMERCIAL:"COMMERCIAL",NON_COMMERCIAL:"NON_COMMERCIAL",ALL_RIGHTS_RESERVED:"ALL_RIGHTS_RESERVED",ANY:"ANY"},flickrLicenseVals:{PUBLIC_DOMAIN:[8,9,10],COMMERCIAL:[4,5,8,9,10],NON_COMMERCIAL:[1,2,4,5,8,9,10],ANY:[0,1,2,4,5,8,9,10]},userFetchError:{NO_USER:"NO_USER",NO_PHOTOS:"NO_PHOTOS",ERROR:"ERROR"},photoSettings:{maxWidth:1500,maxHeight:1e3,maxFileSize:1e7}},e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/browsePanel/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UPDATE_ALBUMS="UPDATE_ALBUMS",e.UPDATE_ALBUM_FETCH_STATUS="UPDATE_ALBUM_FETCH_STATUS",e.UPDATE_IMAGE_FETCH_STATUS="UPDATE_IMAGE_FETCH_STATUS",e.UPDATE_USERNAME="UPDATE_USERNAME",e.UPDATE_DISPLAYED_CONTENT="UPDATE_DISPLAYED_CONTENT",e.UPDATE_IMAGES="UPDATE_IMAGES",e.UPDATE_SELECTED_ALBUM="UPDATE_SELECTED_ALBUM",e.UPDATE_SEARCH_TYPE="UPDATE_SEARCH_TYPE",e.UPDATE_USER_SEARCH_TERM="UPDATE_USER_SEARCH_TERM",e.UPDATE_PHOTO_SEARCH_TERM="UPDATE_PHOTO_SEARCH_TERM",e.UPDATE_USER_LICENSE="UPDATE_USER_LICENSE",e.UPDATE_PHOTO_LICENSE="UPDATE_PHOTO_LICENSE",e.UPDATE_SEARCH_LOCATION="UPDATE_SEARCH_LOCATION",e.UPDATE_SEARCH_TERM="UPDATE_SEARCH_TERM",e.UPDATE_AUTHORIZED_CONTENT_TYPES="UPDATE_AUTHORIZED_CONTENT_TYPES",e.UPDATE_AVAILABLE_CONTENT_TYPES="UPDATE_AVAILABLE_CONTENT_TYPES",e.UPDATE_SELECTED_CONTENT_TYPES="UPDATE_SELECTED_CONTENT_TYPES",e.UPDATE_SORT_FIELD="UPDATE_SORT_FIELD",e.UPDATE_SORT_ORDER="UPDATE_SORT_ORDER"}),define("storymaps-react/common/builder/mediaPicker/browsePanel/reducer",["module","exports","redux","../constants","./actionTypes"],function(e,t,n,i,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){var e=arguments.length<=0||void 0===arguments[0]?w:arguments[0],t=arguments[1];if(!p(t,h["default"].providers.FLICKR))return e;var n,i;switch(t.type){case m.UPDATE_USER_SEARCH_TERM:n="userSearchTerm",i="term";break;case m.UPDATE_PHOTO_SEARCH_TERM:n="photoSearchTerm",i="term";break;case m.UPDATE_SEARCH_TYPE:n="selectedTab",i="type";break;case m.UPDATE_USER_LICENSE:n="userLicense",i="license";break;case m.UPDATE_PHOTO_LICENSE:n="photoLicense",i="license";break;default:return f(e,t)}return Object.assign({},e,s({},n,t.value[i]))}function u(){var e=arguments.length<=0||void 0===arguments[0]?C:arguments[0],t=arguments[1];return p(t,h["default"].providers.GOOGLE_PHOTOS)?f(e,t):e}function c(){var e=arguments.length<=0||void 0===arguments[0]?E:arguments[0],t=arguments[1];if(!p(t,h["default"].providers.ARCGIS))return e;var n,i;switch(t.type){case m.UPDATE_SEARCH_LOCATION:n="searchLocation",i="type";break;case m.UPDATE_SEARCH_TERM:n="searchStr",i="term";break;case m.UPDATE_SORT_FIELD:n="sortField",i="field";break;case m.UPDATE_SORT_ORDER:n="sortOrder",i="order";break;default:return f(e,t)}return Object.assign({},e,s({},n,t.value[i]))}function d(){
var e=arguments.length<=0||void 0===arguments[0]?x:arguments[0],t=arguments[1];return p(t,h["default"].providers.URL)?f(e,t):e}function p(e,t){return e&&e.value&&e.value.providerType===t?!0:!1}function f(e,t){var n,i;switch(t.type){case m.UPDATE_ALBUMS:n="albums",i="albums";break;case m.UPDATE_ALBUM_FETCH_STATUS:n="albumFetchStatus",i="fetchStatus";break;case m.UPDATE_IMAGE_FETCH_STATUS:n="imageFetchStatus",i="fetchStatus";break;case m.UPDATE_USERNAME:n="userName",i="userName";break;case m.UPDATE_DISPLAYED_CONTENT:n="displayedContent",i="displayedContent";break;case m.UPDATE_IMAGES:n="images",i="images";break;case m.UPDATE_SELECTED_ALBUM:n="selectedAlbum",i="selectedAlbum";break;default:return e}return Object.assign({},e,s({},n,t.value[i]))}Object.defineProperty(t,"__esModule",{value:!0});var h=a(i),m=o(r),v={albums:[],selectedAlbum:{},images:[],displayedContent:h["default"].galleryContent.ALBUMS,albumFetchStatus:h["default"].fetchStatus.NOT_FETCHED,imageFetchStatus:h["default"].fetchStatus.NOT_FETCHED,userName:""},g={selectedTab:h["default"].searchType.USER,selectedUser:"",userSearchTerm:"",userLicense:h["default"].flickrLicenseStrings.ANY,photoSearchTerm:"",photoLicense:h["default"].flickrLicenseStrings.COMMERCIAL},y={},b={displayedContent:h["default"].galleryContent.AGOL,searchLocation:h["default"].searchLocation.MINE,searchStr:"",sortField:h["default"].sortField.DATE,sortOrder:h["default"].sortOrder.DESC},_={},w=Object.assign({},v,g),C=Object.assign({},v,y),E=Object.assign({},v,b),x=Object.assign({},v,_);t["default"]=(0,n.combineReducers)({flickr:l,googlePhotos:u,agol:c,urlContent:d}),e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BROWSE_SELECT_PROVIDER="BROWSE_SELECT_PROVIDER"}),define("storymaps-react/common/builder/mediaPicker/reducer",["module","exports","redux","./browsePanel/reducer","./constants","./actionTypes"],function(e,t,n,i,r,o){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=s(i),u=s(r),c=a(o),d={browseSelectedProvider:u["default"].providers.ARCGIS,authorizedMedia:[]},p=function(){var e=arguments.length<=0||void 0===arguments[0]?d:arguments[0],t=arguments[1];switch(t.type){case c.BROWSE_SELECT_PROVIDER:return Object.assign({},e,{browseSelectedProvider:t.value});case c.UPDATE_AUTHORIZED_MEDIA:return Object.assign({},e,{authorizedMedia:t.value});default:return e}};t["default"]=(0,n.combineReducers)({ui:p,browsePanel:l["default"]}),e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/utils/Helper",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(e){var t=void 0;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:n})},r=function(){return Math.random().toString(36).substr(2,9)},o=function s(){for(var e="",t={}.hasOwnProperty,i=0;i<arguments.length;i++){var r=arguments[i];if(r){var o="undefined"==typeof r?"undefined":n(r);if("string"===o||"number"===o)e+=" "+r;else if($.isArray(r))e+=" "+s.apply(null,r);else if("object"===o)for(var a in r)t.call(r,a)&&r[a]&&(e+=" "+a)}}return e.substr(1)},a=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e};t["default"]={classnames:o,dataURItoBlob:i,getRandomId:r,stripTrailingSlash:a},e.exports=t["default"]}),define("storymaps-react/common/_resources/nls/media",{root:{mediaPicker:{browseToggle:{arcGIS:"ArcGIS",flickr:"Flickr",googlePhotos:"Google Photos",facebook:"Facebook",urls:"Link to Content",urls_short:"Link",contentType:{error:"No authorized media",starter:"In this part of the story, you can add ",listSeparator:",",OR:"or",IMAGE:"an image",VIDEO:"a video",WEBPAGE:"a webpage",WEBMAP:"a webmap",WEBSCENE:"a webscene"}},browsePanel:{providers:{searchingFor:"Searching for",albumsOf:"Albums of",noPhotosFound:"No photos matched your search. Please try again.",noItemsFound:"No items matched your search. Please try again.",noItemsInThisStory:"No content from ArcGIS has been added to this story yet.",limitReached:"Showing 100 items. If you didn't find what you need, try a keyword search.",galleryItems:{remove1:"Delete this unused image from your ArcGIS account.",remove2:"(You'll need to upload it again if you decide to use it later.)",modified:"Modified",uploaded:"Uploaded",by:"by"},googlePhotos:{searchAndBrowse:"Browse photos on Picasa or Google Photos"},flickr:{photostream:"Photostream",searchAndBrowse:"Search and browse photos on Flickr"},urlContent:{uploadHeaders:{generic:"Link to content on the web",imageOnly:"Link to an image on the web",imageAndVideo:"Link to an image or video on the web"},linkText:{starter:"In the box above,",hasVideo:"you can paste links or iframe code for videos from YouTube and Vimeo.",listStarterWithAlso:"You can also link directly to",listStarterWithoutAlso:"you can link directly to",listSeparator:",",OR:"or",IMAGE:"photos",WEBPAGE:["web pages","web applications"],ender:"When possible, use secure (https) links."},placeholder:"https://... or http://... or <iframe>",uploadErrors:{generic:"Something went wrong with the address entered. Please try again.",imageOnly:["You must use an image in this part of the story.","Please provide a link to an image (.jpg, .png, .gif), or choose an image from ArcGIS, Flickr, or Google Photos."],imageAndVideo:["You must use an image or video in this part of the story.","Please provide a link to an image (.jpg, .png, .gif) or a video on YouTube or Vimeo, or choose an image from ArcGIS, Flickr, or Google Photos."],badFormat:"The link to the ${media-type} you are trying to add is formatted incorrectly.",inaccessible:"The ${media-type} you are trying to add is missing or not accessible.",tryAgain:"Please check the address and try again.",mediaTypes:{VIDEO:"video",IMAGE:"image",generic:"media"}}}},sidePanel:{googlePhotos:{brand1:"Picasa",brand2:"Google Photos",placeholder:"Email or Picasa/Google+ ID",helpText:"You can add photos uploaded to ${brand1} or ${brand2} to your story. If you are using Google Photos, ${helpLinkText} to use your photos.",helpLinkText:"follow these steps",cannotFindUser:"Cannot find user",tryAgain:"Please try again."},flickr:{searchType:{account:"Flickr Account",text:"All Flickr"},placeholders:{user:"Search for account",userText:"Search this account for photos",text:"Search for photos"},errors:{cannotFindUser:"Cannot find user",noUserPhotos:"does not have any public photos.",didYouMean:"Did you mean",generalUserError:"Something went wrong when searching for user"},licenses:{"public":"Public Domain",commercial:"OK for Commercial Use",nonCommercial:"OK for Non-Commercial Use",reserved:"All Rights Reserved",any:"Any License"}},agol:{searchLocation:{thisStory:"This Story",agol:"ArcGIS Online",myOrg:"Organization",myContent:"My Content"},createContent:{or:"OR",dragAndDrop:"Drop an image here",uploadImage:"Browse for an image",agolInfo:"Images will be stored in your ArcGIS account and accessible inside your story.",saveBeforeUpload:"Once you save this story, you can upload images to ArcGIS here."},filterAndSort:{webmap:"Web Map",webscene:"Web Scene",image:"Image",date:"Date",title:"Title",search:"Search by keyword or ID"}}}}}},ar:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hr:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browseToggle/BrowseToggle",[],function(){}),define("lib-build/css!storymaps-react/common/builder/mediaPicker/browseToggle/BrowseToggle",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browseToggle/BrowseToggle",["module","exports","react","../utils/Helper","../constants","lib-build/i18n!../../../_resources/nls/media","lib-build/less!./BrowseToggle","lib-build/css!./BrowseToggle"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=f["default"].mediaPicker.browseToggle,g=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),m(t,[{key:"getLongerTitleClass",value:function(e,t){return e.length>t?"longer-title":""}},{key:"getShrinkableTitle",value:function(e,t){if(this.props.shortTitle){var n="title-text visible-xs-inline visible-sm-inline "+this.getLongerTitleClass(this.props.shortTitle,t),i="title-text hidden-xs hidden-sm "+this.getLongerTitleClass(this.props.title,t);return c["default"].createElement("span",{className:e},c["default"].createElement("span",{className:n},this.props.shortTitle),c["default"].createElement("span",{className:i},this.props.title))}var r=e+" title-text "+this.getLongerTitleClass(this.props.title,t);return c["default"].createElement("span",{className:r},this.props.title)}},{key:"getInlineTitle",value:function(){return c["default"].createElement("div",{className:"inline-title"},c["default"].createElement("span",{className:"fa "+this.props.inlineIcon}),this.getShrinkableTitle("",12))}},{key:"getLogoTitle",value:function(){return c["default"].createElement("div",{className:"provider-logo",alt:"this.props.title"})}},{key:"getPlainTitle",value:function(){return c["default"].createElement("div",null,this.getShrinkableTitle("plain-title",16))}},{key:"differentiateTitle",value:function(){return this.props.fullLogo?this.getLogoTitle():this.props.inlineIcon?this.getInlineTitle():this.getPlainTitle()}},{key:"render",value:function(){var e=d["default"].classnames(["browse-toggle",this.props.type,{selected:this.props.isSelected}]);return c["default"].createElement("div",{className:e,onClick:this.props.onClick},this.differentiateTitle())}}]),t}(c["default"].Component),y=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),m(t,[{key:"findText",value:function(e){var t=Object.keys(p["default"].contentType).find(function(t){return p["default"].contentType[t]===e});return v.contentType[t]}},{key:"getMediaList",value:function(e){var t=this;if(e)return this.props.authorizedMedia.map(function(n,i){var r="";return i===e-1?r=".":i===e-2?r=" "+v.contentType.OR+" ":e-2>i&&(r=v.contentType.listSeparator+" "),t.findText(n)+r}).join("")}},{key:"render",value:function(){var e=this.props.authorizedMedia?this.props.authorizedMedia.length:null;return e===Object.keys(p["default"].contentType).length?null:c["default"].createElement("div",{className:"mp-type-message"},c["default"].createElement("span",{className:"mp-type-details info",style:{display:e?"inline":"none"}},c["default"].createElement("span",{className:"fa fa-info-circle"}),c["default"].createElement("span",null,v.contentType.starter),c["default"].createElement("span",null,this.getMediaList(e))),c["default"].createElement("span",{className:"mp-type-error error",style:{display:e?"none":"inline"}},c["default"].createElement("span",{className:"fa fa-warning"}),c["default"].createElement("span",null,v.contentType.error)))}}]),t}(c["default"].Component),b=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),m(t,[{key:"getDivider",value:function(e){return e<this.props.browseToggles.length-1?c["default"].createElement("div",{className:"vert-divider",key:"divider-"+e}):null}},{key:"renderBrowseToggles",value:function(){var e=this,t=[];return this.props.browseToggles.forEach(function(n,i){t.push(c["default"].createElement(g,h({onClick:function(){e.props.selectProvider(n.type)},key:n.type,isLast:i===e.props.browseToggles.length-1,isSelected:n.type===e.props.browseSelectedProvider},n)));var r=e.getDivider(i);r&&t.push(r)}),t}},{key:"render",value:function(){return c["default"].createElement("div",{className:"mp-header"},c["default"].createElement(y,{authorizedMedia:this.props.authorizedMedia}),c["default"].createElement("div",{className:"mp-browse-toggles"},this.renderBrowseToggles()))}}]),t}(c["default"].Component);t["default"]=b,e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return{type:r.BROWSE_SELECT_PROVIDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.selectProvider=i;var r=n(t)}),define("storymaps-react/common/builder/mediaPicker/browseToggle/BrowseToggleContainer",["module","exports","react-redux","./BrowseToggle","./../actions","lib-build/i18n!../../../_resources/nls/media"],function(e,t,n,i,r,o){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=s(i),u=a(r),c=s(o),d=c["default"].mediaPicker.browseToggle,p=[{type:"arcgis",title:d.arcGIS,media:"geo",fullLogo:!0},{type:"flickr",title:d.flickr,media:"images",inlineIcon:"fa-flickr"},{type:"googlePhotos",title:d.googlePhotos,media:"images",inlineIcon:"fa-google"},{type:"urlContent",title:d.urls,shortTitle:d.urls_short,media:"links",inlineIcon:"fa-link"}],f=function(e){return{browseSelectedProvider:e.ui.browseSelectedProvider,browseToggles:p}},h=function(e){return{selectProvider:function(t){e(u.selectProvider(t))}}},m=(0,n.connect)(f,h)(l["default"]);t["default"]=m,e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/browsePanel/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return{type:b.UPDATE_ALBUMS,value:e}}function r(e){return{type:b.UPDATE_ALBUM_FETCH_STATUS,value:e}}function o(e){return{type:b.UPDATE_IMAGE_FETCH_STATUS,value:e}}function a(e){return{type:b.UPDATE_USERNAME,value:e}}function s(e){return{type:b.UPDATE_DISPLAYED_CONTENT,value:e}}function l(e){return{type:b.UPDATE_IMAGES,value:e}}function u(e){return{type:b.UPDATE_SELECTED_ALBUM,value:e}}function c(e){return{type:b.UPDATE_SEARCH_TYPE,value:e}}function d(e){return{type:b.UPDATE_USER_SEARCH_TERM,value:e}}function p(e){return{type:b.UPDATE_PHOTO_SEARCH_TERM,value:e}}function f(e){return{type:b.UPDATE_USER_LICENSE,value:e}}function h(e){return{type:b.UPDATE_PHOTO_LICENSE,value:e}}function m(e){return{type:b.UPDATE_SEARCH_LOCATION,value:e}}function v(e){return{type:b.UPDATE_SEARCH_TERM,value:e}}function g(e){return{type:b.UPDATE_SORT_FIELD,value:e}}function y(e){return{type:b.UPDATE_SORT_ORDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.updateAlbums=i,e.updateAlbumFetchStatus=r,e.updateImageFetchStatus=o,e.updateUsername=a,e.updateDisplayedContent=s,e.updateImages=l,e.updateSelectedAlbum=u,e.updateSearchType=c,e.updateUserSearchTerm=d,e.updatePhotoSearchTerm=p,e.updateUserLicense=f,e.updatePhotoLicense=h,e.updateSearchLocation=m,e.updateSearchTerm=v,e.updateSortField=g,e.updateSortOrder=y;var b=n(t)}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/Breadcrumbs",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/Breadcrumbs",["module","exports","react","lib-build/less!./Breadcrumbs"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=function(){return e.crumbs.map(function(t){var n=function(){e.onClick({link:t.link})};return t.active?o["default"].createElement("li",{key:t.id,onClick:n,className:"active"},t.title):o["default"].createElement("li",{key:t.id,onClick:n},o["default"].createElement("a",null,t.title))})};return o["default"].createElement("div",{className:"row flex-static",style:e.crumbs&&e.crumbs.length?null:{display:"none"}},o["default"].createElement("ol",{className:"breadcrumb"},t()))}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n);t["default"]=r,e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/BreadcrumbModel",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function r(e,t,i){n(this,r),this.id=e+"-"+t,this.title=e,this.link=t,this.active=this.link===i};t["default"]=i,e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/AGOLHeader",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/AGOLHeader",["module","exports","react","../../constants","lib-build/i18n!../../../../_resources/nls/media","lib-build/less!./AGOLHeader"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=d["default"].mediaPicker.browsePanel.sidePanel.agol,h=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u["default"].createElement("span",{className:"compound-map fa fa-stack"},u["default"].createElement("i",{className:"fa fa-map fa-inverse fa-stack-1x"}),u["default"].createElement("i",{className:"fa fa-map-o fa-stack-1x"}),u["default"].createElement("i",{className:"fa fa-circle fa-stack-1x auto-dim"}),u["default"].createElement("i",{className:"fa fa-map-marker fa-stack-1x auto-dim"}))}}]),t}(u["default"].Component),m=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"getIconSpan",value:function(){return this.props.value===c["default"].contentType.WEBMAP?u["default"].createElement(h,null):u["default"].createElement("span",{className:"fa fa-"+this.props.icon})}},{key:"render",value:function(){return u["default"].createElement("label",{className:"btn"+(this.props.checked?" active":""),htmlFor:this.props.id,onClick:this.props.onClick},this.getIconSpan(),u["default"].createElement("span",{className:"fa fa-check floating-check"}),u["default"].createElement("input",{onChange:this.props.onClick,checked:this.props.checked,type:"checkbox",name:"contentType",value:this.props.value,id:this.props.id}))}}]),t}(u["default"].Component),v=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"thisOnClick",value:function(e){var t=$(e.currentTarget.parentElement).find(".active input");if(!t.length)return void this.props.onKeyPress([]);var n=t.map(function(e,t){return t.value}).get();this.props.onKeyPress(n)}},{key:"isSelected",value:function(e){return this.props.selectedTypes.indexOf(e)>=0&&this.props.availTypes.indexOf(e)>=0}},{key:"renderToggle",value:function(e){var t=this,n=void 0;switch(e){case c["default"].contentType.WEBMAP:n=null;break;case c["default"].contentType.WEBSCENE:n="globe fa-2x";break;case c["default"].contentType.IMAGE:n="picture-o fa-2x";break;default:return console.warn("unknown toggle type",e),null}return u["default"].createElement(m,{id:"agol-"+e,key:"agol-"+e,icon:n,onClick:function(e){return t.thisOnClick(e)},value:e,label:f.filterAndSort[e],checked:this.isSelected(e)})}},{key:"render",value:function(){return u["default"].createElement("div",{className:"filter-toggle btn-group","data-toggle":"buttons"},this.props.availTypes.map(this.renderToggle.bind(this)))}}]),t}(u["default"].Component),g=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"vert-divider"})}}]),t}(u["default"].Component),y=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortClass",value:function(){return"fa-angle-"+(this.props.order===c["default"].sortOrder.ASC?"up":"down")}},{key:"render",value:function(){return u["default"].createElement("span",{className:"fa fa-stack calendar-sort"},u["default"].createElement("i",{className:"fa fa-stack-1x fa-lg fa-calendar-o"}),u["default"].createElement("i",{className:"fa fa-stack-1x "+this.getSortClass()}))}}]),t}(u["default"].Component),b=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortClass",value:function(){return"fa-sort-alpha-"+(this.props.order===c["default"].sortOrder.ASC?"asc":"desc")}},{key:"render",value:function(){return u["default"].createElement("span",{className:"fa inline "+this.getSortClass()})}}]),t}(u["default"].Component),_=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortIcon",value:function(){switch(this.props.value){case c["default"].sortField.DATE:return u["default"].createElement(y,{order:this.props.order});case c["default"].sortField.TITLE:return u["default"].createElement(b,{order:this.props.order})}}},{key:"render",value:function(){return u["default"].createElement("label",{className:"btn"+(this.props.checked?" active":""),htmlFor:this.props.id,onClick:this.props.onClick},this.getSortIcon(),u["default"].createElement("span",{className:"btn-label"},this.props.label),u["default"].createElement("input",{onChange:this.props.onClick,checked:this.props.checked,type:"radio",name:"contentType",value:this.props.value,id:this.props.id}))}}]),t}(u["default"].Component),w=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"thisOnClick",value:function(e,t,n){if(t===this.props.sortField){var i=this.switchSortOrder(n);return void this.props.onKeyPress.sortOrderChange(i,t)}this.props.onKeyPress.sortFieldChange(t,n)}},{key:"switchSortOrder",value:function(e){return e===c["default"].sortOrder.ASC?c["default"].sortOrder.DESC:c["default"].sortOrder.ASC}},{key:"isSelected",value:function(e){return this.props.sortField===c["default"].sortField[e]}},{key:"render",value:function(){var e=this;return u["default"].createElement("div",{className:"sort-toggle btn-group","data-toggle":"buttons"},u["default"].createElement(_,{id:"date-sort",onClick:function(t){return e.thisOnClick(t,c["default"].sortField.DATE,e.props.sortOrder.date)},value:c["default"].sortField.DATE,checked:this.isSelected("DATE"),order:this.props.sortOrder.date,label:f.filterAndSort.date}),u["default"].createElement(_,{id:"title-sort",onClick:function(t){return e.thisOnClick(t,c["default"].sortField.TITLE,e.props.sortOrder.title)},value:c["default"].sortField.TITLE,checked:this.isSelected("TITLE"),order:this.props.sortOrder.title,label:f.filterAndSort.title}))}}]),t}(u["default"].Component),C=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"agol-header"},u["default"].createElement(v,{availTypes:this.props.containerState.availableContentTypes,selectedTypes:this.props.containerState.selectedContentTypes,onKeyPress:this.props.onKeyPress.selectedContentTypesChange}),u["default"].createElement(g,null),u["default"].createElement(w,{onKeyPress:this.props.onKeyPress,sortField:this.props.sortField,sortOrder:{date:this.props.containerState.dateSortOrder,title:this.props.containerState.titleSortOrder}}))}}]),t}(u["default"].Component);t["default"]=C,e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/gallery/GalleryItem",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/gallery/GalleryItem",["module","exports","react","./../../constants","../../utils/Helper","dojo/topic","lib-build/i18n!../../../../_resources/nls/media","lib-build/less!./GalleryItem"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){var t=function(){e.onAlbumClicked({id:e.item.id,title:e.item.title})},n=function(){m["default"].publish("MEDIA-PICKER-SELECTION",{type:"image",width:e.item.width,height:e.item.height,url:e.item.picUrl})},i=function(){var t=e.item.type,n={type:t};"image"===t?Object.assign(n,{url:e.item.picUrl}):Object.assign(n,{id:e.item.id}),m["default"].publish("MEDIA-PICKER-SELECTION",n)},r=function(){switch(e.type){case f["default"].galleryContent.ALBUMS:return l();case f["default"].galleryContent.IMAGES:return u();case f["default"].galleryContent.AGOL:return c();default:return null}},o=function(){return{width:f["default"].galleryContent.ALBUM_HEIGHT+"px"}},a=function(e){var t;if(e.thumbWidth&&e.thumbHeight){var n=f["default"].galleryContent.IMG_HEIGHT/parseInt(e.thumbHeight,10);t=parseInt(e.thumbWidth,10)*n+"px"}return{width:t||"auto",maxWidth:t?null:1.5*f["default"].galleryContent.IMG_HEIGHT+"px"}},s=function(e){switch(e.type){case f["default"].contentType.WEBMAP:return"map-o";case f["default"].contentType.WEBSCENE:return"globe fa-2x";case f["default"].contentType.IMAGE:return"picture-o";default:return"star"}},l=function(){return p["default"].createElement(b,{thumbUrl:e.item.thumbUrl||e.item.thumbnail,title:e.item.name||e.item.title,onClick:t,startingClasses:"album",computedStyle:o(),showPopupDescription:!1})},u=function(){return p["default"].createElement(b,{thumbUrl:e.item.thumbUrl||e.item.thumbnail,title:e.item.name||e.item.title,onClick:n,startingClasses:"image",computedStyle:a(e.item),showPopupDescription:!1})},c=function(){return p["default"].createElement(b,{thumbUrl:e.item.thumbUrl||e.item.thumbnail,title:e.item.name||e.item.title,onItemDelete:e.onItemDelete,onClick:i,startingClasses:"image"+(e.item.usedInStory===!1?" unused":""),computedStyle:a(e.item),iconClass:s(e.item),showPopupDescription:!0,showOwner:e.showOwner,item:e.item})},d=r();return d}Object.defineProperty(t,"__esModule",{value:!0});var p=s(n),f=s(i),h=s(r),m=s(o),v=s(a),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=v["default"].mediaPicker.browsePanel.providers.galleryItems,b=function(e){function t(){return l(this,t),u(this,Object.getPrototypeOf(t).call(this))}return c(t,e),g(t,[{key:"getIconSpan",value:function(e){return p["default"].createElement("span",{className:"fa fa-lg fa-"+e})}},{key:"getTextClass",value:function(e){if(!e)return null;var t=e.match(/\s|\-/);return!t||t.index>12?"break-all":null}},{key:"getHoverText",value:function(){var e=this.props.item.modified,t=e&&e.toLocaleDateString?e.toLocaleDateString():e?e:"";t&&(t=this.props.item.agolType&&t?y.modified+" "+t:y.uploaded+" "+t);var n=this.props.item.owner&&this.props.showOwner?y.by+" "+this.props.item.owner:"",i=this.props.item.usedInStory===!1?"unused":null,r=["<div "+(i?'class="'+i+'"':"")+">",'<span class="item-popover-title">'+this.props.title+"</span>","<br>",this.props.item.displayName,n,"<br>",t,"</div>"];return this.props.item.snippet&&r.push("<br>",this.props.item.snippet),r.join(" ")}},{key:"getImgDiv",value:function(){return this.props.showPopupDescription?p["default"].createElement("div",{className:"img-wrapper"},p["default"].createElement("img",{"data-toggle":"popover","data-trigger":"hover","data-html":"true","data-placement":"left","data-content":this.getHoverText(),src:this.props.thumbUrl}),this.getDeleteButton()):p["default"].createElement("img",{src:this.props.thumbUrl})}},{key:"getDeleteButton",value:function(){var e=this;return this.props.onItemDelete&&this.props.item.usedInStory===!1?p["default"].createElement("span",{className:"remove",onClick:function(t){return e.props.onItemDelete(t,e.props.item)},"data-toggle":"popover","data-trigger":"hover","data-placement":"left","data-html":"true","data-content":y.remove1+" "+y.remove2},p["default"].createElement("span",{className:"fa fa-trash"})):null}},{key:"render",value:function(){var e=h["default"].classnames([this.props.startingClasses,"mp-gallery-item"]),t=this.props.iconClass?this.getIconSpan(this.props.iconClass):null;return p["default"].createElement("div",{onClick:this.props.onClick,className:e,style:this.props.computedStyle},this.getImgDiv(),p["default"].createElement("div",{className:"title"},t,p["default"].createElement("span",{className:this.getTextClass(this.props.title)},this.props.title)))}}]),t}(p["default"].Component);t["default"]=d,e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/gallery/Gallery",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/gallery/Gallery",["module","exports","react","react-dom","./GalleryItem","../../constants","lib-build/i18n!../../../../_resources/nls/media","lib-build/less!./Gallery"],function(e,t,n,i,r,o,a){"use strict";function s(e){
return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(){return f["default"].createElement("div",{className:"small-loader",role:"alert"})}function p(e){return f["default"].createElement("div",{className:"alert alert-danger",role:"alert"},f["default"].createElement("span",null,e.text))}Object.defineProperty(t,"__esModule",{value:!0});var f=s(n),h=s(i),m=s(r),v=s(o),g=s(a),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=g["default"].mediaPicker.browsePanel,_=function(e){function t(){return l(this,t),u(this,Object.getPrototypeOf(t).apply(this,arguments))}return c(t,e),y(t,[{key:"render",value:function(){return f["default"].createElement("div",{className:"placeholder"},this.props.text)}}]),t}(f["default"].Component),w=function(e){function t(){return l(this,t),u(this,Object.getPrototypeOf(t).call(this))}return c(t,e),y(t,[{key:"componentDidUpdate",value:function(){var e=$(h["default"].findDOMNode(this));$('.mp-gallery img[data-toggle="popover"]').popover({container:e,delay:{show:500,hide:200}}),$('.mp-gallery .remove[data-toggle="popover"]').popover({container:e,delay:{show:750,hide:200},template:'<div class="popover remove" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>'}),e.find(".placeholder").length&&e.addClass("flex-grow")}},{key:"renderItems",value:function(){var e=this;if(this.props.displayedContent===v["default"].galleryContent.ALBUMS&&this.props.providerProps.albumFetchStatus===v["default"].fetchStatus.FETCHING||this.props.displayedContent===v["default"].galleryContent.IMAGES&&this.props.providerProps.imageFetchStatus===v["default"].fetchStatus.FETCHING||this.props.displayedContent===v["default"].galleryContent.AGOL&&this.props.providerProps.imageFetchStatus===v["default"].fetchStatus.FETCHING)return f["default"].createElement(d,null);if(!this.props.items||!this.props.items.length){if(this.props.displayedContent===v["default"].galleryContent.IMAGES&&this.props.providerProps.imageFetchStatus===v["default"].fetchStatus.SUCCESS)return f["default"].createElement(p,{text:b.providers.noPhotosFound});if(this.props.displayedContent===v["default"].galleryContent.AGOL&&this.props.providerProps.imageFetchStatus===v["default"].fetchStatus.SUCCESS)return this.props.providerProps.searchLocation!==v["default"].searchLocation.STORY||this.props.containerState.storyResourceCount?f["default"].createElement(p,{text:b.providers.noItemsFound}):f["default"].createElement(p,{text:b.providers.noItemsInThisStory});var t=void 0;return(t=this.props)&&(t=t.containerState)&&(t=t.provider)?f["default"].createElement(_,{text:b.providers[t].searchAndBrowse||""}):null}return this.props.items.map(function(t){return f["default"].createElement(m["default"],{key:t.id,item:t,showOwner:e.props.providerProps&&e.props.providerProps.searchLocation!==v["default"].searchLocation.MINE,onItemDelete:e.props.onItemDelete,onAlbumClicked:e.props.onAlbumClicked,type:e.props.displayedContent})})}},{key:"renderLimit",value:function(){return this.props.displayedContent!==v["default"].galleryContent.AGOL||!this.props.items||this.props.items.length<100||this.props.providerProps.searchLocation===v["default"].searchLocation.STORY?void 0:f["default"].createElement("div",{className:"alert alert-info limit-reached"},b.providers.limitReached)}},{key:"render",value:function(){return f["default"].createElement("div",{className:"row mp-gallery"},this.renderItems(),this.renderLimit())}}]),t}(f["default"].Component);t["default"]=w,e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/Common",["module","exports","react","../../constants","../breadcrumbs/Breadcrumbs","../breadcrumbs/BreadcrumbModel","../breadcrumbs/AGOLHeader","../gallery/Gallery","lib-build/i18n!../../../../_resources/nls/media"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),y=u(s),b=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=b["default"].mediaPicker.browsePanel.providers,C=function(e){function t(e){c(this,t);var n=d(this,Object.getPrototypeOf(t).call(this,e));return n.onKeyPress=n.onKeyPress.bind(n),n.fetchAlbums=n.fetchAlbums.bind(n),n.onAlbumClicked=n.onAlbumClicked.bind(n),n.determineGalleryItems=n.determineGalleryItems.bind(n),n.getBreadcrumbs=n.getBreadcrumbs.bind(n),n.onBreadcrumbClicked=n.onBreadcrumbClicked.bind(n),n}return p(t,e),_(t,[{key:"onKeyPress",value:function(e){13===e.charCode&&this.fetchAlbums()}},{key:"fetchAlbums",value:function(e){var t=this,n=e||this.props.searchValue||this.props.containerState.searchValue;return this.beforeAlbumFetched(),n?void this.props.connector.getProviderAlbums(n).then(function(e){t.onAlbumSuccess(n,e)})["catch"](function(e){console.warn(e),t.props.updateAlbumFetchStatus({fetchStatus:h["default"].fetchStatus.ERROR}),t.props.handleUserError&&t.props.handleUserError(e)}):void this.props.updateAlbumFetchStatus({fetchStatus:h["default"].fetchStatus.ERROR})}},{key:"beforeAlbumFetched",value:function(){this.props.updateImages({images:[]}),this.props.updateAlbums({albums:[]}),this.props.updateDisplayedContent({displayedContent:h["default"].galleryContent.ALBUMS}),this.props.updateAlbumFetchStatus({fetchStatus:h["default"].fetchStatus.FETCHING}),this.props.updateUserSearchTerm?this.props.updateUserSearchTerm({term:""}):null,this.props.updateSelectedAlbum({selectedAlbum:{}})}},{key:"onAlbumSuccess",value:function(e,t){this.props.updateAlbumFetchStatus({fetchStatus:h["default"].fetchStatus.SUCCESS}),this.props.updateUsername({userName:t.username||e}),this.props.updateAlbums({albums:t.albums||t}),this.props.handleAlbumSuccess&&this.props.handleAlbumSuccess()}},{key:"onAlbumClicked",value:function(e){var t=this;return e.title===this.props.provider.selectedAlbum.title&&this.props.provider.images.length?void this.props.updateDisplayedContent({displayedContent:h["default"].galleryContent.IMAGES}):(this.beforeImageFetch(),void this.props.connector.getItemsInAlbum(e.id,this.props.imageQueryParams).then(function(n){t.handleImageReturn(n),t.props.updateSelectedAlbum({selectedAlbum:e}),t.props.onChange.userTextInput?t.props.onChange.userTextInput({target:{value:""}}):null,t.props.updateUserSearchTerm?t.props.updateUserSearchTerm({term:""}):null})["catch"](function(e){console.log(e),t.props.updateImageFetchStatus({fetchStatus:h["default"].fetchStatus.ERROR})}))}},{key:"beforeImageFetch",value:function(){this.props.updateImages({images:[]}),this.props.updateImageFetchStatus({fetchStatus:h["default"].fetchStatus.FETCHING}),this.props.updateDisplayedContent({displayedContent:h["default"].galleryContent.IMAGES})}},{key:"handleImageReturn",value:function(e){this.props.updateImageFetchStatus({fetchStatus:h["default"].fetchStatus.SUCCESS}),this.props.updateImages({images:e})}},{key:"determineGalleryItems",value:function(){switch(this.props.provider.displayedContent){case h["default"].galleryContent.ALBUMS:return this.props.provider.albums;case h["default"].galleryContent.IMAGES:return this.props.provider.images;case h["default"].galleryContent.AGOL:return this.props.provider.images;default:return[]}}},{key:"getSearchLabel",value:function(e){return w.searchingFor+' " '+e+' "'}},{key:"getBreadcrumbs",value:function(){var e=[],t=this.props.provider,n=this.getSearchLabel(t.photoSearchTerm),i=t.selectedAlbum.id?t.selectedAlbum.title:this.getSearchLabel(t.userSearchTerm);return t.selectedTab&&t.selectedTab===h["default"].searchType.TEXT?t.photoSearchTerm?(e.push(new v["default"](n,h["default"].galleryContent.IMAGES,t.displayedContent)),e):e:(t.albumFetchStatus!==h["default"].fetchStatus.ERROR&&(t.albums.length&&e.push(new v["default"](w.albumsOf+" "+t.userName,h["default"].galleryContent.ALBUMS,t.displayedContent)),t.imageFetchStatus!==h["default"].fetchStatus.ERROR&&(t.images.length||t.selectedAlbum.id||t.userSearchTerm)&&(i=e.push(new v["default"](i,h["default"].galleryContent.IMAGES,t.displayedContent)))),e)}},{key:"onBreadcrumbClicked",value:function(e){this.props.updateDisplayedContent({displayedContent:e.link})}},{key:"getGalleryHeader",value:function(){switch(this.props.provider.displayedContent){case h["default"].galleryContent.ALBUMS:case h["default"].galleryContent.IMAGES:return f["default"].createElement(m["default"],{crumbs:this.getBreadcrumbs(),onClick:this.onBreadcrumbClicked});case h["default"].galleryContent.AGOL:return f["default"].createElement(g["default"],{containerState:this.props.containerState,sortField:this.props.provider.sortField,sortOrder:this.props.provider.sortOrder,onKeyPress:this.props.onKeyPress})}}},{key:"render",value:function(){return f["default"].createElement("div",{style:this.props.display?null:{display:"none"},className:"browse-panel-container"},f["default"].createElement("div",{className:"column-sidepanel arrow-box"},f["default"].createElement(this.props.sidePanel,{onChange:this.props.onChange,onClear:this.props.onClear||null,onKeyPress:this.props.onKeyPress||this.onKeyPress,containerState:this.props.containerState,providerProps:this.props.provider})),f["default"].createElement("div",{className:"column-gallery"},this.getGalleryHeader(),f["default"].createElement(y["default"],{containerState:this.props.containerState,providerProps:this.props.provider,onAlbumClicked:this.onAlbumClicked,onItemDelete:this.props.onKeyPress&&this.props.onKeyPress.onItemDelete?this.props.onKeyPress.onItemDelete:null,items:this.determineGalleryItems(),displayedContent:this.props.provider.displayedContent})))}}]),t}(f["default"].Component);t["default"]=C,e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanel",[],function(){}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelGooglePhotos",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelGooglePhotos",["module","exports","react","react-dom","lib-build/i18n!../../../../_resources/nls/media","lib-build/less!./SidePanel","lib-build/less!./SidePanelGooglePhotos"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=d["default"].mediaPicker.browsePanel.sidePanel.googlePhotos,h=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"},t=f.cannotFindUser+" "+this.props.triedUser+". "+f.tryAgain;return u["default"].createElement("div",{className:"alert alert-danger",role:"alert",style:e},u["default"].createElement("span",null,t))}}]),t}(u["default"].Component),m=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.setFocus&&($(c["default"].findDOMNode(this)).parents(".modal").hasClass("in")?c["default"].findDOMNode(this.refs.textInput).focus():setTimeout(function(){c["default"].findDOMNode(e.refs.textInput).focus()},500))}},{key:"render",value:function(){var e=this,t="input-group search";return this.props.disabled&&(t+=" disabled"),u["default"].createElement("div",{className:t},u["default"].createElement("div",{className:"input-group-addon"},u["default"].createElement("span",{className:"fa fa-"+this.props.icon})),u["default"].createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),u["default"].createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},u["default"].createElement("span",{className:"fa fa-remove"})),u["default"].createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},u["default"].createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(u["default"].Component),v=function(e){function t(){return a(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),p(t,[{key:"getHelpSpans",value:function(){var e=f.helpText.split(/\$\{(.+?)\}/);return e.map(function(e,t){var n="googlehelp-"+t,i=e;return f[e]&&(i=f[e]),0===e.indexOf("brand")?u["default"].createElement("span",{key:n},u["default"].createElement("strong",null,i)):"helpLinkText"===e?u["default"].createElement("a",{key:n,href:app.cfg.BUILDER_LINKS.picasaHelp,target:"_blank"},u["default"].createElement("strong",null,i)):u["default"].createElement("span",{key:n},i)})}},{key:"render",value:function(){var e=""!==this.props.containerState.userErrorType;return u["default"].createElement("div",{className:"mp-sidepanel"},u["default"].createElement(m,{icon:"picture-o",placeholder:f.placeholder,value:this.props.containerState.searchValue,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,onClear:this.props.onClear}),u["default"].createElement(h,{display:e,status:this.props.containerState.userErrorType,triedUser:this.props.containerState.searchValue}),u["default"].createElement("div",{className:"help-text"},this.getHelpSpans()))}}]),t}(u["default"].Component);t["default"]=v,e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/connectors/GooglePhotos",["exports","jquery"],function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.GooglePhotosConnector=void 0;var i=n(t),r=function(){var e=function(e){return new Promise(function(t,n){var r=document.location.protocol+"//picasaweb.google.com/data/feed/base/user/"+e+"?alt=json&access=public";return e?void i["default"].ajax({url:r,dataType:"jsonp",timeout:4e3}).then(function(e){var n=[];e&&e.feed&&e.feed.entry&&i["default"].each(e.feed.entry,function(e,t){n.push({id:t.id.$t,title:t.title.$t||"",thumbUrl:t.media$group.media$thumbnail[0].url})}),t(n)},function(e){n(e)}):void n()})},t=function(e,t){return new Promise(function(n,r){var o="";return e?(o=e.replace("/data/entry/base/","/data/feed/base/")+"&kind=photo&fields=title,subtitle,icon,entry(title,gphoto:numphotos,media:group(media:content,media:thumbnail,media:description),georss:where)",o+="&imgmax=1600",o+=t.maxPictures?"&max-results="+t.maxPictures:"",void i["default"].getJSON(o,function(e){var t=[];i["default"].each(e.feed.entry,function(e,n){var i=n.media$group.media$content[0].url||"",r=n.media$group.media$thumbnail[2].url||"";i=i.replace("https://","http://"),r=r.replace("https://","http://");var o={name:n.media$group.media$description.$t||"",description:"",picUrl:i,thumbUrl:r,lat:"",lng:"",height:n.media$group.media$content[0].height,width:n.media$group.media$content[0].width,isVideo:!1,id:i,type:"googlePhotos"};n.georss$where&&n.georss$where.gml$Point&&n.georss$where.gml$Point.gml$pos&&n.georss$where.gml$Point.gml$pos.$t&&2==n.georss$where.gml$Point.gml$pos.$t.split(" ").length&&(o.lat=n.georss$where.gml$Point.gml$pos.$t.split(" ")[0],o.lng=n.georss$where.gml$Point.gml$pos.$t.split(" ")[1]),t.push(o)}),n(t)}).fail(function(e){r(e)})):void r()})};return{getProviderAlbums:e,getItemsInAlbum:t}}();e.GooglePhotosConnector=r}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/GooglePhotosContainer",["module","exports","react","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelGooglePhotos","../../connectors/GooglePhotos"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function c(e){return e&&e.__esModule?e:{"default":e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=u(r),v=c(o),g=c(a),y=c(s),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){d(this,t);var e=p(this,Object.getPrototypeOf(t).call(this));return e.state={searchValue:"",userErrorType:"",provider:v["default"].providers.GOOGLE_PHOTOS},e.onChange=e.onChange.bind(e),e}return f(t,e),_(t,[{key:"onChange",value:function(e){this.setState({searchValue:e.target.value,userErrorType:""})}},{key:"onClear",value:function(e){var t=this;13===e.charCode&&(this.setState({searchValue:!0}),this.onChange({target:{value:""}}),setTimeout(function(){t.refs.Common.onKeyPress({charCode:13})},10))}},{key:"handleUserError",value:function(e){this.setState({userErrorType:e?e.reason:v["default"].userFetchError.ERROR})}},{key:"render",value:function(){return h["default"].createElement(g["default"],b({ref:"Common",sidePanel:y["default"],connector:l.GooglePhotosConnector,imageQueryParams:{maxPictures:200},onChange:this.onChange,onClear:this.onClear.bind(this),containerState:this.state,handleUserError:this.handleUserError.bind(this)},this.props))}}]),t}(h["default"].Component),C=function(e){return{provider:e.browsePanel.googlePhotos}},E=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:v["default"].providers.GOOGLE_PHOTOS});e(t(i))};return{updateAlbums:function(e){t(m.updateAlbums,e)},updateAlbumFetchStatus:function(e){t(m.updateAlbumFetchStatus,e)},updateUsername:function(e){t(m.updateUsername,e)},updateDisplayedContent:function(e){t(m.updateDisplayedContent,e)},updateImages:function(e){t(m.updateImages,e)},updateSelectedAlbum:function(e){t(m.updateSelectedAlbum,e)},updateImageFetchStatus:function(e){t(m.updateImageFetchStatus,e)}}};t["default"]=(0,i.connect)(C,E)(w),e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelFlickr",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelFlickr",["module","exports","react","react-dom","../../constants","lib-build/i18n!../../../../_resources/nls/media","lib-build/less!./SidePanel","lib-build/less!./SidePanelFlickr"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=f["default"].mediaPicker.browsePanel.sidePanel.flickr,v=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),h(t,[{key:"thisOnClick",value:function(e){var t=$(e.currentTarget).find("input").val();t!==this.props.selectedTab&&this.props.onChange({type:t})}},{key:"isSelected",value:function(e){return this.props.selectedTab===p["default"].searchType[e]}},{key:"render",value:function(){var e=this;return c["default"].createElement("div",{className:"type-toggle btn-group","data-toggle":"buttons"},c["default"].createElement("label",{className:"btn btn-default"+(this.isSelected("USER")?" active":""),htmlFor:"flickr-user",onClick:function(t){return e.thisOnClick(t)}},m.searchType.account,c["default"].createElement("input",{onChange:function(t){return e.thisOnClick(t)},type:"radio",name:"searchType",id:"flickr-user",value:p["default"].searchType.USER,checked:this.isSelected("USER")})),c["default"].createElement("label",{className:"btn btn-default"+(this.isSelected("TEXT")?" active":""),htmlFor:"flickr-text",onClick:function(t){return e.thisOnClick(t)}},m.searchType.text,c["default"].createElement("input",{onChange:function(t){return e.thisOnClick(t)},type:"radio",name:"searchType",value:p["default"].searchType.TEXT,id:"flickr-text",checked:this.isSelected("TEXT")})))}}]),t}(c["default"].Component),g=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),h(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.setFocus&&($(d["default"].findDOMNode(this)).parents(".modal").hasClass("in")?d["default"].findDOMNode(this.refs.textInput).focus():setTimeout(function(){d["default"].findDOMNode(e.refs.textInput).focus()},500))}},{key:"render",value:function(){var e=this,t="input-group search";return this.props.disabled&&(t+=" disabled"),c["default"].createElement("div",{className:t},c["default"].createElement("div",{className:"input-group-addon"},c["default"].createElement("span",{className:"fa fa-"+this.props.icon})),c["default"].createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),c["default"].createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},c["default"].createElement("span",{className:"fa fa-remove"})),c["default"].createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},c["default"].createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(c["default"].Component),y=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),h(t,[{key:"getOptions",value:function(){var e=[c["default"].createElement("option",{value:p["default"].flickrLicenseStrings.PUBLIC_DOMAIN,key:p["default"].flickrLicenseStrings.PUBLIC_DOMAIN},m.licenses["public"]),c["default"].createElement("option",{value:p["default"].flickrLicenseStrings.COMMERCIAL,key:p["default"].flickrLicenseStrings.COMMERCIAL},m.licenses.commercial),c["default"].createElement("option",{value:p["default"].flickrLicenseStrings.NON_COMMERCIAL,key:p["default"].flickrLicenseStrings.NON_COMMERCIAL},m.licenses.nonCommercial)];return this.props.searchType===p["default"].searchType.USER&&e.push(c["default"].createElement("option",{value:p["default"].flickrLicenseStrings.ANY,key:p["default"].flickrLicenseStrings.ANY},m.licenses.any)),e}},{key:"render",value:function(){return c["default"].createElement("div",{className:"form-group"+(this.props.disabled?" disabled":"")},c["default"].createElement("label",{htmlFor:this.props.searchType+"-license"},"License: "),c["default"].createElement("select",{id:this.props.searchType+"-license",onChange:this.props.onChange,disabled:this.props.disabled,className:"license form-control",defaultValue:this.props.license},this.getOptions()))}}]),t}(c["default"].Component),b=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),h(t,[{key:"render",value:function(){var e,t={display:this.props.display?"block":"none"};switch(this.props.status){case p["default"].userFetchError.NO_USER:case p["default"].userFetchError.ERROR:e=m.errors.cannotFindUser+" "+this.props.triedUser+". ";break;case p["default"].userFetchError.NO_PHOTOS:e=this.props.triedUser+" "+m.errors.noUserPhotos+" ";break;default:e=m.errors.generalUserError+" "+this.props.triedUser+"."}var n=this.props.altUsername;this.props.altNSID&&(n+=" ("+this.props.altNSID+")");var i={display:this.props.altUsername?"inline":"none"};return c["default"].createElement("div",{className:"alert alert-danger",role:"alert",style:t},c["default"].createElement("span",null,e),c["default"].createElement("div",{style:i},c["default"].createElement("span",null,m.errors.didYouMean," "),c["default"].createElement("a",{href:"#",className:"alert-link",onClick:this.props.tryDifferentUser},n),"?"))}}]),t}(c["default"].Component),_=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),h(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"},t=""!==this.props.containerState.userErrorType;return c["default"].createElement("div",{style:e},c["default"].createElement(g,{icon:"user",setFocus:this.props.containerState.focusUserNameInput&&this.props.disable.textSearch,value:this.props.containerState.userNameInputValue,placeholder:m.placeholders.user,loading:this.props.albumLoading,onChange:this.props.onChange.userNameInput,onKeyPress:this.props.onKeyPress.userNameKeypress,onClear:this.props.onKeyPress.userNameClear}),c["default"].createElement(b,{display:t,triedUser:this.props.containerState.userNameInputValue,status:this.props.containerState.userErrorType,altUsername:this.props.containerState.altUsername,altNSID:this.props.containerState.altNSID,tryDifferentUser:this.props.onKeyPress.tryDifferentUser}),c["default"].createElement(g,{icon:"picture-o",setFocus:this.props.containerState.focusUserTextInput&&!this.props.disable.textSearch,disabled:this.props.disable.textSearch,placeholder:m.placeholders.userText,value:this.props.containerState.userTextInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.userTextInput,onKeyPress:this.props.onKeyPress.userTextKeypress,onClear:this.props.onKeyPress.userTextClear}),c["default"].createElement(y,{disabled:this.props.disable.licenseSearch,onChange:this.props.onKeyPress.userLicenseChange,searchType:p["default"].searchType.USER,license:this.props.license}))}}]),t}(c["default"].Component),w=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),h(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"};return c["default"].createElement("div",{style:e},c["default"].createElement(g,{icon:"picture-o",setFocus:this.props.containerState.focusTextInput,placeholder:m.placeholders.text,value:this.props.containerState.textInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.textInput,onKeyPress:this.props.onKeyPress.textKeypress,onClear:this.props.onKeyPress.textClear}),c["default"].createElement(y,{onChange:this.props.onKeyPress.photoLicenseChange,searchType:p["default"].searchType.TEXT,license:this.props.license}))}}]),t}(c["default"].Component),C=function(e){function t(){return s(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),h(t,[{key:"render",value:function(){var e=this.props.providerProps.selectedTab===p["default"].searchType.USER?!0:!1,t=this.props.providerProps.selectedTab===p["default"].searchType.TEXT?!0:!1,n=!this.props.providerProps.userName||this.props.providerProps.userName.toLowerCase()!==this.props.containerState.userNameInputValue.toLowerCase(),i=n||""===this.props.providerProps.userSearchTerm||this.props.providerProps.userSearchTerm!==this.props.containerState.userTextInputValue;return c["default"].createElement("div",{className:"mp-sidepanel"},c["default"].createElement(v,{selectedTab:this.props.providerProps.selectedTab,onChange:this.props.onKeyPress.searchType}),c["default"].createElement(_,{albumLoading:this.props.providerProps.albumFetchStatus===p["default"].fetchStatus.FETCHING,imageLoading:this.props.providerProps.imageFetchStatus===p["default"].fetchStatus.FETCHING&&this.props.providerProps.userSearchTerm,userError:this.props.containerState.userErrorType,display:e,disable:{textSearch:n,licenseSearch:i},license:this.props.providerProps.userLicense,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,containerState:this.props.containerState}),c["default"].createElement(w,{imageLoading:this.props.providerProps.imageFetchStatus===p["default"].fetchStatus.FETCHING,display:t,license:this.props.providerProps.photoLicense,
onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,containerState:this.props.containerState}))}}]),t}(c["default"].Component);t["default"]=C,e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/config",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={APP_IS_PORTAL:!1,FLICKR_API_KEY:"750b36a2ac65a72e03cf9cef06d79f45",YOUTUBE_API_KEY:"AIzaSyDevTFP16nz6sA-akiOVi6wWXiplJnQ4qw",YOUTUBE_DISABLE_ON_PORTAL:!0},e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/connectors/Flickr",["exports","jquery","../config","lib-build/i18n!../../../_resources/nls/media","../constants"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.FlickrConnector=void 0;var a=o(t),s=o(n),l=o(i),u=o(r),c=l["default"].mediaPicker.browsePanel.providers.flickr,d=function(){var e=null,t=null,n={per_page:500},i=function(t){return new Promise(function(n,i){var a=t.indexOf("@N");return a>0&&a===t.length-4?(e=t,void r(n,i)):void b("flickr.people.findByUsername",{username:t}).done(function(a){a&&"ok"===a.stat?(e=a.user.id,r(n,i,t,a.user)):w(t).then(function(e){return o(u["default"].userFetchError.NO_USER,i,e)}).fail(function(e){console.warn(e),i({reason:u["default"].userFetchError.ERROR})})})})},r=function(e,t,n,i){g().then(function(r,a){var s=r[0].photosets.photoset;l(s,a[0].photos.photo[0]),s&&s.length?e({sets:y(s),username:i&&i.username&&i.username._content?i.username._content:null}):n?w(n).then(function(e){return o(u["default"].userFetchError.NO_PHOTOS,t,e)}).fail(function(e){console.warn(e),t({reason:u["default"].userFetchError.NO_PHOTOS})}):t({reason:u["default"].userFetchError.NO_PHOTOS})})},o=function(e,t,n){if(n&&"ok"===n.stat){var i=n.user.username._content;b("flickr.people.findByUsername",{username:i}).then(function(r){t(r&&"ok"===r.stat?{reason:e||u["default"].userFetchError.ERROR,alternate:i}:{reason:e||u["default"].userFetchError.ERROR,alternate:i,nsid:n.user.id})})}else t({reason:e||u["default"].userFetchError.ERROR})},l=function(e,n){return n&&(t=n.id,e.unshift(n)),e},d=function(e,n){return e===t?p(n):h("flickr.photosets.getPhotos",Object.assign({photoset_id:e},n))},p=function(t){return h("flickr.people.getPhotos",Object.assign({user_id:e},t))},f=function(t){return t.user&&Object.assign(t,{user_id:e}),h("flickr.photos.search",t)},h=function(e,t){return new Promise(function(i,r){var o=Object.assign({extras:"geo,description,license,url_s,url_n,url_m,url_l"},n,t);b(e,o).done(function(e){e&&"ok"===e.stat||r();var t=[],n=[];e.photos?n=e.photos.photo:e.photoset&&(n=e.photoset.photo),a["default"].each(n,function(e,n){var i=v(n);t.push(Object.assign({name:n.title||"",description:n.description?n.description._content||"":"",picUrl:n.url_l||n.url_m||m(n,"b"),lat:n.latitude||"",lng:n.longitude||"",height:n.height_l||n.height_m,width:n.width_l||n.width_m,isVideo:!1,id:n.id,license:n.license,type:"flickr"},i))}),i(t)})})},m=function(e,t){return"http://farm"+e.farm+".static.flickr.com/"+e.server+"/"+e.id+"_"+e.secret+"_"+t+".jpg"},v=function(e){var t,n=.8*u["default"].galleryContent.IMG_HEIGHT;if(e.url_s&&e.height_s>=n)t="s";else if(e.url_n&&e.height_n>=n)t="n";else if(e.url_m&&e.height_m>=n)t="m";else{if(!e.url_l)return{thumbUrl:m(e,"m")};t="l"}return{thumbUrl:e["url_"+t],thumbWidth:e["width_"+t],thumbHeight:e["height_"+t]}},g=function(){return a["default"].when(b("flickr.photosets.getList",Object.assign({},n,{user_id:e,primary_photo_extras:"url_q"})),b("flickr.people.getPhotos",Object.assign({},n,{user_id:e,per_page:1,extras:"url_q"})))},y=function(e){return a["default"].each(e,function(e,t){t._thumbnail=t.url_q||(t.primary_photo_extras?t.primary_photo_extras.url_q:!1)||"http://farm2.static.flickr.com/"+t.server+"/"+(t.primary||t.id)+"_"+t.secret+"_q.jpg"}),e},b=function(e,t){var n="https://api.flickr.com/services/rest/?method="+e+"&format=json&api_key="+s["default"].FLICKR_API_KEY+(t?"&"+a["default"].param(t):"")+"&jsoncallback=?";return a["default"].getJSON(n)},_=function(e){return new Promise(function(n,r){i(e).then(function(e){var i=[];e.sets.forEach(function(e){var n={id:e.id,thumbUrl:e._thumbnail,title:e.id===t?c.photostream:e.title._content,details:{photos:e.photos}};i.push(n)}),n({albums:i,username:e.username})})["catch"](function(e){r(e)})})},w=function(e){return b("flickr.urls.lookupUser",{url:"http://www.flickr.com/photos/"+e})};return{getProviderAlbums:_,getItemsInAlbum:d,photoSearch:f}}();e.FlickrConnector=d}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/FlickrContainer",["module","exports","react","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelFlickr","../../connectors/Flickr"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function c(e){return e&&e.__esModule?e:{"default":e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=u(r),v=c(o),g=c(a),y=c(s),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){d(this,t);var e=p(this,Object.getPrototypeOf(t).call(this));return e.state={userNameInputValue:"",userTextInputValue:"",textInputValue:"",userErrorType:"",altUsername:"",altNSID:"",focusUserNameInput:!1,focusUserTextInput:!1,focusTextInput:!1,provider:v["default"].providers.FLICKR},e.onChange={userNameInput:e.userNameInput.bind(e),userTextInput:e.userTextInput.bind(e),textInput:e.textInput.bind(e)},e.onKeyPress={searchType:e.searchTypeSubmit.bind(e),userNameKeypress:e.userNameKeypress.bind(e),userTextKeypress:e.userTextKeypress.bind(e),tryDifferentUser:e.tryDifferentUser.bind(e),userNameClear:e.userNameClear.bind(e),userTextClear:e.userTextClear.bind(e),textClear:e.textClear.bind(e),textKeypress:e.textKeypress.bind(e),userLicenseChange:e.userLicenseChange.bind(e),photoLicenseChange:e.photoLicenseChange.bind(e)},e}return f(t,e),_(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.provider.selectedTab===v["default"].searchType.USER,n=e.display&&!this.props.display,i=this.props.provider.selectedTab!==e.provider.selectedTab;this.setState({focusUserNameInput:t&&(n||i||e.openFocus),focusUserTextInput:t&&(n||i||e.openFocus),focusTextInput:!t&&(n||i||e.openFocus)})}},{key:"userNameInput",value:function(e){this.setState({userNameInputValue:e.target.value,userErrorType:"",altUsername:"",altNSID:""})}},{key:"userTextInput",value:function(e){this.setState({userTextInputValue:e.target.value})}},{key:"textInput",value:function(e){this.setState({textInputValue:e.target.value})}},{key:"userNameKeypress",value:function(e){if(13===e.charCode){if(this.userTextInput({target:{value:""}}),!this.state.userNameInputValue)return this.refs.Common.beforeAlbumFetched(),void this.refs.Common.onAlbumSuccess("",[]);this.refs.Common.fetchAlbums(this.state.userNameInputValue)}}},{key:"userTextKeypress",value:function(e){13===e.charCode&&this.userTextSubmit()}},{key:"textKeypress",value:function(e){13===e.charCode&&this.photoTextSubmit()}},{key:"userNameClear",value:function(e){var t=this;13===e.charCode&&(this.userNameInput({target:{value:""}}),this.setState({focusUserNameInput:!0}),setTimeout(function(){t.userNameKeypress({charCode:13})},10))}},{key:"userTextClear",value:function(e){var t=this;13===e.charCode&&(this.userTextInput({target:{value:""}}),this.setState({focusUserTextInput:!0}),setTimeout(function(){t.userTextKeypress({charCode:13})},10))}},{key:"textClear",value:function(e){var t=this;13===e.charCode&&(this.setState({focusTextInput:!0}),this.textInput({target:{value:""}}),setTimeout(function(){t.textKeypress({charCode:13})},10))}},{key:"userTextSubmit",value:function(e){var t=this.state.userTextInputValue.trim();if(!t)return this.props.updateUserSearchTerm({term:""}),this.props.updateImages({images:[]}),void this.props.updateDisplayedContent({displayedContent:v["default"].galleryContent.ALBUMS});e=e||{},this.props.updateUserSearchTerm({term:t}),Object.assign(e,{text:t}),this.props.updateSelectedAlbum({selectedAlbum:{}});var n=v["default"].flickrLicenseVals[this.props.provider.userLicense].toString();this.imageFetch(Object.assign({user:!0,license:n},e))}},{key:"photoTextSubmit",value:function(e){var t=this.state.textInputValue.trim();if(this.props.updatePhotoSearchTerm({term:t}),!t)return this.props.updateImages({images:null}),void this.props.updateImageFetchStatus({fetchStatus:v["default"].fetchStatus.NOT_FETCHED});var n=v["default"].flickrLicenseVals[this.props.provider.photoLicense].toString();this.imageFetch(Object.assign({text:t,license:n},e))}},{key:"imageFetch",value:function(e){var t=this;this.refs.Common.beforeImageFetch(),l.FlickrConnector.photoSearch(e).then(function(e){return t.refs.Common.handleImageReturn(e)})}},{key:"userLicenseChange",value:function(e){var t=e.target.value;this.props.updateUserLicense({license:t}),this.userTextSubmit({license:v["default"].flickrLicenseVals[t].toString()})}},{key:"photoLicenseChange",value:function(e){var t=e.target.value;this.props.updatePhotoLicense({license:t}),this.photoTextSubmit({license:v["default"].flickrLicenseVals[t].toString()})}},{key:"searchTypeSubmit",value:function(e){var t=this;switch(this.props.updateSearchType(e),this.setState({userNameInputValue:this.props.provider.userName,userTextInputValue:this.props.provider.userSearchTerm,textInputValue:this.props.provider.photoSearchTerm,userErrorType:"",altUsername:"",altNSID:""}),this.props.updateImages({images:[]}),this.props.updateAlbumFetchStatus({fetchStatus:v["default"].fetchStatus.NOT_FETCHED}),this.props.updateImageFetchStatus({fetchStatus:v["default"].fetchStatus.NOT_FETCHED}),e.type){case v["default"].searchType.USER:if(!this.props.provider.userName)return;this.props.provider.userSearchTerm?this.userTextSubmit():this.props.provider.userName&&this.props.provider.albums.length?(this.props.updateDisplayedContent({displayedContent:v["default"].galleryContent.ALBUMS}),this.props.provider.selectedAlbum.id&&setTimeout(function(){t.refs.Common.onAlbumClicked(t.props.provider.selectedAlbum)},1)):this.refs.Common.fetchAlbums(this.state.userNameInputValue);break;case v["default"].searchType.TEXT:this.props.updateDisplayedContent({displayedContent:v["default"].galleryContent.IMAGES}),this.photoTextSubmit();break;default:return}}},{key:"handleAlbumSuccess",value:function(){this.setState({focusUserTextInput:!0})}},{key:"handleUserError",value:function(e){this.setState({userErrorType:e.reason,altUsername:e.alternate,altNSID:e.nsid})}},{key:"tryDifferentUser",value:function(){var e=this;this.userNameInput({target:{value:this.state.altNSID||this.state.altUsername}}),setTimeout(function(){e.userNameKeypress({charCode:13})},10)}},{key:"render",value:function(){return h["default"].createElement(g["default"],b({ref:"Common",sidePanel:y["default"],connector:l.FlickrConnector,imageQueryParams:{per_page:500},onChange:this.onChange,onKeyPress:this.onKeyPress,handleAlbumSuccess:this.handleAlbumSuccess.bind(this),handleUserError:this.handleUserError.bind(this),containerState:this.state},this.props))}}]),t}(h["default"].Component),C=function(e){return{provider:e.browsePanel.flickr}},E=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:v["default"].providers.FLICKR});e(t(i))};return{updateAlbums:function(e){t(m.updateAlbums,e)},updateAlbumFetchStatus:function(e){t(m.updateAlbumFetchStatus,e)},updateUsername:function(e){t(m.updateUsername,e)},updateDisplayedContent:function(e){t(m.updateDisplayedContent,e)},updateImages:function(e){t(m.updateImages,e)},updateSelectedAlbum:function(e){t(m.updateSelectedAlbum,e)},updateImageFetchStatus:function(e){t(m.updateImageFetchStatus,e)},updateSearchType:function(e){t(m.updateSearchType,e)},updateUserSearchTerm:function(e){t(m.updateUserSearchTerm,e)},updatePhotoSearchTerm:function(e){t(m.updatePhotoSearchTerm,e)},updateUserLicense:function(e){t(m.updateUserLicense,e)},updatePhotoLicense:function(e){t(m.updatePhotoLicense,e)}}};t["default"]=(0,i.connect)(C,E)(w),e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/components/FormGroup",["module","exports","jquery","react"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(e){o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.state={errors:!1,isValid:!0,changed:!1},n.value=!1,n.valid=!1,n.getErrorMessage=n.getErrorMessage.bind(n),n.onChange=n.onChange.bind(n),n.onBlur=n.onBlur.bind(n),n.validateForm=n.validateForm.bind(n),n.handleChange=n.handleChange.bind(n),n}return s(t,e),d(t,[{key:"componentDidMount",value:function(){this.input.value&&this.validateForm(),this.updateValue()}},{key:"componentDidUpdate",value:function(){this.updateValue()}},{key:"render",value:function(){return null}},{key:"getErrorMessage",value:function(){var e=this;return!this.state.isValid&&this.state.errors&&this.state.errors.length>0?u["default"].createElement("ul",{className:"text-danger form-error-message"},this.state.errors.map(function(t){return u["default"].createElement("li",{key:t.rule},u["default"].createElement("strong",null,u["default"].createElement("small",null,t.message,t.fixValue?u["default"].createElement("button",{className:"text-btn text-primary",type:"button",onClick:e.fixValue.bind(e,t.fixValue)},"ViewerText.validations.fix"):null)))})):null}},{key:"getExtras",value:function(e){if("string"==typeof e&&this.state.extras&&l["default"].isArray(this.state.extras)){var t=l["default"].grep(this.state.extras,function(t){return t.type===e});return 0===t.length?!1:1===t.length?t[0]:t}return!1}},{key:"onChange",value:function(){this.state.changed||this.setState({changed:!0}),this.validateForm()}},{key:"onBlur",value:function(){this.validateForm()}},{key:"fixValue",value:function(e){this.input.value=e,this.validateForm()}},{key:"validateForm",value:function(){this.value=void 0,this.valid=!1,this.handleChange()}},{key:"getValidations",value:function(){var e=this,t=this.props.validations.slice(0),n=this.props.inputAttr.type||"text",i=function(e){e&&-1===l["default"].inArray(e.rule,t)&&0===l["default"].grep(t,function(t){return"object"===("undefined"==typeof t?"undefined":c(t))&&t.rule&&t.rule===e.rule?!0:!1}).length&&t.push(e)};return this.defaultValidations&&l["default"].isArray(this.defaultValidations)&&l["default"].each(this.defaultValidations,function(t){i(e.defaultValidations[t])}),l["default"].each(this.props.inputAttr,function(e,t){var r=!1;switch(e.toLowerCase()){case"required":t&&(r={rule:"required"});break;case"max":r={rule:"max",max:t,type:n};break;case"min":r={rule:"min",max:t,type:n};break;case"maxlength":r={rule:"max",max:t,type:"string"};break;case"pattern":r={rule:"regex",pattern:t}}i(r)}),t}},{key:"handleChange",value:function(){this.props.handleChange&&this.props.handleChange({valid:this.valid,value:this.value})}},{key:"updateValue",value:function(){var e=this.props.autoUpdate.when&&this.props.autoUpdate.value&&this.props.autoUpdate.value!==this.input.value;e&&"always"===this.props.autoUpdate.when?(this.input.value=this.props.autoUpdate.value,this.validateForm()):e&&"notChanged"===this.props.autoUpdate.when&&!this.state.changed&&(this.input.value=this.props.autoUpdate.value,this.validateForm())}}]),t}(u["default"].Component);t["default"]=p,p.propTypes={formId:u["default"].PropTypes.string,required:u["default"].PropTypes.bool,extras:u["default"].PropTypes.shape({}),autoUpdate:u["default"].PropTypes.shape({when:u["default"].PropTypes.oneOfType([u["default"].PropTypes.bool,u["default"].PropTypes.oneOf(["always","notChanged"])]),value:u["default"].PropTypes.oneOfType([u["default"].PropTypes.bool,u["default"].PropTypes.string])}),id:u["default"].PropTypes.string,inputAttr:u["default"].PropTypes.shape({type:u["default"].PropTypes.string}),label:u["default"].PropTypes.string,validations:u["default"].PropTypes.array,handleChange:u["default"].PropTypes.oneOfType([u["default"].PropTypes.bool,u["default"].PropTypes.func])},p.defaultProps={formId:"",required:!1,extras:{},autoUpdate:{when:!1,value:!1},id:"",inputAttr:{type:"text"},label:"",validations:[],handleChange:!1},e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/connectors/ArcGIS",["exports","lib-build/i18n!../../../_resources/nls/media","../constants","../utils/Helper","esri/request"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ArcGISConnector=void 0;var s=o(t),l=o(n),u=o(i),c=o(r),d=s["default"].mediaPicker.browsePanel.sidePanel.agol,p=function(){var e,t,n,i,r,o={num:100},s=function(){return e=app.portal},p=function(){return t=app.data&&app.data.appItem},f=function(){return n=p()&&t.item.id},h=function(){return new Promise(function(e,t){if(f())return void e(n);var i=0,r=setInterval(function(){return f()?(e(n),void clearInterval(r)):(i++,i>5?(t("no appId"),void clearInterval(r)):void 0)},1e3)})},m=function(){return i=app.portal&&app.portal.user},v=function(){var e=new Promise(function(e,t){app.portal||(console.warn("no portal"),t()),i||m()||app.portal.signIn().then(function(){e()})});return e},g=function(e){return new Promise(function(t,n){if(!app.portal)return void n("no portal");if(!i&&!m())return void n("no user");if(e.searchLocation===l["default"].searchLocation.STORY)return void y(e,t,n);var r=void 0;if(e.idArr)r=N(e.idArr);else{if(e.contentTypesArr=D(e.contentTypes),!e.contentTypesArr)return void t();r=A(e)}var a=Object.assign({},o,{q:r});e.sortField&&(a.sortField=e.sortField),e.sortOrder&&(a.sortOrder=e.sortOrder),_(a,t,n)})},y=function(t,i,r){if(!n&&!f())return void i();var o=u["default"].stripTrailingSlash((e||s()).portalUrl)+"/content/items/"+n+"/resources/";(0,c["default"])({url:o,handleAs:"json",content:{f:"json"}}).then(function(e){return b(e,o,i)},function(e){return C(e,r)})},b=function(e,t,n){var i=T(e.resources,t);n(i)},_=function(e,t,n){app.portal.queryItems(e).then(function(e){return w(e,t)},function(e){return C(e,n)})},w=function(e,t){var n=P(e.results);r=e.nextQueryParams,t(n)},C=function(e,t){t(e)},E=function(r){return new Promise(function(o,a){if(!n&&!f())return void a();var l=u["default"].stripTrailingSlash((e||s()).portalUrl),d=(i||m()).username,h=(t||p()).item.ownerFolder,v=l+"/content/users/"+d+(h?"/"+h:"")+"/items/"+n+"/addResources";(0,c["default"])({url:v,handleAs:"json",form:r},{usePost:!0}).then(function(e){if(e.success){var t=l+"/content/items/"+n+"/resources/";o(Object.assign(e,{baseAttachmentUrl:t}))}else a(e)})})},x=function(r){return new Promise(function(o,a){if(!n&&!f())return void a();var l=u["default"].stripTrailingSlash((e||s()).portalUrl),d=(i||m()).username,h=(t||p()).item.ownerFolder,v=l+"/content/users/"+d+(h?"/"+h:"")+"/items/"+n+"/removeResources";(0,c["default"])({url:v,handleAs:"json",content:{resource:r.fileName,f:"json"}},{usePost:!0}).then(function(e){e.success?o():a(e)}),r.thumbFile&&r.thumbFile!==r.fileName&&(0,c["default"])({url:v,handleAs:"json",content:{resource:r.thumbFile,f:"json"}},{usePost:!0}).then(function(e){e&&e.success||console.warn("unsuccessful deletion of thumbnail file")})})},T=function(e,t){var n=[];return e.forEach(function(r){var o=r.resource;if(!(o.indexOf("__thumb")>=0)){var a=o.split("__"),s=a.slice(-1)[0].split("."),c=s.slice(-1)[0],p=k(o,e),f=1===a.length?a[0]:a.slice(0,-1).join("__")+"."+c,h=s[0].match(/^[0-9]{13}$/)?new Date(parseInt(s[0])):null,m=u["default"].stripTrailingSlash(t)+"/"+encodeURIComponent(p)+"?token="+i.credential.token;n.push({name:f,modified:h,thumbUrl:m,thumbFile:p,picUrl:u["default"].stripTrailingSlash(t)+"/"+o,displayName:d.filterAndSort.image,id:o,type:l["default"].contentType.IMAGE,fileName:o,title:f,fromResources:!0})}}),n},k=function(e,t){var n=e.substr(0,e.lastIndexOf(".")),i=t.find(function(e){var t=e.resource;return t.indexOf("__thumb")<0?!1:0===t.indexOf(n)?!0:!1});return i=i?i.resource:e},P=function(e){return e.map(function(e){return Object.assign({name:e.title,title:e.title,id:e.id,agolType:e.type,type:S(e.type),displayName:e.displayName,owner:e.owner,modified:e.modified,snippet:e.snippet},O(e))})},S=function(e){switch(e){case l["default"].agolContentType.WEBMAP:return l["default"].contentType.WEBMAP;case l["default"].agolContentType.WEBSCENE:return l["default"].contentType.WEBSCENE;case l["default"].agolContentType.IMAGE:return l["default"].contentType.IMAGE;default:return"agh, whats this???"}},O=function(e){var t=e.thumbnailUrl;if(!t){var n=app.portal.staticImagesUrl;if(!n)return console.warn("no staticImagesUrl in portal"),{};switch(e.type){case"Web Scene":t=n+"/scene.png";break;case"Web Map":default:t=n+"/desktopapp.png"}}return{thumbUrl:t,thumbHeight:133,thumbWidth:200}},I=function(){return new Promise(function(e,t){return!r||r.start<0?void e(null):void _(r,e,t)})},N=function(e){return"id:"+e.join(" OR id:")},A=function(e){var t=[];return e.searchStr&&t.push(M(e.searchStr)),t.push.apply(t,a(e.contentTypesArr).concat([j(e.searchLocation)])),t.join(" ")},M=function(e){return e.match(/^[A-Fa-f0-9]{32}$/)?"id:"+e:e},D=function(e){var t=[],n=[];if(e.indexOf(l["default"].contentType.WEBMAP)>=0&&(t.push('type:"Web Map"'),n.push('-type:"Web Mapping Application"')),e.indexOf(l["default"].contentType.WEBSCENE)>=0&&(t.push('type:"Web Scene"'),n.push('-type:"CityEngine Web Scene"')),0===t.length)return!1;var i=void 0;i=1===t.length?t[0]:"("+t.join(" OR ")+")";var r=n.join(" ");return[i,r]},j=function(e){switch(e){case l["default"].searchLocation.ORG:return"orgid:"+i.orgId;case l["default"].searchLocation.MINE:return"owner:"+i.username;case l["default"].searchLocation.AGOL:return"";default:return console.warn("TODO: deal with searchLocation",e),""}};return{checkSignin:v,getItems:g,getNext:I,getPortal:s,getAppItem:p,getAppId:f,getAppIdPromise:h,getUser:m,uploadResources:E,removeResources:x}}();e.ArcGISConnector=p}),define("lib/resample-hermite/hermite",function(){}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,!0):t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){return I.call(e).slice(8,-1).toLowerCase()}function i(e){return"number"==typeof e&&!isNaN(e)}function r(e){return"object"==typeof e&&null!==e}function o(e){var t,n;if(!r(e))return!1;try{return t=e.constructor,n=t.prototype,t&&n&&N.call(n,"isPrototypeOf")}catch(i){return!1}}function a(e){return"function"===n(e)}function s(e){return Array.isArray?Array.isArray(e):"array"===n(e)}function l(e,t){var n=[];return t=t>=0?t:0,Array.from?Array.from(e).slice(t):n.slice.call(e,t)}function u(e,t){var n,o;if(e&&a(t))if(s(e)||i(e.length))for(o=0,n=e.length;n>o&&t.call(e,e[o],o,e)!==!1;o++);else if(r(e))for(o in e)if(e.hasOwnProperty(o)&&t.call(e,e[o],o,e)===!1)break;return e}function c(e){var t;if(arguments.length>1){if(t=l(arguments),Object.assign)return Object.assign.apply(Object,t);t.shift(),u(t,function(t){u(t,function(t,n){e[n]=t})})}return e}function d(e,t){var n=l(arguments,2);return function(){return e.apply(t,n.concat(l(arguments)))}}function p(e,t,n){var i="",r=t;for(n+=t;n>r;r++)i+=A(e.getUint8(r));return i}function f(e){var t,n=e.replace(_,""),i=atob(n),r=i.length,o=new y(r),a=new Uint8Array(o);for(t=0;r>t;t++)a[t]=i.charCodeAt(t);return o}function h(e){var t,n=new Uint8Array(e),i=n.length,r="";for(t=0;i>t;t++)r+=A(n[t]);return"data:image/jpeg;base64,"+btoa(r)}function m(e){var t=new Image;return t.src=e,t}function v(e){var t=P(e.degree)%180,n=(t>90?180-t:t)*C/180,i=T(n),r=k(n),o=e.width,a=e.height;return{width:o*r+a*i,height:o*i+a*r}}function g(e,t){this.image=e,this.options=c({},g.DEFAULTS,o(t)&&t),this.data=null,this.init()}var y=e.ArrayBuffer,b=/^data\:/,_=/^data\:([^\;]+)\;base64,/,w=/^data\:image\/jpeg.*;base64,/,C=Math.PI,E=Math.min,x=Math.max,T=Math.sin,k=Math.cos,P=Math.abs,S=Math.floor,O=Object.prototype,I=O.toString,N=O.hasOwnProperty,A=String.fromCharCode;g.prototype={constructor:g,init:function(){var e,t,n=this,i=this.image;if(!i||"img"!==i.tagName.toLowerCase()||!i.src)throw new Error("The given image is not a valid image");return y?(t=i.src,b.test(t)?w.test(t)?this.read(f(t)):this.load(i):(e=new XMLHttpRequest,e.onerror=e.onabort=function(){n.load(i)},e.onload=function(){n.read(this.response)},e.open("get",t),e.responseType="arraybuffer",void e.send())):this.load(i)},read:function(e){var t=this.readOrientation(e);t>1?(this.translate(t),this.load(m(h(e)))):this.load(this.image)},readOrientation:function(e){var t,n,i,r,o,a,s,l,u,c,d=new DataView(e),f=d.byteLength;if(255===d.getUint8(0)&&216===d.getUint8(1))for(u=2;f>u;){if(255===d.getUint8(u)&&225===d.getUint8(u+1)){s=u;break}u++}if(s&&(n=s+4,i=s+10,"Exif"===p(d,n,4)&&(a=d.getUint16(i),o=18761===a,(o||19789===a)&&42===d.getUint16(i+2,o)&&(r=d.getUint32(i+4,o),r>=8&&(l=i+r)))),l)for(f=d.getUint16(l,o),c=0;f>c;c++)if(u=l+12*c+2,274===d.getUint16(u,o)){t=d.getUint16(u+8,o),d.setUint16(u+8,1,o);break}return t},translate:function(e){var t=0,n=1,i=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}this.data={rotate:t,scaleX:n,scaleY:i}},load:function(e){var t=d(function(){e.removeEventListener("load",t,!1),this.resize(e)},this);e.complete?this.resize(e):e.addEventListener("load",t,!1)},draw:function(e){var t,n,r,o=document.createElement("canvas"),a=o.getContext("2d"),s=this.data,l=0,u=0,c=e.naturalWidth,d=e.naturalHeight,p=s&&s.rotate,f=s&&s.scaleX,h=s&&s.scaleY,m=i(f)&&i(h)&&(1!==f||1!==h),g=i(p)&&0!==p,y=g||m,b=c,_=d;return m&&(t=c/2,n=d/2),g&&(r=v({width:c,height:d,degree:p}),b=r.width,_=r.height,t=r.width/2,n=r.height/2),o.width=b,o.height=_,y&&(l=-c/2,u=-d/2,a.save(),a.translate(t,n)),g&&a.rotate(p*C/180),m&&a.scale(f,h),a.drawImage(e,S(l),S(u),S(c),S(d)),y&&a.restore(),o},resize:function(e){var t=this.options,n=this.draw(e),r=n.width,o=n.height,a=r/o,s=document.createElement("canvas"),l=x(0,t.minWidth)||0,u=x(0,t.minHeight)||0,c=x(l,t.maxWidth)||1/0,d=x(u,t.maxHeight)||1/0,p=P(t.width)||r,f=P(t.height)||o;l>0&&isFinite(l)?u=l/a:u>0&&isFinite(u)&&(l=u*a),c>0&&isFinite(c)?d=c/a:d>0&&isFinite(d)&&(c=d*a),p=E(x(p,l),c),f=E(x(f,u),d),i(p)&&i(f)?f*a>p?f=p/a:p=f*a:(p=r,f=o),s.width=p,s.height=f,s.getContext("2d").drawImage(n,0,0,S(r),S(o),0,0,S(p),S(f)),this.done(s)},done:function(e){var t=this.options,n=e;"image"===t.type&&(n=m(e.toDataURL())),a(t.done)&&t.done.call(this,n)}},g.DEFAULTS={type:"image",width:NaN,height:NaN,minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,done:null};var M=e.Loader;return g.noConflict=function(){return e.Loader=M,g},"function"==typeof define&&define.amd&&define("loader",[],function(){return g}),"undefined"==typeof t&&(e.Loader=g),g}),define("lib/loader/dist/loader",function(){}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/PhotoUploader",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/PhotoUploader",["module","exports","jquery","react","dojo/Deferred","../../utils/Helper","../../components/FormGroup","lib-build/i18n!../../../../_resources/nls/media","dojo/topic","../../constants","../../connectors/ArcGIS","lib/resample-hermite/hermite","lib/loader/dist/loader","lib-build/less!./PhotoUploader"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{"default":e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=d(n),v=d(i),g=d(r),y=d(o),b=d(a),_=d(s),w=d(l),C=d(u),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=_["default"].mediaPicker.browsePanel.sidePanel.agol,T=function(e){function t(e){p(this,t);var n=f(this,Object.getPrototypeOf(t).call(this,e));return n.checkForCapabilities(),n.fileChange=n.fileChange.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n.onDrop=n.onDrop.bind(n),n.resetPicker=n.resetPicker.bind(n),n.loadImageFromFile=n.loadImageFromFile.bind(n),n}return h(t,e),E(t,[{key:"checkForCapabilities",value:function(){this.hasDnD=!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)&&"draggable"in document.createElement("span")&&"undefined"!=typeof window.FileReader,this.useCapture=navigator.userAgent.match(/iPad|iPhone|iPod/g)}},{key:"componentDidMount",value:function(){this.hasDnD&&!window.dndDisabled&&this.addDnDListener()}},{key:"addDnDListener",value:function(){window.dndDisabled=!0,window.addEventListener("dragover",function(e){e&&!(0,m["default"])(e.target).hasClass("drag-area")&&e.preventDefault()}),window.addEventListener("drop",function(e){e&&e.preventDefault()})}},{key:"fileChange",value:function(e){var t=e.target.files;t&&t.length&&this.loadImageFromFile(t[0])}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({dragging:!0})}},{key:"onDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({dragging:!1})}},{key:"onDrop",value:function(e){this.setState({dragging:!1}),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length&&(e.preventDefault(),
e.stopPropagation(),this.loadImageFromFile(e.dataTransfer.files[0]))}},{key:"loadImageFromFile",value:function(e){var t=new Image,n=window.URL||window.webkitURL,i=this;n&&(t.src=n.createObjectURL(e),t.onload=function(){this.onload=null,e.type.indexOf("gif")>=0?i.handleGif(e,this):i.handleImage(e,this),n.revokeObjectURL(e)})}},{key:"checkOriginalSize",value:function(e,t){return t.width<=C["default"].photoSettings.maxWidth&&t.height<=C["default"].photoSettings.maxHeight&&e.size<=C["default"].photoSettings.maxFileSize}},{key:"handleGif",value:function(e,t){return this.checkOriginalSize(e,t)?void this.fileUploadToAGOL(e,t):void console.warn("gif too big. width: ",t.width,", maxWidth: ",C["default"].photoSettings.maxWidth,"; height: ",t.height,", maxHeight: ",C["default"].photoSettings.maxHeight,"; file size: ",e.size,", maxFileSize: ",C["default"].photoSettings.maxFileSize)}},{key:"handleImage",value:function(e,t){var n=this,i=t.width/t.height,r=this.getLoaderSizeOptions(i,"photo");new window.Loader(t,Object.assign(r,{done:function(i){n.handleLoaderImage(i,t,e)}}))}},{key:"getLoaderSizeOptions",value:function(e,t){if("thumb"===t){var n=Math.max(C["default"].galleryContent.IMG_HEIGHT,C["default"].galleryContent.ALBUM_HEIGHT);return{maxHeight:n}}var i=C["default"].photoSettings.maxWidth/C["default"].photoSettings.maxHeight;return i>e&&i>1?{maxHeight:C["default"].photoSettings.maxHeight}:{maxWidth:C["default"].photoSettings.maxWidth}}},{key:"generateThumbnail",value:function(e){var t=new g["default"],n=e.width/e.height,i=this.getLoaderSizeOptions(n,"thumb");return new window.Loader(e,Object.assign(i,{done:function(e){t.resolve(e)}})),t}},{key:"getUploadFileNames",value:function(e){var t=e.name,n=new Date,i=t.lastIndexOf("."),r=i>=0?t.substr(0,i):t,o=i>=0?t.substr(i):e.type.substr(e.type.indexOf("/1")),a=r+"__"+n.getTime();return{type:o.substr(1),fileName:a+o,thumbName:a+"__thumb"+o}}},{key:"fileUploadToAGOL",value:function(e,t){var n=this,i=this.getUploadFileNames(e).fileName,r=new FormData;r.append("img",e,i),r.append("f","json"),c.ArcGISConnector.uploadResources(r).then(function(e){n.props.onPhotoUpload(e),w["default"].publish("MEDIA-PICKER-SELECTION",{type:"image",width:t.width,height:t.height,url:e.baseAttachmentUrl+i}),n.resetPicker()})}},{key:"blobUploadToAGOL",value:function(e,t,n){var i=this,r=this.getUploadFileNames(t);if(!this.props.appId)return void n.reject("No app id");var o=new FormData;o.append("img",e.img,r.fileName),e.thumb&&o.append("thumb",e.thumb,r.thumbName),o.append("f","json"),c.ArcGISConnector.uploadResources(o).then(function(e){i.props.onPhotoUpload(e),n.resolve({url:e.baseAttachmentUrl+encodeURIComponent(r.fileName)})})["catch"](function(e){n.reject(e)})}},{key:"handleLoaderImage",value:function(e,t,n){var i=this,r=void 0;n.size>C["default"].photoSettings.maxFileSize?(r=y["default"].dataURItoBlob(e.src),r.size>C["default"].photoSettings.maxFileSize&&console.warn("need to scale this photo down before upload!")):r=n;var o=new g["default"];w["default"].publish("MEDIA-PICKER-SELECTION",{type:"image",width:e.width,height:e.height,dataUrl:e.src,uploadDeferred:o}),this.resetPicker(),this.generateThumbnail(t).then(function(e){i.blobUploadToAGOL({img:r,thumb:y["default"].dataURItoBlob(e.src)},n,o)})}},{key:"resetPicker",value:function(){this.refs.input.value=""}},{key:"renderDnD",value:function(){var e=y["default"].classnames([this.props.className,"drag-area","uploader","alert",{"alert-default":!this.state.dragging,"alert-success":this.state.dragging}]);return v["default"].createElement("div",{className:e,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},v["default"].createElement("span",{className:"bg-img fa fa-picture-o fa-5x"}),v["default"].createElement("span",{className:"block-md"},v["default"].createElement("span",{className:"fa fa-hand-rock-o fa-lg"}),v["default"].createElement("span",null,x.createContent.dragAndDrop)),v["default"].createElement("span",{className:"block-md"},x.createContent.or),v["default"].createElement("button",{type:"button",className:"btn btn-default btn-file block-md",onBlur:this.onBlur},v["default"].createElement("span",{className:"fa fa-folder-open-o fa-lg"}),v["default"].createElement("span",null,x.createContent.uploadImage),v["default"].createElement("input",{id:this.props.id,ref:"input",type:"file",accept:"image/*",capture:this.useCapture?"camera":!1,tabIndex:"-1",onChange:this.fileChange})),v["default"].createElement("div",{className:"info-footer"},v["default"].createElement("span",{className:"fa fa-lg fa-info-circle"}),v["default"].createElement("span",null,x.createContent.agolInfo)))}},{key:"renderNoDnD",value:function(){return v["default"].createElement("button",{type:"button",className:"uploader btn btn-default btn-file btn-block",onBlur:this.onBlur},x.createContent.uploadImage,v["default"].createElement("input",{id:this.props.id,ref:"input",type:"file",accept:"image/*",capture:this.useCapture?"camera":!1,tabIndex:"-1",onChange:this.fileChange}))}},{key:"renderNoAppId",value:function(){return v["default"].createElement("div",{className:"drag-area uploader alert alert-default"},v["default"].createElement("span",null,x.createContent.saveBeforeUpload))}},{key:"render",value:function(){var e=y["default"].classnames([this.props.className,"photo-input","form-group",{required:this.props.required,"has-error":!this.state.isValid}]),t=void 0;return t=this.props.appId?this.hasDnD?this.renderDnD():this.renderNoDnD():this.renderNoAppId(),v["default"].createElement("div",{className:e},t,this.getErrorMessage?this.getErrorMessage():null)}}]),t}(b["default"]);t["default"]=T,e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelArcGIS",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelArcGIS",["module","exports","react","react-dom","../../utils/Helper","./PhotoUploader","../../constants","lib-build/i18n!../../../../_resources/nls/media","lib-build/less!./SidePanel","lib-build/less!./SidePanelArcGIS"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=g["default"].mediaPicker.browsePanel.sidePanel.agol,_=function(e){function t(){return u(this,t),c(this,Object.getPrototypeOf(t).apply(this,arguments))}return d(t,e),y(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.setFocus&&($(f["default"].findDOMNode(this)).parents(".modal").hasClass("in")?f["default"].findDOMNode(this.refs.textInput).focus():setTimeout(function(){f["default"].findDOMNode(e.refs.textInput).focus()},500))}},{key:"render",value:function(){var e=this;return p["default"].createElement("div",{className:"input-group search"},p["default"].createElement("div",{className:"input-group-addon"},p["default"].createElement("span",{className:"fa fa-"+this.props.icon})),p["default"].createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),p["default"].createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},p["default"].createElement("span",{className:"fa fa-remove"})),p["default"].createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},p["default"].createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(p["default"].Component),w=function(e){function t(){return u(this,t),c(this,Object.getPrototypeOf(t).apply(this,arguments))}return d(t,e),y(t,[{key:"render",value:function(){var e=h["default"].classnames(["btn","btn-default",{"col-xs-3":4===this.props.toggleCount,"col-xs-4":3===this.props.toggleCount,active:this.props.checked,disabled:this.props.isDisabled}]);return p["default"].createElement("label",{className:e,htmlFor:this.props.id,onClick:this.props.onClick},p["default"].createElement("span",{className:"btn-label"},this.props.label),p["default"].createElement("input",{disabled:this.props.isDisabled,onChange:this.props.onClick,checked:this.props.checked,type:"radio",name:"searchLocation",value:this.props.value,id:this.props.id}))}}]),t}(p["default"].Component),C=function(e){function t(){return u(this,t),c(this,Object.getPrototypeOf(t).apply(this,arguments))}return d(t,e),y(t,[{key:"thisOnClick",value:function(e,t){t===this.props.searchLocation||$(e.target).closest(".btn.disabled").length||this.props.onChange({type:t})}},{key:"isSelected",value:function(e){return this.props.searchLocation===v["default"].searchLocation[e]}},{key:"isDisabled",value:function(){return this.props.availableContentTypes.indexOf(v["default"].contentType.WEBMAP)<0&&this.props.availableContentTypes.indexOf(v["default"].contentType.WEBSCENE)<0}},{key:"getOrgToggle",value:function(){var e=this;return this.props.portalIsOrg?p["default"].createElement(w,{id:"agol-org",toggleCount:4,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v["default"].searchLocation.ORG)},label:this.props.portalName+" "+b.searchLocation.myOrg,value:v["default"].searchLocation.ORG,checked:this.isSelected("ORG")}):null}},{key:"render",value:function(){var e=this;return p["default"].createElement("div",{className:"content-toggle btn-group","data-toggle":"buttons"},p["default"].createElement(w,{id:"agol-agol",toggleCount:this.props.portalIsOrg?4:3,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v["default"].searchLocation.AGOL)},label:b.searchLocation.agol,value:v["default"].searchLocation.AGOL,checked:this.isSelected("AGOL")}),this.getOrgToggle(),p["default"].createElement(w,{id:"agol-mine",toggleCount:this.props.portalIsOrg?4:3,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v["default"].searchLocation.MINE)},label:b.searchLocation.myContent,value:v["default"].searchLocation.MINE,checked:this.isSelected("MINE")}),p["default"].createElement(w,{id:"agol-story",toggleCount:this.props.portalIsOrg?4:3,onClick:function(t){return e.thisOnClick(t,v["default"].searchLocation.STORY)},label:b.searchLocation.thisStory,value:v["default"].searchLocation.STORY,checked:this.isSelected("STORY")}))}}]),t}(p["default"].Component),E=function(e){function t(){return u(this,t),c(this,Object.getPrototypeOf(t).apply(this,arguments))}return d(t,e),y(t,[{key:"render",value:function(){return p["default"].createElement("div",{className:"divider"},p["default"].createElement("span",null,b.createContent.or))}}]),t}(p["default"].Component),x=function(e){function t(){return u(this,t),c(this,Object.getPrototypeOf(t).apply(this,arguments))}return d(t,e),y(t,[{key:"render",value:function(){return p["default"].createElement("div",{className:"mp-sidepanel"},p["default"].createElement(C,{availableContentTypes:this.props.containerState.availableContentTypes,portalIsOrg:this.props.containerState.portalIsOrg,portalName:this.props.containerState.portalName,searchLocation:this.props.providerProps.searchLocation,onChange:this.props.onKeyPress.searchLocSubmit}),p["default"].createElement(_,{setFocus:this.props.containerState.focusInput,icon:"globe",placeholder:b.filterAndSort.search,value:this.props.containerState.textInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.textInput,onKeyPress:this.props.onKeyPress.textKeypress,onClear:this.props.onKeyPress.textClear}),p["default"].createElement(E,null),p["default"].createElement(m["default"],{appId:this.props.containerState.appId,onPhotoUpload:this.props.onKeyPress.photoUploadComplete}))}}]),t}(p["default"].Component);t["default"]=x,e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/ArcGISContainer",["module","exports","react","react-dom","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelArcGIS","../../connectors/ArcGIS"],function(e,t,n,i,r,o,a,s,l,u){"use strict";function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function d(e){return e&&e.__esModule?e:{"default":e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var v=d(n),g=d(i),y=c(o),b=d(a),_=d(s),w=d(l),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function(e){function t(){f(this,t);var e=h(this,Object.getPrototypeOf(t).call(this));return e.state={textInputValue:"",dateSortOrder:b["default"].sortOrder.DESC,titleSortOrder:b["default"].sortOrder.ASC,appId:null,portalIsOrg:!1,portalName:"",focusInput:!1,storyResourceCount:0,availableContentTypes:[],selectedContentTypes:[],disableGISContent:!0},e.storyCache={},e.onChange={textInput:e.textInput.bind(e)},e.onKeyPress={searchLocSubmit:e.searchLocSubmit.bind(e),textKeypress:e.textKeypress.bind(e),textClear:e.textClear.bind(e),selectedContentTypesChange:e.selectedContentTypesChange.bind(e),sortFieldChange:e.sortFieldChange.bind(e),sortOrderChange:e.sortOrderChange.bind(e),photoUploadComplete:e.photoUploadComplete.bind(e),onItemDelete:e.onItemDelete.bind(e)},e}return m(t,e),E(t,[{key:"componentDidMount",value:function(){var e=this;u.ArcGISConnector.checkSignin().then(function(){var t=u.ArcGISConnector.getPortal();e.setState({portalIsOrg:t.isOrganization,portalName:t.name}),e.itemFetch(),u.ArcGISConnector.getAppIdPromise().then(function(t){e.setState({appId:t}),e.thisStoryFetch({searchLocation:b["default"].searchLocation.STORY})})["catch"](function(e){console.warn(e)})})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.constructAvailContentTypes(e.authorizedMedia,e.provider.searchLocation),i=e.authorizedMedia.indexOf(b["default"].contentType.WEBMAP)<0&&e.authorizedMedia.indexOf(b["default"].contentType.WEBSCENE)<0,r=!this.compareArrays(e.authorizedMedia,this.props.authorizedMedia),o={availableContentTypes:n,disableGISContent:i,focusInput:e.display&&!this.props.display||e.openFocus};if(r){var a={};i&&(n=this.constructAvailContentTypes(e.authorizedMedia,b["default"].searchLocation.STORY),this.props.updateSearchLocation({type:b["default"].searchLocation.STORY}),Object.assign(a,{searchLocation:b["default"].searchLocation.STORY})),Object.assign(a,{contentTypes:n}),o.selectedContentTypes=n,this.itemFetch(a)}else if(!this.compareArrays(n,this.state.availableContentTypes)){var s=n.filter(function(e){return t.state.availableContentTypes.indexOf(e)<0});s.length&&(o.selectedContentTypes=this.state.selectedContentTypes.concat(s))}if(this.setState(o),e.appId&&!this.state.appId)this.setState({appId:e.appId});else if(e.thisStory===this.props.thisStory||!e.thisStory)return;this.buildThisStoryCache(e.thisStory,e.appId)}},{key:"compareArrays",value:function(e,t){return e.length!==t.length?!1:(e.sort(),t.sort(),e.every(function(e,n){return t[n]===e}))}},{key:"constructAvailContentTypes",value:function(e,t){var n=[];return e.indexOf(b["default"].contentType.WEBMAP)>=0&&n.push(b["default"].contentType.WEBMAP),e.indexOf(b["default"].contentType.WEBSCENE)>=0&&n.push(b["default"].contentType.WEBSCENE),e.indexOf(b["default"].contentType.IMAGE)>=0&&t===b["default"].searchLocation.STORY&&n.unshift(b["default"].contentType.IMAGE),n}},{key:"textInput",value:function(e){this.setState({textInputValue:e.target.value})}},{key:"textKeypress",value:function(e){13===e.charCode&&this.textSubmit()}},{key:"textClear",value:function(e){var t=this;13===e.charCode&&(this.textInput({target:{value:""}}),this.setState({focusInput:!0}),setTimeout(function(){t.textKeypress({charCode:13})},10))}},{key:"textSubmit",value:function(){var e=this.state.textInputValue.trim();this.props.updateSearchTerm({term:e}),this.itemFetch({searchStr:e})}},{key:"buildSearchOptionsFromReduxState",value:function(){return{searchLocation:this.props.provider.searchLocation,contentTypes:this.state.selectedContentTypes,sortField:this.props.provider.sortField,sortOrder:this.props.provider.sortOrder,searchStr:this.props.provider.searchStr}}},{key:"clearThisStoryUsed",value:function(){for(var e in this.storyCache)this.storyCache[e].usedInStory=!1}},{key:"removeUnused",value:function(){for(var e in this.storyCache){var t=this.storyCache[e];t.usedInStory!==!1||t.fromResources||delete this.storyCache[e]}}},{key:"buildThisStoryCache",value:function(e,t){var n=this;this.clearThisStoryUsed();var i=[];return e.forEach(function(e){var r=n.storyCache[e.id]||n.storyCache[e.file];return r?void(r.usedInStory=!0):void(e.id&&e.id!==t&&"APPID"!==e.id?i.push(e.id):n.storeImageResourceInfo(e))}),this.removeUnused(),this.setState({storyResourceCount:Object.keys(this.storyCache).length}),i.length?void u.ArcGISConnector.getItems({idArr:i}).then(function(e){n.processThisStoryResults(e)}):void(this.props.provider.searchLocation===b["default"].searchLocation.STORY&&this.refs.Common.handleImageReturn(this.filterAndSortThisStory()))}},{key:"processThisStoryResults",value:function(e){var t=this;e&&(e.forEach(function(e){t.storyCache[e.id]=Object.assign(e,{usedInStory:!0})}),this.setState({storyResourceCount:Object.keys(this.storyCache).length}))}},{key:"storeImageResourceInfo",value:function(e){console.warn("resource fell through",e)}},{key:"beforeItemFetch",value:function(){this.props.updateImageFetchStatus({fetchStatus:b["default"].fetchStatus.FETCHING}),this.props.updateImages({images:[]})}},{key:"itemFetch",value:function(e){var t=this,n=this.props.authorizedMedia.indexOf(b["default"].contentType.WEBMAP)<0&&this.props.authorizedMedia.indexOf(b["default"].contentType.WEBSCENE)<0;this.beforeItemFetch();var i=Object.assign({},this.buildSearchOptionsFromReduxState(),e);i.searchStr&&i.searchStr.match(/^[A-Fa-f0-9]{32}$/)&&!n&&(Object.assign(i,{idArr:[i.searchStr],searchLocation:b["default"].searchLocation.AGOL}),this.props.updateSearchLocation({type:b["default"].searchLocation.AGOL})),i.searchLocation!==b["default"].searchLocation.STORY||i.idArr?u.ArcGISConnector.getItems(i).then(function(e){return t.refs.Common.handleImageReturn(e)})["catch"](function(e){console.warn("itemFetch failed",e),t.refs.Common.handleImageReturn()}):this.thisStoryFetch(i)}},{key:"itemDelete",value:function(e){var t=this;u.ArcGISConnector.removeResources(e).then(function(){t.storyCache[e.fileName]&&(delete t.storyCache[e.fileName],t.refs.Common.handleImageReturn(t.filterAndSortThisStory())),$(g["default"].findDOMNode(t)).find(".popover").popover("hide")})["catch"](function(e){console.warn("deletion failed from container",e)})}},{key:"thisStoryFetch",value:function(e){var t=this;return new Promise(function(n,i){u.ArcGISConnector.getItems(e).then(function(e){t.handleThisStoryResults(e),t.props.provider.searchLocation===b["default"].searchLocation.STORY&&t.refs.Common.handleImageReturn(t.filterAndSortThisStory()),n()})["catch"](function(e){i(e),console.warn("itemFetch failed",e),t.props.provider.searchLocation===b["default"].searchLocation.STORY&&t.refs.Common.handleImageReturn()})})}},{key:"handleThisStoryResults",value:function(e){var t=this;e&&e.forEach(function(e){t.storyCache[e.fileName]||(t.storyCache[e.fileName]=Object.assign(e,{usedInStory:!1}))})}},{key:"filterAndSortThisStory",value:function(){var e=[],t=this.props.provider;for(var n in this.storyCache){var i=this.storyCache[n];this.state.selectedContentTypes.indexOf(i.type)>=0&&(!t.searchStr||this.clientSideSearch(i,t.searchStr))&&e.push(i)}return this.sortThisStory(e)}},{key:"clientSideSearch",value:function(e,t){return t=t.toLowerCase(),e.name&&e.name.toLowerCase().indexOf(t)>=0||e.title&&e.title.toLowerCase().indexOf(t)>=0||e.snippet&&e.snippet.toLowerCase().indexOf(t)>=0}},{key:"sortThisStory",value:function(e){var t=this.props.provider.sortField,n=t===b["default"].sortField.DATE?this.state.dateSortOrder:this.state.titleSortOrder;return e.sort(function(e,i){var r=n===b["default"].sortOrder.DESC?e[t]:i[t];r.toLowerCase&&(r=r.toLowerCase());var o=n===b["default"].sortOrder.DESC?i[t]:e[t];return o.toLowerCase&&(o=o.toLowerCase()),o>r?1:r>o?-1:0})}},{key:"searchLocSubmit",value:function(e){this.props.updateSearchLocation(e),this.itemFetch({searchLocation:e.type})}},{key:"selectedContentTypesChange",value:function(e){this.setState({selectedContentTypes:e}),e.length?this.itemFetch({contentTypes:e}):this.refs.Common.handleImageReturn([])}},{key:"sortFieldChange",value:function(e,t){this.props.updateSortField({field:e}),this.props.updateSortOrder({order:t}),this.itemFetch({sortField:e,sortOrder:t})}},{key:"sortOrderChange",value:function(e,t){this.props.updateSortOrder({order:e});var n=t===b["default"].sortField.DATE?"dateSortOrder":"titleSortOrder";this.setState(p({},n,e)),this.itemFetch({sortOrder:e})}},{key:"photoUploadComplete",value:function(){this.thisStoryFetch({searchLocation:b["default"].searchLocation.STORY})}},{key:"onItemDelete",value:function(e,t){e.stopPropagation(),e.preventDefault(),this.itemDelete(t)}},{key:"render",value:function(){return v["default"].createElement(_["default"],C({ref:"Common",sidePanel:w["default"],connector:u.ArcGISConnector,onChange:this.onChange,onKeyPress:this.onKeyPress,containerState:this.state},this.props))}}]),t}(v["default"].Component),T=function(e){return{provider:e.browsePanel.agol}},k=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:b["default"].providers.ARCGIS});e(t(i))};return{updateImages:function(e){t(y.updateImages,e)},updateImageFetchStatus:function(e){t(y.updateImageFetchStatus,e)},updateSearchLocation:function(e){t(y.updateSearchLocation,e)},updateSearchTerm:function(e){t(y.updateSearchTerm,e)},updateSortField:function(e){t(y.updateSortField,e)},updateSortOrder:function(e){t(y.updateSortOrder,e)}}};t["default"]=(0,r.connect)(T,k)(x),e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/connectors/UrlContent",["exports","../config","../constants"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.URLConnector=void 0;var r=i(t),o=i(n),a=function(){var e=function(e){return new Promise(function(t,n){var r=l(e);return r?void i(r).then(function(e){return e?void t({id:r,source:"vimeo",title:e.title,description:e.description,user:e.user_name,thumbUrl:e.thumbnail_small,url:c(r),viewCount:e.stats_number_of_plays,likeCount:e.stats_number_of_likes}):void n({reason:o["default"].fetchStatus.NOT_FOUND,type:"VIDEO"})})["catch"](function(e){n({reason:o["default"].fetchStatus.NOT_FOUND,type:"VIDEO",error:e})}):void t(o["default"].fetchStatus.NON_MATCHING_URL)})},t=function(e){return new Promise(function(t,i){var r=a(e);return r?s(r)?void n(r).then(function(e){return e?void t({id:r,source:"youtube",title:e.snippet.title,description:e.snippet.description,user:e.snippet.channelTitle,thumbUrl:e.snippet.thumbnails["default"].url,url:u(r),viewCount:e.statistics.viewCount,likeCount:e.statistics.likeCount}):void i({reason:o["default"].fetchStatus.NOT_FOUND,type:"VIDEO"})})["catch"](function(e){i(e&&403==e.status?{reason:o["default"].fetchStatus.NOT_AUTHORIZED,type:"VIDEO",error:e}:{reason:o["default"].fetchStatus.NOT_FOUND,type:"VIDEO",error:e})}):void i({reason:o["default"].fetchStatus.BAD_FORMAT,type:"VIDEO"}):void t(o["default"].fetchStatus.NON_MATCHING_URL)})},n=function(e){return new Promise(function(t,n){var i="https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id="+e+"&key="+r["default"].YOUTUBE_API_KEY;$.ajax({url:i,timeout:4e3}).then(function(e){e&&e.items&&e.items.length?t(e.items[0]):n()},function(e){n(e)})})},i=function(e){return new Promise(function(t,n){var i="//vimeo.com/api/v2/video/"+e+".json";$.ajax({type:"GET",url:i,jsonp:"callback",dataType:"jsonp",timeout:4e3}).then(function(e){e&&e[0]?t(e[0]):n()},function(e){n(e)})})},a=function(e){var t=/(youtube\.com\/(watch\?v\=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{3,20})/.exec(e);return t?t.pop():null},s=function(e){return e.match(/^[a-zA-Z0-9_-]{11}$/)},l=function(e){var t=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/.exec(e);return t?t.pop():null},u=function(e){return"//www.youtube.com/embed/"+e+"?wmode=opaque&rel=0"},c=function(e){return"//player.vimeo.com/video/"+e},d=function(e){return e.match(/^<iframe[^>][\s\S]*<\/iframe>$/)&&e.match(/<iframe/g).length<=2},p=function(e){var t=$(e).attr("src");return t?t:null},f=function(e){return new Promise(function(t,n){if(e.match(/(.jpg)|(.jpeg)|(.png)|(.gif)$/i)){var i=new Image;i.src=e,i.onload=function(){this.onload=null,t({url:e})},i.onerror=function(e){this.onload=null,this.onerror=null,n({reason:o["default"].fetchStatus.NOT_FOUND,type:"IMAGE",error:e})}}else t(o["default"].fetchStatus.NON_MATCHING_URL)})};return{checkYoutubeUrl:t,checkVimeoUrl:e,checkForIframe:d,getIframeSrc:p,checkForImage:f}}();e.URLConnector=a}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/providers/UrlContainer",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/UrlContainer",["module","exports","react","react-dom","react-redux","../actions","dojo/topic","../../connectors/UrlContent","../../constants","lib-build/i18n!../../../../_resources/nls/media","lib-build/less!./UrlContainer"],function(e,t,n,i,r,o,a,s,l,u){"use strict";function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function d(e){return e&&e.__esModule?e:{"default":e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=d(n),v=d(i),g=c(o),y=d(a),b=d(l),_=d(u),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=_["default"].mediaPicker.browsePanel.providers.urlContent,E=function(e){function t(){return p(this,t),f(this,Object.getPrototypeOf(t).apply(this,arguments))}return h(t,e),w(t,[{key:"getAlertSpans",value:function(){if(Array.isArray(this.props.text)){var e=this.props.text.map(function(e,t){return m["default"].createElement("span",{key:"errortext-"+t,className:"block-span"},e)});return e}return m["default"].createElement("span",null,this.props.text)}},{key:"render",value:function(){return m["default"].createElement("div",{className:"alert alert-danger",role:"alert"},this.getAlertSpans())}}]),t}(m["default"].Component),x=function(e){function t(){return p(this,t),f(this,Object.getPrototypeOf(t).apply(this,arguments))}return h(t,e),w(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.setFocus&&($(v["default"].findDOMNode(this)).parents(".modal").hasClass("in")?v["default"].findDOMNode(this.refs.textareaInput).focus():setTimeout(function(){v["default"].findDOMNode(e.refs.textareaInput).focus()},500))}},{key:"render",value:function(){var e=this;return m["default"].createElement("div",{className:"input-group search"},m["default"].createElement("div",{className:"input-group-addon"},m["default"].createElement("span",{className:"fa fa-link"})),m["default"].createElement("textarea",{tabIndex:"1",ref:"textareaInput",type:"textarea",value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),m["default"].createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},m["default"].createElement("span",{className:"fa fa-remove"})),m["default"].createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},m["default"].createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"check")})))}}]),t}(m["default"].Component),T=function(e){function t(){p(this,t);var e=f(this,Object.getPrototypeOf(t).call(this));return e.state={textInputValue:"",contentTypeDescriptor:"generic",focusInput:!1,hasError:!1,errorText:""},e}return h(t,e),w(t,[{key:"compareArrays",value:function(e,t){return e.length!==t.length?!1:(e.sort(),t.sort(),e.every(function(e,n){return t[n]===e}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.display&&!this.props.display||e.openFocus,n={focusInput:t,contentTypeDescriptor:this.computeContentTypes(e.authorizedMedia)},i=!this.compareArrays(e.authorizedMedia,this.props.authorizedMedia);(t||i)&&Object.assign(n,{textInputValue:"",hasError:!1}),this.setState(n)}},{key:"textInput",value:function(e){var t=e.target.value;t.trim()||(t=""),this.setState({textInputValue:t,hasError:!1})}},{key:"textKeypress",value:function(e){(e.charCode||0===e.charCode)&&(13!==e.charCode||e.shiftKey||(e.preventDefault&&e.preventDefault(),
this.textSubmit()))}},{key:"textClear",value:function(e){13===e.charCode&&this.setState({textInputValue:"",focusInput:!0,hasError:!1})}},{key:"textSubmit",value:function(){this.processPageAddress()}},{key:"processPageAddress",value:function(){var e=this,t=this.state.textInputValue.trim();if(t){s.URLConnector.checkForIframe(t)&&(t=s.URLConnector.getIframeSrc(t));var n=[],i=[];this.checkSingleMediaType("IMAGE")&&(n.push(s.URLConnector.checkForImage(t)),i.push(b["default"].contentType.IMAGE)),this.checkSingleMediaType("VIDEO")&&(n.push(s.URLConnector.checkYoutubeUrl(t)),n.push(s.URLConnector.checkVimeoUrl(t)),i.push(b["default"].contentType.VIDEO),i.push(b["default"].contentType.VIDEO)),Promise.all(n).then(function(n){var r=n.some(function(t,n){return t===b["default"].fetchStatus.NON_MATCHING_URL?!1:(e.publishSelection(Object.assign({type:i[n]},t)),!0)});r||(e.checkSingleMediaType("WEBPAGE")?(0!==t.indexOf("http://")&&0!==t.indexOf("https://")&&0!==t.indexOf("//")&&(t="//"+t),e.publishSelection({type:"webpage",url:t})):e.setState({hasError:!0,errorText:C.uploadErrors[e.state.contentTypeDescriptor]}))})["catch"](function(t){e.setState({hasError:!0,errorText:e.getErrorMessage(t)+" "+C.uploadErrors.tryAgain})})}}},{key:"getErrorMessage",value:function(e){var t=e.reason===b["default"].fetchStatus.BAD_FORMAT?C.uploadErrors.badFormat:C.uploadErrors.inaccessible,n=t.split(/\$\{(.+?)\}/);return n.map(function(t){return"media-type"===t&&(t=C.uploadErrors.mediaTypes[e.type]||C.uploadErrors.mediaTypes.generic),t}).join("")}},{key:"publishSelection",value:function(e){this.textClear({charCode:13}),y["default"].publish("MEDIA-PICKER-SELECTION",e)}},{key:"computeContentTypes",value:function(e){return e&&e.length?e.includes(b["default"].contentType.WEBPAGE)?"generic":e.includes(b["default"].contentType.VIDEO)&&e.includes(b["default"].contentType.IMAGE)?"imageAndVideo":e.includes(b["default"].contentType.IMAGE)?"imageOnly":(console.warn("something funny happened with authorized media",e),"generic"):(console.warn("no authorized media"),"generic")}},{key:"getUploadHeader",value:function(){return C.uploadHeaders[this.state.contentTypeDescriptor]}},{key:"getAlert",value:function(){return this.state.hasError?m["default"].createElement(E,{text:this.state.errorText}):void 0}},{key:"getMediaIcons",value:function(){var e=[];if(this.props.authorizedMedia&&this.props.authorizedMedia.length)return this.checkSingleMediaType("IMAGE")&&e.push(m["default"].createElement("span",{className:"fa fa-picture-o",key:"media-picture-o"})),this.checkSingleMediaType("VIDEO")&&e.push(m["default"].createElement("span",{className:"fa fa-vimeo",key:"media-vimeo"}),m["default"].createElement("span",{className:"fa fa-youtube",key:"media-youtube"})),this.checkSingleMediaType("WEBPAGE")&&e.push(m["default"].createElement("span",{className:"fa fa-code",key:"media-code"}),m["default"].createElement("span",{className:"www",key:"media-www"},"www.")),e}},{key:"checkSingleMediaType",value:function(e){return this.props.authorizedMedia.includes(b["default"].contentType[e])}},{key:"getSingleMediaTypeText",value:function(e,t){this.checkSingleMediaType(t)&&C.linkText[t]&&(Array.isArray(C.linkText[t])?C.linkText[t].forEach(function(t){e.push(t)}):e.push(C.linkText[t]))}},{key:"getMediaListStr",value:function(e){if(e&&e.length){var t=e.length;return e.map(function(e,n){var i="";return n===t-1?i=".":n===t-2?i=" "+C.linkText.OR+" ":t-2>n&&(i=C.linkText.listSeparator+" "),e+i}).join("")}}},{key:"getHelpText",value:function(){var e=[];this.getSingleMediaTypeText(e,"IMAGE"),this.getSingleMediaTypeText(e,"VIDEO"),this.getSingleMediaTypeText(e,"WEBPAGE");var t=[],n="";e.length>0&&(n=this.getMediaListStr(e));var i=C.linkText.starter+" ";if(this.checkSingleMediaType("VIDEO"))i+=C.linkText.hasVideo,t.push(m["default"].createElement("div",{key:"link-text-starter"},i)),n&&t.push(m["default"].createElement("div",{key:"link-text-list"},C.linkText.listStarterWithAlso+" "+n));else{if(!n)return[m["default"].createElement("div",{key:"link-text-ender"},C.linkText.ender)];t.push(m["default"].createElement("div",{key:"link-text-starter"},i+" "+C.linkText.listStarterWithoutAlso+" "+n))}return t.push(m["default"].createElement("div",{key:"link-text-ender"},C.linkText.ender)),t}},{key:"render",value:function(){return m["default"].createElement("div",{style:this.props.display?null:{display:"none"},className:"browse-panel-container url-container"},m["default"].createElement("div",{className:"help-title"},this.getUploadHeader()),m["default"].createElement(x,{placeholder:C.placeholder,value:this.state.textInputValue,setFocus:this.state.focusInput,onKeyPress:this.textKeypress.bind(this),onChange:this.textInput.bind(this),onClear:this.textClear.bind(this),hasError:!this.state.isValid}),m["default"].createElement("div",{className:"help-section"},m["default"].createElement("div",{className:"media-icons"},this.getMediaIcons()),m["default"].createElement("div",{className:"help-text"},this.getHelpText())),this.getAlert())}}]),t}(m["default"].Component),k=function(e){return{provider:e.browsePanel.urlContent}},P=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:b["default"].providers.URL});e(t(i))};return{updateImageFetchStatus:function(e){t(g.updateImageFetchStatus,e)}}};t["default"]=(0,r.connect)(k,P)(T),e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/providers/Providers",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/Providers",["module","exports","react","./GooglePhotosContainer","./FlickrContainer","./ArcGISContainer","./UrlContainer","../../constants","lib-build/less!./Providers"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){u(this,t);var e=c(this,Object.getPrototypeOf(t).call(this));return e.state={justOpened:!1},e}return d(t,e),y(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({justOpened:e.params.justOpened})}},{key:"displayTab",value:function(e){return this.props.browseSelectedProvider===e}},{key:"openFocus",value:function(e){return this.displayTab(e)&&this.state.justOpened}},{key:"render",value:function(){return p["default"].createElement("div",{className:"mp-browse-panel-containers"},p["default"].createElement(f["default"],{display:this.displayTab(g["default"].providers.GOOGLE_PHOTOS),openFocus:this.openFocus(g["default"].providers.GOOGLE_PHOTOS),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),p["default"].createElement(h["default"],{display:this.displayTab(g["default"].providers.FLICKR),openFocus:this.openFocus(g["default"].providers.FLICKR),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),p["default"].createElement(m["default"],{display:this.displayTab(g["default"].providers.ARCGIS),openFocus:this.openFocus(g["default"].providers.ARCGIS),appId:this.props.params?this.props.params.appid:null,thisStory:this.props.params?this.props.params.arcgisThisStory:null,authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),p["default"].createElement(v["default"],{display:this.displayTab(g["default"].providers.URL),openFocus:this.openFocus(g["default"].providers.URL),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}))}}]),t}(p["default"].Component);t["default"]=b,e.exports=t["default"]}),define("storymaps-react/common/builder/mediaPicker/browsePanel/BrowsePanelContainer",["module","exports","react-redux","./providers/Providers"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(i),a=function(e){return{browseSelectedProvider:e.ui.browseSelectedProvider,authorizedMedia:e.ui.authorizedMedia}};t["default"]=(0,n.connect)(a)(o["default"]),e.exports=t["default"]}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/MediaPicker",[],function(){}),define("storymaps-react/common/builder/mediaPicker/MediaPicker",["module","exports","react","react-dom","redux","react-redux","./reducer","./browseToggle/BrowseToggleContainer","./browsePanel/BrowsePanelContainer","dojo/topic","dojo/Deferred","lib-build/less!./MediaPicker"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{"default":e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return k}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=v;var g,y=d(n),b=d(i),_=d(a),w=d(s),C=d(l),E=d(u),x=d(c),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=(0,r.createStore)(_["default"],window.devToolsExtension?window.devToolsExtension():{});E["default"].subscribe("MEDIA-PICKER-SELECTION",function(e){g&&e&&g.resolve(m({type:e.type},e.type,e))});var P=function(e){function t(e){p(this,t);var n=f(this,Object.getPrototypeOf(t).call(this));return n.container=e,n.render(),n}return h(t,e),T(t,[{key:"open",value:function(e){var t=this;return g=new x["default"],console.log("init media picker",e),this.render(Object.assign(e,{justOpened:!0})),g.then(function(){t.render(Object.assign(e,{justOpened:!1}))},function(){t.render(Object.assign(e,{justOpened:!1}))}),g}},{key:"render",value:function(e){b["default"].render(y["default"].createElement(o.Provider,{store:k},y["default"].createElement("div",{className:"media-picker"},y["default"].createElement(w["default"],{authorizedMedia:e?e.authorizedMedia:null}),y["default"].createElement(C["default"],{params:e}))),document.getElementById(this.container))}}]),t}(y["default"].Component);t["default"]=P,e.exports=t["default"]}),define("storymaps/common/builder/mediaPicker/MediaPickerPopup",["lib-build/tpl!./MediaPickerPopup","lib-build/less!./MediaPickerPopup","storymaps-react/common/builder/mediaPicker/MediaPicker","dojo/Deferred"],function(e,t,n,i){var r=["image","video","webpage","webmap","webscene"];return function(t){var o=null,a=t&&t.container;return a?(a.html(e({})),o=new n("media-picker"),void(this.open=function(e){var t=new i,n=null;return e.arcgisThisStory=app.Controller.getArcGISContent(),e.appid=app.data.appItem.item.id,e.authorizedMedia=e.authorizedMedia||r,o.open(e).then(function(e){n=e,a.modal("hide")},function(){}),a.modal({keyboard:!0}),a.on("hide.bs.modal",function(){t.isFulfilled()||(n?t.resolve(n):t.reject("No media selected"))}),t})):void console.error("Could not initialize MediaPickerPopup")}}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/Popup",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="modal-dialog hc-dialog">\r\n	<div class="modal-content">\r\n		<div class="modal-header">\r\n			<div class="toggles">\r\n        <div class="toggle selected" data-tab="logo-sharing">'+a(o(null!=(r=null!=e?e.toggles:e)?r.logoSharing:r,e))+'</div>\r\n        <div class="toggle" data-tab="bookmarks">'+a(o(null!=(r=null!=e?e.toggles:e)?r.bookmarks:r,e))+'</div>\r\n      </div>\r\n		</div>\r\n		<div class="modal-body">\r\n	    <div class="modal-tab selected" data-tab="logo-sharing"></div>\r\n			<div class="modal-tab" data-tab="bookmarks"></div>\r\n		</div>\r\n		<div class="modal-footer">\r\n      <button type="button" class="btn btn-close apply">'+a(o(null!=(r=null!=e?e.dialog:e)?r.apply:r,e))+'</button>\r\n			<button type="button" class="btn btnCancel btn-naked btn-close" data-dismiss="modal">'+a(o(null!=(r=null!=e?e.dialog:e)?r.close:r,e))+"</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/LogoSharing",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" hidden"},3:function(e,t,n,i){return"disabled"},5:function(e,t,n,i){return"checked"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a=this.lambda,s=this.escapeExpression,l="function",u=t.helperMissing,c='<div class="hc-container split">\r\n  <div class="hc-item">\r\n    <div class="hc-row item-title">'+s(a(null!=(r=null!=e?e.strings:e)?r.logo:r,e))+'</div>\r\n    <div class="hc-row">\r\n      <div class="hc-item-container" style="background: '+s((o=null!=(o=t.background||(null!=e?e.background:e))?o:u,typeof o===l?o.call(e,{name:"background",hash:{},data:i}):o))+';">\r\n        <img src="'+s(a(null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.url:r,e))+'" class="hc-logo';return r=t.unless.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.enabled:r,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='">\r\n        <div class="hc-logo-button',r=t["if"].call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.enabled:r,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' btn btn-primary">'+s(a(null!=(r=null!=e?e.strings:e)?r.logoButton:r,e))+'</div>\r\n        <div class="hc-action-icon-underlay">\r\n          <i class="hc-action-icon hc-settings fa fa-cog"></i>\r\n          <i class="hc-action-icon hc-remove fa fa-trash',r=t.unless.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.enabled:r,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='"></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="hc-logo-upload-msg alert" role="alert"></div>\r\n  </div>\r\n  <div class="hc-item">\r\n    <div class="hc-row item-title">'+s(a(null!=(r=null!=e?e.strings:e)?r.logoLink:r,e))+'</div>\r\n    <div class="hc-row">\r\n      <input type="text" value="'+s(a(null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.link:r,e))+'" class="hc-text-input logo-link" ',r=t.unless.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.enabled:r,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="hc-container split">\r\n  <div class="hc-item">\r\n    <div class="hc-row item-title">'+s(a(null!=(r=null!=e?e.strings:e)?r.customHeaderText:r,e))+'</div>\r\n    <div class="hc-row">\r\n      <input type="text" maxlength='+s((o=null!=(o=t.maxCharacters||(null!=e?e.maxCharacters:e))?o:u,typeof o===l?o.call(e,{name:"maxCharacters",hash:{},data:i}):o))+" size="+s((o=null!=(o=t.maxCharacters||(null!=e?e.maxCharacters:e))?o:u,typeof o===l?o.call(e,{name:"maxCharacters",hash:{},data:i}):o))+' value="'+s(a(null!=(r=null!=(r=null!=e?e.settings:e)?r.link:r)?r.title:r,e))+'" class="hc-text-input truncated link-title">\r\n    </div>\r\n  </div>\r\n  <div class="hc-item">\r\n    <div class="hc-row item-title">'+s(a(null!=(r=null!=e?e.strings:e)?r.link:r,e))+'</div>\r\n    <div class="hc-row tagline-link" data-toggle="tooltip" title="'+s(a(null!=(r=null!=e?e.strings:e)?r.taglineLinkDisabledTooltip:r,e))+'">\r\n      <input type="text" ',r=t["if"].call(e,null!=e?e.emptyTagline:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' value="'+s(a(null!=(r=null!=(r=null!=e?e.settings:e)?r.link:r)?r.url:r,e))+'" class="hc-text-input link-url">\r\n    </div>\r\n  </div>\r\n  <div class="hc-item">\r\n    <div class="hc-row">\r\n      <label class="hc-check-label">\r\n        <input type="checkbox" class="hc-checkbox social-checkbox" ',r=t["if"].call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.social:r)?r.enabled:r,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'>\r\n        <span class="hc-check-label-text">'+s(a(null!=(r=null!=e?e.strings:e)?r.enableSocialSharing:r,e))+"</span>\r\n      </label>\r\n    </div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/Bookmark",["Handlebars"],function(e){return e.template({1:function(e,t,n,i,r){var o,a,s=this.lambda,l=this.escapeExpression,u="function",c=t.helperMissing,d='    <li class="hc-row bookmark-row';return o=t["if"].call(e,null!=e?e.disabled:e,{name:"if",hash:{},fn:this.program(2,i,r),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='" data-index="'+l(s(i&&i.index,e))+'">\r\n      <div class="hc-column first">\r\n        <label class="hc-check-label">\r\n          <input type="checkbox" class="hc-checkbox space bookmark-checkbox" ',o=t.unless.call(e,null!=e?e.disabled:e,{name:"unless",hash:{},fn:this.program(4,i,r),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='>\r\n          <span class="hc-check-label-text truncated">'+l((a=null!=(a=t.title||(null!=e?e.title:e))?a:c,typeof a===u?a.call(e,{name:"title",hash:{},data:i}):a))+'</span>\r\n        </label>\r\n      </div>\r\n      <div class="hc-column last">\r\n          <input type="text" ',o=t["if"].call(e,null!=e?e.disabled:e,{name:"if",hash:{},fn:this.program(6,i,r),inverse:this.noop,data:i}),null!=o&&(d+=o),d+" maxlength="+l(s(null!=r[1]?r[1].maxCharacters:r[1],e))+" size="+l(s(null!=r[1]?r[1].maxCharacters:r[1],e))+' value="'+l((a=null!=(a=t.bookmark||(null!=e?e.bookmark:e))?a:c,typeof a===u?a.call(e,{name:"bookmark",hash:{},data:i}):a))+'" class="hc-text-input truncated bookmark-text">\r\n      </div>\r\n    </li>\r\n'},2:function(e,t,n,i){return" disabled"},4:function(e,t,n,i){return"checked"},6:function(e,t,n,i){return"disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,r){var o,a=this.lambda,s=this.escapeExpression,l='<div class="hc-intro">'+s(a(null!=(o=null!=e?e.strings:e)?o.intro:o,e))+'</div>\r\n\r\n<div class="hc-container header-container">\r\n    <div class="hc-row">\r\n        <div class="hc-column first">'+s(a(null!=(o=null!=e?e.strings:e)?o.title:o,e))+'</div>\r\n        <div class="hc-column last">'+s(a(null!=(o=null!=e?e.strings:e)?o.bookmark:o,e))+'</div>\r\n    </div>\r\n</div>\r\n<ul class="hc-container content">\r\n';return o=t.each.call(e,null!=e?e.bookmarks:e,{name:"each",hash:{},fn:this.program(1,i,r),inverse:this.noop,data:i}),null!=o&&(l+=o),l+"</ul>\r\n"},useData:!0,useDepths:!0})}),define("lib-build/less!storymaps-react/tpl/builder/settings/Popup",[],function(){}),define("storymaps-react/tpl/builder/settings/Popup",["module","exports","storymaps-react/tpl/view/media/Media","lib-build/hbars!./Popup","lib-build/hbars!./LogoSharing","lib-build/hbars!./Bookmark","storymaps/common/utils/CommonHelper","lib-build/i18n!./../../../../resources/tpl/builder/nls/app","dojo/_base/lang","lib-build/less!./Popup"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=u(n),p=u(i),f=u(r),h=u(o),m=u(a),v=u(s),g=u(l),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(){function e(t){c(this,e),this.container=t.container,this.data=null,this.esriLogoUrl="resources/tpl/viewer/icons/esri-logo.png",this.esriLogoLink="https://storymaps.arcgis.com",this.reject=null,this.resolve=null;var n={dialog:v["default"].builder.dialog,toggles:v["default"].builder.headerConfig.toggles};this.container.append((0,p["default"])(n)),this.attachModalEvents()}return y(e,[{key:"attachModalEvents",value:function(){this.attachToggleEvents(),this.attachApplyEvents()}},{key:"attachApplyEvents",value:function(){var e=this;this.container.find(".btn-close").on("click",function(){e.detachEvents()}),this.container.find(".btn-close.btnCancel").on("click",function(){e.reject&&e.reject()}),this.container.find(".btn-close.apply").on("click",function(){e.container.find(".btn-close.apply").hasClass("disabled")||(e.applyBookmarkChanges(),e.applyLogoSharingChanges(),e.resolve&&e.resolve(e.data.settings),e.container.modal("hide"))})}},{key:"detachEvents",value:function(){this.container.find(".hc-logo-button").off("click"),this.container.find(".hc-action-icon.hc-remove").off("click"),this.container.find(".hc-action-icon.hc-settings").off("click"),this.container.find(".hc-checkbox.bookmark-checkbox").off("click")}},{key:"applyBookmarkChanges",value:function(){for(var e=this.container.find(".hc-row.bookmark-row"),t=0;t<e.length;t++){var n=$(e[t]),i=this.data.settings.bookmarks[t];if(!i)return;var r=n.find(".hc-text-input.bookmark-text").val(),o=this.sanitizeValue(r);o||n.addClass("disabled"),n.hasClass("disabled")?i.status="disabled":i.status="visible",i.bookmark=o}}},{key:"sanitizeValue",value:function(e){var t=$("<div>"+e+"</div>").text();return t}},{key:"applyLogoSharingChanges",value:function(){var e=this.container.find(".hc-checkbox.social-checkbox");this.data.settings.social.enabled=e.is(":checked");var t=!this.container.find(".hc-logo").hasClass("hidden");this.data.settings.logo.enabled=t;var n=this.container.find(".hc-text-input.logo-link").val(),i=this.sanitizeValue(n),r=m["default"].prependURLHTTP(i);this.data.settings.logo.link=r;var o=this.container.find(".hc-text-input.link-title").val(),a=this.sanitizeValue(o);this.data.settings.link.title=a;var s=this.container.find(".hc-text-input.link-url").val(),l=this.sanitizeValue(s),u=m["default"].prependURLHTTP(l);this.data.settings.link.url=u}},{key:"attachToggleEvents",value:function(){var e=this,t=this.container.find(".toggle"),n="selected";t.on("click",function(i){var r=$(i.currentTarget),o=r.data("tab");t.removeClass(n),r.addClass(n),e.container.find(".modal-tab").removeClass(n),e.container.find('.modal-tab[data-tab="'+o+'"]').addClass(n)})}},{key:"attachBookmarkEvents",value:function(){this.attachEnableBookmarkEvent()}},{key:"attachLogoSharingEvents",value:function(){this.attachRemoveLogoEvents(),this.attachUseEsriLogoEvents(),this.attachSelectLogoEvents(),this.attachToggleTaglineLinkEvents(),this.container.find(".hc-logo-upload-msg").removeClass("alert-success alert-warning alert-danger")}},{key:"attachToggleTaglineLinkEvents",value:function(){var e=this,t=this.container.find(".hc-text-input.link-title");t.on("keyup",function(t){var n=t.currentTarget;n.value.trim().length?e.enableTaglineLink():e.disableTaglineLink()})}},{key:"enableTaglineLink",value:function(){var e=this.container.find(".hc-text-input.link-url");e.removeAttr("disabled"),this.container.find('[data-toggle="tooltip"]').tooltip("disable")}},{key:"disableTaglineLink",value:function(){var e=this.container.find(".hc-text-input.link-url");e.attr("disabled",""),this.container.find('[data-toggle="tooltip"]').tooltip("enable")}},{key:"enableLogo",value:function(){var e="hidden";this.container.find(".hc-logo-button").addClass(e),this.container.find(".hc-logo").removeClass(e),this.container.find(".hc-action-icon.hc-remove").removeClass(e),this.container.find(".hc-text-input.logo-link").removeAttr("disabled")}},{key:"attachUseEsriLogoEvents",value:function(){var e=this;this.container.find(".hc-logo-button").on("click",function(){e.container.find(".hc-logo").attr("src",e.esriLogoUrl),e.container.find(".hc-text-input.logo-link").val(e.esriLogoLink),e.data.settings.logo.url=e.esriLogoUrl,e.enableLogo()})}},{key:"attachRemoveLogoEvents",value:function(){var e=this;this.container.find(".hc-action-icon.hc-remove").on("click",function(t){var n="hidden",i=$(t.currentTarget);e.container.find(".hc-logo").addClass(n),e.container.find(".hc-logo-button").removeClass(n),e.container.find(".hc-text-input.logo-link").attr("disabled",""),e.container.find(".hc-logo").attr("src",""),i.addClass(n)})}},{key:"attachSelectLogoEvents",value:function(){var e=this;this.container.find(".hc-action-icon.hc-settings").on("click",function(){app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(t){if("image"===t.type){var n=t.image.url;t.image.dataUrl&&t.image.uploadDeferred?(n=t.image.dataUrl,e.data.settings.logo.url="",e.container.find(".btn.apply").addClass("disabled"),e.container.find(".hc-logo-upload-msg").html(v["default"].builder.headerConfig.logoSharing.logoUploadProgress).addClass("alert-warning"),t.image.uploadDeferred.then(function(e){this.container.find(".hc-logo").attr("src",d["default"].addToken(e.url)),this.container.find(".btn.apply").removeClass("disabled"),this.container.find(".hc-logo-upload-msg").html(v["default"].builder.headerConfig.logoSharing.logoUploadSuccess).removeClass("alert-warning").addClass("alert-success"),this.data.settings.logo.url=e.url,setTimeout(function(){this.container.find(".hc-logo-upload-msg").removeClass("alert-success")}.bind(this),2e3)}.bind(e),function(){this.container.find(".hc-action-icon.hc-remove").click(),this.container.find(".btn.apply").removeClass("disabled"),this.container.find(".hc-logo-upload-msg").removeClass("alert-warning").addClass("alert-danger").html(v["default"].builder.headerConfig.logoSharing.logoUploadError),setTimeout(function(){this.container.find(".hc-logo-upload-msg").removeClass("alert-danger")}.bind(this),2e3)}.bind(e))):e.data.settings.logo.url=n,e.container.find(".hc-logo").attr("src",d["default"].addToken(n)),e.enableLogo()}},function(){})})}},{key:"attachEnableBookmarkEvent",value:function(){this.container.find(".hc-checkbox.bookmark-checkbox").on("click",function(e){var t=$(e.currentTarget),n="disabled",i=t.closest(".hc-row.bookmark-row");i.hasClass(n)?(i.removeClass(n),i.find(".hc-text-input.bookmark-text").removeAttr("disabled")):(i.addClass(n),i.find(".hc-text-input.bookmark-text").attr("disabled",""))})}},{key:"open",value:function(e){var t=this;return new Promise(function(n,i){t.resolve=n,t.reject=i;var r=20,o=30;t.data=$.extend(!0,{},e),t.data.settings.bookmarks=t.data.settings.bookmarks.map(function(e){return e.bookmark=e.bookmark.substr(0,r),e});var a=t.data.settings.bookmarks.map(function(e){return Object.assign({},e,{disabled:"disabled"===e.status})}),s=g["default"].clone({settings:t.data.settings,background:t.data.context.headerBackground,maxCharacters:o,strings:v["default"].builder.headerConfig.logoSharing,emptyTagline:!t.data.settings.link.title});s.settings.logo.url=d["default"].addToken(s.settings.logo.url);var l={bookmarks:a,maxCharacters:r,strings:v["default"].builder.headerConfig.bookmarks};t.container.find('.modal-tab[data-tab="logo-sharing"]').html((0,f["default"])(s)),t.container.find('.modal-tab[data-tab="bookmarks"]').html((0,h["default"])(l)),t.attachBookmarkEvents(),t.attachLogoSharingEvents(),t.container.modal(),t.container.on("shown.bs.modal",function(){t.container.find('[data-toggle="tooltip"]').tooltip({container:"body"});var e=t.container.find(".hc-text-input.link-title")[0];e&&e.value.trim().length&&t.container.find('[data-toggle="tooltip"]').tooltip("disable")})})}}]),e}();t["default"]=b,e.exports=t["default"]}),define("storymaps/tpl/builder/BuilderView",["lib-build/tpl!./BuilderView","lib-build/less!./BuilderView","storymaps-react/tpl/builder/Controller","storymaps/common/builder/mediaPicker/MediaPickerPopup","storymaps-react/tpl/builder/settings/Popup","storymaps/common/utils/CommonHelper","storymaps/common/builder/BuilderHelper","dojo/Deferred","dojo/topic","dojo/_base/lang"],function(e,t,n,i,r,o,a,s,l,u){var c={config:{author:{name:""}},settings:{header:{}},template:{name:app.cfg.TPL_ID,createdWith:app.version,editedWith:app.version,dataVersion:"1.0.0"},sections:[]};return function(t,s){function d(){var e=app.data.sections;e&&e.length&&(app.Controller.renderHeader(),p())}function p(){var e=app.data.sections;if(e&&e.length){var t=e[e.length-1];if(t&&"credits"==t.type)e[e.length-2].setVisibility(!1);else{var n=e.length>3;n||("immersive"==e[1].type?n=!0:"sequence"==e[1].type&&e[1].getNumberOfBlocks()>=3&&(n=!0)),e[e.length-1].setVisibility(n)}}}function f(e){var t=u.clone(c),n=[];return e.webmapId?n=[app.ui.MediaFactory.createInstance({type:"webmap",webmap:{id:e.webmapId}}).serialize()]:e.websceneId&&(n=[app.ui.MediaFactory.createInstance({type:"webscene",webscene:{id:e.websceneId}}).serialize()]),t.sections=[app.ui.SectionFactory.createInstance({type:"cover",foreground:{title:e.title,subtitle:e.subtitle}}).serialize(),app.ui.SectionFactory.createInstance({type:"sequence",background:app.ui.MediaFactory.createInstance({type:"color",color:{value:"#FFF"}}).serialize(),foreground:{blocks:n}}).serialize()],t}function h(){var e=["AngelaBenito.jpg","EandNPhotographies.jpg","ErolAhmed.jpg","FrancesGunn.jpg","JeremyThomas.jpg","JonathanBean.jpg","LukasBudimaier.jpg","NASA.jpg","PatrickFore.jpg","PatrickTomasso.jpg","PhilippeWuyts.jpg","SamuelScrimshaw.jpg","SujanSundareswaran.jpg","SusanneFeldt.jpg","VladimirKudinov.jpg","WilsonLau.jpg"],t=e[Math.floor(Math.random()*e.length)];return"resources/tpl/viewer/cover-placeholder/"+t}function m(){return{config:{author:{name:"The Esri Story Maps team"},"custom-story":"refugee"},settings:{theme:{colors:{id:"black-over-white-1","text-main":"#000","background-main":"#FFF"}},header:{}},template:{name:"Cascade",createdWith:"0.0.1",editedWith:"0.0.2",dataVersion:"0.5.0"},sections:[{type:"cover",layout:"cover-1",background:{type:"video",video:{source:"vimeo",id:"154001757"},alternate:"image",image:{url:h()}},foreground:{title:"Builder demo",subtitle:"Created on "+(new Date).toLocaleDateString()+" at "+(new Date).toLocaleTimeString(),"credits-left":"©UNHCR/Viktor Pesenti","credits-right":"Story sources: UNHCR, Airbus Defense and Space"}},{type:"sequence",layout:"sequence-1",background:{type:"color",color:{value:"#FFF"}},foreground:{blocks:[{type:"text",text:{value:"<h1 class='block' style='text-align: center;'>Epicenter of the refugee crisis: Syria.</h1>"}},{type:"image-gallery","image-gallery":{images:[{url:"stories/refugees-assets/intro-1.jpg",width:2e3,height:1333},{url:"stories/refugees-assets/intro-2.jpg",width:2e3,height:1331}],caption:"Syrian refugees throng a busy thoroughfare in the Zaatari Refugee Camp in Jordan <small>©UNHCR/Christopher Herwig</small>. Refugees seeking asylum in western Europe crowd a train station in Budapest, Hungary <small>©UNHCR/Mark Henley</small>."}},{type:"image",image:{url:"stories/refugees-assets/intro-3.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:2e3,height:1073,options:{size:"medium"}}}]}},{type:"immersive",views:[{transition:"fade-slow",background:{type:"webmap",webmap:{id:"c0314d09ac144c49ad36523aaee8077e",extent:null,layers:[{id:"World_Hillshade_2070",
visibility:!1}]}},foreground:{title:{value:"",global:!0},panels:[{layout:"scroll-full",settings:{"position-x":"left",size:"medium",style:"background",theme:"black-over-white"},blocks:[{type:"text",text:{value:"<p class='block'>A deadlocked civil war made Syria the largest source of refugees in 2014.</p>"}}]}]}},{transition:"swipe-vertical",background:{type:"image",image:{url:"stories/refugees-assets/IDP_14_Labeled.jpg",alternate:"stories/refugees-assets/IDP_14_Centered.jpg"}},foreground:{panels:[{layout:"scroll-full",settings:{"position-x":"left",size:"medium",style:"background",theme:"black-over-white"},blocks:[{type:"text",text:{value:"<p class='block'>xsaxasxSyria also had more IDPs than any other country.</p>"}}]}]}},{transition:"swipe-horizontal",background:{type:"image",image:{url:"stories/refugees-assets/exodus-travel-01.jpg"}},foreground:{panels:[{layout:"scroll-full",settings:{"position-x":"left",size:"medium",style:"background",theme:"black-over-white"},blocks:[{type:"text",text:{value:"<p class='block'>xxxSyria also had more IDPs than any other country.</p>"}}]}]}},{transition:"swipe-vertical",background:{type:"image",image:{url:"stories/refugees-assets/exodus-travel-02.jpg"}},foreground:{panels:[{layout:"scroll-full",settings:{"position-x":"left",size:"medium",style:"background",theme:"black-over-white"},blocks:[{type:"text",text:{value:"<p class='block'>zzzSyria also had more IDPs than any other country.</p>"}}]}]}}]},{type:"title",options:{dimension:"large"},background:{type:"video",video:{source:"vimeo",id:"153950216",options:"margin-top: -197px;"},alternate:"image",image:{url:"stories/refugees-assets/Zaatari-alt.jpg"}},foreground:{title:"The Disintegration of Syria",credits:"©USAID"}}]}}function v(){return{config:{author:{name:"The Esri Story Maps team"},"custom-story":"refugee"},settings:{theme:{colors:{id:"black-over-white-1","text-main":"#000","background-main":"#FFF"},fonts:{main:{id:"default",name:"Open Sans",value:""}}},header:{linkText:"",social:{facebook:!0}}},template:{name:"Cascade",createdWith:"0.0.1",editedWith:"0.0.2",dataVersion:"0.5.0"},sections:[{type:"cover",layout:"cover-1",background:{type:"image",video:{source:"vimeo",id:"154001757"},alternate:"image",image:{url:h()}},foreground:{title:"Builder demo",subtitle:"Created on "+(new Date).toLocaleDateString()+" at "+(new Date).toLocaleTimeString(),"credits-left":"©UNHCR/Viktor Pesenti","credits-right":"Story sources: UNHCR, Airbus Defense and Space"}},{type:"sequence",layout:"sequence-1",background:{type:"color",color:{value:"#FFF"}},foreground:{blocks:[{type:"text",text:{value:"<h1 class='block' style='text-align: center;'>Image test</h1>"}},{type:"text",text:{value:"<p class='block' style='text-align: left;'>Below is tests of the size options for 4 images that I hope represent typical images.</p>"}},{type:"text",text:{value:"<p class='block' style='text-align: left;'>Each image mutiple times with all settings in the following order: small, medium (default - cropIfNeeded=true), medium (cropIfNeeded=false), large</p>"}},{type:"image",image:{url:"resources/tpl/viewer/icons/esri-logo.png",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:87,height:32,options:{size:"small",fitHeight:!0}}},{type:"image",image:{url:"resources/tpl/viewer/icons/esri-logo.png",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:87,height:32,options:{size:"medium",fitHeight:!0}}},{type:"image",image:{url:"resources/tpl/viewer/icons/esri-logo.png",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:87,height:32,options:{size:"medium",fitHeight:!1}}},{type:"image",image:{url:"resources/tpl/viewer/icons/esri-logo.png",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:87,height:32,options:{size:"large",fitHeight:!1}}},{type:"image",image:{url:"http://www.maniacworld.com/now-this-is-a-tall-building.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:640,height:4298,options:{size:"small",fitHeight:!0}}},{type:"image",image:{url:"http://www.maniacworld.com/now-this-is-a-tall-building.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:640,height:4298,options:{size:"medium",fitHeight:!0}}},{type:"image",image:{url:"http://www.maniacworld.com/now-this-is-a-tall-building.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:640,height:4298,options:{size:"medium",fitHeight:!1}}},{type:"image",image:{url:"http://www.maniacworld.com/now-this-is-a-tall-building.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:640,height:4298,options:{size:"large",fitHeight:!1}}},{type:"image",image:{url:"https://upload.wikimedia.org/wikipedia/commons/5/52/Mount_Ellinor,_Mount_Washington_Panorama.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:19412,height:3866,options:{size:"small",fitHeight:!0}}},{type:"image",image:{url:"https://upload.wikimedia.org/wikipedia/commons/5/52/Mount_Ellinor,_Mount_Washington_Panorama.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:19412,height:3866,options:{size:"medium",fitHeight:!0}}},{type:"image",image:{url:"https://upload.wikimedia.org/wikipedia/commons/5/52/Mount_Ellinor,_Mount_Washington_Panorama.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:19412,height:3866,options:{size:"medium",fitHeight:!1}}},{type:"image",image:{url:"https://upload.wikimedia.org/wikipedia/commons/5/52/Mount_Ellinor,_Mount_Washington_Panorama.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:19412,height:3866,options:{size:"large",fitHeight:!1}}},{type:"image",image:{url:"stories/refugees-assets/exodus-travel-03.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:2e3,height:1333,options:{size:"small",fitHeight:!0}}},{type:"image",image:{url:"stories/refugees-assets/exodus-travel-03.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:2e3,height:1333,options:{size:"medium",fitHeight:!0}}},{type:"image",image:{url:"stories/refugees-assets/exodus-travel-03.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:2e3,height:1333,options:{size:"medium",fitHeight:!1}}},{type:"image",image:{url:"stories/refugees-assets/exodus-travel-03.jpg",caption:"Somali refugee camp in Eritrea, Horn of Africa. <small>Creative Commons/Reinhard Dietrich</small>",width:2e3,height:1333,options:{size:"large",fitHeight:!1}}}]}},{type:"credits",layout:"credits-1",background:{type:"color",color:{value:"#000"}},foreground:{blocks:[{type:"text",text:{value:"<div style='opacity: 0.7'>Satellite imagery</div><a href='http://www.geo-airbusds.com/en/65-satellite-imagery' target='_blank'><img src='stories/refugees-assets/Airbus_Logo.png' /></a>"}},{type:"credits",credits:{col1:[{label:"World refugee/IDP statistics",link:"<a href='http://popstats.unhcr.org/en/persons_of_concern' target='_blank'>UNHCR</a>"},{label:"Migration routes",link:"<a href='http://migration.iom.int/europe/' target='_blank'>International Organization for Migration</a>"}],col2:[{label:"Refugee camps",link:"<a href='http://data.unhcr.org/syrianrefugees/regional.php' target='_blank'>UNHCR</a>"},{label:"IDP camps",link:"<a href='https://data.hdx.rwlabs.org/dataset/syria-idp-sites' target='_blank'>U.S. Department of State Humanitarian Information Unit</a>"}]}},{type:"discover",discover:{title:"Discover more Story Maps by Esri’s Story Maps team",items:[{title:"Great Wetlands of the World",thumbnail:"http://story.maps.arcgis.com/sharing/rest/content/items/aed61922c4b444ba843d19e676e80004/info/thumbnail/thumbnail.png",url:"http://story.maps.arcgis.com/apps/MapSeries/?appid=aed61922c4b444ba843d19e676e80004"},{title:"Atlas for a Changing Planet",thumbnail:"http://story.maps.arcgis.com/sharing/rest/content/items/3680cbc3b6484f35a09265489791379e/info/thumbnail/ago_downloaded.jpg",url:"http://storymaps.esri.com/stories/2015/atlas-for-a-changing-planet/"},{title:"Katrina +10: A Decade of Change in New Orleans",thumbnail:"http://www.arcgis.com/sharing/rest/content/items/597d573e58514bdbbeb53ba2179d2359/info/thumbnail/katrina_plus_10_small_thumbnail.jpg",url:"http://story.maps.arcgis.com/apps/MapSeries/index.html?appid=597d573e58514bdbbeb53ba2179d2359"},{title:"Mountains of Fire",thumbnail:"http://story.maps.arcgis.com/sharing/rest/content/items/4c77a56bbcd743b69232cf3fd9c7a61c/info/thumbnail/mountains_of_fire.png",url:"http://story.maps.arcgis.com/apps/MapJournal/?appid=4c77a56bbcd743b69232cf3fd9c7a61c"}]}}]}}]}}$("#builder-views").append(e({}));var g=null,y=null;this.init=function(){app.builder.pendingChanges=0,y=new i({container:$(".media-picker-popup")}),app.builder.mediaPicker=y,g=new r({container:$("#settings-popup")}),app.builder.settingsPopup=g,l.subscribe("builder-section-update",d),l.subscribe("tpl-ready",function(){p(),l.publish("builder-story-title-update",app.Controller.getStoryTitle())})},this.appInitComplete=function(){var e=null;if(app.data.appItem||void 0===o.getUrlParams().fromScratch&&void 0===o.getUrlParams().fromscratch){if(app.data.appItem&&app.Controller.isStoryBlank()){var t=null,n=null;app.data.appItem.data&&app.data.appItem.data.values&&(t=app.data.appItem.data.values.webmap,n=app.data.appItem.data.values.webscene),e=f({webmapId:t,websceneId:n,title:app.data.appItem.item.title||"",subtitle:app.data.appItem.item.snippet||""})}}else e=f({title:"",subtitle:""}),void 0!==o.getUrlParams().dev?e=m({}):void 0!==o.getUrlParams().dev2&&(e=v({})),app.data.appItem={item:a.getBlankAppJSON(),data:{values:null}},app.data.title=app.data.appItem.item.title;e&&(app.data.appItem.data.values=e),l.subscribe("builder-story-title-update",function(e){document.title=e}),l.publish("builder-story-title-update",app.Controller.getStoryTitle()),app.isProduction||"media-picker"!=o.getUrlParams().debug||app.builder.mediaPicker.open({mode:"add"}).then(function(e){console.log("selected media:",e)},function(){})},this.updateUI=function(){},this.saveApp=function(){var e=n.serializeStory();app.data.title=app.Controller.getStoryTitle(),app.data.appItem.data.values.sections=e,s.saveApp()},this.saveFailed=function(e){"DUPLICATE"===e&&(app.data.sections[0].showTitleError(),app.Controller.navigateToSection({index:0,animate:!1}))},this.resize=function(){}}}),require(["storymaps/common/Core","storymaps-react/tpl/view/media/FactoryBuilder","storymaps-react/tpl/view/section/FactoryBuilder","storymaps/tpl/view/section/Immersive/PanelFactoryBuilder","storymaps/tpl/core/MainView","storymaps/common/builder/Builder","storymaps/tpl/builder/BuilderView"],function(){}),define("storymaps/tpl/BuildConfigBuilder",function(){});